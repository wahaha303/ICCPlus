var e=Object.defineProperty,t=(t,o,i)=>((t,o,i)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[o]=i)(t,"symbol"!=typeof o?o+"":o,i);function o(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}import{p as i,S as n,a as l,o as a,c as r,b as s,d as c,w as d,g as u,N as g,r as p,t as m,e as h,u as v,f,h as b,k as w,i as T,j as I,l as S,m as C,n as y,s as x,q as O,v as A,x as B,y as k,z as M,A as D,B as F,C as R,D as j,E as P,F as $,G as V,H as q,I as W,J as L,K as U,L as N,M as E,O as z,P as G,Q as H,R as _,T as Y,U as Z,V as J,W as X,X as K,Y as Q,Z as ee,_ as te,$ as oe,a0 as ie,a1 as ne,a2 as le,a3 as ae,a4 as re,a5 as se,a6 as ce,a7 as de,a8 as ue,a9 as ge,aa as pe,ab as me,ac as he,ad as ve,ae as fe,af as be,ag as we,ah as Te,ai as Ie,aj as Se,ak as Ce,al as ye,am as xe,an as Oe,ao as Ae,ap as Be,aq as ke,ar as Me,as as De,at as Fe,au as Re,av as je,aw as Pe,ax as $e,ay as Ve,az as qe,aA as We,aB as Le,aC as Ue,aD as Ne,aE as Ee,aF as ze,aG as Ge,aH as He,aI as _e,aJ as Ye,aK as Ze,aL as Je,aM as Xe,aN as Ke,aO as Qe,aP as et,aQ as tt,aR as ot,aS as it}from"./chunk-vendors.BbGXJy9s.js";
/*!
 * canvas-size
 * v2.0.0
 * https://github.com/jhildenbiddle/canvas-size
 * (c) 2015-2024 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
function nt(e){const t=e.sizes.shift(),o=Math.max(Math.ceil(t[0]),1),i=Math.max(Math.ceil(t[1]),1),n=[o-1,i-1,1,1],l=performance.now(),a="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;let r,s;a?(r=new OffscreenCanvas(1,1),s=new OffscreenCanvas(o,i)):(r=document.createElement("canvas"),r.width=1,r.height=1,s=document.createElement("canvas"),s.width=o,s.height=i);const c=r.getContext("2d"),d=s.getContext("2d");d&&(d.fillRect.apply(d,n),c.drawImage(s,o-1,i-1,1,1,0,0,1,1));const u=c&&0!==c.getImageData(0,0,1,1).data[3],g=parseInt(performance.now()-l);return[r,s].forEach(e=>{e.height=0,e.width=0}),a?(postMessage({width:o,height:i,testTime:g,isTestPass:u}),!u&&e.sizes.length&&setTimeout(()=>{nt(e)},0)):u?e.onSuccess({width:o,height:i,testTime:g}):(e.onError({width:o,height:i,testTime:g}),e.sizes.length&&setTimeout(()=>{nt(e)},0)),u}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const lt={area:[16384,14188,11402,11180,10836,8192,4096,1],height:[8388607,65535,32767,16384,8192,4096,1],width:[4194303,65535,32767,16384,8192,4096,1]},at={max:null,min:1,sizes:[],step:1024,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},rt={};function st(e){const t=e.width===e.height,o=1===e.height,i=1===e.width,n=[];if(e.width&&e.height){const l=e.min||at.min,a=e.step||at.step;let r=Math.max(e.width,e.height);for(;r>=l;){const e=t||o?r:1,l=t||i?r:1;n.push([e,l]),r-=a}}else e.sizes.forEach(e=>{const l=t||o?e:1,a=t||i?e:1;n.push([l,a])});return n}function ct(e){const t="undefined"!=typeof window,o=t&&"Promise"in window,i=t&&"HTMLCanvasElement"in window,n=t&&"OffscreenCanvas"in window,l=URL.createObjectURL(new Blob([])).slice(-36),a=performance.now(),{onError:r,onSuccess:s,...c}=e,d=()=>parseInt(performance.now()-a);let u=null;if(!i)return!1;if(e.useWorker&&n){const e="\n            var canvasTest = ".concat(nt.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),t=new Blob([e],{type:"application/javascript"}),o=URL.createObjectURL(t);u=new Worker(o),URL.revokeObjectURL(o),u.onmessage=function(e){const{width:t,height:o,testTime:i,isTestPass:n}=e.data,a={width:t,height:o,testTime:i,totalTime:d()};n?(rt[l].onSuccess(a),delete rt[l]):rt[l].onError(a)}}return o?new Promise(t=>{const o={...e,onError(o){let{width:i,height:n,testTime:l}=o;const a={width:i,height:n,testTime:l,totalTime:d()};let s;if(0===e.sizes.length)s=!0;else{const[[t,o]]=e.sizes.slice(-1);s=i===t&&n===o}r(a),s&&t({...a,success:!1})},onSuccess(e){let{width:o,height:i,testTime:n}=e;const l={width:o,height:i,testTime:n,totalTime:d()};s(l),t({...l,success:!0})}};if(u){const{onError:e,onSuccess:t}=o;rt[l]={onError:e,onSuccess:t},u.postMessage(c)}else nt(o)}):u?(rt[l]={onError:r,onSuccess:s},void u.postMessage(c)):nt(e)}const dt={maxArea(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=st({width:e.max,height:e.max,min:e.min,step:e.step,sizes:[...lt.area]});return ct({...at,...e,sizes:t})},maxHeight(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=st({width:1,height:e.max,min:e.min,step:e.step,sizes:[...lt.height]});return ct({...at,...e,sizes:t})},maxWidth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=st({width:e.max,height:1,min:e.min,step:e.step,sizes:[...lt.width]});return ct({...at,...e,sizes:t})},test(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={...at,...e};return t.sizes=[...t.sizes],t.width&&t.height&&(t.sizes=[[t.width,t.height]]),ct(t)}},ut="2.7.4",gt={selFilterBlurIsOn:!1,selFilterBlur:0,selFilterBrightIsOn:!1,selFilterBright:100,selFilterContIsOn:!1,selFilterCont:100,selFilterGrayIsOn:!1,selFilterGray:0,selFilterHueIsOn:!1,selFilterHue:0,selFilterInvertIsOn:!1,selFilterInvert:0,selFilterOpacIsOn:!1,selFilterOpac:100,selFilterSaturIsOn:!1,selFilterSatur:1,selFilterSepiaIsOn:!1,selFilterSepia:0,selBgColorIsOn:!0,selOverlayOnImage:!1,selFilterBgColor:"#70FF7EFF",selBorderColorIsOn:!1,selFilterBorderColor:"#000000FF",selImgBorderColorIsOn:!1,selFilterImgBorderColor:"#000000FF",selCTitleColorIsOn:!1,selFilterCTitleColor:"#000000FF",selCTextColorIsOn:!1,selFilterCTextColor:"#000000FF",selATitleColorIsOn:!1,selFilterATitleColor:"#000000FF",selATextColorIsOn:!1,selFilterATextColor:"#000000FF",selScoreTextColorIsOn:!1,selFilterSTextColor:"#000000FF",selFilterVisibleIsOn:!1,reqFilterBlurIsOn:!1,reqFilterBlur:0,reqFilterBrightIsOn:!1,reqFilterBright:100,reqFilterContIsOn:!1,reqFilterCont:100,reqFilterGrayIsOn:!1,reqFilterGray:0,reqFilterHueIsOn:!1,reqFilterHue:0,reqFilterInvertIsOn:!1,reqFilterInvert:0,reqFilterOpacIsOn:!0,reqFilterOpac:50,reqFilterSaturIsOn:!1,reqFilterSatur:1,reqFilterSepiaIsOn:!1,reqFilterSepia:0,reqBgColorIsOn:!1,reqOverlayOnImage:!1,reqFilterBgColor:"#FFFFFFFF",reqBorderColorIsOn:!1,reqFilterBorderColor:"#000000FF",reqImgBorderColorIsOn:!1,reqImgFilterBorderColor:"#000000FF",reqCTitleColorIsOn:!1,reqFilterCTitleColor:"#000000FF",reqCTextColorIsOn:!1,reqFilterCTextColor:"#000000FF",reqATitleColorIsOn:!1,reqFilterATitleColor:"#000000FF",reqATextColorIsOn:!1,reqFilterATextColor:"#000000FF",reqScoreTextColorIsOn:!1,reqFilterSTextColor:"#000000FF",reqFilterVisibleIsOn:!1,unselFilterBlurIsOn:!1,unselFilterBlur:0,unselFilterBrightIsOn:!1,unselFilterBright:100,unselFilterContIsOn:!1,unselFilterCont:100,unselFilterGrayIsOn:!1,unselFilterGray:0,unselFilterHueIsOn:!1,unselFilterHue:0,unselFilterInvertIsOn:!1,unselFilterInvert:0,unselFilterOpacIsOn:!1,unselFilterOpac:100,unselFilterSaturIsOn:!1,unselFilterSatur:1,unselFilterSepiaIsOn:!1,unselFilterSepia:0,unselFilterVisibleIsOn:!1},pt={customRowTitle:!1,rowTitle:"Times New Roman",customRowText:!1,rowText:"Times New Roman",customObjectTitle:!1,objectTitle:"Times New Roman",customObjectText:!1,objectText:"Times New Roman",customAddonTitle:!1,addonTitle:"Times New Roman",customAddonText:!1,addonText:"Times New Roman",customScoreText:!1,scoreText:"Times New Roman",rowTitleTextSize:200,rowTextTextSize:100,objectTitleTextSize:200,objectTextTextSize:100,addonTitleTextSize:200,addonTextTextSize:100,scoreTextSize:75,rowTitleColor:"#000000",rowTextColor:"#000000",objectTitleColor:"#000000",objectTextColor:"#000000",addonTitleColor:"#000000",addonTextColor:"#000000",scoreTextColor:"#000000",rowTitleAlign:"center",rowTextAlign:"center",objectTitleAlign:"center",objectTextAlign:"center",addonTitleAlign:"center",addonTextAlign:"center",scoreTextAlign:"center"},mt={objectImgBorderStyle:"solid",objectImgBorderWidth:2,objectImageWidth:100,objectImageMarginTop:0,objectImageMarginBottom:0,objectImgBorderRadiusTopLeft:0,objectImgBorderRadiusTopRight:0,objectImgBorderRadiusBottomRight:0,objectImgBorderRadiusBottomLeft:0,objectImgBorderRadiusIsPixels:!0,objectImgBorderIsOn:!1,objectImgOverflowIsOn:!1,objectImgBorderColor:"red",objectImgObjectFillStyle:"",objectImgObjectFillIsOn:!1,objectImgObjectFillHeight:0,objectImageBoxWidth:50},ht={rowImgBorderStyle:"solid",rowImgBorderWidth:2,rowImageWidth:100,rowImageMarginTop:0,rowImageMarginBottom:0,rowImgBorderRadiusTopLeft:0,rowImgBorderRadiusTopRight:0,rowImgBorderRadiusBottomRight:0,rowImgBorderRadiusBottomLeft:0,rowImgBorderRadiusIsPixels:!0,rowImgBorderIsOn:!1,rowImgOverflowIsOn:!1,rowImgBorderColor:"red",rowImageBoxWidth:50,rowImgObjectFillStyle:"",rowImgObjectFillIsOn:!1,rowImgObjectFillHeight:0},vt={useAddonImage:!1,addonImgBorderStyle:"solid",addonImgBorderWidth:2,addonImageWidth:100,addonImageMarginTop:0,addonImageMarginBottom:0,addonImgBorderRadiusTopLeft:0,addonImgBorderRadiusTopRight:0,addonImgBorderRadiusBottomRight:0,addonImgBorderRadiusBottomLeft:0,addonImgBorderRadiusIsPixels:!0,addonImgBorderIsOn:!1,addonImgOverflowIsOn:!1,addonImgBorderColor:"red",addonImgObjectFillStyle:"",addonImgObjectFillIsOn:!1,addonImgObjectFillHeight:0,addonImageBoxWidth:50},ft={bgColorIsOn:!1,backgroundColor:"#FFFFFFFF",rowBgColorIsOn:!1,rowBgColor:"#FFFFFFFF",objectBgColorIsOn:!1,objectBgColor:"#FFFFFFFF",isBackgroundRepeat:!1,isBackgroundFitIn:!1,backgroundImage:"",isRowBackgroundRepeat:!1,isRowBackgroundFitIn:!1,rowBackgroundImage:"",isObjectBackgroundRepeat:!1,isObjectBackgroundFitIn:!1,objectBackgroundImage:""},bt={objectHeight:!0,objectDesignIsAdvanced:!1,objectMargin:10,objectTextPadding:10,objectBorderStyle:"solid",objectBorderWidth:2,objectBorderIsOn:!1,objectDropShadowH:0,objectDropShadowV:0,objectDropShadowBlur:0,objectDropShadowSpread:0,objectDropShadowIsOn:!1,objectUseBoxShadowIsOn:!1,objectBorderRadiusTopLeft:0,objectBorderRadiusTopRight:0,objectBorderRadiusBottomRight:0,objectBorderRadiusBottomLeft:0,objectBorderRadiusIsPixels:!0,objectOverflowIsOn:!0,objectDropShadowColor:"grey",objectGradientIsOn:!1,objectGradient:"",objectGradientOnSelect:"",objectGradientOnReq:"",objectBorderColor:"red",objectBorderImage:"",objectBorderImageRepeat:"stretch",objectBorderImageWidth:5,objectBorderImageSliceTop:5,objectBorderImageSliceBottom:5,objectBorderImageSliceLeft:5,objectBorderImageSliceRight:5,removeSpaceAddonIsOn:!1,titlePaddingIsOn:!1},wt={rowDesignIsAdvanced:!1,rowMargin:10,rowBodyMarginSides:1,rowBodyMarginTop:25,rowBodyMarginBottom:25,rowTextPaddingY:5,rowTextPaddingX:10,rowOverflowIsOn:!0,rowDropShadowH:0,rowDropShadowV:0,rowDropShadowBlur:0,rowDropShadowSpread:0,rowDropShadowColor:"grey",rowButtonXPadding:0,rowButtonYPadding:0,rowDropShadowIsOn:!1,rowUseBoxShadowIsOn:!1,rowBorderRadiusTopLeft:0,rowBorderRadiusTopRight:0,rowBorderRadiusBottomRight:0,rowBorderRadiusBottomLeft:0,rowBorderRadiusIsPixels:!0,rowBorderStyle:"solid",rowBorderWidth:2,rowBorderIsOn:!1,rowBorderColor:"red",rowGradientIsOn:!1,rowGradient:"",rowBorderImage:"",rowBorderImageRepeat:"stretch",rowBorderImageWidth:5,rowBorderImageSliceTop:5,rowBorderImageSliceBottom:5,rowBorderImageSliceLeft:5,rowBorderImageSliceRight:5},Tt={useAddonDesign:!1,addonDesignIsAdvanced:!1,addonMargin:10,addonTextPadding:10,addonBorderStyle:"solid",addonBorderWidth:2,addonBorderIsOn:!1,addonDropShadowH:0,addonDropShadowV:0,addonDropShadowBlur:0,addonDropShadowSpread:0,addonDropShadowIsOn:!1,addonUseBoxShadowIsOn:!1,addonBorderRadiusTopLeft:0,addonBorderRadiusTopRight:0,addonBorderRadiusBottomRight:0,addonBorderRadiusBottomLeft:0,addonBorderRadiusIsPixels:!0,addonOverflowIsOn:!0,addonDropShadowColor:"grey",addonGradientIsOn:!1,addonGradient:"",addonGradientOnSelect:"",addonGradientOnReq:"",addonBorderColor:"red",addonBorderImage:"",addonBorderImageRepeat:"stretch",addonBorderImageWidth:5,addonBorderImageSliceTop:5,addonBorderImageSliceBottom:5,addonBorderImageSliceLeft:5,addonBorderImageSliceRight:5,useAddonBackgroundImage:!1,addonBackgroundImage:"",isAddonBackgroundFitIn:!1,isAddonBackgroundRepeat:!1,addonBgColorIsOn:!1,addonBgColor:"#FFFFFFFF",addonTitlePaddingIsOn:!1},It={customMultiTextFont:!1,multiChoiceCounterPosition:0,multiChoiceCounterSize:170,multiChoiceTextFont:"Times New Roman",multiChoiceTextSize:100},St={barTextPadding:17,barTextMargin:0,customBarTextFont:!1,barTextFont:"Times New Roman",barPadding:0,barMargin:0,barTextSize:15,barTextColor:"#000000",barPointPos:"#FF0000FF",barPointNeg:"#FF0000FF",barIconColor:"#0000008A",barBackgroundColor:"#FFFFFFFF"},Ct={useBackpackDesign:!1,backpackBgColor:"#FFFFFF",isBackpackBgRepeat:!1,isBackpackBgFitIn:!1,backpackBgImage:"",backPackWidth:1400},app=i(

/*! Delete and replace this part with your project if you're pasting it in, leave it here if you have placed your project.json file under index.html. */
{version:ut,isEditModeOnAll:!0,isPointerCursor:!1,importedChoicesIsOpen:!0,curVolume:100,isMute:!1,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,showAllAddons:0,tmpRow:[],tmpChoice:[],tmpRequired:[],tmpScore:[],tmpAddon:[],tmpGroup:[],rowIdLength:4,objectIdLength:4,words:[],groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,useTextEditor:!0,useToolbarBtn:!1,useChoiceEditBtn:!0,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,addPrefix:!0,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],categories:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,tooltipDelay:1e3,checkDeleteRow:!0,checkDeleteObject:!1,checkSelectAll:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:{...gt,...pt,...mt,...ht,...vt,...ft,...bt,...wt,...Tt,...It,...St,...Ct}}
/*! End */

),yt={version:ut,isEditModeOnAll:!0,isPointerCursor:!1,importedChoicesIsOpen:!0,curVolume:100,isMute:!1,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,showAllAddons:0,tmpRow:[],tmpChoice:[],tmpRequired:[],tmpScore:[],tmpAddon:[],tmpGroup:[],rowIdLength:4,objectIdLength:4,words:[],groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,useTextEditor:!0,useToolbarBtn:!1,useChoiceEditBtn:!0,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,addPrefix:!0,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],categories:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,tooltipDelay:1e3,checkDeleteRow:!0,checkDeleteObject:!1,checkSelectAll:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:{...gt,...pt,...mt,...ht,...vt,...ft,...bt,...wt,...Tt,...It,...St,...Ct}},xt=i(new n),Ot=i(new n),At=i(new n),Bt=i(new n),kt=i(new n),Mt=i(new n),Dt=i(new n),Ft=i(new n),Rt=i(new n),jt=i(new n),Pt=i(new n),$t=i(new l),Vt=i([]),qt=i({value:"appCyoaViewer"}),Wt=i({value:"light"}),Lt={ALLOWED_TAGS:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr","font","iframe","img"],ADD_ATTR:["href","target","style","class"]},Ut=d(null),Nt=d(null),Et=i({isBgmInit:!1,bgmIsPlaying:!1,bgmPlayInterval:0,bgmTitleInterval:0,bgmFadeInterval:0,bgmFadeTimer:0,bgmTitle:"No Audio Title",curBgmTime:0,curBgmLength:0,isSeeking:!1,lastFadeTime:0,isFadingOut:!1,bgmObjectId:"",noCors:!1}),zt=i({currentDialog:"none"}),Gt=i({currentDialog:"none"}),Ht=i({labelText:"",timeoutMs:4e3,isOpen:!1}),_t=i({allowDeselect:!1,isSingleFile:!1}),Yt=i({stored:!1,name:"Auto Save",time:"",app:""}),Zt=i(Array.from({length:99},(e,t)=>({stored:!1,name:"Slot ".concat(t+1),time:"",app:""}))),Jt=i(Array.from({length:99},(e,t)=>({stored:!1,name:"Slot ".concat(t+1),time:"",app:""})));i({backgroundColor:"",backgroundImage:"",barBgColor:""});const Xt=new Set,Kt={value:!1},Qt=p(window.innerWidth,e=>{const t=()=>e(window.innerWidth);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)});let eo=null,to=null;function oo(){return new Promise((e,t)=>{const o=indexedDB.open("cyoaPlusDB");o.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains("cyoaStore")||t.createObjectStore("cyoaStore"),t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore")},o.onsuccess=t=>{const o=t.target.result;e(o)},o.onerror=t})}function io(){return new Promise((e,t)=>{if(eo)return e(eo);const o=indexedDB.open("cyoaDB");let i=!1,n=[],l=[],a=[];o.onupgradeneeded=e=>{const t=e.target.result;t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore",{keyPath:"title"}),i=!0},o.onsuccess=o=>{const r=o.target.result;if(1===r.version)if(i)oo().then(t=>{eo=t,e(eo)}).catch(t).finally(()=>{r.close()});else if(r.objectStoreNames.contains("buildStore")){const o=r.transaction(["buildStore"],"readonly").objectStore("buildStore").getAll();o.onsuccess=()=>{const i=o.result;for(let e=0;e<i.length;e++){const t=o.result[e];Jt[e].stored=!0,Jt[e].name=t.title,Jt[e].time="Unknown"}oo().then(t=>{eo=t,e(eo)}).catch(t).finally(()=>{to=r})},o.onerror=o=>{console.error(o),oo().then(t=>{eo=t,e(eo)}).catch(t).finally(()=>{r.close()})}}else oo().then(t=>{eo=t,e(eo)}).catch(t).finally(()=>{r.close()});else{const o=[new Promise((e,t)=>{if(r.objectStoreNames.contains("cyoaStore")){const o=r.transaction("cyoaStore","readonly").objectStore("cyoaStore").openCursor();o.onsuccess=t=>{const o=t.target.result;o?(n.push({key:o.key,value:o.value}),o.continue()):e()},o.onerror=t}else e()}),new Promise((e,t)=>{if(r.objectStoreNames.contains("buildStore")){const o=r.transaction("buildStore","readonly").objectStore("buildStore").openCursor();o.onsuccess=t=>{const o=t.target.result;o?(l.push({key:o.key,value:o.value}),o.continue()):e()},o.onerror=t}else e()})];Promise.all(o).then(()=>(r.close(),new Promise((e,t)=>{const o=indexedDB.deleteDatabase("cyoaDB");o.onsuccess=()=>{const o=indexedDB.open("cyoaDB",1);o.onupgradeneeded=e=>{e.target.result.createObjectStore("buildStore",{keyPath:"title"});const t=e.target.transaction;if(t){const e=t.objectStore("buildStore");let o=0;for(let t=0;t<l.length;t++){const i=l[t];void 0!==i.value.title?(e.put(i.value),Jt[o].stored=!0,Jt[o].name=i.title,Jt[o].time="Unknown",o+=1):a.push(i)}}},o.onsuccess=t=>{const o=t.target.result;to=o,e()},o.onerror=e=>{t(e)}},o.onerror=e=>{t(e)}}))).catch(e=>{console.error(e),r.close()}).finally(()=>{const o=indexedDB.open("cyoaPlusDB");o.onupgradeneeded=e=>{const t=e.target.result;!t.objectStoreNames.contains("cyoaStore")&&n.length>0&&t.createObjectStore("cyoaStore"),t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore");const o=e.target.transaction;if(o){if(n.length>0){const e=o.objectStore("cyoaStore");for(let t=0;t<n.length;t++){const o=n[t];e.put(o.value,o.key)}}if(a.length>0){const e=o.objectStore("buildStore");for(let t=0;t<a.length;t++){const o=a[t];e.put(o.value,o.key)}}}},o.onsuccess=t=>{const o=t.target.result;eo=o,e(eo)},o.onerror=e=>{t(e)}})}},o.onerror=e=>{t(e)}})}let no=null;function lo(e,t){return new Promise((o,i)=>{const n=setTimeout(()=>o(),e);t&&t.addEventListener("abort",()=>{clearTimeout(n),i(new DOMException("Aborted","AbortError"))})})}async function ao(){const e=new AbortController;no=e;const t="".concat(location.pathname.replace(/\/index\.html$/,"/"),"autoSave");for(;app.buildAutoSaveIsOn;){try{await lo(1e3*app.buildAutoSaveInterval*60,e.signal)}catch(o){break}if(!app.buildAutoSaveIsOn)break;const i=(await io()).transaction("buildStore","readwrite").objectStore("buildStore"),n=navigator.language,l=new Date,a=new Intl.DateTimeFormat(n,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(l),r={stored:!0,name:"Auto Save",time:a,app:so()};try{await new Promise((e,o)=>{const n=i.put(r,t);n.onsuccess=()=>e(),n.onerror=()=>o(n.error)}),Yt.stored=!0,Yt.time=a,Ht.labelText="Auto-save completed successfully.",Ht.isOpen=!0}catch(o){console.error(o)}}}async function ro(e,t,o=!1){const i=o?await new Promise((e,t)=>to?e(to):t()):await io();return new Promise((o,n)=>{const l=i.transaction(t,"readonly").objectStore(t).get(e);l.onsuccess=()=>o(void 0!==l.result?l.result:null),l.onerror=n})}function so(){let e=[];return Array.from(xt.entries()).forEach(([t,o])=>{if(o.isRowButton){if(void 0!==Bt.get(t)){let i="".concat(t,"/RP#").concat(o.rndPoint,"/NUM#").concat(o.pointNum);e.push(i)}}else if(o.isVariable){void 0!==Rt.get(t)&&e.push(t)}else{const i=kt.get(t);if(void 0!==i){const n=i.choice;let l=t,a=[];if(0===o.multiple){for(let e=0;e<n.scores.length;e++){const t=n.scores[e];t.isRandom&&t.setValue&&a.push("".concat(e,":").concat(t.value))}a.length>0&&(l+="/RS#".concat(a.join("/AND#"))),n.isActivateRandom&&n.activatedRandom&&(l+="/RND#".concat(n.activatedRandom.join("/AND#").replace(/\/ON#/g,"/RON#"))),n.textfieldIsOn&&n.customTextfieldIsOn&&void 0!==n.wordChangeSelect&&(l+="/WORD#".concat(n.wordChangeSelect.replace(/,/g,"/CHAR#"))),n.isImageUpload&&n.image!==n.defaultImage&&(l+="/IMG#".concat(n.image.replace(/,/g,"/CHAR#"))),e.push(l)}else{l+="/ON#".concat(o.multiple);for(let e=0;e<n.scores.length;e++){const t=n.scores[e];t.isRandom&&t.setValue&&a.push("".concat(e,":").concat(t.value))}a.length>0&&(l+="/RS#".concat(a.join("/AND#"))),n.isActivateRandom&&n.activatedRandomMul&&(l+="/RND#".concat(n.activatedRandomMul.flat(2).join("/AND#").replace(/\/ON#/g,"/RON#"))),e.push(l)}}}}),e.join(",")}function co(){const e=new Date,t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),n=String(e.getHours()).padStart(2,"0"),l=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(o,"-").concat(i,"_").concat(n,"-").concat(l,"-").concat(a)}function uo(e){if(e.customTextIsOn)return void 0!==e.customText?e.customText:"";switch(e.type){case"id":{let t=e.reqId.split("/ON#"),o=kt.get(t[0]);if(void 0!==o){let i=o.choice;return"".concat(e.beforeText).concat(t.length>1?" ".concat(t[1]):""," ").concat(i.title," ").concat(e.afterText)}break}case"points":{let t=At.get(e.reqId);if(void 0!==t)return"".concat(e.beforeText," ").concat(e.reqPoints," ").concat(t.name," ").concat(e.afterText);break}case"or":{let t=[];for(let o=0;o<e.orRequired.length;o++){let i=e.orRequired[o].req;if(void 0!==i){let e=i.split("/ON#"),o=kt.get(e[0]),n="";if(void 0!==o){let i=o.choice;n=e.length>1?"".concat(e[1]," "):"",t.push("".concat(n).concat(i.title))}}}return"1"===app.orderOrReqText?"".concat(e.beforeText," ").concat(t.join(", ")," ").concat(void 0!==e.orNum?"".concat(app.defaultOrReq," ").concat(e.orNum):"".concat(app.defaultOrReq," 1")," ").concat(e.afterText):"".concat(e.beforeText," ").concat(void 0!==e.orNum?"".concat(e.orNum," ").concat(app.defaultOrReq):"1 ".concat(app.defaultOrReq)," ").concat(t.join(", ")," ").concat(e.afterText)}case"selFromGroups":if(void 0!==e.selGroups){let t=[];for(let o=0;o<e.selGroups.length;o++){let i=e.selGroups[o],n=Mt.get(i);void 0!==n&&t.push(n.name)}return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(t.join(", ")," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(t.join(", ")," ").concat(e.afterText)}case"selFromRows":if(void 0!==e.selRows){let t=[];for(let o=0;o<e.selRows.length;o++){let i=e.selRows[o],n=Bt.get(i);void 0!==n&&t.push(n.title)}return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(t.join(", ")," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(t.join(", ")," ").concat(e.afterText)}case"selFromWhole":return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(e.afterText)}return"".concat(e.beforeText," ").concat(e.afterText)}function go(e){return Bt.has(e)||kt.has(e)||Ft.has(e)||At.has(e)||jt.has(e)||Pt.has(e)||Mt.has(e)||Rt.has(e)}function po(e,t){let o=app.addPrefix?"row-":"",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return go(o)?e>2?po(0,++t):po(++e,t):o}function mo(e,t){let o=app.addPrefix?"word-":"",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return go(o)?e>2?mo(0,++t):mo(++e,t):o}function ho(e,t,o=!1){let i=app.addPrefix&&!o?"choice-":"",n="abcdefghijklmnopqrstuvwxyz0123456789";for(var l=0;l<t;l++)i+=n.charAt(Math.floor(36*Math.random()));return go(i)?e>2?ho(0,++t):ho(++e,t):i}function vo(e,t,o){let i=app.addPrefix?"design-":"",n="abcdefghijklmnopqrstuvwxyz0123456789";for(var l=0;l<t;l++)i+=n.charAt(Math.floor(36*Math.random()));return go(i)?e>2?vo(0,++t):vo(++e,t):i}function fo(e,t){let o=app.addPrefix?"group-":"",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return go(o)?e>2?fo(0,++t):fo(++e,t):o}function bo(e,t){let o=app.addPrefix?"point-":"",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return go(o)?e>2?bo(0,++t):bo(++e,t):o}function wo(e,t){let o=app.addPrefix?"variable-":"",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return go(o)?e>2?wo(0,++t):wo(++e,t):o}function To(e,t){let o="s-",i="abcdefghijklmnopqrstuvwxyz0123456789";for(var n=0;n<t;n++)o+=i.charAt(Math.floor(36*Math.random()));return $t.has(o)?e>2?To(0,++t):To(++e,t):o}function Io(e){switch(e){case"col-sm-6":case"col-sm-5":return 2;case"col-md-4":return 3;case"col-md-3":return 4;case"w-20":return 5;case"col-lg-2":return 6;case"w-14":return 7;case"w-12":return 8;case"w-11":return 9;case"w-10":return 10;case"w-9":return 11;case"col-xl-1":return 12;default:return 1}}let So,Co=[];function yo(){return function(){if(Co.length!==app.words.length)return!0;for(let e=0;e<Co.length;e++){if(Co[e].id!==app.words[e].id)return!0;if(Co[e].replaceText!==app.words[e].replaceText)return!0}return!1}()&&(Co=JSON.parse(JSON.stringify(app.words)),So=new RegExp(app.words.map(e=>e.id).sort((e,t)=>t.length-e.length).map(e=>e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")).join("|"),"g")),So}function xo(e){let t=e;return app.words&&(t=t.replace(yo(),e=>{const t=At.get(e);if(void 0!==t){return(t.startingSum%1==0?t.startingSum:parseFloat(t.startingSum.toFixed(void 0!==t.decimalPlaces?t.decimalPlaces:2))).toString()}{const t=kt.get(e);if(void 0!==t){const e=t.choice;if(e.isSelectableMultiple&&e.isMultipleUseVariable)return e.multipleUseVariable.toString()}else{const t=Ft.get(e);if(void 0!==t)return t.replaceText}}return e})),t}function Oo(e,t,o){if(void 0!==o){if(void 0!==o.styling&&o.isPrivateStyling&&o[e])return o.styling;if(void 0!==app.objectDesignGroups&&o.objectDesignGroups)for(let t=0;t<o.objectDesignGroups.length;t++){let i=Pt.get(o.objectDesignGroups[t]);if(void 0!==i&&i[e]){let e=i.activatedId,t=Dt.get(e);if(""===e||Bo(i.activatedId))return i.styling;if(void 0!==app.globalRequirements&&void 0!==t&&Fo(t.requireds))return i.styling}}}if(void 0!==t){if(void 0!==t.styling&&t.isPrivateStyling&&t[e])return t.styling;if(void 0!==app.rowDesignGroups&&t.rowDesignGroups)for(let o=0;o<t.rowDesignGroups.length;o++){let i=jt.get(t.rowDesignGroups[o]);if(void 0!==i&&i[e]){let e=i.activatedId,t=Dt.get(e);if(""===e||Bo(i.activatedId))return i.styling;if(void 0!==app.globalRequirements&&void 0!==t&&Fo(t.requireds))return i.styling}}}return app.styling}function Ao(e,t){if(t.has(e)){return Ao("".concat(e,"_dup"),t)}return e}function Bo(e,t=xt){var o;const[i,n="0"]=e.split("/ON#"),l=parseInt(n);if(l>0){return((null==(o=t.get(i))?void 0:o.multiple)||0)>=l}return t.has(i)}function ko(e,t=1){switch(e){case"5":case"4":case"3":return 10*t+1;default:return 10*t+2}}function Mo(e){if("number"==typeof e)return e;if("string"==typeof e)return Number(e);const t=Mo(e.left),o=Mo(e.right);switch(e.operator){case"1":return t+o;case"2":return t-o;case"3":return t*o;case"4":return 0!==o?t/o:t;case"5":return 0!==o?t%o:t;default:return t}}function Do(e,t=xt){if(e.required)switch(e.type){case"id":return Bo(e.reqId,t);case"points":const o=At.get(e.reqId);if(void 0!==o){if(void 0===e.operator)return o.startingSum>e.reqPoints;switch(e.operator){case"1":return o.startingSum>e.reqPoints;case"2":return o.startingSum>=e.reqPoints;case"3":return o.startingSum==e.reqPoints;case"4":return o.startingSum<=e.reqPoints;case"5":return o.startingSum<e.reqPoints}}return!1;case"or":let i=void 0===e.orNum?1:e.orNum,n=0;for(let g=0;g<e.orRequired.length;g++){let o=e.orRequired[g].req;void 0!==o&&Bo(o,t)&&n++}return n>=i;case"pointCompare":const l=At.get(e.reqId),a=At.get(e.reqId1);if(void 0!==l&&void 0!==a){let t=a.startingSum;if(e.more)for(let i=0;i<e.more.length;i++){let o=0;const n=e.more[i],l=n.operator||"1",a=ko(l,n.priority);if(n.id){const e=At.get(n.id);void 0!==e&&(o=e.startingSum)}else void 0!==n.points&&(o=n.points);const r={left:t,operator:l,right:o,priority:a};t="number"!=typeof t&&a<t.priority?{left:t.left,operator:t.operator,right:{left:t.right,operator:l,right:o,priority:a},priority:t.priority}:r}const o=Mo(t);switch(e.operator){case"1":return l.startingSum>o;case"2":return l.startingSum>=o;case"3":return l.startingSum==o;case"4":return l.startingSum<=o;case"5":return l.startingSum<o;default:return!1}}return!1;case"selFromGroups":if(e.selGroups){let t=0,o=void 0===e.selFromOperators?"1":e.selFromOperators,i=void 0===e.selNum?1:e.selNum;for(let n=0;n<e.selGroups.length;n++){const o=Mt.get(e.selGroups[n]);if(void 0!==o){const e=o.elements;for(let o=0;o<e.length;o++)xt.has(e[o])&&t++}}switch(o){case"1":return!(i>t||0===i&&t>0);case"2":return i===t;case"3":return!(i<t||0===i&&t>0);default:return!1}}case"selFromRows":if(e.selRows){let t=0,o=void 0===e.selFromOperators?"1":e.selFromOperators,i=void 0===e.selNum?1:e.selNum;for(let n=0;n<e.selRows.length;n++){const o=Bt.get(e.selRows[n]);void 0!==o&&(t+=o.currentChoices)}switch(o){case"1":return!(i>t||0===i&&t>0);case"2":return i===t;case"3":return!(i<t||0===i&&t>0);default:return!1}}case"selFromWhole":let r=0,s=void 0===e.selFromOperators?"1":e.selFromOperators,c=void 0===e.selNum?1:e.selNum;for(let e=0;e<app.rows.length;e++)r+=app.rows[e].currentChoices;switch(s){case"1":return!(c>r||0===c&&r>0);case"2":return c===r;case"3":return!(c<r||0===c&&r>0);default:return!1}case"gid":const d=Dt.get(e.reqId);return void 0!==d&&void 0!==app.globalRequirements&&Fo(d.requireds,t);case"word":const u=Ft.get(e.reqId);if(void 0!==u){let t=0;for(let o=0;o<e.orRequired.length;o++){let i=e.orRequired[o].req;void 0!==i&&u.replaceText===i&&t++}return t>=1}return!1}else switch(e.type){case"id":return!Bo(e.reqId,t);case"or":let o=void 0===e.orNum?1:e.orNum,i=0;for(let l=0;l<e.orRequired.length;l++){let o=e.orRequired[l].req;(""===o||void 0!==o&&Bo(o,t))&&i++}return i<e.orRequired.length-o+1;case"gid":const n=Dt.get(e.reqId);return void 0!==n&&void 0!==app.globalRequirements&&!Fo(n.requireds,t)}return!1}function Fo(e,t=xt){let o=!0;if(void 0!==e)for(let i=0;i<e.length;i++){const n=e[i];let l=!0;if(void 0!==n.requireds)for(let e=0;e<n.requireds.length;e++)l=l&&Do(n.requireds[e],t);l&&(o=o&&Do(e[i],t))}return o}function Ro(e){const t=new Audio;return t.controls=!1,t.preload="metadata",e&&(t.crossOrigin="anonymous"),function(e){let t=!1,o=1,i=!1,n=!0;return e.addEventListener("loadedmetadata",()=>{i=Number.isFinite(e.duration)&&e.seekable&&e.seekable.length>0,i&&(Et.curBgmLength=e.duration)}),e.addEventListener("play",()=>{n=!1}),e.addEventListener("ended",()=>{n=!0}),{type:"audio",load(t,o){e.src=t,e.loop=!!(null==o?void 0:o.loop),e.load(),n=!0,i=!1},play:()=>e.play().catch(e=>{throw n=!0,console.warn(e),e}),pause:()=>e.pause(),stop:()=>{e.pause(),i&&(e.currentTime=0),n=!0},mute:()=>{t=!0,e.muted=!0},unMute:()=>{t=!1,e.muted=!1},setVolume:i=>{o=i/100,t||(e.volume=o)},isPlaying:()=>!e.paused&&!n,isStopped:()=>n,isMuted:()=>t,seekTo:t=>{if(!i)return!1;try{return e.currentTime=t,!0}catch(o){return!1}},getCurrentTime:()=>i?e.currentTime:0,getDuration:()=>i?e.duration:0,getTitle:()=>{var t;return null!=(t=e.src.split("/").pop())?t:""},getId:()=>e.src}}(t)}function jo(e,t,o,i){function n(){const o=i.play();Et.noCors=!1,Promise.resolve(o).catch(()=>{i=function(e,t){const o=Ro(!1);return o.load(e,{loop:t}),o.play(),Ut.set(o),Et.noCors=!0,o}(t,!e.bgmNoLoop)})}function l(){let l=0,a=0,r=0;if(o&&i.load(t,{loop:!e.bgmNoLoop}),e.bgmFadeIn&&void 0!==e.bgmFadeInSec&&e.bgmFadeInSec>0){const t=e.bgmFadeInSec/20;Et.lastFadeTime=e.bgmFadeInSec,i.setVolume(0),n(),0!==Et.bgmFadeInterval&&(window.clearInterval(Et.bgmFadeInterval),Et.bgmFadeInterval=0),0!==Et.bgmPlayInterval&&(window.clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),Et.isFadingOut&&(Et.isFadingOut=!1),Et.bgmFadeInterval=window.setInterval(()=>{i.isPlaying()&&(l<app.curVolume?(l+=5,i.setVolume(l),Et.lastFadeTime=Et.lastFadeTime-t):(i.setVolume(app.curVolume),window.clearInterval(Et.bgmFadeInterval),Et.bgmFadeInterval=0,Et.lastFadeTime=0))},t)}else Et.isFadingOut&&(Et.isFadingOut=!1,window.clearInterval(Et.bgmFadeInterval),Et.bgmFadeInterval=0),n(),i.setVolume(app.curVolume);Et.bgmObjectId=e.id,app.showMusicPlayer&&(0!==Et.bgmTitleInterval&&(window.clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0),Et.bgmTitleInterval=window.setInterval(()=>{i.getId()!==t||""===i.getTitle()||0===i.getDuration()&&!Et.noCors||(Et.bgmTitle=i.getTitle(),Et.curBgmLength=i.getDuration(),window.clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0)},1e3),0!==Et.bgmPlayInterval&&(window.clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),Et.bgmPlayInterval=window.setInterval(()=>{if(!Et.isSeeking&&i.isPlaying()){const e=Math.floor(i.getCurrentTime());e!==Et.curBgmTime?a!==e?Et.curBgmTime=e:(r++,r>Et.curBgmLength&&(r=1),Et.curBgmTime=r):(a=e,r=e+1,Et.curBgmTime=r)}},1e3))}if(Et.isFadingOut){const e=Et.lastFadeTime;0!==Et.bgmFadeTimer&&(window.clearTimeout(Et.bgmFadeTimer),Et.bgmFadeTimer=0),Et.bgmFadeTimer=window.setTimeout(()=>{l()},e)}else l()}function Po(e,t){const o=app.curVolume/5;if(e.bgmFadeOut&&void 0!==e.bgmFadeOutSec&&e.bgmFadeOutSec>0&&o>0){const i=e.bgmFadeOutSec/o;let n=app.curVolume;Et.lastFadeTime=e.bgmFadeOutSec,Et.isFadingOut=!0,0!==Et.bgmFadeInterval&&(window.clearInterval(Et.bgmFadeInterval),Et.bgmFadeInterval=0),Et.bgmFadeInterval=window.setInterval(()=>{void 0!==t.setVolume&&(n>0?(n-=5,t.setVolume(n),Et.lastFadeTime-=i):Et.isFadingOut&&(t.pause(),t.setVolume(app.curVolume),window.clearInterval(Et.bgmFadeInterval),Et.bgmFadeInterval=0,Et.lastFadeTime=0,Et.isFadingOut=!1,0!==Et.bgmTitleInterval&&(window.clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0),0!==Et.bgmPlayInterval&&(window.clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),Et.bgmTitle="No Audio Title",Et.curBgmTime=0,Et.curBgmLength=0))},i)}else t.pause(),0!==Et.bgmTitleInterval&&(window.clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0),0!==Et.bgmPlayInterval&&(window.clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),Et.bgmTitle="No Audio Title",Et.curBgmTime=0,Et.curBgmLength=0}function $o(e,t,o){const i=u(Nt);let n=u(Ut);if(e.useAudioURL?(!n||"audio"!==n.type||n.getId()!==t&&!0===Et.noCors)&&(null==n||n.stop(),n=Ro(!0),Ut.set(n)):!i||n&&"youtube"===n.type||(null==n||n.stop(),n=function(e){return{type:"youtube",load(t,o){(null==o?void 0:o.loop)?(e.loadPlaylist(t),e.setLoop(!0)):(e.loadVideoById(t),e.setLoop(!1))},play:()=>e.playVideo(),pause:()=>e.pauseVideo(),stop:()=>e.stopVideo(),mute:()=>e.mute(),unMute:()=>e.unMute(),setVolume:t=>e.setVolume(t),isPlaying:()=>1===e.getPlayerState(),isStopped:()=>2===e.getPlayerState(),isMuted:()=>e.isMuted(),seekTo:t=>(e.seekTo(t,!0),!0),getCurrentTime:()=>e.getCurrentTime(),getDuration:()=>e.getDuration(),getTitle:()=>{var t,o,i;return null!=(i=null==(o=null==(t=e.playerInfo)?void 0:t.videoData)?void 0:o.title)?i:""},getId:()=>{var t,o,i;return null!=(i=null==(o=null==(t=e.playerInfo)?void 0:t.videoData)?void 0:o.video_id)?i:""}}}(i),Ut.set(n)),n){const o=Et.bgmIsPlaying;n.getId()===t?Et.bgmObjectId===e.id?o?(n.isStopped()||n.stop(),jo(e,t,!1,n)):Po(e,n):o?(n.stop(),jo(e,t,!1,n)):Po(e,n):o&&jo(e,t,!0,n)}else o<10?window.setTimeout(()=>{$o(e,t,++o)},200):console.log("Failed to play bgm")}async function Vo(e){const t=new((await new Promise(e=>{if(window.YT&&window.YT.Player)e(window.YT);else{const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t),window.onYouTubeIframeAPIReady=()=>e(window.YT)}})).Player)("bgm-player",{width:0,height:0,events:{onReady:()=>{Nt.set(t),$o(e,e.bgmId||"",0),app.isMute&&!t.isMuted()&&t.mute()}}})}function qo(e,t,o=!1){if(void 0!==e){if(t){const t=["addonBorderRadiusTopLeft","addonBorderRadiusTopRight","addonBorderRadiusBottomLeft","addonBorderRadiusBottomRight","addonImgBorderRadiusTopLeft","addonImgBorderRadiusTopRight","addonImgBorderRadiusBottomLeft","addonImgBorderRadiusBottomRight","objectBorderRadiusTopLeft","objectBorderRadiusTopRight","objectBorderRadiusBottomLeft","objectBorderRadiusBottomRight","objectImgBorderRadiusTopLeft","objectImgBorderRadiusTopRight","objectImgBorderRadiusBottomLeft","objectImgBorderRadiusBottomRight","rowBorderRadiusTopLeft","rowBorderRadiusTopRight","rowBorderRadiusBottomLeft","rowBorderRadiusBottomRight","rowImgBorderRadiusTopLeft","rowImgBorderRadiusTopRight","rowImgBorderRadiusBottomLeft","rowImgBorderRadiusBottomRight"];for(let o=0;o<t.length;o++){const i=t[o];void 0!==e[i]&&(e[i]=10*e[i])}}const i=["selFilterBgColor","selFilterBorderColor","selFilterCTitleColor","selFilterCTextColor","selFilterATitleColor","selFilterATextColor","selFilterSTextColor","reqFilterBgColor","reqFilterBorderColor","reqFilterCTitleColor","reqFilterCTextColor","reqFilterATitleColor","reqFilterATextColor","reqFilterSTextColor","rowTitleColor","rowTextColor","objectTitleColor","objectTextColor","addonTitleColor","addonTextColor","scoreTextColor","objectImgBorderColor","rowImgBorderColor","addonImgBorderColor","backgroundColor","rowBgColor","objectBgColor","objectDropShadowColor","objectBorderColor","rowDropShadowColor","rowBorderColor","addonDropShadowColor","addonBorderColor","addonBgColor","barTextColor","barIconColor","barBackgroundColor","backpackBgColor","barPointNeg","barPointPos"];for(let t=0;t<i.length;t++){const o=i[t];"object"==typeof e[o]&&(e[o]=e[o].hexa)}o&&(void 0===e.customMultiTextFont&&(e.customMultiTextFont=!1),void 0===e.multiChoiceCounterPosition&&(e.multiChoiceCounterPosition=0),void 0===e.multiChoiceCounterSize&&(e.multiChoiceCounterSize=170),void 0===e.multiChoiceTextFont&&(e.multiChoiceTextFont="Times New Roman"),void 0===e.multiChoiceTextSize&&(e.multiChoiceTextSize=100))}}function Wo(e,t,o){switch(t){case"1":return e-o;case"2":return e+o;case"3":return e*o;case"4":return e/o;case"5":return o;default:return e}}function Lo(e){delete e.tmpDiscount,delete e.discountTextA,delete e.discountTextB,delete e.dupTextA,delete e.dupTextB,delete e.discountedFrom,delete e.discountIsOn,delete e.discountScore,delete e.discountScoreCal,delete e.notStackableDiscount,delete e.discountShow,delete e.discountBeforeText,delete e.discountAfterText,delete e.isChangeDiscount,delete e.tmpDisScore,delete e.appliedDiscount,delete e.replaceText,delete e.hideDisValue,delete e.hideDisIcon}function Uo(e,t){var o,i,n,l,a,r;for(let s=0;s<t.scores.length;s++){const c=t.scores[s],d=c.appliedDiscount;if(!c.isNotDiscountable&&(void 0===e.discountPointTypes||0===e.discountPointTypes.length||-1!==e.discountPointTypes.indexOf(c.id))){const s=At.get(c.id);if(void 0!==s&&void 0!==e.discountOperator&&void 0!==e.discountValue){let u=s.allowFloat?c.value:Math.floor(c.value),g=c.discountIsOn&&void 0!==c.discountScore?c.discountScore:c.value;g=s.allowFloat?g:Math.floor(g);let p=0,m=0,h=[],v=!1,f=0;if(e.stackableDiscount){if(c.notStackableDiscount){if(void 0!==c.tmpDiscount){for(let e=0;e<c.tmpDiscount.length;e++)c.tmpDiscount[e].isStackable&&(h=c.tmpDiscount[e].discountedFrom,u=c.tmpDiscount[e].discountedValue,f=e);c.tmpDiscount.splice(f,1)}}else if(void 0!==c.discountedFrom){let n=c.discountedFrom.indexOf(e.id);if(c.discountedFrom.splice(n,1),c.discountedFrom.length>0){let n=!1,l=!1,a=!1;p=u;for(let e=0;e<c.discountedFrom.length;e++){const t=kt.get(c.discountedFrom[e]);if(void 0!==t){const e=t.choice;void 0!==e.discountOperator&&void 0!==e.discountValue&&(p=Wo(p,e.discountOperator,e.discountValue),p=s.allowFloat?p:Math.floor(p),m=p,e.replaceScoreText&&(n=e.replaceScoreText),e.hideScoreValue&&(l=e.hideScoreValue),e.hideScoreIcon&&(a=e.hideScoreIcon),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(p=Math.max(p,e.discountLowLimit)))}}if(e.discountShow){let t=void 0!==e.discountAfterText&&void 0!==c.discountTextA?c.discountTextA.indexOf(e.discountAfterText):-1,n=void 0!==e.discountBeforeText&&void 0!==c.discountTextB?c.discountTextB.indexOf(e.discountBeforeText):-1;e.discountTextDuplicated?(-1!==t&&void 0!==c.dupTextA&&void 0!==e.discountAfterText&&(c.dupTextA[e.discountAfterText]-=1,0===c.dupTextA[e.discountAfterText]&&(null==(o=c.discountTextA)||o.splice(t,1),delete c.dupTextA[e.discountAfterText])),-1!==n&&void 0!==c.dupTextB&&void 0!==e.discountBeforeText&&(c.dupTextB[e.discountBeforeText]-=1,0===c.dupTextB[e.discountBeforeText]&&(null==(i=c.discountTextB)||i.splice(t,1),delete c.dupTextB[e.discountBeforeText]))):(-1!==t&&void 0!==c.discountTextA&&(c.discountTextA.splice(t,1),c.discountAfterText=c.discountTextA.join(" ")),-1!==n&&void 0!==c.discountTextB&&(c.discountTextB.splice(n,1),c.discountBeforeText=c.discountTextB.join(" ")))}if(c.discountScore=p,c.discountScoreCal=m,c.replaceText=n,c.hideDisValue=l,c.hideDisIcon=a,e.useDiscountCount&&c.appliedDiscount){c.tmpDisScore=g-c.value,t.isActive&&(c.isChangeDiscount=!0);continue}}else{if(void 0!==c.tmpDiscount)for(let e=0;e<c.tmpDiscount.length;e++)c.tmpDiscount[e].isStackable||p>c.tmpDiscount[e].discountedValue&&(h=c.tmpDiscount[e].discountedFrom,m=c.tmpDiscount[e].calcValue,p=c.tmpDiscount[e].discountedValue,f=e,v=!0);v&&void 0!==c.tmpDiscount?0===h.length?c.tmpDiscount.splice(f,1):(c.discountedFrom=h,c.tmpDiscount[f].showDiscount&&(c.discountBeforeText=c.tmpDiscount[f].beforeText,c.discountAfterText=c.tmpDiscount[f].afterText,c.replaceText=c.tmpDiscount[f].replaceText||!1,c.hideDisValue=c.tmpDiscount[f].hideValue||!1,c.hideDisIcon=c.tmpDiscount[f].hideIcon||!1),c.tmpDiscount.splice(f,1),c.notStackableDiscount=!0):Lo(c)}}}else if(c.notStackableDiscount)if(void 0!==c.discountedFrom&&c.discountedFrom.length>0&&void 0!==c.tmpDiscount){if(-1!==c.discountedFrom.indexOf(e.id)){if(c.tmpDiscount.length>0){u=c.tmpDiscount[0].discountedValue,v=!0;for(let e=1;e<c.tmpDiscount.length;e++)u>c.tmpDiscount[e].discountedValue&&(u=c.tmpDiscount[e].discountedValue,f=e)}v?(c.discountScore=u,c.discountScoreCal=c.tmpDiscount[f].calcValue,c.discountedFrom=c.tmpDiscount[f].discountedFrom,c.notStackableDiscount=!c.tmpDiscount[f].isStackable,c.discountShow=c.tmpDiscount[f].showDiscount,c.tmpDiscount[f].isStackable&&c.tmpDiscount[f].showDiscount?(c.discountBeforeText=null==(n=c.discountTextB)?void 0:n.join(""),c.discountAfterText=null==(l=c.discountTextA)?void 0:l.join("")):c.tmpDiscount[f].showDiscount?(c.discountBeforeText=c.tmpDiscount[f].beforeText,c.discountAfterText=c.tmpDiscount[f].afterText,c.replaceText=c.tmpDiscount[f].replaceText||!1,c.hideDisValue=c.tmpDiscount[f].hideValue||!1,c.hideDisIcon=c.tmpDiscount[f].hideIcon||!1):(c.discountBeforeText="",c.discountAfterText="",c.replaceText=!1,c.hideDisValue=!1,c.hideDisIcon=!1),c.tmpDiscount.splice(f,1)):Lo(c)}else for(let t=0;t<c.tmpDiscount.length;t++)if(-1!==c.tmpDiscount[t].discountedFrom.indexOf(e.id)){c.tmpDiscount.splice(t,1);break}}else Lo(c);else if(void 0!==c.tmpDiscount){if(c.tmpDiscount=c.tmpDiscount.filter(t=>-1!==t.discountedFrom.indexOf(e.id)),c.tmpDiscount.length>0){u=c.tmpDiscount[0].discountedValue,v=!0;for(let e=1;e<c.tmpDiscount.length;e++)u>c.tmpDiscount[e].discountedValue&&(u=c.tmpDiscount[e].discountedValue,f=e)}v?(c.discountScore=u,c.discountScoreCal=c.tmpDiscount[f].calcValue,c.discountedFrom=c.tmpDiscount[f].discountedFrom,c.notStackableDiscount=!c.tmpDiscount[f].isStackable,c.notStackableDiscount?c.tmpDiscount[f].showDiscount?(c.discountBeforeText=c.tmpDiscount[f].beforeText,c.discountAfterText=c.tmpDiscount[f].afterText,c.replaceText=c.tmpDiscount[f].replaceText||!1,c.hideDisValue=c.tmpDiscount[f].hideValue||!1,c.hideDisIcon=c.tmpDiscount[f].hideIcon||!1):(c.discountBeforeText="",c.discountAfterText="",c.replaceText=!1,c.hideDisValue=!1,c.hideDisIcon=!1):(c.discountBeforeText=null==(a=c.discountTextB)?void 0:a.join(""),c.discountAfterText=null==(r=c.discountTextA)?void 0:r.join("")),c.tmpDiscount.splice(f,1)):Lo(c)}else Lo(c);let b=void 0!==c.discountScore?c.discountScore:c.value;b=s.allowFloat?b:Math.floor(b),b!==g&&d?(c.tmpDisScore=g-b,t.isActive&&(c.isChangeDiscount=!0)):t.isActive&&(c.isChangeDiscount=!1)}}}}function No(e,t){for(let o=0;o<t.scores.length;o++){const i=t.scores[o];if(!i.isNotDiscountable&&(void 0===e.discountPointTypes||0===e.discountPointTypes.length||-1!==e.discountPointTypes.indexOf(i.id))){const o=At.get(i.id);if(void 0!==o&&void 0!==e.discountOperator&&void 0!==e.discountValue){let n,l=o.allowFloat?i.value:Math.floor(i.value),a=i.discountIsOn&&void 0!==i.discountScore?i.discountScore:l,r=0,s=0,c=[],d=!1,u=0;if(void 0===i.discountedFrom&&(i.discountedFrom=[]),e.stackableDiscount)if(i.notStackableDiscount){if(void 0!==i.tmpDiscount){for(let t=0;t<i.tmpDiscount.length;t++)i.tmpDiscount[t].isStackable&&(c=i.tmpDiscount[t].discountedFrom,c.push(e.id),l=i.tmpDiscount[t].discountedValue,d=!0,u=t);r=Wo(l,e.discountOperator,e.discountValue),r=o.allowFloat?r:Math.floor(r),s=r,e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(r=Math.max(r,e.discountLowLimit)),void 0!==i.discountScore&&i.discountScore>r?(i.tmpDisScore=i.discountScore-r,t.isActive&&(i.isChangeDiscount=!0),n={isStackable:!1,discountedFrom:i.discountedFrom,calcValue:void 0!==i.discountScoreCal?i.discountScoreCal:i.discountScore,discountedValue:i.discountScore,showDiscount:!1,replaceText:!1,hideValue:!1,hideIcon:!1},i.discountShow&&(n.showDiscount=!0,n.beforeText=e.discountBeforeText,n.afterText=e.discountAfterText,e.replaceScoreText&&(n.replaceText=!0),e.hideScoreValue&&(n.hideValue=!0),e.hideScoreIcon&&(n.hideIcon=!0)),i.discountScore=r,i.discountScoreCal=s,e.discountShow&&(i.discountShow=!0,Eo(e,i)),void 0!==i.discountTextA&&(i.discountAfterText=i.discountTextA.join(" ")),void 0!==i.discountTextB&&(i.discountBeforeText=i.discountTextB.join(" ")),i.discountedFrom.push(...c),d&&i.tmpDiscount.splice(u,1),i.tmpDiscount.push(n),i.notStackableDiscount=!1):(t.isActive&&(i.isChangeDiscount=!1),c.push(e.id),e.discountShow&&Eo(e,i),d?(i.tmpDiscount[u].discountedFrom=c,i.tmpDiscount[u].calcValue=s,i.tmpDiscount[u].discountedValue=r):(n={isStackable:e.stackableDiscount||!1,discountedFrom:c,calcValue:s,discountedValue:r,showDiscount:e.discountShow||!1,replaceText:e.replaceScoreText||!1,hideValue:e.hideScoreValue||!1,hideIcon:e.hideScoreIcon||!1},i.tmpDiscount.push(n)))}}else l=i.discountIsOn&&void 0!==i.discountScoreCal?i.discountScoreCal:i.value,l=o.allowFloat?l:Math.floor(l),a=i.discountIsOn&&void 0!==i.discountScore?i.discountScore:i.value,a=o.allowFloat?a:Math.floor(a),r=Wo(l,e.discountOperator,e.discountValue),r=o.allowFloat?r:Math.floor(r),s=r,e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(r=Math.max(r,e.discountLowLimit)),Array.isArray(i.discountedFrom)||(i.discountedFrom=[]),i.discountScore=r,i.discountScoreCal=s,i.discountedFrom.push(e.id),i.discountScore!==a?(i.tmpDisScore=a-i.discountScore,t.isActive&&(i.isChangeDiscount=!0)):!i.appliedDiscount&&e.useDiscountCount&&e.discountCount?(void 0===e.appliedDisChoices&&(e.appliedDisChoices=[]),i.tmpDisScore=i.value-i.discountScore,t.isActive&&(i.isChangeDiscount=!0)):t.isActive&&(i.isChangeDiscount=!1),i.discountIsOn||(i.discountIsOn=!0),e.discountShow&&(i.discountShow=!0,Eo(e,i)),void 0!==i.discountTextA&&(i.discountAfterText=i.discountTextA.join(" ")),void 0!==i.discountTextB&&(i.discountBeforeText=i.discountTextB.join(" "));else void 0===i.tmpDiscount&&(i.tmpDiscount=[]),r=Wo(l,e.discountOperator,e.discountValue),r=o.allowFloat?r:Math.floor(r),s=r,e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(r=Math.max(r,e.discountLowLimit)),i.discountIsOn?void 0!==i.discountScore&&(i.discountScore>r?(n={isStackable:!i.notStackableDiscount,discountedFrom:i.discountedFrom,calcValue:void 0!==i.discountScoreCal?i.discountScoreCal:i.discountScore,discountedValue:i.discountScore,showDiscount:i.discountShow||!1},i.discountShow&&(n.showDiscount=!0,n.beforeText=i.discountBeforeText,n.afterText=i.discountAfterText,n.replaceText=i.replaceText||!1,n.hideValue=i.hideDisValue||!1,n.hideIcon=i.hideDisIcon||!1),i.discountScore=r,i.discountScoreCal=s,i.discountShow=e.discountShow,i.discountBeforeText=e.discountBeforeText,i.discountAfterText=e.discountAfterText,i.discountedFrom=[e.id],i.notStackableDiscount=!0,i.replaceText=e.replaceScoreText||!1,i.hideDisValue=e.hideScoreValue||!1,i.hideDisIcon=e.hideScoreIcon||!1):(n={isStackable:e.stackableDiscount||!1,discountedFrom:[e.id],calcValue:s,discountedValue:r,showDiscount:e.discountShow||!1,replaceText:i.replaceText||!1,hideValue:i.hideDisValue||!1,hideIcon:i.hideDisIcon||!1},e.discountShow&&(n.showDiscount=!0,n.beforeText=e.discountBeforeText,n.afterText=e.discountAfterText,e.replaceScoreText&&(n.replaceText=!0),e.hideScoreValue&&(n.hideValue=!0),e.hideScoreIcon&&(n.hideIcon=!0))),i.tmpDiscount.push(n)):(i.discountScore=r,i.discountScoreCal=s,e.discountShow&&(i.discountShow=e.discountShow,i.discountBeforeText=e.discountBeforeText,i.discountAfterText=e.discountAfterText,i.replaceText=e.replaceScoreText||!1,i.hideDisValue=e.hideScoreValue||!1,i.hideDisIcon=e.hideScoreIcon||!1),Array.isArray(i.discountedFrom)||(i.discountedFrom=[]),i.discountIsOn=!0,i.discountedFrom.push(e.id),i.notStackableDiscount=!0),void 0!==i.discountScore&&i.discountScore!==a?(i.tmpDisScore=a-i.discountScore,t.isActive&&(i.isChangeDiscount=!0)):t.isActive&&(i.isChangeDiscount=!1)}}}}function Eo(e,t){void 0===t.discountTextA&&(t.discountTextA=[]),void 0===t.discountTextB&&(t.discountTextB=[]),void 0===t.dupTextA&&(t.dupTextA={}),void 0===t.dupTextB&&(t.dupTextB={}),e.discountTextDuplicated?(void 0!==e.discountAfterText&&(-1!==t.discountTextA.indexOf(e.discountAfterText)?t.dupTextA[e.discountAfterText]=(t.dupTextA[e.discountAfterText]||0)+1:(t.dupTextA[e.discountAfterText]=1,t.discountTextA.push(e.discountAfterText))),void 0!==e.discountBeforeText&&(-1!==t.discountTextB.indexOf(e.discountBeforeText)?t.dupTextB[e.discountBeforeText]=(t.dupTextB[e.discountBeforeText]||0)+1:(t.dupTextB[e.discountBeforeText]=1,t.discountTextB.push(e.discountBeforeText)))):(void 0!==e.discountAfterText&&t.discountTextA.push(e.discountAfterText),void 0!==e.discountBeforeText&&t.discountTextB.push(e.discountBeforeText)),t.replaceText=e.replaceScoreText||!1,t.hideDisValue=e.hideScoreValue||!1,t.hideDisIcon=e.hideScoreIcon||!1}function zo(e,t){if(t.discountedFrom&&t.discountedFrom.length>0)for(let o=0;o<t.discountedFrom.length;o++){const i=kt.get(t.discountedFrom[o]);if(void 0!==i){const o=i.choice;let n=Wo(t.value,o.discountOperator,o.discountValue);n=e.allowFloat?n:Math.floor(n);let l=n;o.discountLowLimitIsOn&&void 0!==o.discountLowLimit&&(n=Math.max(n,o.discountLowLimit)),t.discountScore=n,t.discountScoreCal=l}}}function Go(e,t){let o=!0;const i=new Map,l=new n(JSON.parse(JSON.stringify([...xt]))),a=l.get(e.id);t?e.isSelectableMultiple&&e.isMultipleUseVariable?void 0!==a?a.multiple+=1:l.set(e.id,{multiple:e.multipleUseVariable+1}):l.set(e.id,{multiple:0}):void 0!==a&&l.delete(e.id);for(let n=0;n<e.scores.length;n++){const a=e.scores[n],s=At.get(a.id);if(void 0!==s){if(a.useExpression&&!a.setValue){if(a.isRandom&&a.expMinValue&&a.expMaxValue)try{const t=a.expMinValue.replace(/\{([^{}]+)\}/g,(e,t)=>{const o=i.get(t);if(void 0!==o)return"".concat(o);{const e=At.get(t);if(void 0!==e)return"".concat(e.startingSum)}throw new Error('Undefined variable: "'.concat(t,'"'))}),o=a.expMaxValue.replace(/\{([^{}]+)\}/g,(e,t)=>{const o=i.get(t);if(void 0!==o)return"".concat(o);{const e=At.get(t);if(void 0!==e)return"".concat(e.startingSum)}throw new Error('Undefined variable: "'.concat(t,'"'))}),n=g(t),l=g(o);a.value=Math.floor(Math.random()*(l-n+1))+n,a.value=s.allowFloat?a.value:Math.floor(a.value),a.setValue=!0,e.isSelectableMultiple&&e.isMultipleUseVariable&&(void 0===a.mulValue&&(a.mulValue=[]),a.mulValue.push(a.value))}catch(r){console.error(r)}else if(a.expValue)try{const t=a.expValue.replace(/\{([^{}]+)\}/g,(e,t)=>{const o=i.get(t);if(void 0!==o)return"".concat(o);{const e=At.get(t);if(void 0!==e)return"".concat(e.startingSum)}throw new Error('Undefined variable: "'.concat(t,'"'))});a.value=g(t),a.value=s.allowFloat?a.value:Math.floor(a.value),a.setValue=!0,e.isSelectableMultiple&&e.isMultipleUseVariable&&(void 0===a.mulValue&&(a.mulValue=[]),a.mulValue.push(a.value))}catch(r){console.error(r)}}else a.isRandom&&!a.setValue&&Ho(s,a);let n=a.discountIsOn&&void 0!==a.discountScore&&a.appliedDiscount?a.discountScore:a.value;if(a.multiplyByTimes&&(n*=Math.abs(e.multipleUseVariable)+1),Fo(a.requireds,l)&&!a.isActive){const e=i.get(a.id);void 0!==e?(s.belowZeroNotAllowed&&(o=o&&(t?e-n>=0:e+n>=0)),i.set(a.id,e-n)):(s.belowZeroNotAllowed&&(o=o&&(t?s.startingSum-n>=0:s.startingSum+n>=0)),i.set(a.id,s.startingSum-n))}}}if(e.multiplyPointtypeIsOnCheck&&void 0!==e.pointTypeToMultiply){let t=0;for(let i=0;i<e.pointTypeToMultiply.length;i++){let n=At.get(e.pointTypeToMultiply[i]);if(void 0!==n&&n.belowZeroNotAllowed){let l=n.startingSum;for(let o=Vt.length-1;o>=0;o--){let a=Vt[o];if(a.multiplyPointtypeIsOnCheck&&void 0!==a.startingSumAtMultiply){let e=a.startingSumAtMultiply[i].value*a.startingSumAtMultiply[i].calcVal;e=n.allowFloat?e:Math.floor(e),l-=e,l+=a.startingSumAtMultiply[i].value}if(a.dividePointtypeIsOnCheck&&void 0!==a.startingSumAtDivide){let e=a.startingSumAtDivide[i].value/a.startingSumAtDivide[i].calcVal;e=n.allowFloat?e:Math.floor(e),l-=e,l+=a.startingSumAtDivide[i].value}if(a.setPointtypeIsOnCheck&&void 0!==a.startingSumAtSet&&(l=a.startingSumAtSet[i].value),a.id===e.id){t=o;break}}for(let e=t+1;e<Vt.length;e++){let t=Vt[e];t.multiplyPointtypeIsOnCheck&&void 0!==t.startingSumAtMultiply&&(l*=t.startingSumAtMultiply[i].calcVal,l=n.allowFloat?l:Math.floor(l)),t.dividePointtypeIsOnCheck&&void 0!==t.startingSumAtDivide&&(l/=t.startingSumAtDivide[i].calcVal,l=n.allowFloat?l:Math.floor(l)),t.setPointtypeIsOnCheck&&void 0!==t.startingSumAtSet&&(l=t.startingSumAtSet[i].calcVal,l=n.allowFloat?l:Math.floor(l))}o=o&&l>=0}}}if(e.dividePointtypeIsOnCheck&&void 0!==e.pointTypeToDivide){let t=0;for(let i=0;i<e.pointTypeToDivide.length;i++){let n=At.get(e.pointTypeToDivide[i]);if(void 0!==n&&n.belowZeroNotAllowed){let l=n.startingSum;for(let o=Vt.length-1;o>=0;o--){let a=Vt[o];if(a.multiplyPointtypeIsOnCheck&&void 0!==a.startingSumAtMultiply){let e=a.startingSumAtMultiply[i].value*a.startingSumAtMultiply[i].calcVal;e=n.allowFloat?e:Math.floor(e),l-=e,l+=a.startingSumAtMultiply[i].value}if(a.dividePointtypeIsOnCheck&&void 0!==a.startingSumAtDivide){let e=a.startingSumAtDivide[i].value/a.startingSumAtDivide[i].calcVal;e=n.allowFloat?e:Math.floor(e),l-=e,l+=a.startingSumAtDivide[i].value}if(a.setPointtypeIsOnCheck&&void 0!==a.startingSumAtSet&&(l=a.startingSumAtSet[i].value),a.id===e.id){t=o;break}}for(let e=t+1;e<Vt.length;e++){let t=Vt[e];t.multiplyPointtypeIsOnCheck&&void 0!==t.startingSumAtMultiply&&(l*=t.startingSumAtMultiply[i].calcVal,l=n.allowFloat?l:Math.floor(l)),t.dividePointtypeIsOnCheck&&void 0!==t.startingSumAtDivide&&(l/=t.startingSumAtDivide[i].calcVal,l=n.allowFloat?l:Math.floor(l)),t.setPointtypeIsOnCheck&&void 0!==t.startingSumAtSet&&(l=t.startingSumAtSet[i].calcVal,l=n.allowFloat?l:Math.floor(l))}o=o&&l>=0}}}if(e.setPointtypeIsOnCheck&&void 0!==e.pointTypeToSet){let t=0;for(let i=0;i<e.pointTypeToSet.length;i++){let n=At.get(e.pointTypeToSet[i]);if(void 0!==n&&n.belowZeroNotAllowed){let l=n.startingSum;for(let o=Vt.length-1;o>=0;o--){let a=Vt[o];if(a.multiplyPointtypeIsOnCheck&&void 0!==a.startingSumAtMultiply){let e=a.startingSumAtMultiply[i].value*a.startingSumAtMultiply[i].calcVal;e=n.allowFloat?e:Math.floor(e),l-=e,l+=a.startingSumAtMultiply[i].value}if(a.dividePointtypeIsOnCheck&&void 0!==a.startingSumAtDivide){let e=a.startingSumAtDivide[i].value/a.startingSumAtDivide[i].calcVal;e=n.allowFloat?e:Math.floor(e),l-=e,l+=a.startingSumAtDivide[i].value}if(a.setPointtypeIsOnCheck&&void 0!==a.startingSumAtSet&&(l=a.startingSumAtSet[i].value),a.id===e.id){t=o;break}}for(let e=t+1;e<Vt.length;e++){let t=Vt[e];t.multiplyPointtypeIsOnCheck&&void 0!==t.startingSumAtMultiply&&(l*=t.startingSumAtMultiply[i].calcVal,l=n.allowFloat?l:Math.floor(l)),t.dividePointtypeIsOnCheck&&void 0!==t.startingSumAtDivide&&(l/=t.startingSumAtDivide[i].calcVal,l=n.allowFloat?l:Math.floor(l)),t.setPointtypeIsOnCheck&&void 0!==t.startingSumAtSet&&(l=t.startingSumAtSet[i].calcVal,l=n.allowFloat?l:Math.floor(l))}o=o&&l>=0}}}return o}function Ho(e,t){t.isRandom&&void 0!==t.maxValue&&void 0!==t.minValue&&(t.value=Math.floor(Math.random()*(t.maxValue-t.minValue+1))+t.minValue,t.value=e.allowFloat?t.value:Math.floor(t.value),t.setValue=!0)}function _o(){const e=new Set,t=new Set;function o(i){if(i.activateOtherChoice&&void 0!==i.activateThisChoice)if(i.activatedRandom){if(i.isSelectableMultiple){for(let l=0;l<i.multipleUseVariable;l++)if(void 0!==i.activatedRandomMul)for(var n=0;n<i.activatedRandomMul[n].length;n++){const a=i.activatedRandomMul[l][n].split("/ON#"),r=kt.get(a[0]);if(void 0!==r){const n=r.choice;if(xt.has(n.id)||i.activateAfterReset)i.isAllowDeselect&&!i.activateAfterReset||(i.activateAfterReset&&t.add(n.id),e.add(n.id),a.length>1&&n.isSelectableMultiple&&(void 0===n.tempMultipleValue?n.tempMultipleValue=parseInt(a[1]):n.tempMultipleValue+=parseInt(a[1])),o(n));else{const e=Ot.get(n.id);void 0!==e?a.length>1&&(e.multiple+=parseInt(a[1])):Ot.set(n.id,{multiple:a.length>1?parseInt(a[1]):0,isAllowDeselect:n.isAllowDeselect||!1})}}}}else if(void 0!==i.activatedRandom)for(let l=0;l<i.activatedRandom.length;l++){const n=i.activatedRandom[l].split("/ON#"),a=kt.get(n[0]);if(void 0!==a){const l=a.choice;if(xt.has(l.id)||i.activateAfterReset)i.isAllowDeselect&&!i.activateAfterReset||(i.activateAfterReset&&t.add(l.id),e.add(l.id),n.length>1&&l.isSelectableMultiple&&(void 0===l.tempMultipleValue?l.tempMultipleValue=parseInt(n[1]):l.tempMultipleValue+=parseInt(n[1])),o(l));else{const e=Ot.get(l.id);void 0!==e?n.length>1&&(e.multiple+=parseInt(n[1])):Ot.set(l.id,{multiple:n.length>1?parseInt(n[1]):0,isAllowDeselect:l.isAllowDeselect||!1})}}}}else{const n=i.activateThisChoice.split(",");for(let l=0;l<n.length;l++){const a=n[l].split("/ON#"),r=kt.get(a[0]);if(void 0!==r){const n=r.choice;if(xt.has(n.id)||i.activateAfterReset)i.isAllowDeselect&&!i.activateAfterReset||(i.activateAfterReset&&t.add(n.id),e.add(n.id),a.length>1&&n.isSelectableMultiple&&(void 0===n.tempMultipleValue?n.tempMultipleValue=parseInt(a[1]):n.tempMultipleValue+=parseInt(a[1])),o(n));else{const e=Ot.get(n.id);void 0!==e?a.length>1&&(e.multiple+=parseInt(a[1])):Ot.set(n.id,{multiple:a.length>1?parseInt(a[1]):0,isAllowDeselect:n.isAllowDeselect||!1})}}}}}Ot.clear(),Array.from(xt.entries()).forEach(([t])=>{const i=kt.get(t);if(void 0!==i){const t=i.choice;t.notDeselectedByClean&&(e.add(t.id),o(t))}else{const e=Rt.get(t);void 0!==e&&(e.isTrue=!e.isTrue),xt.delete(t)}});let i=new Set;for(let l of xt.keys())i.add(l);for(let[l,a]of kt)a.choice.isActive&&i.add(l);let n=[...i,...t];for(let l=n.length-1;l>=0;l--){const o=kt.get(n[l]);if(void 0!==o){const i=o.choice;if(delete i.multiplyPointtypeIsOnCheck,delete i.startingSumAtMultiply,delete i.dividePointtypeIsOnCheck,delete i.startingSumAtDivide,delete i.numDiscountChoices,delete i.appliedDisChoices,i.addToAllowChoice&&void 0!==i.idOfAllowChoice&&void 0!==i.numbAddToAllowChoice)for(let e=0;e<i.idOfAllowChoice.length;e++){const t=Bt.get(i.idOfAllowChoice[e]);void 0!==t&&(t.allowedChoices-=i.numbAddToAllowChoice)}if(i.muteBgm&&Ut){const e=u(Ut);app.isMute=!1,e&&"function"==typeof e.unMute&&e.unMute()}if(e.has(i.id))i.isSelectableMultiple&&i.isMultipleUseVariable&&void 0!==i.tempMultipleValue&&(i.multipleUseVariable=i.tempMultipleValue,delete i.tempMultipleValue),t.has(i.id)&&(i.isActive=!0,xt.set(i.id,{multiple:i.isSelectableMultiple&&i.isMultipleUseVariable?i.multipleUseVariable:0}));else{if(delete i.activatedRandom,delete i.activatedRandomMul,i.isContentHidden&&void 0!==i.hiddenContentsRow&&void 0!==i.hiddenContentsType)for(let e=0;e<i.hiddenContentsRow.length;e++){const t=Bt.get(i.hiddenContentsRow[e]);if(void 0!==t)for(let e=0;e<i.hiddenContentsType.length;e++)switch(i.hiddenContentsType[e]){case"1":delete t.objectTitleRemoved;break;case"2":delete t.objectImageRemoved;break;case"3":delete t.objectTextRemoved;break;case"4":delete t.objectScoreRemoved;break;case"5":delete t.objectRequirementRemoved;break;case"6":delete t.addonTitleRemoved;break;case"7":delete t.addonImageRemoved;break;case"8":delete t.addonTextRemoved}}if(i.isChangeVariables&&void 0!==i.changedVariables)for(let e=0;e<i.changedVariables.length;e++){const t=Rt.get(i.changedVariables[e]);void 0!==t&&("1"===i.changeType?t.isTrue=!0:"2"===i.changeType?t.isTrue=!1:"3"===i.changeType&&(t.isTrue=!t.isTrue))}if(i.textfieldIsOn&&void 0!==i.idOfTheTextfieldWord&&void 0!==i.wordChangeSelect){const e=Ft.get(i.idOfTheTextfieldWord);void 0!==e&&(e.replaceText=void 0===i.wordChangeDeselect?"":i.wordChangeDeselect)}if(i.isImageUpload&&void 0!==i.defaultImage&&(i.image=i.defaultImage),i.setBgmIsOn&&Ut&&i.bgmId){const e=u(Ut);e&&e.getId()===i.bgmId&&(e.stop(),Et.bgmIsPlaying=!1,0!==Et.bgmFadeInterval&&(window.clearInterval(Et.bgmFadeInterval),Et.bgmFadeInterval=0),0!==Et.bgmTitleInterval&&(window.clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0),0!==Et.bgmPlayInterval&&(window.clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),Et.lastFadeTime=0,Et.isFadingOut=!1,Et.bgmTitle="No Audio Title",Et.curBgmTime=0,Et.curBgmLength=0)}void 0!==i.initMultipleTimesMinus&&(i.numMultipleTimesMinus=i.initMultipleTimesMinus),i.multipleUseVariable=0,i.isActive=!1,xt.delete(i.id)}}else xt.delete(n[l])}for(let l=0;l<app.pointTypes.length;l++){const e=app.pointTypes[l];e.startingSum=e.initValue}for(let l=0;l<app.rows.length;l++){const e=app.rows[l];e.isEditModeOn=!1,e.currentChoices=0,e.index=l,delete e.isSimpleEditMode,delete e.templateStack,delete e.widthStack;for(let t=0;t<e.objects.length;t++){const o=e.objects[t];o.index=t,delete o.isEditModeOn,void 0!==o.defaultTemplate&&(o.template=o.defaultTemplate),void 0!==o.defaultWidth&&(o.width=o.defaultWidth),o.isActive||(delete o.forcedActivated,delete o.activatedFrom,delete o.numDiscountChoices,delete o.appliedDisChoices),delete o.templateStack,delete o.widthStack;for(let e=0;e<o.scores.length;e++){const t=o.scores[e];o.isSelectableMultiple?(delete t.isActiveMul,delete t.isActiveMulMinus):delete t.isActive,o.notDeselectedByClean||delete t.setValue,Lo(t)}}}for(let l=0;l<app.backpack.length;l++){const e=app.backpack[l];e.isEditModeOn=!1,e.currentChoices=0,e.index=l,delete e.isSimpleEditMode,delete e.templateStack,delete e.widthStack;for(let t=0;t<e.objects.length;t++){const o=e.objects[t];o.index=t,delete o.isEditModeOn,void 0!==o.defaultTemplate&&(o.template=o.defaultTemplate),void 0!==o.defaultWidth&&(o.width=o.defaultWidth),o.isActive||(delete o.forcedActivated,delete o.activatedFrom,delete o.numDiscountChoices,delete o.appliedDisChoices),delete o.templateStack,delete o.widthStack;for(let e=0;e<o.scores.length;e++){const t=o.scores[e];o.isSelectableMultiple?(delete t.isActiveMul,delete t.isActiveMulMinus):delete t.isActive,o.notDeselectedByClean||delete t.setValue,Lo(t)}}}if(void 0!==app.defaultBgColor&&(app.styling.backgroundColor=app.defaultBgColor,delete app.defaultBgColor),void 0!==app.defaultBgImage&&(app.styling.backgroundImage=app.defaultBgImage,delete app.defaultBgImage),void 0!==app.defaultBarBgColor&&(app.styling.barBackgroundColor=app.defaultBarBgColor,delete app.defaultBarBgColor),void 0!==app.defaultBarIconColor&&(app.styling.barIconColor=app.defaultBarIconColor,delete app.defaultBarIconColor),void 0!==app.defaultBarTextColor&&(app.styling.barTextColor=app.defaultBarTextColor,delete app.defaultBarTextColor),delete app.bgColorStack,delete app.bgImageStack,delete app.barBgColorStack,delete app.barIconColorStack,delete app.barTextColorStack,app.btnBackpackIsOn=0,app.showAllAddons=0,app.isMute=!1,app.curVolume=100,Ut){const e=u(Ut);e&&"function"==typeof e.unMute&&e.unMute()}Vt.splice(0),n=[...xt.keys()];for(let l=0;l<n.length;l++){const e=kt.get(n[l]);if(void 0!==e){const t=e.choice;if(Fo(t.requireds)&&Go(t,!0)){if(t.discountOther&&void 0!==t.discountOperator&&void 0!==t.discountValue)if(t.isDisChoices){if(void 0!==t.discountChoices)for(let e=0;e<t.discountChoices.length;e++){const o=kt.get(t.discountChoices[e]);void 0!==o&&No(t,o.choice)}}else if(void 0!==t.discountGroups)for(let e=0;e<t.discountGroups.length;e++){const o=Mt.get(t.discountGroups[e]);if(void 0!==o)for(let e=0;e<o.elements.length;e++){const i=kt.get(o.elements[e]);void 0!==i&&No(t,i.choice)}}if(t.addToAllowChoice&&void 0!==t.idOfAllowChoice&&void 0!==t.numbAddToAllowChoice)for(let e=0;e<t.idOfAllowChoice.length;e++){const o=Bt.get(t.idOfAllowChoice[e]);void 0!==o&&(o.allowedChoices+=t.numbAddToAllowChoice)}}}}for(let l=0;l<n.length;l++){const e=kt.get(n[l]);if(void 0!==e){const t=e.choice,o=e.row;if(Fo(t.requireds)&&Go(t,!0)){for(let e=0;e<t.scores.length;e++){const o=t.scores[e],i=At.get(o.id);if(void 0!==i)if(t.isSelectableMultiple&&t.isMultipleUseVariableultiple)for(let e=0;e<t.multipleUseVariable;e++)Fo(o.requireds)&&(void 0===o.isActiveMul&&(o.isActiveMul=[]),o.isActiveMul[e]||(o.multiplyByTimes?i.startingSum-=o.discountIsOn&&void 0!==o.discountScore?o.discountScore*(e+1):o.value*(e+1):i.startingSum-=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value,o.isActiveMul[e]=!0));else t.isSelectableMultiple||Fo(o.requireds)&&!o.isActive&&(i.startingSum-=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value,o.isActive=!0)}if(t.multiplyPointtypeIsOn&&void 0!==t.pointTypeToMultiply&&void 0!==t.multiplyWithThis){let e=0;t.multiplyPointtypeIsOnCheck=!0,"object"!=typeof t.startingSumAtMultiply&&(t.startingSumAtMultiply=[]);for(let o=0;o<t.pointTypeToMultiply.length;o++){let i=At.get(t.pointTypeToMultiply[o]);if(void 0!==i)if(t.multiplyPointtypeIsId&&"string"==typeof t.multiplyWithThis){let n=At.get(t.multiplyWithThis);void 0!==n?(t.startingSumAtMultiply[o]={value:i.startingSum,calcVal:n.startingSum},i.startingSum*=n.startingSum):e++}else"number"==typeof t.multiplyWithThis&&(t.startingSumAtMultiply[o]={value:i.startingSum,calcVal:t.multiplyWithThis},i.startingSum*=t.multiplyWithThis);else e++}e===t.pointTypeToMultiply.length&&delete t.multiplyPointtypeIsOnCheck,t.multiplyPointtypeIsOnCheck&&Vt.push(t)}if(t.dividePointtypeIsOn&&void 0!==t.pointTypeToDivide&&void 0!==t.divideWithThis){let e=0;t.dividePointtypeIsOnCheck=!0,"object"!=typeof t.startingSumAtDivide&&(t.startingSumAtDivide=[]);for(let o=0;o<t.pointTypeToDivide.length;o++){let i=At.get(t.pointTypeToDivide[o]);if(void 0!==i)if(t.dividePointtypeIsId&&"string"==typeof t.divideWithThis){let n=At.get(t.divideWithThis);void 0!==n?0===n.startingSum?e++:(t.startingSumAtDivide[o]={value:i.startingSum,calcVal:n.startingSum},i.startingSum/=n.startingSum):e++}else"number"==typeof t.divideWithThis&&(0===t.dividedWithThis?e++:(t.startingSumAtDivide[o]={value:i.startingSum,calcVal:t.divideWithThis},i.startingSum/=t.divideWithThis));else e++}e===t.pointTypeToDivide.length&&delete t.dividePointtypeIsOnCheck,!t.multiplyPointtypeIsOnCheck&&t.dividePointtypeIsOnCheck&&Vt.push(t)}if(t.changeBackground&&(t.changeBgImage?void 0!==t.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:t.id,data:t.bgImage}),app.styling.backgroundImage=t.bgImage):void 0!==t.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:t.id,data:t.changedBgColorCode}),app.styling.backgroundColor=t.changedBgColorCode)),t.changePointBar&&(t.changeBarBgColorIsOn&&void 0!==t.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:t.id,data:t.changedBarBgColor}),app.styling.barBackgroundColor=t.changedBarBgColor),t.changeBarIconColorIsOn&&void 0!==t.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:t.id,data:t.changedBarIconColor}),app.styling.barIconColor=t.changedBarIconColor),t.changeBarTextColorIsOn&&void 0!==t.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:t.id,data:t.changedBarTextColor}),app.styling.barTextColor=t.changedBarTextColor)),t.changeTemplates&&t.changeTemplatesList&&t.changeToThisTemplate){const e=t.changeTemplatesList.split(",");for(let o=0;o<e.length;o++){const i=e[o],n=kt.get(i);if(void 0!==n){const e=n.choice;if(Ni(e,t.id,t.changeToThisTemplate),t.changeAddonTemplate)for(let o=0;o<e.addons.length;o++){Ni(e.addons[o],t.id,t.changeToThisTemplate)}continue}const l=Bt.get(i);if(void 0!==l){Ni(l,t.id,t.changeToThisTemplate);continue}const a=Mt.get(i);if(void 0!==a){const e=a.rowElements;for(let i=0;i<e.length;i++){const o=Bt.get(e[i]);void 0!==o&&Ni(o,t.id,t.changeToThisTemplate)}const o=a.elements;for(let i=0;i<o.length;i++){const e=kt.get(o[i]);if(void 0!==e){Ni(e.choice,t.id,t.changeToThisTemplate)}}continue}}}if(t.changeWidth&&t.changeWidthList&&t.changeToThisWidth){const e=t.changeWidthList.split(",");for(let o=0;o<e.length;o++){const i=e[o],n=kt.get(i);if(void 0!==n){zi(n.choice,t.id,t.changeToThisWidth);continue}const l=Bt.get(i);if(void 0!==l){zi(l,t.id,t.changeToThisWidth);continue}const a=Mt.get(i);if(void 0!==a){const e=a.rowElements;for(let i=0;i<e.length;i++){const o=Bt.get(e[i]);void 0!==o&&zi(o,t.id,t.changeToThisWidth)}const o=a.elements;for(let i=0;i<o.length;i++){const e=kt.get(o[i]);if(void 0!==e){zi(e.choice,t.id,t.changeToThisWidth)}}continue}}}if(t.muteBgm&&Ut){const e=u(Ut);app.isMute=!0,e&&"function"==typeof e.mute&&e.mute()}t.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),t.showAllAddons&&(app.showAllAddons+=1),o.currentChoices+=1}else{if(t.discountOther&&void 0!==t.discountOperator&&void 0!==t.discountValue)if(t.isDisChoices){if(void 0!==t.discountChoices)for(let e=0;e<t.discountChoices.length;e++){const o=kt.get(t.discountChoices[e]);void 0!==o&&Uo(t,o.choice)}}else if(void 0!==t.discountGroups)for(let e=0;e<t.discountGroups.length;e++){const o=Mt.get(t.discountGroups[e]);if(void 0!==o)for(let e=0;e<o.elements.length;e++){const i=kt.get(o.elements[e]);void 0!==i&&Uo(t,i.choice)}}if(t.addToAllowChoice&&void 0!==t.idOfAllowChoice&&void 0!==t.numbAddToAllowChoice)for(let e=0;e<t.idOfAllowChoice.length;e++){const o=Bt.get(t.idOfAllowChoice[e]);void 0!==o&&(o.allowedChoices-=t.numbAddToAllowChoice)}xt.delete(t.id),t.forcedActivated&&Ot.set(t.id,{multiple:t.multipleUseVariable})}}else xt.delete(n[l])}}function Yo(e,t,o=!1,i){let n=t;if(t.isResultRow||t.isGroupRow){const t=kt.get(e.id);void 0!==t&&(n=t.row)}!Fo(e.requireds)||t.isInfoRow||o&&e.isNotSelectable||e.forcedActivated||(e.isActive?e.selectOnce||ti(e,n,i):oi(e,n,i))}function Zo(e,t,o,i,n){if(!t.isNotSelectable||!e.isNotActiveUnselectable){let l=!1;if(t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===n.linkedObjects.indexOf(e.id)&&t.activateThisChoice.split(",").some(t=>t.split("/ON#")[0]===e.id)&&(n.linkedObjects.push(e.id),l=!0),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss){let l=t.multipleUseVariable;if(i>0)for(let a=0;a<i;a++)ii(t,o,n),l++,e.isAllowDeselect||(t.numMultipleTimesMinus+=1);else if(i<0)for(let a=0;a>-1*i;a++)ni(t,o,n),l--,e.isAllowDeselect||(t.numMultipleTimesPluss-=1);if(t.multipleUseVariable!==l){const o=Math.abs(t.numMultipleTimesMinus-t.numMultipleTimesPluss);if(t.numMultipleTimesMinus>t.numMultipleTimePluss){const n=Ot.get(t.id);i>0?(t.numMultipleTimesMinus-=o,void 0!==n?n.multiple+=o:Ot.set(t.id,{multiple:o,isAllowDeselect:e.isAllowDeselect||!1})):i<0&&(void 0!==n?n.multiple-=o:Ot.set(t.id,{multiple:-o,isAllowDeselect:e.isAllowDeselect||!1}))}}}}else t.isActive||Yo(t,o,!1,n),e.isAllowDeselect||(t.forcedActivated=!0),void 0===t.activatedFrom&&(t.activatedFrom=0),l||t.activatedFrom++;t.isActive||(delete t.forcedActivated,Ot.set(t.id,{multiple:i,isAllowDeselect:e.isAllowDeselect||!1}))}}function Jo(e,t,o,i,n){if(t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===n.linkedObjects.indexOf(e.id)&&t.activateThisChoice.split(",").some(t=>t.split("/ON#")[0]===e.id)&&n.linkedObjects.push(e.id),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss)if(t.isActive){if(i>0)for(let l=0;l<i;l++)e.isAllowDeselect||(t.numMultipleTimesMinus-=1),e.isNotDeactivate||ni(t,o,n);else if(i<0)for(let l=0;l>-1*i;l++)e.isAllowDeselect||(t.numMultipleTimesPluss+=1),e.isNotDeactivate||ii(t,o,n)}else{const o=Ot.get(t.id);let n=0;void 0!==o?(n=o.multiple-i,0===n?Ot.delete(t.id):Ot.set(t.id,{multiple:n,isAllowDeselect:e.isAllowDeselect||!1})):Ot.delete(t.id)}}else void 0!==t.activatedFrom?(t.activatedFrom--,(t.activatedFrom<=0||-1!==n.linkedObjects.indexOf(e.id))&&(t.isActive?(delete t.activatedFrom,delete t.forcedActivated,e.isNotDeactivate||ti(t,o,n)):Ot.delete(t.id))):(delete t.forcedActivated,!e.isNotDeactivate&&t.isActive&&ti(t,o,n))}function Xo(e,t){if(void 0!==e.activateThisChoice){let o=e.activateThisChoice.split(","),i=new Map;for(let e=0;e<o.length;e++){let[t,n="0"]=o[e].split("/ON#"),l=parseInt(n),a=Mt.get(t);if(void 0!==a)for(let e=0;e<a.elements.length;e++){const t=kt.get(a.elements[e]);if(void 0!==t){const e=t.choice,o=e.isSelectableMultiple&&e.isMultipleUseVariable&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss>=e.multipleUseVariable+l&&!e.isInfoRow&&!e.isNotSelectable&&Fo(e.requireds);xt.has(e.id)&&!o||i.set(e.id,l)}}else{const e=kt.get(t);if(void 0!==e){const o=e.choice,n=o.isSelectableMultiple&&o.isMultipleUseVariable&&void 0!==o.numMultipleTimesPluss&&o.numMultipleTimesPluss>=o.multipleUseVariable+l&&!o.isInfoRow&&!o.isNotSelectable&&Fo(o.requireds);xt.has(t)&&!n||i.set(t,l)}}}let n=[...i.keys()],l=Math.min(n.length,e.numActivateRandom||0),a=l;for(let e=n.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}let r=[];for(let s=0;s<l;){const o=n[s],c=kt.get(o);if(void 0!==c){const d=c.row,u=c.choice,g=i.get(o)||0,p=u.multipleUseVariable;if(Zo(e,u,d,g,t),!u.isActive||u.isSelectableMultiple&&u.isMultipleUseVariable&&u.multipleUseVariable===p){if(r.length<l&&n.length>a){n[s]=n[a++],void 0!==u.activatedFrom&&(u.activatedFrom--,0===u.activatedFrom&&Ot.delete(u.id));continue}break}let m=g>0?"".concat(o,"/ON#").concat(g):o;r.push(m)}s++}e.isSelectableMultiple?(void 0===e.activatedRandomMul&&(e.activatedRandomMul=[]),e.activatedRandomMul[e.multipleUseVariable-1]=[...r]):e.activatedRandom=[...r]}}function Ko(e,t,o,i=new Set,l=[],a){const r=Array.from(xt.keys());for(let s=r.length-1;s>=0;s--){const c=r[s],d=kt.get(c);if(void 0!==d){const r=d.row,s=d.choice,c=new n,u=new Set,g=new Set;let p=new Set,m=!1,h=!1,v=e.appliedDisChoices?e.appliedDisChoices.indexOf(s.id):-1;for(let o=0;o<s.scores.length;o++){const l=s.scores[o];if(!l.isNotRecalculatable){const o=At.get(l.id);if(void 0!==o){if(e.discountOther&&l.isChangeDiscount&&l.isActive&&void 0!==l.tmpDisScore&&(!e.useDiscountCount||e.useDiscountCount&&e.appliedDisChoices)){const t=s.multipleUseVariable;let i=!1;if(e.useDiscountCount&&l.discountedFrom&&l.discountedFrom.length>0)if(-1!==v)for(let o=0;o<l.discountedFrom.length;o++){const t=kt.get(l.discountedFrom[o]);if(void 0!==t){const o=t.choice,n=o.isSelectableMultiple&&o.isMultipleUseVariable&&o.stackableDiscount&&o.discountCount?o.discountCount*o.multipleUseVariable+Number(e.id===o.id):o.discountCount;o.useDiscountCount&&o.appliedDisChoices&&n&&n>o.appliedDisChoices.length&&(o.id!==e.id&&p.add(o),i=!0)}}else i=!0;if(i){delete l.isChangeDiscount,delete l.tmpDisScore;continue}if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){for(let e=t-1;e>=0;e--)s.isActive&&(o.belowZeroNotAllowed&&o.startingSum+l.tmpDisScore<0?s.forcedActivated&&s.isActive?(s.forcedActivated=!1,s.numMultipleTimesMinus--,ni(s,r,a),s.forcedActivated=!0):ni(s,r,a):o.startingSum+=l.tmpDisScore);s.isActive&&(c.set(l.id,l.tmpDisScore),delete l.isChangeDiscount,delete l.tmpDisScore)}else if(!s.isSelectableMultiple)if(o.belowZeroNotAllowed&&o.startingSum+l.tmpDisScore<0)if(s.forcedActivated&&(delete s.forcedActivated,s.isAllowDeselect||Ot.set(s.id,{multiple:s.multipleUseVariable})),s.isSelectableMultiple&&s.isMultipleUseVariable)for(let e=0;e<s.multipleUseVariable;e++)s.isActive&&ni(s,r,a);else s.isActive&&ti(s,r,a);else o.startingSum+=l.tmpDisScore,c.set(l.id,l.tmpDisScore),delete l.isChangeDiscount,delete l.tmpDisScore;m=e.id!==s.id,l.discountIsOn||delete l.appliedDiscount,h=!0}if(!i.has(l.idx)){const d=e.scores.length>0,p=e.scores.length||1;for(let h=0;h<p;h++){const p=d?e.scores[h]:null,v=p&&t.get(p.id)||0,f=p?At.get(p.id):null;if((!d||d&&f)&&s.isActive){const t=Fo(l.requireds),d=new n(JSON.parse(JSON.stringify([...xt])));d.set(e.id,{multiple:e.multipleUseVariable}),r.currentChoices+=1,f&&(f.startingSum+=v);const p=Fo(l.requireds,d);if(r.currentChoices-=1,f&&(f.startingSum-=v),p!==t){l.setValue||Ho(o,l);let e=l.discountIsOn&&void 0!==l.discountScore&&l.appliedDiscount?l.discountScore:l.value;e=o.allowFloat?e:Math.floor(e);let t=!1;if(p){if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){for(let i=s.multipleUseVariable-1;i>=0;i--)void 0!==l.isActiveMul&&l.isActiveMul[i]&&(o.belowZeroNotAllowed&&o.startingSum+e<0?s.forcedActivated&&s.isActive?(s.forcedActivated=!1,s.numMultipleTimesMinus--,ni(s,r,a),s.forcedActivated=!0):ni(s,r,a):(o.startingSum+=e,c.set(l.id,e),l.isActiveMul[i]=!1,t||(t=!0)))}else s.isSelectableMultiple||l.isActive&&(o.belowZeroNotAllowed&&o.startingSum+e<0?(s.forcedActivated&&delete s.forcedActivated,ti(s,r,a)):(o.startingSum+=e,c.set(l.id,e),delete l.isActive,t=!0));if(t&&l.discountIsOn&&l.appliedDiscount&&l.discountedFrom)for(let e=0;e<l.discountedFrom.length;e++){const t=kt.get(l.discountedFrom[e]);if(void 0!==t){const e=t.choice;if(e.useDiscountCount&&void 0!==e.discountCount&&e.appliedDisChoices&&-1!==e.appliedDisChoices.indexOf(s.id)){delete l.appliedDiscount,g.add(e);break}delete l.appliedDiscount;break}}l.setValue&&delete l.setValue}else{if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){const i=s.multipleUseVariable;void 0===l.isActiveMul&&(l.isActiveMul=[]);for(let n=i-1;n>=0;n--)l.isActiveMul[n]||(o.belowZeroNotAllowed&&o.startingSum+e<0?s.forcedActivated&&s.isActive?(s.forcedActivated=!1,s.numMultipleTimesMinus--,ni(s,r,a),s.forcedActivated=!0):ni(s,r,a):(o.startingSum-=e,c.set(l.id,e),l.isActiveMul[n]=!0,t||(t=!0)))}else s.isSelectableMultiple||l.isActive||(o.belowZeroNotAllowed&&o.startingSum-e<0?(s.forcedActivated&&delete s.forcedActivated,ti(s,r,a)):(o.startingSum-=e,c.set(l.id,e),l.isActive=!0,t=!0));if(t&&l.discountIsOn&&!l.appliedDiscount&&l.discountedFrom)for(let e=0;e<l.discountedFrom.length;e++){const t=kt.get(l.discountedFrom[e]);if(void 0!==t){const e=t.choice;if(!e.useDiscountCount||void 0===e.discountCount){l.appliedDiscount=!0;break}{const t=e.isSelectableMultiple&&e.isMultipleUseVariable&&e.stackableDiscount?e.discountCount*e.multipleUseVariable:e.discountCount;if(e.appliedDisChoices||(e.appliedDisChoices=[]),t>e.appliedDisChoices.length||-1!==e.appliedDisChoices.indexOf(s.id)){l.appliedDiscount=!0,u.add(e);break}}}}}m||(m=!0),i.add(l.idx)}}}}}}}if(p.size>0){const t=Array.from(p);for(let o=0;o<t.length;o++){const i=t[o];i.appliedDisChoices||(i.appliedDisChoices=[]),-1===i.appliedDisChoices.indexOf(s.id)&&i.appliedDisChoices.push(s.id),-1!==v&&e.appliedDisChoices.splice(v,1)}}h&&e.appliedDisChoices&&-1!==v&&e.appliedDisChoices.splice(v,1),g.size>0&&g.forEach(e=>{if(e.appliedDisChoices&&!e.scores.some(e=>e.appliedDiscount)){const t=e.appliedDisChoices.indexOf(s.id);-1!==t&&e.appliedDisChoices.splice(t,1)}}),u.size>0&&u.forEach(e=>{e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(s.id)&&e.appliedDisChoices.push(s.id)}),m&&(0===l.length?l.push("Scores Updated On: ".concat(s.title)):l.push(", ".concat(s.title)),Ko(s,c,o+1,i,l,a))}}if(0===o){if(l.length>0&&!app.hideScoresUpdated){const e=document.createElement("div");e.innerHTML=l.join(""),Ht.labelText=e.textContent,Ht.isOpen=!0}l.splice(0)}}function Qo(e,t,o,i=new Set,l=[],a){const r=Array.from(xt.keys());for(let s=0;s<r.length;s++){const c=r[s],d=kt.get(c);if(void 0!==d){const r=d.row,s=d.choice,c=new n,u=new Set,g=new Set;let p=!1,m=!1;e&&e.useDiscountCount&&!e.appliedDisChoices&&(e.appliedDisChoices=[]);for(let o=0;o<s.scores.length;o++){const l=s.scores[o];if(!l.isNotRecalculatable){const o=At.get(l.id);if(void 0!==o){if(e&&e.discountOther&&l.isChangeDiscount&&l.isActive&&void 0!==l.tmpDisScore&&s.id!==e.id){const t=s.multipleUseVariable,i=e.isSelectableMultiple&&e.isMultipleUseVariable&&e.stackableDiscount&&e.discountCount?e.discountCount*e.multipleUseVariable:e.discountCount;if(!e.useDiscountCount||e.useDiscountCount&&i&&i>e.appliedDisChoices.length){if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){for(let e=t-1;e>=0;e--)s.isActive&&(o.belowZeroNotAllowed&&o.startingSum+l.tmpDisScore<0?s.forcedActivated&&s.isActive?(s.forcedActivated=!1,s.numMultipleTimesMinus--,ni(s,r,a),s.forcedActivated=!0):ni(s,r,a):o.startingSum+=l.tmpDisScore);s.isActive&&(c.set(l.id,l.tmpDisScore),delete l.isChangeDiscount,delete l.tmpDisScore)}else s.isSelectableMultiple||(o.belowZeroNotAllowed&&o.startingSum+l.tmpDisScore<0?(s.forcedActivated&&delete s.forcedActivated,ti(s,r,a)):(o.startingSum+=l.tmpDisScore,c.set(l.id,l.tmpDisScore),delete l.isChangeDiscount,delete l.tmpDisScore));m=!0,s.isActive&&(l.appliedDiscount=!0,p=!0)}}if(!i.has(l.idx)){const d=e&&e.scores.length>0,p=e&&e.scores.length||1;for(let h=0;h<p;h++){const p=d?e.scores[h]:null,v=p&&t.get(p.id)||0,f=p?At.get(p.id):null,b=e?null:At.get(t.keys().next().value||""),w=b&&t.values().next().value||0;if((!d||d&&f)&&s.isActive&&!l.isChanged){const t=Fo(l.requireds),d=new n(JSON.parse(JSON.stringify([...xt])));e?(d.delete(e.id),r.currentChoices-=1,f&&(f.startingSum+=v)):b&&(b.startingSum-=w);const p=Fo(l.requireds,d);if(e?(r.currentChoices+=1,f&&(f.startingSum-=v)):b&&(b.startingSum+=w),p!==t){l.setValue||Ho(o,l);let e=l.discountIsOn&&void 0!==l.discountScore&&l.appliedDiscount?l.discountScore:l.value;e=o.allowFloat?e:Math.floor(e);let t=!1;if(p){if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){for(let i=s.multipleUseVariable-1;i>=0;i--)void 0!==l.isActiveMul&&l.isActiveMul[i]&&(o.belowZeroNotAllowed&&o.startingSum+e<0?s.forcedActivated&&s.isActive?(s.forcedActivated=!1,s.numMultipleTimesMinus--,ni(s,r,a),s.forcedActivated=!0):ni(s,r,a):(o.startingSum+=e,c.set(l.id,e),l.isActiveMul[i]=!1,t||(t=!0)))}else s.isSelectableMultiple||l.isActive&&(o.belowZeroNotAllowed&&o.startingSum+e<0?(s.forcedActivated&&delete s.forcedActivated,ti(s,r,a)):(o.startingSum+=e,c.set(l.id,e),delete l.isActive,t=!0));if(t&&l.discountIsOn&&l.appliedDiscount&&l.discountedFrom)for(let e=0;e<l.discountedFrom.length;e++){const t=kt.get(l.discountedFrom[e]);if(void 0!==t){const e=t.choice;if(e.useDiscountCount&&void 0!==e.discountCount&&e.appliedDisChoices&&-1!==e.appliedDisChoices.indexOf(s.id)){delete l.appliedDiscount,g.add(e);break}delete l.appliedDiscount;break}}l.setValue&&delete l.setValue}else{if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){const i=s.multipleUseVariable;void 0===l.isActiveMul&&(l.isActiveMul=[]);for(let n=i-1;n>=0;n--)l.isActiveMul[n]||(o.belowZeroNotAllowed&&o.startingSum+e<0?s.forcedActivated&&s.isActive?(s.forcedActivated=!1,s.numMultipleTimesMinus--,ni(s,r,a),s.forcedActivated=!0):ni(s,r,a):(o.startingSum-=e,c.set(l.id,e),l.isActiveMul[n]=!0,t||(t=!0)))}else s.isSelectableMultiple||l.isActive||(o.belowZeroNotAllowed&&o.startingSum-e<0?(s.forcedActivated&&delete s.forcedActivated,ti(s,r,a)):(o.startingSum-=e,c.set(l.id,e),l.isActive=!0,t=!0));if(t&&l.discountIsOn&&!l.appliedDiscount&&l.discountedFrom)for(let e=0;e<l.discountedFrom.length;e++){const t=kt.get(l.discountedFrom[e]);if(void 0!==t){const e=t.choice;if(!e.useDiscountCount||void 0===e.discountCount){l.appliedDiscount=!0;break}{const t=e.isSelectableMultiple&&e.isMultipleUseVariable&&e.stackableDiscount?e.discountCount*e.multipleUseVariable:e.discountCount;if(e.appliedDisChoices||(e.appliedDisChoices=[]),t>e.appliedDisChoices.length||-1!==e.appliedDisChoices.indexOf(s.id)){l.appliedDiscount=!0,u.add(e);break}}}}}m||(m=!0),i.add(l.idx)}}}}}}}p&&e&&e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(s.id)&&e.appliedDisChoices.push(s.id),g.size>0&&g.forEach(e=>{if(e.appliedDisChoices&&!e.scores.some(e=>e.appliedDiscount)){const t=e.appliedDisChoices.indexOf(s.id);-1!==t&&e.appliedDisChoices.splice(t,1)}}),u.size>0&&u.forEach(e=>{e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(s.id)&&e.appliedDisChoices.push(s.id)}),m&&(0===l.length?l.push("Scores Updated On: ".concat(s.title)):l.push(", ".concat(s.title)),Qo(s,c,o+1,i,l,a))}}if(0===o){if(l.length>0&&!app.hideScoresUpdated){const e=document.createElement("div");e.innerHTML=l.join(""),Ht.labelText=e.textContent,Ht.isOpen=!0}l.splice(0)}}function ei(e){let t=!1;Array.from(Ot.entries()).forEach(([o,i])=>{const n=kt.get(o);if(void 0!==n){const l=n.row,a=n.choice;a.isActive||(Yo(a,l,!1,e),a.isActive&&(Ot.delete(o),t=!0,i.isAllowDeselect||(a.forcedActivated=!0)))}}),t&&ei(e)}function ti(e,t,o){if(Go(e,!1)){const i=()=>{const i=new n;let l=new Set;for(let t=0;t<e.scores.length;t++){const o=e.scores[t];if(Fo(o.requireds)&&o.isActive||o.isActive){const e=At.get(o.id);if(void 0!==e){let t=o.value;if(o.discountIsOn&&void 0!==o.discountScore&&o.appliedDiscount){if(o.discountedFrom&&o.discountedFrom.length>0)for(let e=0;e<o.discountedFrom.length;e++){const t=kt.get(o.discountedFrom[e]);if(void 0!==t){const e=t.choice;if(e.useDiscountCount&&void 0!==e.discountCount&&e.appliedDisChoices&&e.appliedDisChoices.length>0){l.add(e);break}}}t=o.discountScore}t=e.allowFloat?t:Math.floor(t),e.startingSum+=t;let n=i.get(o.id);void 0!==n?i.set(o.id,-t+n):i.set(o.id,-t),delete o.isActive,delete o.setValue,delete o.appliedDiscount}}else delete o.setValue,delete o.appliedDiscount}if(l.size>0&&l.forEach(t=>{if(t.appliedDisChoices){const o=t.appliedDisChoices.indexOf(e.id);-1!==o&&t.appliedDisChoices.splice(o,1)}}),e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandom){for(let t=0;t<e.activatedRandom.length;t++){const i=kt.get(e.activatedRandom[t]);if(void 0!==i){const t=i.row,n=i.choice;Jo(e,n,t,0,o)}}delete e.activatedRandom}else{const t=e.activateThisChoice.split(",");for(let i=0;i<t.length;i++){const n=t[i].split("/ON#"),l=n.length>1?parseInt(n[1]):0,a=kt.get(n[0]);if(void 0!==a){const t=a.row,i=a.choice;Jo(e,i,t,l,o)}else{const t=Mt.get(n[0]);if(void 0!==t){const i=t.elements;for(let t=0;t<i.length;t++){const n=kt.get(i[t]);if(void 0!==n){const t=n.row,i=n.choice;Jo(e,i,t,l,o)}}}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(void 0===e.discountPointTypes&&(e.discountPointTypes=[]),e.isDisChoices){const t=new Set;if(void 0!==e.discountRows)for(let o=0;o<e.discountRows.length;o++){const i=Bt.get(e.discountRows[o]);if(void 0!==i)for(let o=0;o<i.objects.length;o++){const n=i.objects[o];Uo(e,n),t.add(n.id)}}if(void 0!==e.discountChoices)for(let o=0;o<e.discountChoices.length;o++)if(!t.has(e.discountChoices[o])){const t=kt.get(e.discountChoices[o]);void 0!==t&&Uo(e,t.choice)}}else if(void 0!==e.discountGroups)for(let t=0;t<e.discountGroups.length;t++){const o=Mt.get(e.discountGroups[t]);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=kt.get(o.elements[t]);void 0!==i&&Uo(e,i.choice)}}if(e.isActive=!1,t.currentChoices-=1,xt.delete(e.id),Array.from(xt.entries()).forEach(([t,i])=>{const n=kt.get(t);if(void 0!==n){const t=n.row,l=n.choice;if(l.id!==e.id&&!Fo(l.requireds))if(l.forcedActivated&&(delete l.forcedActivated,l.isAllowDeselect||Ot.set(l.id,{multiple:i.multiple})),0===i.multiple)l.isActive&&ti(l,t,o);else if(i.multiple>0)for(let e=0;e<i.multiple;e++)l.isActive&&ni(l,t,o)}}),e.multiplyPointtypeIsOnCheck&&void 0!==e.pointTypeToMultiply){let t=0;for(let o=0;o<e.pointTypeToMultiply.length;o++){let i=At.get(e.pointTypeToMultiply[o]);if(void 0!==i){for(let n=Vt.length-1;n>=0;n--){let l=Vt[n];if(l.multiplyPointtypeIsOnCheck&&void 0!==l.startingSumAtMultiply){let e=l.startingSumAtMultiply[o].value*l.startingSumAtMultiply[o].calcVal;e=i.allowFloat?e:Math.floor(e),i.startingSum-=e,i.startingSum+=l.startingSumAtMultiply[o].value}if(l.dividePointtypeIsOnCheck&&void 0!==l.startingSumAtDivide){let e=l.startingSumAtDivide[o].value/l.startingSumAtDivide[o].calcVal;e=i.allowFloat?e:Math.floor(e),i.startingSum-=e,i.startingSum+=l.startingSumAtDivide[o].value}if(l.setPointtypeIsOnCheck&&void 0!==l.startingSumAtSet&&(i.startingSum=l.startingSumAtSet[o].value),l.id===e.id){t=n;break}}for(let e=t+1;e<Vt.length;e++){let t=Vt[e];t.multiplyPointtypeIsOnCheck&&void 0!==t.startingSumAtMultiply&&(t.startingSumAtMultiply[o].value=i.startingSum,i.startingSum*=t.startingSumAtMultiply[o].calcVal,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)),t.dividePointtypeIsOnCheck&&void 0!==t.startingSumAtDivide&&(t.startingSumAtDivide[o].value=i.startingSum,i.startingSum/=t.startingSumAtDivide[o].calcVal,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)),t.setPointtypeIsOnCheck&&void 0!==t.startingSumAtSet&&(t.startingSumAtSet[o].value=i.startingSum,i.startingSum=t.startingSumAtSet[o].calcVal,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum))}}}delete e.multiplyPointtypeIsOnCheck,delete e.startingSumAtMultiply,e.dividePointtypeIsOnCheck||e.setPointtypeIsOnCheck||Vt.splice(t,1)}if(e.dividePointtypeIsOnCheck&&void 0!==e.pointTypeToDivide){let t=0;for(let o=0;o<e.pointTypeToDivide.length;o++){let i=At.get(e.pointTypeToDivide[o]);if(void 0!==i){for(let n=Vt.length-1;n>=0;n--){let l=Vt[n];if(l.multiplyPointtypeIsOnCheck&&void 0!==l.startingSumAtMultiply){let e=l.startingSumAtMultiply[o].value*l.startingSumAtMultiply[o].calcVal;e=i.allowFloat?e:Math.floor(e),i.startingSum-=e,i.startingSum+=l.startingSumAtMultiply[o].value}if(l.dividePointtypeIsOnCheck&&void 0!==l.startingSumAtDivide){let e=l.startingSumAtDivide[o].value/l.startingSumAtDivide[o].calcVal;e=i.allowFloat?e:Math.floor(e),i.startingSum-=e,i.startingSum+=l.startingSumAtDivide[o].value}if(l.setPointtypeIsOnCheck&&void 0!==l.startingSumAtSet&&(i.startingSum=l.startingSumAtSet[o].value),l.id===e.id){t=n;break}}for(let e=t+1;e<Vt.length;e++){let t=Vt[e];t.multiplyPointtypeIsOnCheck&&void 0!==t.startingSumAtMultiply&&(t.startingSumAtMultiply[o].value=i.startingSum,i.startingSum*=t.startingSumAtMultiply[o].calcVal,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)),t.dividePointtypeIsOnCheck&&void 0!==t.startingSumAtDivide&&(t.startingSumAtDivide[o].value=i.startingSum,i.startingSum/=t.startingSumAtDivide[o].calcVal,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)),t.setPointtypeIsOnCheck&&void 0!==t.startingSumAtSet&&(t.startingSumAtSet[o].value=i.startingSum,i.startingSum=t.startingSumAtSet[o].calcVal,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum))}}}delete e.dividePointtypeIsOnCheck,delete e.startingSumAtDivide,e.setPointtypeIsOnCheck||Vt.splice(t,1)}if(e.setPointtypeIsOnCheck&&void 0!==e.pointTypeToSet){let t=0;for(let o=0;o<e.pointTypeToSet.length;o++){let i=At.get(e.pointTypeToSet[o]);if(void 0!==i){for(let n=Vt.length-1;n>=0;n--){let l=Vt[n];if(l.multiplyPointtypeIsOnCheck&&void 0!==l.startingSumAtMultiply){let e=l.startingSumAtMultiply[o].value*l.startingSumAtMultiply[o].calcVal;e=i.allowFloat?e:Math.floor(e),i.startingSum-=e,i.startingSum+=l.startingSumAtMultiply[o].value}if(l.dividePointtypeIsOnCheck&&void 0!==l.startingSumAtDivide){let e=l.startingSumAtDivide[o].value/l.startingSumAtDivide[o].calcVal;e=i.allowFloat?e:Math.floor(e),i.startingSum-=e,i.startingSum+=l.startingSumAtDivide[o].value}if(l.setPointtypeIsOnCheck&&void 0!==l.startingSumAtSet&&(i.startingSum=l.startingSumAtSet[o].value),l.id===e.id){t=n;break}}for(let e=t+1;e<Vt.length;e++){let t=Vt[e];t.multiplyPointtypeIsOnCheck&&void 0!==t.startingSumAtMultiply&&(t.startingSumAtMultiply[o].value=i.startingSum,i.startingSum*=t.startingSumAtMultiply[o].calcVal,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)),t.dividePointtypeIsOnCheck&&void 0!==t.startingSumAtDivide&&(t.startingSumAtDivide[o].value=i.startingSum,i.startingSum/=t.startingSumAtDivide[o].calcVal,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)),t.setPointtypeIsOnCheck&&void 0!==t.startingSumAtSet&&(t.startingSumAtSet[o].value=i.startingSum,i.startingSum=t.startingSumAtSet[o].calcVal,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum))}}}delete e.setPointtypeIsOnCheck,delete e.startingSumAtSet,Vt.splice(t,1)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=Rt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!1:"2"===e.changeType?o.isTrue=!0:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let t=0;t<e.idOfAllowChoice.length;t++){const i=Bt.get(e.idOfAllowChoice[t]);if(void 0!==i&&(i.allowedChoices-=e.numbAddToAllowChoice,i.allowedChoices>0&&i.currentChoices>=i.allowedChoices))for(let e=0;e<i.objects.length;e++){const t=i.objects[e];if(t.isActive&&!t.forcedActivated)if(t.isSelectableMultiple){let e=t.multipleUseVariable;for(let n=0;n<e;n++)ni(t,i,o)}else ti(t,i,o);if(i.allowedChoices>=i.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){const t=Ft.get(e.idOfTheTextfieldWord);void 0!==t&&(t.replaceText=void 0===e.wordChangeDeselect?"":e.wordChangeDeselect)}if(e.isImageUpload&&void 0!==e.defaultImage&&(e.image=e.defaultImage),e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.showAllAddons&&void 0!==app.showAllAddons&&(app.showAllAddons-=1),e.changeBackground)if(e.changeBgImage){if(void 0!==app.bgImageStack){const t=app.bgImageStack.findIndex(t=>t.id===e.id);-1!==t&&app.bgImageStack.splice(t,1);const o=app.bgImageStack.length;o>0?app.styling.backgroundImage=app.bgImageStack[o-1].data:(app.styling.backgroundImage=app.defaultBgImage||"",delete app.bgImageStack)}}else if(void 0!==e.changedBgColorCode&&void 0!==app.bgColorStack){const t=app.bgColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.bgColorStack.splice(t,1);const o=app.bgColorStack.length;o>0?app.styling.backgroundColor=app.bgColorStack[o-1].data:(app.styling.backgroundColor=app.defaultBgColor||"#FFFFFFFF",delete app.bgColorStack)}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&void 0!==app.barBgColorStack){const t=app.barBgColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.barBgColorStack.splice(t,1);const o=app.barBgColorStack.length;o>0?app.styling.barBackgroundColor=app.barBgColorStack[o-1].data:(app.styling.barBackgroundColor=app.defaultBarBgColor||"#FFFFFFFF",delete app.barBgColorStack)}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&void 0!==app.barIconColorStack){const t=app.barIconColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.barIconColorStack.splice(t,1);const o=app.barIconColorStack.length;o>0?app.styling.barIconColor=app.barIconColorStack[o-1].data:(app.styling.barIconColor=app.defaultBarIconColor||"#0000008A",delete app.barIconColorStack)}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&void 0!==app.barTextColorStack){const t=app.barTextColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.barTextColorStack.splice(t,1);const o=app.barTextColorStack.length;o>0?app.styling.barTextColor=app.barTextColorStack[o-1].data:(app.styling.barTextColor=app.defaultBarIconColor||"#000000",delete app.barTextColorStack)}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate){const t=e.changeTemplatesList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=kt.get(i);if(void 0!==n){const t=n.choice;if(Ei(t,e.id),e.changeAddonTemplate)for(let o=0;o<t.addons.length;o++){Ei(t.addons[o],e.id)}continue}const l=Bt.get(i);if(void 0!==l){Ei(l,e.id);continue}const a=Mt.get(i);if(void 0!==a){const t=a.rowElements;for(let i=0;i<t.length;i++){const o=Bt.get(t[i]);void 0!==o&&Ei(o,e.id)}const o=a.elements;for(let i=0;i<o.length;i++){const t=kt.get(o[i]);if(void 0!==t){const o=t.choice;if(Ei(o,e.id),e.changeAddonTemplate)for(let t=0;t<o.addons.length;t++){Ei(o.addons[t],e.id)}}}continue}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth){const t=e.changeWidthList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=kt.get(i);if(void 0!==n){Gi(n.choice,e.id);continue}const l=Bt.get(i);if(void 0!==l){Gi(l,e.id);continue}const a=Mt.get(i);if(void 0!==a){const t=a.rowElements;for(let i=0;i<t.length;i++){const o=Bt.get(t[i]);void 0!==o&&Gi(o,e.id)}const o=a.elements;for(let i=0;i<o.length;i++){const t=kt.get(o[i]);if(void 0!==t){Gi(t.choice,e.id)}}continue}}}if(e.setBgmIsOn&&Ut&&e.bgmId&&(Et.bgmIsPlaying=!1,$o(e,e.bgmId,0)),e.muteBgm&&Ut){const e=u(Ut);app.isMute=!1,e&&"function"==typeof e.unMute&&e.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=Bt.get(e.hiddenContentsRow[t]);if(void 0!==o)for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":delete o.objectTitleRemoved;break;case"2":delete o.objectImageRemoved;break;case"3":delete o.objectTextRemoved;break;case"4":delete o.objectScoreRemoved;break;case"5":delete o.objectRequirementRemoved;break;case"6":delete o.addonTitleRemoved;break;case"7":delete o.addonImageRemoved;break;case"8":delete o.addonTextRemoved}}delete e.tempSlots,Ko(e,i,0,void 0,void 0,o),ei(o),delete e.appliedDisChoices};if(e.isSelectDelayed&&void 0!==e.selectDelayTime)e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(()=>e.customTextfieldIsOn&&!o.isOverDlg?(Gt.choice=e,Gt.row=t,Gt.context=void 0!==e.wordPromptText?e.wordPromptText:"",Gt.prevText=e.wordChangeSelect||"",Gt.isWord=!0,Gt.currentDialog="dlgCommon",Gt.isDeselect=!0,void(Gt.cFunc=(i,n)=>{if("deselect"===i.detail.action)o.isOverDlg=!0,ti(e,t,o);else if("accept"===i.detail.action&&Gt.choice&&Gt.choice.idOfTheTextfieldWord){if(Gt.isWord){Gt.choice.wordChangeSelect=n;const e=Ft.get(Gt.choice.idOfTheTextfieldWord);void 0!==e&&(e.replaceText=Gt.choice.wordChangeSelect||"")}o.isOverDlg=!0}delete Gt.isDeselect})):e.isImageUpload&&!o.isOverImg?(zt.currentDialog="appImageUpload",zt.data=e,zt.imgProp="image",zt.isDeselect=!0,void(zt.cFunc=i=>{"deselect"===i.detail.action&&(o.isOverImg=!0,ti(e,t,o)),delete zt.isDeselect})):(-1===o.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,i()},1e3*app.fadeTransitionTime)):i()),0===o.linkedObjects.indexOf(e.id)&&o.linkedObjects.splice(0),void delete e.selectDelayTimer),e.selectDelayTime));else{if(e.customTextfieldIsOn&&!o.isOverDlg)return Gt.choice=e,Gt.row=t,Gt.context=void 0!==e.wordPromptText?e.wordPromptText:"",Gt.prevText=e.wordChangeSelect||"",Gt.isWord=!0,Gt.currentDialog="dlgCommon",Gt.isDeselect=!0,void(Gt.cFunc=(i,n)=>{if("deselect"===i.detail.action)o.isOverDlg=!0,ti(e,t,o);else if("accept"===i.detail.action&&Gt.choice&&Gt.choice.idOfTheTextfieldWord){if(Gt.isWord){Gt.choice.wordChangeSelect=n;const e=Ft.get(Gt.choice.idOfTheTextfieldWord);void 0!==e&&(e.replaceText=Gt.choice.wordChangeSelect||"")}o.isOverDlg=!0}delete Gt.isDeselect});if(e.isImageUpload&&!o.isOverImg)return zt.currentDialog="appImageUpload",zt.data=e,zt.imgProp="image",zt.isDeselect=!0,void(zt.cFunc=i=>{"deselect"===i.detail.action&&(o.isOverImg=!0,ti(e,t,o)),delete zt.isDeselect});-1===o.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,i()},1e3*app.fadeTransitionTime)):i()),0===o.linkedObjects.indexOf(e.id)&&o.linkedObjects.splice(0)}}}function oi(e,t,o){let i=!0;if(t.allowedChoices>0&&t.currentChoices>=t.allowedChoices){let e=0;for(let i=0;i<t.objects.length;i++){const n=t.objects[i];if(n.isActive){if(!n.forcedActivated&&!n.selectOnce){if(n.isSelectableMultiple){let e=n.multipleUseVariable;for(let i=0;i<e;i++)ni(n,t,o)}else Yo(n,t,!1,o);break}e++}}e>=t.allowedChoices&&(i=!1)}if(i){if(Go(e,!0)){const i=()=>{const i=new n;if(e.isActive=!0,xt.set(e.id,{multiple:0}),t.currentChoices+=1,e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(e.isDisChoices){const t=new Set;if(void 0!==e.discountRows)for(let o=0;o<e.discountRows.length;o++){const i=Bt.get(e.discountRows[o]);if(void 0!==i)for(let o=0;o<i.objects.length;o++){const n=i.objects[o];No(e,n),t.add(n.id)}}if(void 0!==e.discountChoices)for(let o=0;o<e.discountChoices.length;o++)if(!t.has(e.discountChoices[o])){const t=kt.get(e.discountChoices[o]);void 0!==t&&No(e,t.choice)}}else if(void 0!==e.discountGroups)for(let t=0;t<e.discountGroups.length;t++){const o=Mt.get(e.discountGroups[t]);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=kt.get(o.elements[t]);void 0!==i&&No(e,i.choice)}}let l=new Set;for(let t=0;t<e.scores.length;t++){const o=e.scores[t];if(Fo(o.requireds)&&!o.isActive){const e=At.get(o.id);if(void 0!==e){let t=o.value;if(o.useExpression&&o.setValue&&zo(e,o),o.appliedDiscount&&void 0!==o.discountScore)t=o.discountScore;else if(o.discountIsOn&&void 0!==o.discountScore&&o.discountedFrom&&o.discountedFrom.length>0){let e=!1;for(let i=0;i<o.discountedFrom.length;i++){const n=kt.get(o.discountedFrom[i]);if(void 0!==n){const i=n.choice;if(!i.useDiscountCount||void 0===i.discountCount){t=o.discountScore,o.appliedDiscount=!0,e=!0;break}{const n=i.isSelectableMultiple&&i.isMultipleUseVariable&&i.stackableDiscount?i.discountCount*i.multipleUseVariable:i.discountCount;if(i.appliedDisChoices||(i.appliedDisChoices=[]),n>i.appliedDisChoices.length){l.add(i),t=o.discountScore,o.appliedDiscount=!0,e=!0;break}}}}if(!e&&void 0!==o.tmpDiscount)for(let i=0;i<o.tmpDiscount.length;i++)t>o.tmpDiscount[i].discountedValue&&(t=o.tmpDiscount[i].discountedValue)}t=e.allowFloat?t:Math.floor(t),e.startingSum-=t,o.isActive=!0;let n=i.get(o.id);void 0!==n?i.set(o.id,t+n):i.set(o.id,t)}}}if(l.size>0&&l.forEach(t=>{t.appliedDisChoices&&-1===t.appliedDisChoices.indexOf(e.id)&&t.appliedDisChoices.push(e.id)}),e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&di(e),e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom){const t={...o};t.isOverDlg=!1,t.isOverImg=!1,Xo(e,t)}else{const t=e.activateThisChoice.split(",");for(let i=0;i<t.length;i++){const n=t[i].split("/ON#"),l=n.length>1?parseInt(n[1]):0,a=kt.get(n[0]);if(void 0!==a){const t=a.row,i=a.choice,n={...o};n.isOverDlg=!1,n.isOverImg=!1,Zo(e,i,t,l,n)}else{const t=Mt.get(n[0]);if(void 0!==t){const i=t.elements;for(let t=0;t<i.length;t++){const n=kt.get(i[t]);if(void 0!==n){const t=n.row,i=n.choice,a={...o};a.isOverDlg=!1,a.isOverImg=!1,Zo(e,i,t,l,a)}}}}}}if(e.deactivateOtherChoice&&void 0!==e.deactivateThisChoice){const t=e.deactivateThisChoice.split(",");for(let e=0;e<t.length;e++){const i=t[e].split("/ON#"),n=i.length>1?parseInt(i[1]):0,l=kt.get(i[0]);if(void 0!==l){const e=l.row,t=l.choice;if(t.isActive)if(t.isSelectableMultiple&&t.isMultipleUseVariable)for(let i=0;i<n;i++){const i={...o};i.isOverDlg=!1,i.isOverImg=!1,ni(t,e,i)}else{const i={...o};i.isOverDlg=!1,i.isOverImg=!1,ti(t,e,i)}}else{const e=Mt.get(i[0]);if(void 0!==e){const t=e.elements;for(let e=0;e<t.length;e++){const i=kt.get(t[e]);if(void 0!==i){const e=i.row,t=i.choice;if(t.isActive)if(t.isSelectableMultiple&&t.isMultipleUseVariable)for(let i=0;i<n;i++){const i={...o};i.isOverDlg=!1,i.isOverImg=!1,ni(t,e,i)}else{const i={...o};i.isOverDlg=!1,i.isOverImg=!1,ti(t,e,i)}}}}}}}if(Array.from(xt.entries()).forEach(([t,i])=>{const n=kt.get(t);if(void 0!==n){const t=n.row,l=n.choice;if(l.id!==e.id&&!Fo(l.requireds))if(l.forcedActivated&&(delete l.forcedActivated,l.isAllowDeselect||Ot.set(l.id,{multiple:i.multiple})),0===i.multiple){if(l.isActive){const e={...o};e.isOverDlg=!1,e.isOverImg=!1,ti(l,t,e)}}else if(i.multiple>0)for(let e=0;e<i.multiple;e++)if(l.isActive){const e={...o};e.isOverDlg=!1,e.isOverImg=!1,ni(l,t,e)}}}),e.multiplyPointtypeIsOn&&void 0!==e.pointTypeToMultiply&&void 0!==e.multiplyWithThis){let t=0;e.multiplyPointtypeIsOnCheck=!0,"object"!=typeof e.startingSumAtMultiply&&(e.startingSumAtMultiply=[]);for(let o=0;o<e.pointTypeToMultiply.length;o++){let i=At.get(e.pointTypeToMultiply[o]);if(void 0!==i)if(e.multiplyPointtypeIsId&&"string"==typeof e.multiplyWithThis){let n=At.get(e.multiplyWithThis);void 0!==n?(e.startingSumAtMultiply[o]={value:i.startingSum,calcVal:n.startingSum},i.startingSum*=n.startingSum,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)):t++}else"number"==typeof e.multiplyWithThis&&(e.startingSumAtMultiply[o]={value:i.startingSum,calcVal:e.multiplyWithThis},i.startingSum*=e.multiplyWithThis,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum));else t++}t===e.pointTypeToMultiply.length&&delete e.multiplyPointtypeIsOnCheck,e.multiplyPointtypeIsOnCheck&&Vt.push(e)}if(e.dividePointtypeIsOn&&void 0!==e.pointTypeToDivide&&void 0!==e.divideWithThis){let t=0;e.dividePointtypeIsOnCheck=!0,"object"!=typeof e.startingSumAtDivide&&(e.startingSumAtDivide=[]);for(let o=0;o<e.pointTypeToDivide.length;o++){let i=At.get(e.pointTypeToDivide[o]);void 0!==i?0===e.dividedWithThis?t++:(e.startingSumAtDivide[o]={value:i.startingSum,calcVal:e.divideWithThis},i.startingSum/=e.divideWithThis,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)):t++}t===e.pointTypeToDivide.length&&delete e.dividePointtypeIsOnCheck,!e.multiplyPointtypeIsOnCheck&&e.dividePointtypeIsOnCheck&&Vt.push(e)}if(e.setPointtypeIsOn&&void 0!==e.pointTypeToSet&&void 0!==e.setWithThis){let t=0;e.setPointtypeIsOnCheck=!0,"object"!=typeof e.startingSumAtSet&&(e.startingSumAtSet=[]);for(let o=0;o<e.pointTypeToSet.length;o++){let i=At.get(e.pointTypeToSet[o]);if(void 0!==i){let t=0;try{const o=e.setWithThis.replace(/\{([^{}]+)\}/g,(e,t)=>{const o=At.get(t);if(void 0!==o)return"".concat(o.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});t=g(o),t=i.allowFloat?t:Math.floor(t)}catch(a){console.error(a)}e.startingSumAtSet[o]={value:i.startingSum,calcVal:t},i.startingSum=t}else t++}t===e.pointTypeToSet.length&&delete e.setPointtypeIsOnCheck,e.multiplyPointtypeIsOnCheck||e.dividePointtypeIsOnCheck||!e.setPointtypeIsOnCheck||Vt.push(e)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=Rt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!0:"2"===e.changeType?o.isTrue=!1:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let t=0;t<e.idOfAllowChoice.length;t++){const i=Bt.get(e.idOfAllowChoice[t]);if(void 0!==i&&(i.allowedChoices+=e.numbAddToAllowChoice,i.allowedChoices>0&&i.currentChoices>=i.allowedChoices))for(let e=0;e<i.objects.length;e++){const t=i.objects[e];if(t.isActive&&!t.forcedActivated)if(t.isSelectableMultiple){let e=t.multipleUseVariable;for(let n=0;n<e;n++){const e={...o};e.isOverDlg=!1,e.isOverImg=!1,ni(t,i,e)}}else{const e={...o};e.isOverDlg=!1,e.isOverImg=!1,ti(t,i,e)}if(i.allowedChoices>=i.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){const t=Ft.get(e.idOfTheTextfieldWord);void 0!==t&&(t.replaceText=e.wordChangeSelect)}if(e.isImageUpload&&(e.defaultImage=e.image,zt.currentDialog="appImageUpload",zt.data=e,zt.imgProp="image"),e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate){const t=e.changeTemplatesList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=kt.get(i);if(void 0!==n){const t=n.choice;if(Ni(t,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(let o=0;o<t.addons.length;o++){Ni(t.addons[o],e.id,e.changeToThisTemplate)}continue}const l=Bt.get(i);if(void 0!==l){Ni(l,e.id,e.changeToThisTemplate);continue}const a=Mt.get(i);if(void 0!==a){const t=a.rowElements;for(let i=0;i<t.length;i++){const o=Bt.get(t[i]);void 0!==o&&Ni(o,e.id,e.changeToThisTemplate)}const o=a.elements;for(let i=0;i<o.length;i++){const t=kt.get(o[i]);if(void 0!==t){const o=t.choice;if(Ni(o,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(let t=0;t<o.addons.length;t++){Ni(o.addons[t],e.id,e.changeToThisTemplate)}}}continue}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth){const t=e.changeWidthList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=kt.get(i);if(void 0!==n){zi(n.choice,e.id,e.changeToThisWidth);continue}const l=Bt.get(i);if(void 0!==l){zi(l,e.id,e.changeToThisWidth);continue}const a=Mt.get(i);if(void 0!==a){const t=a.rowElements;for(let i=0;i<t.length;i++){const o=Bt.get(t[i]);void 0!==o&&zi(o,e.id,e.changeToThisWidth)}const o=a.elements;for(let i=0;i<o.length;i++){const t=kt.get(o[i]);if(void 0!==t){zi(t.choice,e.id,e.changeToThisWidth)}}continue}}}if(e.setBgmIsOn&&e.bgmId&&(Et.bgmIsPlaying=!0,Et.isBgmInit||e.useAudioURL?$o(e,e.bgmId,0):(Vo(e),Et.isBgmInit=!0)),e.muteBgm&&Ut){const e=u(Ut);app.isMute=!0,e&&"function"==typeof e.mute&&e.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=Bt.get(e.hiddenContentsRow[t]);if(void 0!==o){o.textIsRemoved||(o.textIsRemoved=!0);for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":o.objectTitleRemoved=!0;break;case"2":o.objectImageRemoved=!0;break;case"3":o.objectTextRemoved=!0;break;case"4":o.objectScoreRemoved=!0;break;case"5":o.objectRequirementRemoved=!0;break;case"6":o.addonTitleRemoved=!0;break;case"7":o.addonImageRemoved=!0;break;case"8":o.addonTextRemoved=!0}}}e.scrollToRow&&m().then(()=>{setTimeout(()=>{var t,i,n,l,a;if(e.scrollToObject){if(e.scrollObjectId){const a=kt.get(e.scrollObjectId);if(void 0!==a){const e=a.choice,r=a.row,s=app.useToolbarBtn||!o.bCreatorMode||"appCyoaViewer"===qt.value?r.index:r.index+1,c="appCyoaViewer"===qt.value?0:1,d=null==(l=null==(n=null==(i=null==(t=o.mainDiv)?void 0:t.children[s])?void 0:i.children[c])?void 0:n.children[1])?void 0:l.children;if(void 0!==d){if(o.isBackpack){const t=document.getElementById("backpackDialog");null==t||t.scrollTo({top:d[e.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}window.scrollTo({top:d[e.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}}else if(e.scrollRowId){const t=Bt.get(e.scrollRowId);if(void 0!==t){const e=null==(a=o.mainDiv)?void 0:a.children;if(void 0!==e){const i=app.useToolbarBtn||!o.bCreatorMode?t.index:t.index+1;if(o.isBackpack){const t=document.getElementById("backpackDialog");null==t||t.scrollTo({top:e[i].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:e[i].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}},10)}),e.cleanACtivatedOnSelect&&_o(),Qo(e,i,0,void 0,void 0,o),ei(o),!Fo(e.requireds)&&e.isActive&&ti(e,t,o)};if(e.isSelectDelayed&&void 0!==e.selectDelayTime)e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(()=>e.customTextfieldIsOn&&!o.isOverDlg?(zt.choice=e,zt.row=t,zt.context=void 0!==e.wordPromptText?e.wordPromptText:"",zt.prevText=e.wordChangeSelect||"",zt.isWord=!0,zt.currentDialog="dlgCommon",void(zt.cFunc=(e,t)=>{"accept"===e.detail.action&&zt.choice&&zt.row&&(zt.isWord&&(zt.choice.wordChangeSelect=t),o.isOverDlg=!0,oi(zt.choice,zt.row,o))})):e.confirmIsOn&&!o.isOverDlg?(zt.choice=e,zt.row=t,zt.context=void 0!==e.wordPromptText?e.wordPromptText:"",zt.isWord=!1,zt.currentDialog="dlgCommon",void(zt.cFunc=e=>{"accept"===e.detail.action&&zt.choice&&zt.row&&(o.isOverDlg=!0,oi(zt.choice,zt.row,o))})):(-1===o.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,i()},1e3*app.fadeTransitionTime)):i()),0===o.linkedObjects.indexOf(e.id)&&o.linkedObjects.splice(0),void delete e.selectDelayTimer),e.selectDelayTime));else{if(e.customTextfieldIsOn&&!o.isOverDlg)return Gt.choice=e,Gt.row=t,Gt.context=void 0!==e.wordPromptText?e.wordPromptText:"",Gt.prevText=e.wordChangeSelect||"",Gt.isWord=!0,Gt.currentDialog="dlgCommon",void(Gt.cFunc=(e,t)=>{"accept"===e.detail.action&&Gt.choice&&Gt.row&&(Gt.isWord&&(Gt.choice.wordChangeSelect=t),o.isOverDlg=!0,oi(Gt.choice,Gt.row,o))});if(e.confirmIsOn&&!o.isOverDlg)return Gt.choice=e,Gt.row=t,Gt.context=void 0!==e.wordPromptText?e.wordPromptText:"",Gt.isWord=!1,Gt.currentDialog="dlgCommon",void(Gt.cFunc=e=>{"accept"===e.detail.action&&Gt.choice&&Gt.row&&(o.isOverDlg=!0,oi(Gt.choice,Gt.row,o))});-1===o.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,i()},1e3*app.fadeTransitionTime)):i()),0===o.linkedObjects.indexOf(e.id)&&o.linkedObjects.splice(0)}}else for(let t=0;t<e.scores.length;t++){const o=e.scores[t];o.setValue&&delete o.setValue}}}function ii(e,t,o){const i=Fo(e.requireds)&&!t.isInfoRow&&!e.isNotSelectable;let l=!0,a=t;if(t.isResultRow){const t=kt.get(e.id);void 0!==t&&(a=t.row)}if(i&&e.isMultipleUseVariable&&0===e.multipleUseVariable&&a.allowedChoices>0&&a.currentChoices>=a.allowedChoices){let e=0;for(let t=0;t<a.objects.length;t++){const i=a.objects[t];if(i.isActive){if(!i.forcedActivated&&!i.selectOnce){if(i.isSelectableMultiple){let e=i.multipleUseVariable;for(let t=0;t<e;t++)ni(i,a,o)}else Yo(i,a,!1,o);break}e++}}e>=a.allowedChoices&&(l=!1)}if(l){if(Go(e,!0)){const l=()=>{const i=new n,l=e.isActive,r=e.multipleUseVariable>=0,s=Math.abs(e.multipleUseVariable);if(e.multipleUseVariable+=1,0===e.multipleUseVariable?(xt.delete(e.id),e.isActive=!1,a.currentChoices-=1):(1===e.multipleUseVariable&&(e.isActive=!0,a.currentChoices+=1),xt.set(e.id,{multiple:e.multipleUseVariable})),r){if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue&&(e.stackableDiscount||!e.stackableDiscount&&1===e.multipleUseVariable))if(e.isDisChoices){const t=new Set;if(void 0!==e.discountRows)for(let o=0;o<e.discountRows.length;o++){const i=Bt.get(e.discountRows[o]);if(void 0!==i)for(let o=0;o<i.objects.length;o++){const n=i.objects[o];No(e,n),t.add(n.id)}}if(void 0!==e.discountChoices)for(let o=0;o<e.discountChoices.length;o++)if(!t.has(e.discountChoices[o])){const t=kt.get(e.discountChoices[o]);void 0!==t&&No(e,t.choice)}}else if(void 0!==e.discountGroups)for(let o=0;o<e.discountGroups.length;o++){const t=Mt.get(e.discountGroups[o]);if(void 0!==t)for(let o=0;o<t.elements.length;o++){const i=kt.get(t.elements[o]);void 0!==i&&No(e,i.choice)}}let t=new Set;for(let o=0;o<e.scores.length;o++){const n=e.scores[o];if(void 0===n.isActiveMul&&(n.isActiveMul=[]),Fo(n.requireds)&&!n.isActiveMul[s]){const e=At.get(n.id);if(void 0!==e){let o=n.value;if(n.useExpression&&n.setValue&&zo(e,n),n.appliedDiscount&&void 0!==n.discountScore)o=n.discountScore;else if(n.discountIsOn&&void 0!==n.discountScore&&n.discountedFrom&&n.discountedFrom.length>0){let e=!1;for(let i=0;i<n.discountedFrom.length;i++){const l=kt.get(n.discountedFrom[i]);if(void 0!==l){const i=l.choice;if(!i.useDiscountCount||void 0===i.discountCount){o=n.discountScore,n.appliedDiscount=!0,e=!0;break}{const l=i.isSelectableMultiple&&i.isMultipleUseVariable&&i.stackableDiscount?i.discountCount*i.multipleUseVariable:i.discountCount;if(i.appliedDisChoices||(i.appliedDisChoices=[]),l>i.appliedDisChoices.length){t.add(i),o=n.discountScore,n.appliedDiscount=!0,e=!0;break}}}}if(!e&&void 0!==n.tmpDiscount)for(let t=0;t<n.tmpDiscount.length;t++)o>n.tmpDiscount[t].discountedValue&&(o=n.tmpDiscount[t].discountedValue)}o=e.allowFloat?o:Math.floor(o),n.multiplyByTimes&&(o*=s+1),e.startingSum-=o,n.isActiveMul[s]=!0;let l=i.get(n.id);void 0!==l?i.set(n.id,o+l):i.set(n.id,o)}}}t.size>0&&t.forEach(t=>{t.appliedDisChoices&&-1===t.appliedDisChoices.indexOf(e.id)&&t.appliedDisChoices.push(e.id)})}else for(let t=0;t<e.scores.length;t++){const o=e.scores[t];if(void 0===o.isActiveMulMinus&&(o.isActiveMulMinus=[]),Fo(o.requireds)&&o.isActiveMulMinus[s]||o.isActiveMulMinus[s]){const e=At.get(o.id);if(void 0!==e){let t=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value;t=e.allowFloat?t:Math.floor(t),o.multiplyByTimes&&(t*=Math.abs(s)),e.startingSum-=t;let n=i.get(o.id);void 0!==n?i.set(o.id,t+n):i.set(o.id,t),delete o.isActiveMulMinus[s]}}}if(r&&(e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&di(e),e.activateOtherChoice&&void 0!==e.activateThisChoice))if(e.isActivateRandom)Xo(e,o);else{const t=e.activateThisChoice.split(",");for(let i=0;i<t.length;i++){const n=t[i].split("/ON#"),a=n.length>1?parseInt(n[1]):0,r=kt.get(n[0]);if(void 0!==r){const t=r.row,i=r.choice;!i.isSelectableMultiple&&l||Zo(e,i,t,a,o)}else{const t=Mt.get(n[0]);if(void 0!==t){const i=t.elements;for(let t=0;t<i.length;t++){const n=kt.get(i[t]);if(void 0!==n){const t=n.row,i=n.choice;!i.isSelectableMultiple&&l||Zo(e,i,t,a,o)}}}}}}if(Array.from(xt.entries()).forEach(([t,i])=>{const n=kt.get(t);if(void 0!==n){const t=n.row,l=n.choice;if(l.id!==e.id&&!Fo(l.requireds))if(l.forcedActivated&&(delete l.forcedActivated,l.isAllowDeselect||Ot.set(l.id,{multiple:i.multiple})),0===i.multiple){if(l.isActive){const e={...o};e.isOverDlg=!1,e.isOverImg=!1,ti(l,t,e)}}else if(i.multiple>0)for(let e=0;e<i.multiple;e++)if(l.isActive){const e={...o};e.isOverDlg=!1,e.isOverImg=!1,ni(l,t,e)}}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let t=0;t<e.idOfAllowChoice.length;t++){const i=Bt.get(e.idOfAllowChoice[t]);if(void 0!==i&&(i.allowedChoices+=e.numbAddToAllowChoice,i.allowedChoices>0&&i.currentChoices>=i.allowedChoices))for(let e=0;e<i.objects.length;e++){const t=i.objects[e];if(t.isActive&&!t.forcedActivated)if(t.isSelectableMultiple){let e=t.multipleUseVariable;for(let n=0;n<e;n++){const e={...o};e.isOverDlg=!1,e.isOverImg=!1,ni(t,i,e)}}else if(t.isActive){const e={...o};e.isOverDlg=!1,e.isOverImg=!1,ti(t,i,e)}if(i.allowedChoices>=i.currentChoices)break}}if(!l){if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=Rt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!0:"2"===e.changeType?o.isTrue=!1:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){const t=Ft.get(e.idOfTheTextfieldWord);void 0!==t&&(t.replaceText=e.wordChangeSelect)}if(e.isImageUpload&&(e.defaultImage=e.image,zt.currentDialog="appImageUpload",zt.data=e,zt.imgProp="image"),e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate){const t=e.changeTemplatesList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=kt.get(i);if(void 0!==n){const t=n.choice;if(Ni(t,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(let o=0;o<t.addons.length;o++){Ni(t.addons[o],e.id,e.changeToThisTemplate)}continue}const l=Bt.get(i);if(void 0!==l){Ni(l,e.id,e.changeToThisTemplate);continue}const a=Mt.get(i);if(void 0!==a){const t=a.rowElements;for(let i=0;i<t.length;i++){const o=Bt.get(t[i]);void 0!==o&&Ni(o,e.id,e.changeToThisTemplate)}const o=a.elements;for(let i=0;i<o.length;i++){const t=kt.get(o[i]);if(void 0!==t){const o=t.choice;if(Ni(o,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(let t=0;t<o.addons.length;t++){Ni(o.addons[t],e.id,e.changeToThisTemplate)}}}continue}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth){const t=e.changeWidthList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=kt.get(i);if(void 0!==n){zi(n.choice,e.id,e.changeToThisWidth);continue}const l=Bt.get(i);if(void 0!==l){zi(l,e.id,e.changeToThisWidth);continue}const a=Mt.get(i);if(void 0!==a){const t=a.rowElements;for(let i=0;i<t.length;i++){const o=Bt.get(t[i]);void 0!==o&&zi(o,e.id,e.changeToThisWidth)}const o=a.elements;for(let i=0;i<o.length;i++){const t=kt.get(o[i]);if(void 0!==t){zi(t.choice,e.id,e.changeToThisWidth)}}continue}}}if(e.setBgmIsOn&&e.bgmId&&(Et.bgmIsPlaying=!0,Et.isBgmInit||e.useAudioURL?$o(e,e.bgmId,0):(Vo(e),Et.isBgmInit=!0)),e.muteBgm&&Nt){const e=u(Nt);app.isMute=!0,e&&"function"==typeof e.mute&&e.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=Bt.get(e.hiddenContentsRow[t]);if(void 0!==o){o.textIsRemoved||(o.textIsRemoved=!0);for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":o.objectTitleRemoved=!0;break;case"2":o.objectImageRemoved=!0;break;case"3":o.objectTextRemoved=!0;break;case"4":o.objectScoreRemoved=!0;break;case"5":o.objectRequirementRemoved=!0;break;case"6":o.addonTitleRemoved=!0;break;case"7":o.addonImageRemoved=!0;break;case"8":o.addonTextRemoved=!0}}}e.scrollToRow&&m().then(()=>{setTimeout(()=>{var t,i,n,l,a;if(e.scrollToObject){if(e.scrollObjectId){const a=kt.get(e.scrollObjectId);if(void 0!==a){const e=a.choice,r=a.row,s=app.useToolbarBtn||!o.bCreatorMode||"appCyoaViewer"===qt.value?r.index:r.index+1,c="appCyoaViewer"===qt.value?0:1,d=null==(l=null==(n=null==(i=null==(t=o.mainDiv)?void 0:t.children[s])?void 0:i.children[c])?void 0:n.children[1])?void 0:l.children;if(void 0!==d){if(o.isBackpack){const t=document.getElementById("backpackDialog");null==t||t.scrollTo({top:d[e.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}window.scrollTo({top:d[e.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}}else if(e.scrollRowId){const t=Bt.get(e.scrollRowId);if(void 0!==t){const e=null==(a=o.mainDiv)?void 0:a.children;if(void 0!==e){const i=app.useToolbarBtn||!o.bCreatorMode?t.index:t.index+1;if(o.isBackpack){const t=document.getElementById("backpackDialog");null==t||t.scrollTo({top:e[i].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:e[i].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}},10)})}Qo(e,i,0,void 0,void 0,o),ei(o),!Fo(e.requireds)&&e.isActive&&ni(e,t,o)};if(i)if(e.isMultipleUseVariable){if(void 0===e.multipleUseVariable&&(e.multipleUseVariable=0),void 0===e.numMultipleTimesPluss&&(e.numMultipleTimesPluss=0),e.numMultipleTimesPluss>e.multipleUseVariable)if(e.isSelectDelayed&&void 0!==e.selectDelayTime)e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(()=>!e.customTextfieldIsOn||o.isOverDlg||e.isActive?e.confirmIsOn&&!o.isOverDlg?(Gt.choice=e,Gt.row=t,Gt.context=void 0!==e.wordPromptText?e.wordPromptText:"",Gt.isWord=!1,Gt.currentDialog="dlgCommon",void(Gt.cFunc=e=>{"accept"===e.detail.action&&Gt.choice&&Gt.row&&(o.isOverDlg=!0,ii(Gt.choice,Gt.row,o))})):(-1===o.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,l()},1e3*app.fadeTransitionTime)):l()),0===o.linkedObjects.indexOf(e.id)&&o.linkedObjects.splice(0),void delete e.selectDelayTimer):(Gt.choice=e,Gt.row=t,Gt.context=void 0!==e.wordPromptText?e.wordPromptText:"",Gt.prevText=e.wordChangeSelect||"",Gt.isWord=!0,Gt.currentDialog="dlgCommon",void(Gt.cFunc=(e,t)=>{"accept"===e.detail.action&&Gt.choice&&Gt.row&&(Gt.isWord&&(Gt.choice.wordChangeSelect=t),o.isOverDlg=!0,ii(Gt.choice,Gt.row,o))})),e.selectDelayTime));else{if(e.customTextfieldIsOn&&!o.isOverDlg&&!e.isActive)return Gt.choice=e,Gt.row=t,Gt.context=void 0!==e.wordPromptText?e.wordPromptText:"",Gt.prevText=e.wordChangeSelect||"",Gt.isWord=!0,Gt.currentDialog="dlgCommon",void(Gt.cFunc=(e,t)=>{"accept"===e.detail.action&&Gt.choice&&Gt.row&&(Gt.isWord&&(Gt.choice.wordChangeSelect=t),o.isOverDlg=!0,ii(Gt.choice,Gt.row,o))});if(e.confirmIsOn&&!o.isOverDlg)return Gt.choice=e,Gt.row=t,Gt.context=void 0!==e.wordPromptText?e.wordPromptText:"",Gt.isWord=!1,Gt.currentDialog="dlgCommon",void(Gt.cFunc=e=>{"accept"===e.detail.action&&Gt.choice&&Gt.row&&(o.isOverDlg=!0,ii(Gt.choice,Gt.row,o))});-1===o.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,l()},1e3*app.fadeTransitionTime)):l()),0===o.linkedObjects.indexOf(e.id)&&o.linkedObjects.splice(0)}}else if(void 0!==e.multipleScoreId){const t=At.get(e.multipleScoreId);void 0!==t&&(void 0===e.numMultipleTimesPluss&&(e.numMultipleTimesPluss=0),e.numMultipleTimesPluss>t.startingSum&&(t.startingSum+=1))}}else for(let t=0;t<e.scores.length;t++){const o=e.scores[t];o.setValue&&delete o.setValue}}}function ni(e,t,o){const i=Go(e,!1);let l=t;if(t.isResultRow){const t=kt.get(e.id);void 0!==t&&(l=t.row)}if(i){const i=()=>{const t=new n,i=e.multipleUseVariable>0,a=Math.abs(e.multipleUseVariable-1);if(i){for(let o=0;o<e.scores.length;o++){const i=e.scores[o];if(void 0!==i.isActiveMul&&(Fo(i.requireds)&&i.isActiveMul[a]||i.isActiveMul[a])){const e=At.get(i.id);if(void 0!==e){let o=i.discountIsOn&&void 0!==i.discountScore?i.discountScore:i.useExpression&&i.mulValue&&i.mulValue[a]?i.mulValue[a]:i.value;o=e.allowFloat?o:Math.floor(o),i.multiplyByTimes&&(o*=a+1),e.startingSum+=o;let n=t.get(i.id);void 0!==n?t.set(i.id,-o+n):t.set(i.id,-o),delete i.isActiveMul[a],i.mulValue&&delete i.mulValue[a],0===a&&delete i.setValue}}}if(e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandomMul&&void 0!==e.activatedRandomMul[a]){for(let t=0;t<e.activatedRandomMul[a].length;t++){const i=e.activatedRandomMul[a][t].split("/ON#"),n=kt.get(i[0]);if(void 0!==n){const t=n.row,l=n.choice,a=i.length>1?Number(i[1]):0,r={...o};r.isOverDlg=!1,r.isOverImg=!1,Jo(e,l,t,a,r)}}e.activatedRandomMul.splice(a,1)}else{const t=e.activateThisChoice.split(",");for(let i=0;i<t.length;i++){const n=t[i].split("/ON#"),l=n.length>1?parseInt(n[1]):0,r=kt.get(n[0]);if(void 0!==r){const t=r.row,i=r.choice;if(0===a||i.isSelectableMultiple){const n={...o};n.isOverDlg=!1,n.isOverImg=!1,Jo(e,i,t,l,n)}}else{const t=Mt.get(n[0]);if(void 0!==t){const i=t.elements;for(let t=0;t<i.length;t++){const n=kt.get(i[t]);if(void 0!==n){const t=n.row,i=n.choice;if(0===a||i.isSelectableMultiple){const n={...o};n.isOverDlg=!1,n.isOverImg=!1,Jo(e,i,t,l,n)}}}}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue&&(e.stackableDiscount||!e.stackableDiscount&&1===e.multipleUseVariable))if(void 0===e.discountPointTypes&&(e.discountPointTypes=[]),e.isDisChoices){const t=new Set;if(void 0!==e.discountRows)for(let o=0;o<e.discountRows.length;o++){const i=Bt.get(e.discountRows[o]);if(void 0!==i)for(let o=0;o<i.objects.length;o++){const n=i.objects[o];Uo(e,n),t.add(n.id)}}if(void 0!==e.discountChoices)for(let o=0;o<e.discountChoices.length;o++)if(!t.has(e.discountChoices[o])){const t=kt.get(e.discountChoices[o]);void 0!==t&&Uo(e,t.choice)}}else if(void 0!==e.discountGroups)for(let t=0;t<e.discountGroups.length;t++){const o=Mt.get(e.discountGroups[t]);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=kt.get(o.elements[t]);void 0!==i&&Uo(e,i.choice)}}}else for(let o=0;o<e.scores.length;o++){const i=e.scores[o];if(void 0===i.isActiveMulMinus&&(i.isActiveMulMinus=[]),Fo(i.requireds)&&!i.isActiveMulMinus[a]){const e=At.get(i.id);if(void 0!==e){let o=i.discountIsOn&&void 0!==i.discountScore?i.discountScore:i.value;o=e.allowFloat?o:Math.floor(o),i.multiplyByTimes&&(o*=a),e.startingSum+=o;let n=t.get(i.id);void 0!==n?t.set(i.id,-o+n):t.set(i.id,-o),i.isActiveMulMinus[a]=!0}}}if(e.multipleUseVariable-=1,0===e.multipleUseVariable?(e.isActive=!1,l.currentChoices-=1,xt.delete(e.id)):(-1===e.multipleUseVariable&&(e.isActive=!0,l.currentChoices+=1),xt.set(e.id,{multiple:e.multipleUseVariable})),Array.from(xt.entries()).forEach(([t,i])=>{const n=kt.get(t);if(void 0!==n){const t=n.row,l=n.choice;if(l.id!==e.id&&!Fo(l.requireds))if(l.forcedActivated&&(delete l.forcedActivated,l.isAllowDeselect||Ot.set(l.id,{multiple:i.multiple})),0===i.multiple){if(l.forcedActivated&&delete l.forcedActivated,l.isActive){const e={...o};e.isOverDlg=!1,e.isOverImg=!1,ti(l,t,e)}}else if(i.multiple>0)for(let e=0;e<i.multiple;e++)if(l.isActive){const e={...o};e.isOverDlg=!1,e.isOverImg=!1,ni(l,t,e)}}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let n=0;n<e.idOfAllowChoice.length;n++){const t=Bt.get(e.idOfAllowChoice[n]);if(void 0!==t&&(t.allowedChoices-=e.numbAddToAllowChoice,t.allowedChoices>0&&t.currentChoices>=t.allowedChoices))for(let e=0;e<t.objects.length;e++){const i=t.objects[e];if(i.isActive&&!i.forcedActivated)if(i.isSelectableMultiple){let e=i.multipleUseVariable;for(let n=0;n<e;n++){const e={...o};e.isOverDlg=!1,e.isOverImg=!1,ni(i,t,e)}}else if(i.isActive){const e={...o};e.isOverDlg=!1,e.isOverImg=!1,ti(i,t,e)}if(t.allowedChoices>=t.currentChoices)break}}if(0===a){if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){const t=Ft.get(e.idOfTheTextfieldWord);void 0!==t&&(t.replaceText=void 0===e.wordChangeDeselect?"":e.wordChangeDeselect)}if(e.isImageUpload&&void 0!==e.defaultImage&&(e.image=e.defaultImage),e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=Rt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!1:"2"===e.changeType?o.isTrue=!0:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.showAllAddons&&void 0!==app.showAllAddons&&(app.showAllAddons-=1),e.changeBackground)if(e.changeBgImage){if(void 0!==app.bgImageStack){const t=app.bgImageStack.findIndex(t=>t.id===e.id);-1!==t&&app.bgImageStack.splice(t,1);const o=app.bgImageStack.length;o>0?app.styling.backgroundImage=app.bgImageStack[o-1].data:(app.styling.backgroundImage=app.defaultBgImage||"",delete app.bgImageStack)}}else if(void 0!==e.changedBgColorCode&&void 0!==app.bgColorStack){const t=app.bgColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.bgColorStack.splice(t,1);const o=app.bgColorStack.length;o>0?app.styling.backgroundColor=app.bgColorStack[o-1].data:(app.styling.backgroundColor=app.defaultBgColor||"#FFFFFFFF",delete app.bgColorStack)}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&void 0!==app.barBgColorStack){const t=app.barBgColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.barBgColorStack.splice(t,1);const o=app.barBgColorStack.length;o>0?app.styling.barBackgroundColor=app.barBgColorStack[o-1].data:(app.styling.barBackgroundColor=app.defaultBarBgColor||"#FFFFFFFF",delete app.barBgColorStack)}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&void 0!==app.barIconColorStack){const t=app.barIconColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.barIconColorStack.splice(t,1);const o=app.barIconColorStack.length;o>0?app.styling.barIconColor=app.barIconColorStack[o-1].data:(app.styling.barIconColor=app.defaultBarIconColor||"#0000008A",delete app.barIconColorStack)}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&void 0!==app.barTextColorStack){const t=app.barTextColorStack.findIndex(t=>t.id===e.id);-1!==t&&app.barTextColorStack.splice(t,1);const o=app.barTextColorStack.length;o>0?app.styling.barTextColor=app.barTextColorStack[o-1].data:(app.styling.barTextColor=app.defaultBarIconColor||"#000000",delete app.barTextColorStack)}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate){const t=e.changeTemplatesList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=kt.get(i);if(void 0!==n){const t=n.choice;if(Ei(t,e.id),e.changeAddonTemplate)for(let o=0;o<t.addons.length;o++){Ei(t.addons[o],e.id)}continue}const l=Bt.get(i);if(void 0!==l){Ei(l,e.id);continue}const a=Mt.get(i);if(void 0!==a){const t=a.rowElements;for(let i=0;i<t.length;i++){const o=Bt.get(t[i]);void 0!==o&&Ei(o,e.id)}const o=a.elements;for(let i=0;i<o.length;i++){const t=kt.get(o[i]);if(void 0!==t){const o=t.choice;if(Ei(o,e.id),e.changeAddonTemplate)for(let t=0;t<o.addons.length;t++){Ei(o.addons[t],e.id)}}}continue}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth){const t=e.changeWidthList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=kt.get(i);if(void 0!==n){Gi(n.choice,e.id);continue}const l=Bt.get(i);if(void 0!==l){Gi(l,e.id);continue}const a=Mt.get(i);if(void 0!==a){const t=a.rowElements;for(let i=0;i<t.length;i++){const o=Bt.get(t[i]);void 0!==o&&Gi(o,e.id)}const o=a.elements;for(let i=0;i<o.length;i++){const t=kt.get(o[i]);if(void 0!==t){Gi(t.choice,e.id)}}continue}}}if(e.setBgmIsOn&&Nt&&e.bgmId&&(Et.bgmIsPlaying=!1,$o(e,e.bgmId,0)),e.muteBgm&&Nt){const e=u(Nt);app.isMute=!1,e&&"function"==typeof e.unMute&&e.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=Bt.get(e.hiddenContentsRow[t]);if(void 0!==o)for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":o.objectTitleRemoved=!1;break;case"2":o.objectImageRemoved=!1;break;case"3":o.objectTextRemoved=!1;break;case"4":o.objectScoreRemoved=!1;break;case"5":o.objectRequirementRemoved=!1;break;case"6":o.addonTitleRemoved=!1;break;case"7":o.addonImageRemoved=!1;break;case"8":o.addonTextRemoved=!1}}}Ko(e,t,0,void 0,void 0,o),ei(o)};if(!t.isInfoRow&&!e.isNotSelectable&&!e.selectOnce)if(e.isMultipleUseVariable){if(void 0===e.numMultipleTimesMinus&&(e.numMultipleTimesMinus=0),e.multipleUseVariable>e.numMultipleTimesMinus)if(e.isSelectDelayed&&void 0!==e.selectDelayTime)e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(()=>{if(e.customTextfieldIsOn&&!o.isOverDlg&&e.multipleUseVariable===e.numMultipleTimesMinus+1)return Gt.choice=e,Gt.row=t,Gt.context=void 0!==e.wordPromptText?e.wordPromptText:"",Gt.prevText=e.wordChangeSelect||"",Gt.isWord=!0,Gt.currentDialog="dlgCommon",Gt.isDeselect=!0,void(Gt.cFunc=(i,n)=>{if("deselect"===i.detail.action)o.isOverDlg=!0,ni(e,t,o);else if("accept"===i.detail.action&&Gt.choice&&Gt.choice.idOfTheTextfieldWord){if(Gt.isWord){Gt.choice.wordChangeSelect=n;const e=Ft.get(Gt.choice.idOfTheTextfieldWord);void 0!==e&&(e.replaceText=Gt.choice.wordChangeSelect||"")}o.isOverDlg=!0}delete Gt.isDeselect});-1===o.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,i()},1e3*app.fadeTransitionTime)):i()),0===o.linkedObjects.indexOf(e.id)&&o.linkedObjects.splice(0),delete e.selectDelayTimer},e.selectDelayTime));else{if(e.customTextfieldIsOn&&!o.isOverDlg&&e.multipleUseVariable===e.numMultipleTimesMinus+1)return Gt.choice=e,Gt.row=t,Gt.context=void 0!==e.wordPromptText?e.wordPromptText:"",Gt.prevText=e.wordChangeSelect||"",Gt.isWord=!0,Gt.currentDialog="dlgCommon",Gt.isDeselect=!0,void(Gt.cFunc=(i,n)=>{if("deselect"===i.detail.action)o.isOverDlg=!0,ni(e,t,o);else if("accept"===i.detail.action&&Gt.choice&&Gt.choice.idOfTheTextfieldWord){if(Gt.isWord){Gt.choice.wordChangeSelect=n;const e=Ft.get(Gt.choice.idOfTheTextfieldWord);void 0!==e&&(e.replaceText=Gt.choice.wordChangeSelect||"")}o.isOverDlg=!0}delete Gt.isDeselect});-1===o.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(()=>{void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,i()},1e3*app.fadeTransitionTime)):i()),0===o.linkedObjects.indexOf(e.id)&&o.linkedObjects.splice(0)}}else if(void 0!==e.multipleScoreId){const t=At.get(e.multipleScoreId);void 0!==t&&(void 0===e.numMultipleTimesMinus&&(e.numMultipleTimesMinus=0),t.startingSum>e.numMultipleTimesMinus&&(t.startingSum-=1))}}}function li(e,t,o,i=new Set){const l=Array.from(xt.keys());for(let a=0;a<l.length;a++){const r=l[a],s=kt.get(r);if(void 0!==s){const l=s.row,a=s.choice,r=new n;let c=!1,d=!1;e.useDiscountCount&&!e.appliedDisChoices&&(e.appliedDisChoices=[]);for(let o=0;o<a.scores.length;o++){const s=a.scores[o];if(!s.isNotRecalculatable){const o=At.get(s.id);if(void 0!==o){if(e.discountOther&&s.isChangeDiscount&&void 0!==s.tmpDisScore){const t=a.multipleUseVariable,i=e.isSelectableMultiple&&e.isMultipleUseVariable&&e.stackableDiscount&&e.discountCount?e.discountCount*e.multipleUseVariable:e.discountCount;if(!e.useDiscountCount||e.useDiscountCount&&i&&i>e.appliedDisChoices.length){if(a.isSelectableMultiple&&a.isMultipleUseVariable&&void 0!==a.numMultipleTimesMinus){for(let e=t-1;e>=0;e--)a.isActive&&(o.startingSum+=s.tmpDisScore);a.isActive&&(r.set(s.id,s.tmpDisScore),delete s.isChangeDiscount,delete s.tmpDisScore)}else a.isSelectableMultiple||(o.startingSum+=s.tmpDisScore,r.set(s.id,s.tmpDisScore),delete s.isChangeDiscount,delete s.tmpDisScore);d=!0,a.isActive&&(s.appliedDiscount=!0,c=!0)}}if(!i.has(s.idx)){const c=e.scores.length>0,u=e.scores.length||1;for(let g=0;g<u;g++){const u=c?e.scores[g]:null,p=u&&t.get(u.id)||0,m=u?At.get(u.id):null;if((!c||c&&m)&&a.isActive){const t=Fo(s.requireds),c=new n(JSON.parse(JSON.stringify([...xt])));c.delete(e.id),l.currentChoices-=1,m&&(m.startingSum+=p);const u=Fo(s.requireds,c);if(l.currentChoices+=1,m&&(m.startingSum-=p),u!==t){s.setValue||Ho(o,s);let e=s.discountIsOn&&s.appliedDiscount&&void 0!==s.discountScore?s.discountScore:s.value;if(e=o.allowFloat?e:Math.floor(e),u)if(a.isSelectableMultiple&&a.isMultipleUseVariable&&void 0!==a.numMultipleTimesMinus){for(let t=a.multipleUseVariable-1;t>=0;t--)void 0!==s.isActiveMul&&s.isActiveMul[t]&&(o.startingSum+=e,r.set(s.id,e),s.isActiveMul[t]=!1)}else a.isSelectableMultiple||s.isActive&&(o.startingSum+=e,r.set(s.id,e),delete s.isActive);else if(a.isSelectableMultiple&&a.isMultipleUseVariable&&void 0!==a.numMultipleTimesMinus){const t=a.multipleUseVariable;void 0===s.isActiveMul&&(s.isActiveMul=[]);for(let i=t-1;i>=0;i--)s.isActiveMul[i]||(o.startingSum-=e,r.set(s.id,e),s.isActiveMul[i]=!0)}else a.isSelectableMultiple||s.isActive||(o.startingSum-=e,r.set(s.id,e),s.isActive=!0);d||(d=!0),i.add(s.idx)}}}}}}}c&&e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(a.id)&&e.appliedDisChoices.push(a.id),d&&li(a,r,++o,i)}}}function ai(e,t){let o=e.split("/IMG#");const i=o.length>1?o[1].replace(/\/CHAR#/g,","):"";o=o[0].split("/WORD#");const l=o.length>1?o[1].replace(/\/CHAR#/g,","):"";o=o[0].split("/RND#");const a=o.length>1?o[1].split("/AND#"):"";o=o[0].split("/RS#");const r=o.length>1?o[1]:"",s=o[0],c=kt.get(s);if(void 0!==c){const e=c.row,o=c.choice,s=new Map;if(r){const e=r.split("/AND#");for(let t=0;t<e.length;t++){const o=e[t].split(":"),i=Number(o[0]),n=Number(o[1]);Number.isNaN(i)||s.set(i,Number.isNaN(n)?0:n)}}for(let t=0;t<o.scores.length;t++){const e=o.scores[t],i=At.get(e.id);void 0===i||e.setValue||(s.size>0&&s.has(t)?(e.value=s.get(t),e.setValue=!0):Ho(i,e))}const p=new n;if(o.isActive=!0,xt.set(o.id,{multiple:0}),e.currentChoices+=1,o.discountOther&&void 0!==o.discountOperator&&void 0!==o.discountValue)if(o.isDisChoices){const e=new Set;if(void 0!==o.discountRows)for(let t=0;t<o.discountRows.length;t++){const i=Bt.get(o.discountRows[t]);if(void 0!==i)for(let t=0;t<i.objects.length;t++){const n=i.objects[t];No(o,n),e.add(n.id)}}if(void 0!==o.discountChoices)for(let t=0;t<o.discountChoices.length;t++)if(!e.has(o.discountChoices[t])){const e=kt.get(o.discountChoices[t]);if(void 0!==e){const t=e.choice;No(o,t)}}}else if(void 0!==o.discountGroups)for(let t=0;t<o.discountGroups.length;t++){const e=Mt.get(o.discountGroups[t]);if(void 0!==e)for(let t=0;t<e.elements.length;t++){const i=kt.get(e.elements[t]);if(void 0!==i){const e=i.choice;No(o,e)}}}let m=new Set;for(let t=0;t<o.scores.length;t++){const e=o.scores[t];if(Fo(e.requireds)&&!e.isActive){const t=At.get(e.id);if(void 0!==t){let o=e.value;if(e.useExpression&&e.setValue&&zo(t,e),e.appliedDiscount&&void 0!==e.discountScore)o=e.discountScore;else if(e.discountIsOn&&void 0!==e.discountScore&&e.discountedFrom&&e.discountedFrom.length>0){let t=!1;for(let i=0;i<e.discountedFrom.length;i++){const n=kt.get(e.discountedFrom[i]);if(void 0!==n){const i=n.choice;if(!i.useDiscountCount||void 0===i.discountCount){o=e.discountScore,e.appliedDiscount=!0,t=!0;break}{const n=i.isSelectableMultiple&&i.isMultipleUseVariable&&i.stackableDiscount?i.discountCount*i.multipleUseVariable:i.discountCount;if(i.appliedDisChoices||(i.appliedDisChoices=[]),n>i.appliedDisChoices.length){m.add(i),o=e.discountScore,e.appliedDiscount=!0,t=!0;break}}}}if(!t&&void 0!==e.tmpDiscount)for(let i=0;i<e.tmpDiscount.length;i++)o>e.tmpDiscount[i].discountedValue&&(o=e.tmpDiscount[i].discountedValue)}o=t.allowFloat?o:Math.floor(o),t.startingSum-=o,e.isActive=!0;let i=p.get(e.id);void 0!==i?p.set(e.id,o+i):p.set(e.id,o)}}}if(m.size>0&&m.forEach(e=>{e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(o.id)&&e.appliedDisChoices.push(o.id)}),o.duplicateRow&&void 0!==o.duplicateRowId&&void 0!==o.duplicateRowPlace&&di(o),o.activateOtherChoice&&void 0!==o.activateThisChoice){const e=new Set(t.map(e=>e.split("/ON#")[0]));if(o.isActivateRandom&&void 0!==o.numActivateRandom)if(""===a){let t=o.activateThisChoice.split(",").filter(t=>e.has(t.split("/ON#")[0]));const i=o.numActivateRandom>t.length?t.length:o.numActivateRandom;let n=new Set;for(let e=0;e<t.length;e++){const o=kt.get(t[e]);if(void 0!==o){if(!Fo(o.choice.requireds)){const o=t[e];t.splice(e,1),t.push(o)}}}for(let e=t.length-1;e>=0;e--)n.add(t[e]);t=[...n].reverse(),o.activatedRandom=t.slice(0,i);for(let e=0;e<i;e++){const t=o.activatedRandom[e].split("/ON#"),i=kt.get(t[0]);if(void 0!==i){const e=i.choice;if(!o.isAllowDeselect){if(e.isSelectableMultiple&&e.isMultipleUseVariable){const o=parseInt(t[1]);for(let t=0;t<Math.abs(o);t++)o>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:o<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--}e.forcedActivated=!0}e.isSelectableMultiple||(void 0===e.activatedFrom&&(e.activatedFrom=0),e.activatedFrom+=1)}}}else{let t=a.filter(t=>e.has(t.split("/RON#")[0]));o.activatedRandom=t;for(let e=0;e<t.length;e++){const t=o.activatedRandom[e].split("/RON#"),i=kt.get(t[0]);if(void 0!==i){const e=i.choice;if(!o.isAllowDeselect){if(e.isSelectableMultiple&&e.isMultipleUseVariable){const o=parseInt(t[1]);for(let t=0;t<Math.abs(o);t++)o>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:o<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--}e.forcedActivated=!0}e.isSelectableMultiple||(void 0===e.activatedFrom&&(e.activatedFrom=0),e.activatedFrom+=1)}}}else{const t=o.activateThisChoice.split(",").filter(t=>e.has(t.split("/ON#")[0]));for(let e=0;e<t.length;e++){const i=t[e].split("/ON#"),n=i.length>1?parseInt(i[1]):0,l=kt.get(i[0]);if(void 0!==l){const e=l.choice;if(!o.isAllowDeselect){if(e.isSelectableMultiple&&e.isMultipleUseVariable)if(o.isSelectableMultiple&&o.isMultipleUseVariable)for(let t=0;t<Math.abs(o.multipleUseVariable);t++)for(let o=0;o<Math.abs(n);o++)n>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:n<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--;else for(let t=0;t<Math.abs(n);t++)n>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:n<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--;e.forcedActivated=!0}e.isSelectableMultiple||(void 0===e.activatedFrom&&(e.activatedFrom=0),e.activatedFrom+=1)}else{const e=Mt.get(i[0]);if(void 0!==e){const t=e.elements;for(let e=0;e<t.length;e++){const i=kt.get(t[e]);if(void 0!==i){const e=i.choice;if(!o.isAllowDeselect){if(e.isSelectableMultiple&&e.isMultipleUseVariable)if(o.isSelectableMultiple&&o.isMultipleUseVariable)for(let t=0;t<Math.abs(o.multipleUseVariable);t++)for(let o=0;o<Math.abs(n);o++)n>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:n<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--;else for(let t=0;t<Math.abs(n);t++)n>0&&void 0!==e.numMultipleTimesMinus?e.numMultipleTimesMinus++:n<0&&void 0!==e.numMultipleTimesPluss&&e.numMultipleTimesPluss--;e.forcedActivated=!0}e.isSelectableMultiple||(void 0===e.activatedFrom&&(e.activatedFrom=0),e.activatedFrom+=1)}}}}}}}if(o.multiplyPointtypeIsOn&&void 0!==o.pointTypeToMultiply&&void 0!==o.multiplyWithThis){let e=0;o.multiplyPointtypeIsOnCheck=!0,"object"!=typeof o.startingSumAtMultiply&&(o.startingSumAtMultiply=[]);for(let t=0;t<o.pointTypeToMultiply.length;t++){let i=At.get(o.pointTypeToMultiply[t]);if(void 0!==i)if(o.multiplyPointtypeIsId&&"string"==typeof o.multiplyWithThis){let n=At.get(o.multiplyWithThis);void 0!==n?(o.startingSumAtMultiply[t]={value:i.startingSum,calcVal:n.startingSum},i.startingSum*=n.startingSum,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)):e++}else"number"==typeof o.multiplyWithThis&&(o.startingSumAtMultiply[t]={value:i.startingSum,calcVal:o.multiplyWithThis},i.startingSum*=o.multiplyWithThis,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum));else e++}e===o.pointTypeToMultiply.length&&delete o.multiplyPointtypeIsOnCheck,o.multiplyPointtypeIsOnCheck&&Vt.push(o)}if(o.dividePointtypeIsOn&&void 0!==o.pointTypeToDivide&&void 0!==o.divideWithThis){let e=0;o.dividePointtypeIsOnCheck=!0,"object"!=typeof o.startingSumAtDivide&&(o.startingSumAtDivide=[]);for(let t=0;t<o.pointTypeToDivide.length;t++){let i=At.get(o.pointTypeToDivide[t]);void 0!==i?0===o.dividedWithThis?e++:(o.startingSumAtDivide[t]={value:i.startingSum,calcVal:o.divideWithThis},i.startingSum/=o.divideWithThis,i.startingSum=i.allowFloat?i.startingSum:Math.floor(i.startingSum)):e++}e===o.pointTypeToDivide.length&&delete o.dividePointtypeIsOnCheck,!o.multiplyPointtypeIsOnCheck&&o.dividePointtypeIsOnCheck&&Vt.push(o)}if(o.setPointtypeIsOn&&void 0!==o.pointTypeToSet&&void 0!==o.setWithThis){let e=0;o.setPointtypeIsOnCheck=!0,"object"!=typeof o.startingSumAtSet&&(o.startingSumAtSet=[]);for(let t=0;t<o.pointTypeToSet.length;t++){let i=At.get(o.pointTypeToSet[t]);if(void 0!==i){let e=0;try{const t=o.setWithThis.replace(/\{([^{}]+)\}/g,(e,t)=>{const o=At.get(t);if(void 0!==o)return"".concat(o.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});e=g(t),e=i.allowFloat?e:Math.floor(e)}catch(d){console.error(d)}o.startingSumAtSet[t]={value:i.startingSum,calcVal:e},i.startingSum=e}else e++}e===o.pointTypeToSet.length&&delete o.setPointtypeIsOnCheck,o.multiplyPointtypeIsOnCheck||o.dividePointtypeIsOnCheck||!o.setPointtypeIsOnCheck||Vt.push(o)}if(o.isChangeVariables&&void 0!==o.changedVariables)for(let t=0;t<o.changedVariables.length;t++){const e=Rt.get(o.changedVariables[t]);void 0!==e&&("1"===o.changeType?e.isTrue=!0:"2"===o.changeType?e.isTrue=!1:"3"===o.changeType&&(e.isTrue=!e.isTrue))}if(o.addToAllowChoice&&void 0!==o.idOfAllowChoice&&void 0!==o.numbAddToAllowChoice)for(let t=0;t<o.idOfAllowChoice.length;t++){const e=Bt.get(o.idOfAllowChoice[t]);void 0!==e&&(e.allowedChoices+=o.numbAddToAllowChoice)}if(o.textfieldIsOn&&void 0!==o.idOfTheTextfieldWord&&void 0!==o.wordChangeSelect){const e=Ft.get(o.idOfTheTextfieldWord);void 0!==e&&(o.customTextfieldIsOn?e.replaceText=l:e.replaceText=o.wordChangeSelect)}if(o.isImageUpload&&(o.defaultImage=o.image,o.image=i),o.backpackBtnRequirement&&(void 0===app.btnBackpackIsOn&&(app.btnBackpackIsOn=0),app.btnBackpackIsOn+=1),o.showAllAddons&&(void 0===app.showAllAddons&&(app.showAllAddons=0),app.showAllAddons+=1),o.changeBackground&&(o.changeBgImage?void 0!==o.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:o.id,data:o.bgImage}),app.styling.backgroundImage=o.bgImage):void 0!==o.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:o.id,data:o.changedBgColorCode}),app.styling.backgroundColor=o.changedBgColorCode)),o.changePointBar&&(o.changeBarBgColorIsOn&&void 0!==o.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:o.id,data:o.changedBarBgColor}),app.styling.barBackgroundColor=o.changedBarBgColor),o.changeBarIconColorIsOn&&void 0!==o.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:o.id,data:o.changedBarIconColor}),app.styling.barIconColor=o.changedBarIconColor),o.changeBarTextColorIsOn&&void 0!==o.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:o.id,data:o.changedBarTextColor}),app.styling.barTextColor=o.changedBarTextColor)),o.changeTemplates&&o.changeTemplatesList&&o.changeToThisTemplate){const e=o.changeTemplatesList.split(",");for(let t=0;t<e.length;t++){const i=e[t],n=kt.get(i);if(void 0!==n){const e=n.choice;if(Ni(e,o.id,o.changeToThisTemplate),o.changeAddonTemplate)for(let t=0;t<e.addons.length;t++){Ni(e.addons[t],o.id,o.changeToThisTemplate)}continue}const l=Bt.get(i);if(void 0!==l){Ni(l,o.id,o.changeToThisTemplate);continue}const a=Mt.get(i);if(void 0!==a){const e=a.rowElements;for(let i=0;i<e.length;i++){const t=Bt.get(e[i]);void 0!==t&&Ni(t,o.id,o.changeToThisTemplate)}const t=a.elements;for(let i=0;i<t.length;i++){const e=kt.get(t[i]);if(void 0!==e){const t=e.choice;if(Ni(t,o.id,o.changeToThisTemplate),o.changeAddonTemplate)for(let e=0;e<t.addons.length;e++){Ni(t.addons[e],o.id,o.changeToThisTemplate)}}}continue}}}if(o.changeWidth&&o.changeWidthList&&o.changeToThisWidth){const e=o.changeWidthList.split(",");for(let t=0;t<e.length;t++){const i=e[t],n=kt.get(i);if(void 0!==n){zi(n.choice,o.id,o.changeToThisWidth);continue}const l=Bt.get(i);if(void 0!==l){zi(l,o.id,o.changeToThisWidth);continue}const a=Mt.get(i);if(void 0!==a){const e=a.rowElements;for(let i=0;i<e.length;i++){const t=Bt.get(e[i]);void 0!==t&&zi(t,o.id,o.changeToThisWidth)}const t=a.elements;for(let i=0;i<t.length;i++){const e=kt.get(t[i]);if(void 0!==e){zi(e.choice,o.id,o.changeToThisWidth)}}continue}}}if(o.setBgmIsOn&&o.bgmId&&(Et.bgmIsPlaying=!0,Et.isBgmInit||o.useAudioURL?$o(o,o.bgmId,0):(Vo(o),Et.isBgmInit=!0)),o.muteBgm&&Nt){const e=u(Nt);app.isMute=!0,e&&"function"==typeof e.mute&&e.mute()}if(o.isContentHidden&&void 0!==o.hiddenContentsRow&&void 0!==o.hiddenContentsType)for(let t=0;t<o.hiddenContentsRow.length;t++){const e=Bt.get(o.hiddenContentsRow[t]);if(void 0!==e){e.textIsRemoved||(e.textIsRemoved=!0);for(let t=0;t<o.hiddenContentsType.length;t++)switch(o.hiddenContentsType[t]){case"1":e.objectTitleRemoved=!0;break;case"2":e.objectImageRemoved=!0;break;case"3":e.objectTextRemoved=!0;break;case"4":e.objectScoreRemoved=!0;break;case"5":e.objectRequirementRemoved=!0;break;case"6":e.addonTitleRemoved=!0;break;case"7":e.addonImageRemoved=!0;break;case"8":e.addonTextRemoved=!0}}}li(o,p,0)}}function ri(e,t){let o=e.split("/IMG#");const i=o.length>1?o[1].replace(/\/CHAR#/g,","):"";o=o[0].split("/WORD#");const l=o.length>1?o[1].replace(/\/CHAR#/g,","):"";o=o[0].split("/RND#");const a=o.length>1?o[1].split("/AND#"):"";o=o[0].split("/RS#");const r=o.length>1?o[1]:"",s=o[0].split("/ON#"),c=kt.get(s[0]);if(void 0!==c){const e=c.choice,o=c.row,s=new Map;if(r){const e=r.split("/AND#");for(let t=0;t<e.length;t++){const o=e[t].split(":"),i=Number(o[0]),n=Number(o[1]);Number.isNaN(i)||s.set(i,Number.isNaN(n)?0:n)}}for(let t=0;t<e.scores.length;t++){const o=e.scores[t],i=At.get(o.id);void 0===i||o.setValue||(s.size>0&&s.has(t)?(o.value=s.get(t),o.setValue=!0):Ho(i,o))}const d=new n,g=e.isActive,p=e.multipleUseVariable>=0,m=Math.abs(e.multipleUseVariable);if(e.isActive||(e.isActive=!0,o.currentChoices+=1),e.multipleUseVariable++,xt.set(e.id,{multiple:e.multipleUseVariable}),p&&e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(e.isDisChoices){const t=new Set;if(void 0!==e.discountRows)for(let o=0;o<e.discountRows.length;o++){const i=Bt.get(e.discountRows[o]);if(void 0!==i)for(let o=0;o<i.objects.length;o++){const n=i.objects[o];No(e,n),t.add(n.id)}}if(void 0!==e.discountChoices)for(let o=0;o<e.discountChoices.length;o++)if(!t.has(e.discountChoices[o])){const t=kt.get(e.discountChoices[o]);if(void 0!==t){const o=t.choice;No(e,o)}}}else if(void 0!==e.discountGroups)for(let t=0;t<e.discountGroups.length;t++){const o=Mt.get(e.discountGroups[t]);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=kt.get(o.elements[t]);if(void 0!==i){const t=i.choice;No(e,t)}}}let h=new Set;for(let t=0;t<e.scores.length;t++){const o=e.scores[t];if(void 0===o.isActiveMul&&(o.isActiveMul=[]),Fo(o.requireds)&&!o.isActiveMul[m]){const e=At.get(o.id);if(void 0!==e){let t=o.value;if(o.useExpression&&o.setValue&&zo(e,o),o.discountIsOn&&void 0!==o.discountScore&&o.discountedFrom&&o.discountedFrom.length>0){const e=kt.get(o.discountedFrom[0]);if(void 0!==e){const i=e.choice;if(i.useDiscountCount&&void 0!==i.discountCount){if(i.appliedDisChoices||(i.appliedDisChoices=[]),i.discountCount>i.appliedDisChoices.length)h.add(i),t=o.discountScore,o.appliedDiscount=!0;else if(void 0!==o.tmpDiscount)for(let e=0;e<o.tmpDiscount.length;e++)t>o.tmpDiscount[e].discountedValue&&(t=o.tmpDiscount[e].discountedValue)}else t=o.discountScore,o.appliedDiscount=!0}}t=e.allowFloat?t:Math.floor(t),o.multiplyByTimes&&(t*=m+1),e.startingSum-=t,o.isActiveMul[m]=!0;let i=d.get(o.id);void 0!==i?d.set(o.id,t+i):d.set(o.id,t)}}}if(h.size>0&&h.forEach(t=>{t.appliedDisChoices&&-1===t.appliedDisChoices.indexOf(e.id)&&t.appliedDisChoices.push(e.id)}),p&&(e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&di(e),e.activateOtherChoice&&void 0!==e.activateThisChoice)){const o=new Set(t.map(e=>e.split("/ON#")[0]));if(e.isActivateRandom&&void 0!==e.numActivateRandom)if(void 0===e.activatedRandomMul&&(e.activatedRandomMul=[]),""===a){if(1===e.multipleUseVariable){let t=e.activateThisChoice.split(",").filter(e=>o.has(e.split("/ON#")[0]));e.numActivateRandom>t.length?t.length:e.numActivateRandom;let i=new Set;for(let e=0;e<t.length;e++){const o=kt.get(t[e]);if(void 0!==o){if(!Fo(o.choice.requireds)){const o=t[e];t.splice(e,1),t.push(o)}}}for(let e=t.length-1;e>=0;e--)i.add(t[e]);t=[...i].reverse();let n=0,l=[];for(let o=0;o<e.numActivateRandom;o++){l[o]=t.length/(e.numActivateRandom*(o+1))<1?t.length%(e.numActivateRandom*(o+1)):e.numActivateRandom,e.activatedRandomMul.push(t.slice(n,l[o]+n));for(let t=0;t<l[o]-n;t++){const i=e.activatedRandomMul[o][t].split("/ON#"),n=i.length>1?parseInt(i[1]):0,l=kt.get(i[0]);if(void 0!==l){const t=l.choice;if(!e.isAllowDeselect){if(t.isSelectableMultiple&&t.isMultipleUseVariable)for(let e=0;e<Math.abs(n);e++)n>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:n<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;t.forcedActivated=!0}}}n+=l[o]}}}else{const t=(e.multipleUseVariable-1)*e.numActivateRandom,i=a.splice(t,t+e.numActivateRandom);e.activatedRandomMul.push(i);for(let n=0;n<e.activatedRandomMul[e.multipleUseVariable-1].length;n++){const t=e.activatedRandomMul[e.multipleUseVariable-1][n].split("/RON#"),i=t.length>1?parseInt(t[1]):0,l=kt.get(t[0]);if(void 0!==l){const t=l.choice;if(!e.isAllowDeselect&&o.has(t.id)){if(t.isSelectableMultiple&&t.isMultipleUseVariable)for(let e=0;e<Math.abs(i);e++)i>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:i<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;t.forcedActivated=!0}}}}else{const t=e.activateThisChoice.split(",").filter(e=>o.has(e.split("/ON#")[0]));for(let o=0;o<t.length;o++){const i=t[o].split("/ON#"),n=i.length>1?parseInt(i[1]):0,l=kt.get(i[0]);if(void 0!==l){const t=l.choice;if(!e.isAllowDeselect){if(t.isSelectableMultiple&&t.isMultipleUseVariable)if(e.isSelectableMultiple&&e.isMultipleUseVariable)for(let o=0;o<Math.abs(e.multipleUseVariable);o++)for(let e=0;e<Math.abs(n);e++)n>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:n<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;else for(let e=0;e<Math.abs(n);e++)n>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:n<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;t.forcedActivated=!0}}else{const t=Mt.get(i[0]);if(void 0!==t){const o=t.elements;for(let t=0;t<o.length;t++){const i=kt.get(o[t]);if(void 0!==i){const t=i.choice;if(!e.isAllowDeselect){if(t.isSelectableMultiple&&t.isMultipleUseVariable)if(e.isSelectableMultiple&&e.isMultipleUseVariable)for(let o=0;o<Math.abs(e.multipleUseVariable);o++)for(let e=0;e<Math.abs(n);e++)n>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:n<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;else for(let e=0;e<Math.abs(n);e++)n>0&&void 0!==t.numMultipleTimesMinus?t.numMultipleTimesMinus++:n<0&&void 0!==t.numMultipleTimesPluss&&t.numMultipleTimesPluss--;t.forcedActivated=!0}}}}}}}}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let t=0;t<e.idOfAllowChoice.length;t++){const o=Bt.get(e.idOfAllowChoice[t]);void 0!==o&&(o.allowedChoices+=e.numbAddToAllowChoice)}if(!g){if(e.isChangeVariables&&void 0!==e.changedVariables)for(let t=0;t<e.changedVariables.length;t++){const o=Rt.get(e.changedVariables[t]);void 0!==o&&("1"===e.changeType?o.isTrue=!0:"2"===e.changeType?o.isTrue=!1:"3"===e.changeType&&(o.isTrue=!o.isTrue))}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){const t=Ft.get(e.idOfTheTextfieldWord);void 0!==t&&(e.customTextfieldIsOn?t.replaceText=l:t.replaceText=e.wordChangeSelect)}if(e.isImageUpload&&(e.defaultImage=e.image,e.image=i),e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate){const t=e.changeTemplatesList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=kt.get(i);if(void 0!==n){const t=n.choice;if(Ni(t,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(let o=0;o<t.addons.length;o++){Ni(t.addons[o],e.id,e.changeToThisTemplate)}continue}const l=Bt.get(i);if(void 0!==l){Ni(l,e.id,e.changeToThisTemplate);continue}const a=Mt.get(i);if(void 0!==a){const t=a.rowElements;for(let i=0;i<t.length;i++){const o=Bt.get(t[i]);void 0!==o&&Ni(o,e.id,e.changeToThisTemplate)}const o=a.elements;for(let i=0;i<o.length;i++){const t=kt.get(o[i]);if(void 0!==t){const o=t.choice;if(Ni(o,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(let t=0;t<o.addons.length;t++){Ni(o.addons[t],e.id,e.changeToThisTemplate)}}}continue}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth){const t=e.changeWidthList.split(",");for(let o=0;o<t.length;o++){const i=t[o],n=kt.get(i);if(void 0!==n){zi(n.choice,e.id,e.changeToThisWidth);continue}const l=Bt.get(i);if(void 0!==l){zi(l,e.id,e.changeToThisWidth);continue}const a=Mt.get(i);if(void 0!==a){const t=a.rowElements;for(let i=0;i<t.length;i++){const o=Bt.get(t[i]);void 0!==o&&zi(o,e.id,e.changeToThisWidth)}const o=a.elements;for(let i=0;i<o.length;i++){const t=kt.get(o[i]);if(void 0!==t){zi(t.choice,e.id,e.changeToThisWidth)}}continue}}}if(e.setBgmIsOn&&e.bgmId&&(Et.bgmIsPlaying=!0,Et.isBgmInit||e.useAudioURL?$o(e,e.bgmId,0):(Vo(e),Et.isBgmInit=!0)),e.muteBgm&&Nt){const e=u(Nt);app.isMute=!0,e&&"function"==typeof e.mute&&e.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(let t=0;t<e.hiddenContentsRow.length;t++){const o=Bt.get(e.hiddenContentsRow[t]);if(void 0!==o){o.textIsRemoved||(o.textIsRemoved=!0);for(let t=0;t<e.hiddenContentsType.length;t++)switch(e.hiddenContentsType[t]){case"1":o.objectTitleRemoved=!0;break;case"2":o.objectImageRemoved=!0;break;case"3":o.objectTextRemoved=!0;break;case"4":o.objectScoreRemoved=!0;break;case"5":o.objectRequirementRemoved=!0;break;case"6":o.addonTitleRemoved=!0;break;case"7":o.addonImageRemoved=!0;break;case"8":o.addonTextRemoved=!0}}}}li(e,d,0)}}function si(e,t){const o=new n,i=Math.abs(e.multipleUseVariable-1);for(let n=0;n<e.scores.length;n++){const t=e.scores[n];if(void 0===t.isActiveMulMinus&&(t.isActiveMulMinus=[]),Fo(t.requireds)&&!t.isActiveMulMinus[i]){const e=At.get(t.id);if(void 0!==e){let n=t.discountIsOn&&void 0!==t.discountScore?t.discountScore:t.value;n=e.allowFloat?n:Math.floor(n),t.multiplyByTimes&&(n*=Math.abs(i)),e.startingSum+=n;let l=o.get(t.id);void 0!==l?o.set(t.id,-n+l):o.set(t.id,-n),t.isActiveMulMinus[i]=!0}}}if(e.multipleUseVariable-=1,0===e.multipleUseVariable?(e.isActive=!1,t.currentChoices-=1,xt.delete(e.id)):(-1===e.multipleUseVariable&&(e.isActive=!0,t.currentChoices+=1),xt.set(e.id,{multiple:e.multipleUseVariable})),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(let n=0;n<e.idOfAllowChoice.length;n++){const t=Bt.get(e.idOfAllowChoice[n]);void 0!==t&&(t.allowedChoices-=e.numbAddToAllowChoice)}li(e,o,0)}function ci(e){_o();const t=e.split(",");for(let o=0;o<t.length;o++){const e=t[o].split("/RP#");if(e.length>1){const t=e[1].split("/NUM#"),o=t.length>1?parseInt(t[1]):0,i=At.get(t[0]);void 0!==i&&(i.startingSum+=o),xt.set(e[0],{multiple:0,isRowButton:!0,rndPoint:t[0],pointNum:o})}else{const e=t[o].split(/\/(IMG|WORD|RND|RS)#/)[0].split("/ON#"),i=e.length>1?parseInt(e[1]):0,n=kt.get(e[0]);if(void 0!==n){const e=n.choice;if(e.isSelectableMultiple&&e.isMultipleUseVariable)for(let l=0;l<Math.abs(i);l++)i>0?ri(t[o],t):si(e,n.row);else ai(t[o],t)}else{const t=Rt.get(e[0]);void 0!==t&&(t.isTrue=!0,xt.set(t.id,{multiple:0,isVariable:!0}))}}}}function di(e,t){if(void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace){const t=e.duplicateRowId;let o=0;Array.from(Bt.entries()).forEach(([e])=>{e.split("/D#")[0]===t.split("/D#")[0]&&o++});const i=Bt.get(e.duplicateRowId),n=Bt.get(e.duplicateRowPlace),l="/D#".concat(o);if(void 0!==i&&void 0!==n){const t=JSON.parse(JSON.stringify(i));if(t.id="".concat(t.id.split("/D#")[0]).concat(l),n.isBackpack){app.backpack.splice(n.index+1,0,t),Bt.set(t.id,app.backpack[n.index+1]);for(let e=n.index+1;e<app.backpack.length;e++)app.backpack[e].index=e}else{app.rows.splice(n.index+1,0,t),Bt.set(t.id,app.rows[n.index+1]);for(let e=n.index+1;e<app.rows.length;e++)app.rows[e].index=e}for(let o=0;o<t.objects.length;o++){const i=t.objects[o];i.id="".concat(i.id.split("/D#")[0]).concat(l),i.isActive=!1,delete i.forcedActivated,delete i.appliedDisChoices;for(let e=0;e<i.scores.length;e++){const t=i.scores[e];t.idx=To(0,5),$t.add(t.idx),i.isSelectableMultiple?(delete t.isActiveMul,delete t.isActiveMulMinus):delete t.isActive,delete t.setValue,Lo(t)}for(let e=0;e<i.addons.length;e++){i.addons[e].parentId=i.id}if(!e.dRowAddSufReq){for(let e=0;e<i.requireds.length;e++){const t=i.requireds[e];if("id"===t.type){const e=t.reqId.split("/ON#"),o="".concat(e[0].split("/D#")[0]).concat(l);e.length>1?t.reqId="".concat(o,"/ON#").concat(e[1]):t.reqId=o}else if("or"===t.type)for(let e=0;e<t.orRequired.length;e++){const o=t.orRequired[e];if(void 0!==o.req){const e=o.req.split("/ON#"),t="".concat(e[0].split("/D#")[0]).concat(l);e.length>1?o.req="".concat(t,"/ON#").concat(e[1]):o.req=t}}if(void 0!==t.requireds)for(let o=0;o<t.requireds.length;o++){const t=i.requireds[e];if("id"===t.type){const e=t.reqId.split("/ON#"),o="".concat(e[0].split("/D#")[0]).concat(l);e.length>1?t.reqId="".concat(o,"/ON#").concat(e[1]):t.reqId=o}else if("or"===t.type)for(let e=0;e<t.orRequired.length;e++){const o=t.orRequired[e];if(void 0!==o.req){const e=o.req.split("/ON#"),t="".concat(e[0].split("/D#")[0]).concat(l);e.length>1?o.req="".concat(t,"/ON#").concat(e[1]):o.req=t}}}}for(let e=0;e<i.scores.length;e++){const t=i.scores[e];if(void 0!==t.requireds)for(let e=0;e<t.requireds.length;e++){const o=t.requireds[e];if("id"===o.type){const e=o.reqId.split("/ON#"),t="".concat(e[0].split("/D#")[0]).concat(l);e.length>1?o.reqId="".concat(t,"/ON#").concat(e[1]):o.reqId=t}else if("or"===o.type)for(let e=0;e<o.orRequired.length;e++){const t=o.orRequired[e];if(void 0!==t.req){const e=t.req.split("/ON#"),o="".concat(e[0].split("/D#")[0]).concat(l);e.length>1?t.req="".concat(o,"/ON#").concat(e[1]):t.req=o}}}}for(let e=0;e<i.addons.length;e++){const t=i.addons[e];if(void 0!==t.requireds)for(let e=0;e<t.requireds.length;e++){const o=t.requireds[e];if("id"===o.type){const e=o.reqId.split("/ON#"),t="".concat(e[0].split("/D#")[0]).concat(l);e.length>1?o.reqId="".concat(t,"/ON#").concat(e[1]):o.reqId=t}else if("or"===o.type)for(let e=0;e<o.orRequired.length;e++){const t=o.orRequired[e];if(void 0!==t.req){const e=t.req.split("/ON#"),o="".concat(e[0].split("/D#")[0]).concat(l);e.length>1?t.req="".concat(o,"/ON#").concat(e[1]):t.req=o}}}}}if(!e.dRowAddSufFunc){if(i.activateOtherChoice&&void 0!==i.activateThisChoice){const e=i.activateThisChoice.split(",");let t="";for(let o=0;o<e.length;o++){const i=e[o].split("/ON#"),n="".concat(i[0].split("/D#")[0]).concat(l);i.length>1?t+="".concat(n,"/ON#").concat(i[1],","):t+="".concat(n,",")}i.activateThisChoice=t}if(i.deactivateOtherChoice&&void 0!==i.deactivateThisChoice){const e=i.deactivateThisChoice.split(",");let t="";for(let o=0;o<e.length;o++){const i=e[o].split("/ON#"),n="".concat(i[0].split("/D#")[0]).concat(l);i.length>1?t+="".concat(n,"/ON#").concat(i[1],","):t+="".concat(n,",")}i.deactivateThisChoice=t}if(i.duplicateRow&&void 0!==i.duplicateRowId&&void 0!==i.duplicateRowPlace){const e=i.duplicateRowId,t=i.duplicateRowPlace;i.duplicateRowId="".concat(e.split("/D")[0]).concat(l),i.duplicateRowPlace="".concat(t.split("/D")[0]).concat(l)}}if(i.backpackBtnRequirement&&(void 0!==app.hideBackpackBtn?app.hideBackpackBtn+=1:delete i.backpackBtnRequirement),n.isBackpack?kt.set(i.id,{choice:app.backpack[n.index+1].objects[o],row:app.backpack[n.index+1]}):kt.set(i.id,{choice:app.rows[n.index+1].objects[o],row:app.rows[n.index+1]}),i.groups)for(let e=0;e<i.groups.length;e++){let t=Mt.get(i.groups[e]);if(void 0!==t){-1===t.elements.indexOf(i.id)&&t.elements.push(i.id)}}if(i.objectDesignGroups)for(let e=0;e<i.objectDesignGroups.length;e++){let t=Pt.get(i.objectDesignGroups[e]);if(void 0!==t){-1===t.elements.indexOf(i.id)&&t.elements.push(i.id)}}}}}}function ui(e){return/^data:[a-zA-Z]+\/[a-zA-Z]+;base64,/.test(e)}function gi(e){const t=e.match(/^data:(image\/[a-zA-Z0-9.+-]+);base64,/);if(!t)return!1;return"image/avif"===t[1].toLowerCase()}const pi=a({selFilterBlur:r.number().optional(),selFilterBright:r.number().optional(),selFilterCont:r.number().optional(),selFilterGray:r.number().optional(),selFilterHue:r.number().optional(),selFilterInvert:r.number().optional(),selFilterOpac:r.number().optional(),selFilterSatur:r.number().optional(),selFilterSepia:r.number().optional(),reqFilterBlur:r.number().optional(),reqFilterBright:r.number().optional(),reqFilterCont:r.number().optional(),reqFilterGray:r.number().optional(),reqFilterHue:r.number().optional(),reqFilterInvert:r.number().optional(),reqFilterOpac:r.number().optional(),reqFilterSatur:r.number().optional(),reqFilterSepia:r.number().optional(),unselFilterBlur:r.number().optional(),unselFilterBright:r.number().optional(),unselFilterCont:r.number().optional(),unselFilterGray:r.number().optional(),unselFilterHue:r.number().optional(),unselFilterInvert:r.number().optional(),unselFilterOpac:r.number().optional(),unselFilterSatur:r.number().optional(),unselFilterSepia:r.number().optional()}).passthrough(),mi=a({rowTitleTextSize:r.number().optional(),rowTextTextSize:r.number().optional(),objectTitleTextSize:r.number().optional(),objectTextTextSize:r.number().optional(),addonTitleTextSize:r.number().optional(),addonTextTextSize:r.number().optional(),scoreTextSize:r.number().optional()}).passthrough(),hi=a({objectImgBorderWidth:r.number().optional(),objectImageWidth:r.number().optional(),objectImageMarginTop:r.number().optional(),objectImageMarginBottom:r.number().optional(),objectImgBorderRadiusTopLeft:r.number().optional(),objectImgBorderRadiusTopRight:r.number().optional(),objectImgBorderRadiusBottomRight:r.number().optional(),objectImgBorderRadiusBottomLeft:r.number().optional(),objectImageBoxWidth:r.number().optional()}).passthrough(),vi=a({rowImgBorderWidth:r.number().optional(),rowImageWidth:r.number().optional(),rowImageMarginTop:r.number().optional(),rowImageMarginBottom:r.number().optional(),rowImgBorderRadiusTopLeft:r.number().optional(),rowImgBorderRadiusTopRight:r.number().optional(),rowImgBorderRadiusBottomRight:r.number().optional(),rowImgBorderRadiusBottomLeft:r.number().optional(),rowImageBoxWidth:r.number().optional()}).passthrough(),fi=a({addonImgBorderWidth:r.number().optional(),addonImageWidth:r.number().optional(),addonImageMarginTop:r.number().optional(),addonImageMarginBottom:r.number().optional(),addonImgBorderRadiusTopLeft:r.number().optional(),addonImgBorderRadiusTopRight:r.number().optional(),addonImgBorderRadiusBottomRight:r.number().optional(),addonImgBorderRadiusBottomLeft:r.number().optional(),addonImageBoxWidth:r.number().optional()}).passthrough(),bi=a({objectMargin:r.number().optional(),objectTextPadding:r.number().optional(),objectBorderWidth:r.number().optional(),objectDropShadowH:r.number().optional(),objectDropShadowV:r.number().optional(),objectDropShadowBlur:r.number().optional(),objectDropShadowSpread:r.number().optional(),objectBorderRadiusTopLeft:r.number().optional(),objectBorderRadiusTopRight:r.number().optional(),objectBorderRadiusBottomRight:r.number().optional(),objectBorderRadiusBottomLeft:r.number().optional(),objectBorderImageWidth:r.number().optional(),objectBorderImageSliceTop:r.number().optional(),objectBorderImageSliceBottom:r.number().optional(),objectBorderImageSliceLeft:r.number().optional(),objectBorderImageSliceRight:r.number().optional()}).passthrough(),wi=a({rowMargin:r.number().optional(),rowBodyMarginSides:r.number().optional(),rowBodyMarginTop:r.number().optional(),rowBodyMarginBottom:r.number().optional(),rowTextPaddingY:r.number().optional(),rowTextPaddingX:r.number().optional(),rowDropShadowH:r.number().optional(),rowDropShadowV:r.number().optional(),rowDropShadowBlur:r.number().optional(),rowDropShadowSpread:r.number().optional(),rowButtonXPadding:r.number().optional(),rowButtonYPadding:r.number().optional(),rowBorderRadiusTopLeft:r.number().optional(),rowBorderRadiusTopRight:r.number().optional(),rowBorderRadiusBottomRight:r.number().optional(),rowBorderRadiusBottomLeft:r.number().optional(),rowBorderWidth:r.number().optional(),rowBorderImageWidth:r.number().optional(),rowBorderImageSliceTop:r.number().optional(),rowBorderImageSliceBottom:r.number().optional(),rowBorderImageSliceLeft:r.number().optional(),rowBorderImageSliceRight:r.number().optional()}).passthrough(),Ti=a({addonMargin:r.number().optional(),addonTextPadding:r.number().optional(),addonBorderWidth:r.number().optional(),addonDropShadowH:r.number().optional(),addonDropShadowV:r.number().optional(),addonDropShadowBlur:r.number().optional(),addonDropShadowSpread:r.number().optional(),addonBorderRadiusTopLeft:r.number().optional(),addonBorderRadiusTopRight:r.number().optional(),addonBorderRadiusBottomRight:r.number().optional(),addonBorderRadiusBottomLeft:r.number().optional(),addonBorderImageWidth:r.number().optional(),addonBorderImageSliceTop:r.number().optional(),addonBorderImageSliceBottom:r.number().optional(),addonBorderImageSliceLeft:r.number().optional(),addonBorderImageSliceRight:r.number().optional()}).passthrough(),Ii=a({multiChoiceCounterPosition:r.number().optional(),multiChoiceCounterSize:r.number().optional(),multiChoiceTextSize:r.number().optional()}).passthrough(),Si=a({barTextPadding:r.number().optional(),barTextMargin:r.number().optional(),barPadding:r.number().optional(),barMargin:r.number().optional(),barTextSize:r.number().optional()}).passthrough(),Ci=a({backPackWidth:r.number().optional()}).passthrough(),yi=s(e=>""===e?{}:e,pi.merge(mi).merge(hi).merge(vi).merge(fi).merge(bi).merge(wi).merge(Ti).merge(Ii).merge(Si).merge(Ci).passthrough()),xi=a({template:r.number().optional()}).passthrough(),Oi=a({value:r.number().optional(),minValue:r.number().optional(),maxValue:r.number().optional(),discountScore:r.number().optional(),discountScoreCal:r.number().optional(),tmpDisScore:r.number().optional()}).passthrough(),Ai=a({index:r.number().optional(),template:r.number().optional(),multipleUseVariable:r.number().optional(),initMultipleTimesMinus:r.number().optional(),selectedThisManyTimesProp:r.number().optional(),addons:c(xi).optional(),scores:c(Oi).optional(),styling:yi.optional(),numMultipleTimesMinus:r.number().optional(),numMultipleTimesPluss:r.number().optional(),numActivateRandom:r.number().optional(),discountLowLimit:r.number().optional(),discountValue:r.number().optional(),numbAddToAllowChoice:r.number().optional(),bgmFadeInSec:r.number().optional(),bgmFadeOutSec:r.number().optional(),fadeTransitionTime:r.number().optional(),divideWithThis:r.number().optional(),activatedFrom:r.number().optional()}).passthrough(),Bi=a({index:r.number().optional(),template:r.number().optional(),buttonRandomNumber:r.number().optional(),defaultAspectWidth:r.number().optional(),defaultAspectHeight:r.number().optional(),allowedChoices:r.number().optional(),currentChoices:r.number().optional(),objects:c(Ai).optional(),styling:yi.optional(),objectImgObjectFillHeight:r.number().optional(),randomMin:r.number().optional(),randomMax:r.number().optional()}).passthrough(),ki=a({startingSum:r.number().optional(),initValue:r.number().optional(),iconWidth:r.number().optional(),iconHeight:r.number().optional(),negativeIconWidth:r.number().optional(),negativeIconHeight:r.number().optional()}).passthrough(),Mi=a({styling:yi.optional()}).passthrough(),Di=a({styling:yi.optional()}).passthrough(),Fi=a({curVolume:r.number().optional(),fadeTransitionTime:r.number().optional(),hideBackpackBtn:r.number().optional(),btnBackpackIsOn:r.number().optional(),rowIdLength:r.number().optional(),objectIdLength:r.number().optional(),rowDesignGroups:c(Mi).optional(),objectDesignGroups:c(Di).optional(),rows:c(Bi).optional(),pointTypes:c(ki).optional(),backpack:c(Bi).optional(),styling:yi.optional()}).passthrough(),Ri=["autoSaveInterval","bgmFadeInterval","bgmFadeTimer","bgmIsPlaying","bgmObjectId","bgmPlayInterval","bgmTitle","bgmTitleInterval","cancelForcedActivated","comp","compG","compODG","compR","compRDG","curBgmTime","curBgmLength","isSeeking","isFadingOut","lastFadeTime","objectMap","pointTypeMap","wordMap"];function ji(e){if(Array.isArray(e))return e.map(ji).filter(e=>null!==e&&!("object"==typeof e&&0===Object.keys(e).length));if(e&&"object"==typeof e){const t={},o=Object.keys(e);for(let i=0;i<o.length;i++){const n=o[i],l=ji(e[n]);null!==l&&(t[n]=l)}return Object.keys(t).length>0?t:null}return e}function Pi(e){e.isPrivateStyling&&e.privateFilterIsOn&&void 0!==e.styling&&(void 0===e.styling.unselFilterBlurIsOn&&(e.styling.unselFilterBlurIsOn=!1),void 0===e.styling.unselFilterBlur&&(e.styling.unselFilterBlur=0),void 0===e.styling.unselFilterBrightIsOn&&(e.styling.unselFilterBrightIsOn=!1),void 0===e.styling.unselFilterBright&&(e.styling.unselFilterBright=100),void 0===e.styling.unselFilterCont&&(e.styling.unselFilterCont=100),void 0===e.styling.unselFilterGrayIsOn&&(e.styling.unselFilterGrayIsOn=!1),void 0===e.styling.unselFilterGray&&(e.styling.unselFilterGray=0),void 0===e.styling.unselFilterHueIsOn&&(e.styling.unselFilterHueIsOn=!1),void 0===e.styling.unselFilterHue&&(e.styling.unselFilterHue=0),void 0===e.styling.unselFilterInvertIsOn&&(e.styling.unselFilterInvertIsOn=!1),void 0===e.styling.unselFilterInvert&&(e.styling.unselFilterInvert=0),void 0===e.styling.unselFilterOpacIsOn&&(e.styling.unselFilterOpacIsOn=!1),void 0===e.styling.unselFilterOpac&&(e.styling.unselFilterOpac=100),void 0===e.styling.unselFilterSaturIsOn&&(e.styling.unselFilterSaturIsOn=!1),void 0===e.styling.unselFilterSatur&&(e.styling.unselFilterSatur=0),void 0===e.styling.unselFilterSepiaIsOn&&(e.styling.unselFilterSepiaIsOn=!1),void 0===e.styling.unselFilterSepia&&(e.styling.unselFilterSepia=0))}function $i(e,t){if(e.isPrivateStyling&&void 0===e.privateFilterIsOn&&void 0!==e.styling){const t=Object.keys(gt);for(let o=0;o<t.length;o++){const i=t[o];if(e.styling.hasOwnProperty(i)){e.privateFilterIsOn=!0;break}e.privateFilterIsOn=!1}}if(e.isPrivateStyling&&void 0===e.privateTextIsOn&&void 0!==e.styling){const t=Object.keys(pt);for(let o=0;o<t.length;o++){const i=t[o];if(e.styling.hasOwnProperty(i)){e.privateTextIsOn=!0;break}e.privateTextIsOn=!1}}if(e.isPrivateStyling&&void 0===e.privateObjectImageIsOn&&void 0!==e.styling){const t=Object.keys(mt);for(let o=0;o<t.length;o++){const i=t[o];if(e.styling.hasOwnProperty(i)){e.privateObjectImageIsOn=!0;break}e.privateObjectImageIsOn=!1}}if(e.isPrivateStyling&&void 0===e.privateObjectIsOn&&void 0!==e.styling){const t=Object.keys(bt);for(let o=0;o<t.length;o++){const i=t[o];if(e.styling.hasOwnProperty(i)){e.privateObjectIsOn=!0;break}e.privateObjectIsOn=!1}}if(e.isPrivateStyling&&void 0===e.privateAddonImageIsOn&&void 0!==e.styling){const t=Object.keys(vt);for(let o=0;o<t.length;o++){const i=t[o];if(e.styling.hasOwnProperty(i)){e.privateAddonImageIsOn=!0;break}e.privateAddonImageIsOn=!1}}if(e.isPrivateStyling&&void 0===e.privateAddonIsOn&&void 0!==e.styling){const t=Object.keys(Tt);for(let o=0;o<t.length;o++){const i=t[o];if(e.styling.hasOwnProperty(i)){e.privateAddonIsOn=!0;break}e.privateAddonIsOn=!1}}if(e.isPrivateStyling&&void 0===e.privateBackgroundIsOn&&void 0!==e.styling){const t=Object.keys(ft);for(let o=0;o<t.length;o++){const i=t[o];if(e.styling.hasOwnProperty(i)){e.privateBackgroundIsOn=!0;break}e.privateBackgroundIsOn=!1}}if(t){if(e.isPrivateStyling&&void 0===e.privateRowImageIsOn&&void 0!==e.styling){const t=Object.keys(ht);for(let o=0;o<t.length;o++){const i=t[o];if(e.styling.hasOwnProperty(i)){e.privateRowImageIsOn=!0;break}e.privateRowImageIsOn=!1}}if(e.isPrivateStyling&&void 0===e.privateRowIsOn&&void 0!==e.styling){const t=Object.keys(wt);for(let o=0;o<t.length;o++){const i=t[o];if(e.styling.hasOwnProperty(i)){e.privateRowIsOn=!0;break}e.privateRowIsOn=!1}}}Pi(e),e.isPrivateStyling||void 0===e.styling||(void 0!==e.styling.objectImgObjectFillHeight&&(e.objectImgObjectFillHeight=e.styling.objectImgObjectFillHeight),delete e.styling)}function Vi(e){const t=Object.keys(e);for(let n=0;n<t.length;n++){const o=t[n];if(-1!==Ri.indexOf(o))delete e[o];else if(Array.isArray(e[o])){if("rows"===o||"backpack"===o)for(let t=0;t<e[o].length;t++){const i=e[o][t];if(i.index=t,"backpack"===o&&(i.isBackpack=!0),$i(i,!0),void 0!==i.styling&&qo(i.styling,void 0===e.version||"2.0.0-beta"===e.version),void 0!==i.rowDesignGroups)for(let e=0;e<i.rowDesignGroups.length;e++)"object"==typeof i.rowDesignGroups[e]&&(i.rowDesignGroups[e]=i.rowDesignGroups[e].id);if("string"==typeof i.width&&(i.width=!1),"boolean"==typeof i.defaultWidth&&delete i.defaultWidth,i.image,ui(i.image)?Kt.value||(Kt.value=gi(i.image)):Xt.add(i.image),void 0!==i.objects)for(let t=0;t<i.objects.length;t++){const o=i.objects[t];if(o.index=t,$i(o,!1),void 0!==o.styling&&qo(o.styling,void 0===e.version||"2.0.0-beta"===e.version),o.multiplyPointtypeIsOn&&("string"==typeof o.pointTypeToMultiply&&(o.pointTypeToMultiply=[o.pointTypeToMultiply]),"number"==typeof o.startingSumAtMultiply&&(o.startingSumAtMultiply=[o.startingSumAtMultiply])),o.dividePointtypeIsOn&&("string"==typeof o.pointTypeToDivide&&(o.pointTypeToDivide=[o.pointTypeToDivide]),"number"==typeof o.startingSumAtDivide&&(o.startingSumAtDivide=[o.startingSumAtDivide])),o.fadeTransitionIsOn&&void 0!==o.fadeTransitionTime&&(o.fadeInTransitionTime=o.fadeTransitionTime,o.fadeOutTransitionTime=o.fadeTransitionTime,delete o.fadeTransitionTime),o.addToAllowChoice&&"string"==typeof o.idOfAllowChoice&&(o.idOfAllowChoice=[o.idOfAllowChoice]),void 0!==o.groups)for(let e=0;e<o.groups.length;e++)"object"==typeof o.groups[e]&&(o.groups[e]=o.groups[e].id);if(void 0!==o.objectDesignGroups)for(let e=0;e<o.objectDesignGroups.length;e++)"object"==typeof o.objectDesignGroups[e]&&(o.objectDesignGroups[e]=o.objectDesignGroups[e].id);o.isSelectableMultiple&&void 0!==o.numMultipleTimesMinus&&void 0===o.initMultipleTimesMinus&&(o.initMultipleTimesMinus=o.forcedActivated?0:o.numMultipleTimesMinus),"string"==typeof o.width&&delete o.width,"boolean"==typeof o.defaultWidth&&delete o.defaultWidth,o.image,ui(o.image)?Kt.value||(Kt.value=gi(o.image)):Xt.add(o.image);for(let e=0;e<o.addons.length;e++){const t=o.addons[e];void 0!==t.template&&0!==t.template||(t.template=1),t.parentId=o.id,t.image,ui(t.image)?Kt.value||(Kt.value=gi(t.image)):Xt.add(t.image)}}}else if("objectDesignGroups"===o||"rowDesignGroups"===o)for(let t=0;t<e[o].length;t++){const i=e[o][t];void 0===i.activatedId&&(i.activatedId=""),void 0===i.elements&&(i.elements=[]),void 0===i.backpackElements&&(i.backpackElements=[]);for(let e=0;e<i.elements.length;e++)"object"==typeof i.elements[e]&&(i.elements[e]=i.elements[e].id);for(let e=0;e<i.backpackElements.length;e++)"object"==typeof i.backpackElements[e]&&(i.backpackElements[e]=i.backpackElements[e].id);Pi(i),qo(i.styling,void 0===e.version||"2.0.0-beta"===e.version)}else if("pointTypes"===o)for(let t=0;t<e[o].length;t++){const i=e[o][t];void 0===i.initValue&&(i.initValue=i.startingSum),"object"==typeof i.positiveColor&&void 0!==i.positiveColor.hexa&&(i.positiveColor=i.positiveColor.hexa),"object"==typeof i.negativeColor&&void 0!==i.negativeColor.hexa&&(i.negativeColor=i.negativeColor.hexa),"object"==typeof i.privateColor&&void 0!==i.privateColor.hexa&&(i.privateColor=i.privateColor.hexa),"object"==typeof i.privateNegativeColor&&void 0!==i.privateNegativeColor.hexa&&(i.privateNegativeColor=i.privateNegativeColor.hexa)}else if("groups"===o)for(let t=0;t<e[o].length;t++){const i=e[o][t];void 0===i.elements&&(i.elements=[]),void 0===i.rowElements&&(i.rowElements=[]);for(let e=0;e<i.elements.length;e++)"object"==typeof i.elements[e]&&(i.elements[e]=i.elements[e].id);for(let e=0;e<i.rowElements.length;e++)"object"==typeof i.rowElements[e]&&(i.rowElements[e]=i.rowElements[e].id)}}else"object"==typeof e[o]&&"styling"===o&&qo(e[o],void 0===e.version||"2.0.0-beta"===e.version,!0)}xt.clear(),At.clear(),Bt.clear(),kt.clear(),Mt.clear(),Dt.clear(),Ft.clear(),Rt.clear(),jt.clear(),Pt.clear(),Vt.splice(0);const o=Object.keys(yt);for(let n=0;n<o.length;n++){const e=o[n];yt.hasOwnProperty(e)?app[e]=yt[e]:delete app[e]}const i=Object.keys(e);for(let n=0;n<i.length;n++){const t=i[n];app[t]=e[t]}for(let n=0;n<app.googleFonts.length;n++){const e=app.googleFonts[n].replace(/ /g,"+"),t="https://fonts.googleapis.com/css2?family=".concat(e,"&display=swap"),o=document.createElement("link");o.id=e,o.rel="stylesheet",o.href=t,o.crossOrigin="anonymous",document.head.appendChild(o)}for(let n=0;n<app.customFonts.length;n++){const e=app.customFonts[n],t=document.createElement("link");t.id=e,t.rel="stylesheet",t.href=e,t.crossOrigin="anonymous",document.head.appendChild(t)}for(let n=0;n<app.pointTypes.length;n++){const e=app.pointTypes[n];void 0!==e.id&&""!==e.id||(e.id=bo(0,4)),e.id=Ao(e.id,At),void 0===e.initValue&&(e.initValue=e.startingSum),void 0===e.isNotShownObjects&&""!==e.activatedId&&(e.isNotShownObjects=!0),void 0===e.isNotShownPointBar&&""!==e.activatedId&&(e.isNotShownPointBar=!0),At.set(e.id,e)}for(let n=0;n<app.rows.length;n++){const e=app.rows[n];void 0!==e.id&&""!==e.id||(e.id=po(0,4)),e.id=Ao(e.id,Bt),Bt.set(e.id,e);for(let t=0;t<e.objects.length;t++){const o=e.objects[t];void 0!==o.id&&""!==o.id||(o.id=ho(0,4)),o.id=Ao(o.id,kt),kt.set(o.id,{choice:o,row:e});for(let e=0;e<o.scores.length;e++){const t=o.scores[e];void 0!==t.idx&&""!==t.idx||(t.idx=To(0,5)),t.idx=Ao(t.idx,$t),$t.add(t.idx)}}}for(let n=0;n<app.backpack.length;n++){const e=app.backpack[n];void 0!==e.id&&""!==e.id||(e.id=po(0,4)),e.id=Ao(e.id,Bt),Bt.set(e.id,e);for(let t=0;t<e.objects.length;t++){const o=e.objects[t];void 0!==o.id&&""!==o.id||(o.id=ho(0,4)),o.id=Ao(o.id,kt),kt.set(o.id,{choice:o,row:e});for(let e=0;e<o.scores.length;e++){const t=o.scores[e];void 0!==t.idx&&""!==t.idx||(t.idx=To(0,5)),t.idx=Ao(t.idx,$t),$t.add(t.idx)}}}for(let n=0;n<app.groups.length;n++){const e=app.groups[n];void 0!==e.id&&""!==e.id||(e.id=fo(0,4)),e.id=Ao(e.id,Mt),Mt.set(e.id,app.groups[n]);for(let t=e.elements.length-1;t>=0;t--)kt.has(e.elements[t])||e.elements.splice(t,1);for(let t=e.rowElements.length-1;t>=0;t--)Bt.has(e.rowElements[t])||e.rowElements.splice(t,1)}for(let n=0;n<app.rows.length;n++){const e=app.rows[n];if(void 0!==e.groups)for(let t=e.groups.length-1;t>=0;t--)Mt.has(e.groups[t])||e.groups.splice(t,1);for(let t=0;t<e.objects.length;t++){const o=e.objects[t];if(void 0!==o.groups)for(let e=o.groups.length-1;e>=0;e--)Mt.has(o.groups[e])||o.groups.splice(e,1)}}for(let n=0;n<app.backpack.length;n++){const e=app.backpack[n];if(void 0!==e.groups)for(let t=e.groups.length-1;t>=0;t--)Mt.has(e.groups[t])||e.groups.splice(t,1);for(let t=0;t<e.objects.length;t++){const o=e.objects[t];if(void 0!==o.groups)for(let e=o.groups.length-1;e>=0;e--)Mt.has(o.groups[e])||o.groups.splice(e,1)}}for(let n=0;n<app.words.length;n++){const e=app.words[n];void 0!==e.id&&""!==e.id||(e.id=mo(0,4)),e.id=Ao(e.id,Ft),Ft.set(e.id,app.words[n])}for(let n=0;n<app.variables.length;n++){const e=app.variables[n];void 0!==e.id&&""!==e.id||(e.id=wo(0,4)),e.id=Ao(e.id,Rt),Rt.set(e.id,app.variables[n])}if(void 0!==app.rowDesignGroups)for(let n=0;n<app.rowDesignGroups.length;n++){const e=app.rowDesignGroups[n];void 0!==e.id&&""!==e.id||(e.id=vo(0,4)),e.id=Ao(e.id,jt);for(let t=e.elements.length-1;t>=0;t--)Bt.has(e.elements[t])||e.elements.splice(t,1);for(let t=e.backpackElements.length-1;t>=0;t--)Bt.has(e.backpackElements[t])||e.backpackElements.splice(t,1);jt.set(e.id,e)}if(void 0!==app.objectDesignGroups)for(let n=0;n<app.objectDesignGroups.length;n++){const e=app.objectDesignGroups[n];void 0!==e.id&&""!==e.id||(e.id=vo(0,4)),e.id=Ao(e.id,Pt);for(let t=e.elements.length-1;t>=0;t--)kt.has(e.elements[t])||e.elements.splice(t,1);for(let t=e.backpackElements.length-1;t>=0;t--)kt.has(e.backpackElements[t])||e.backpackElements.splice(t,1);Pt.set(app.objectDesignGroups[n].id,app.objectDesignGroups[n])}if(void 0!==app.globalRequirements)for(let n=0;n<app.globalRequirements.length;n++){const e=app.globalRequirements[n];Dt.set(e.id,e)}app.activated.length>0&&ci(app.activated.join(",")),void 0!==app.customCSS&&function(e){let t=document.getElementById("customCSS");t?""===e?(t.remove(),delete app.customCSS):(t.textContent=e,app.customCSS=e):(t=document.createElement("style"),t.id="customCSS",t.textContent=e,app.customCSS=e,document.head.appendChild(t))}(app.customCSS),app.buildAutoSaveIsOn&&(no&&no.abort(),ao()),"boolean"!=typeof app.isMute&&(app.curVolume=100,app.isMute=!1)}async function qi(e){const t=e.querySelectorAll("img"),o=Array.from(t).map(e=>e.complete?Promise.resolve():new Promise(t=>{e.onload=t,e.onerror=t}));return Promise.all(o).then(()=>{})}function Wi(e){e.querySelectorAll("img").forEach(e=>{"lazy"===e.loading&&(e.loading="eager")})}async function Li(e){const t=e.querySelectorAll("*"),o=[];t.forEach(e=>{const t=getComputedStyle(e).borderImageSource.match(/url\(["']?(.*?)["']?\)/);t&&t[1]&&o.push(t[1])});const i=o.map(e=>new Promise(t=>{const o=new Image;o.src=e,o.onload=t,o.onerror=t}));await Promise.all(i)}function Ui(e=2){return new Promise(t=>{let o=0;requestAnimationFrame(function i(){if(++o>=e)return t();requestAnimationFrame(i)})})}function Ni(e,t,o){void 0===e.templateStack&&(e.templateStack=[],e.defaultTemplate=void 0!==e.template?e.template:1),e.templateStack.push({id:t,data:o}),e.template=o}function Ei(e,t){if(void 0!==e.templateStack){const o=e.templateStack.findIndex(e=>e.id===t);-1!==o&&e.templateStack.splice(o,1);const i=e.templateStack.length;i>0?e.template=e.templateStack[i-1].data:(e.template=void 0!==e.defaultTemplate?e.defaultTemplate:1,delete e.templateStack)}}function zi(e,t,o){void 0===e.widthStack&&(e.widthStack=[],e.defaultWidth=void 0!==e.objectWidth?e.objectWidth:"col-md-3"),e.widthStack.push({id:t,data:o}),e.objectWidth=o}function Gi(e,t){if(void 0!==e.widthStack){const o=e.widthStack.findIndex(e=>e.id===t);-1!==o&&e.widthStack.splice(o,1);const i=e.widthStack.length;i>0?e.objectWidth=e.widthStack[i-1].data:(e.objectWidth=void 0!==e.defaultWidth?e.defaultWidth:"col-md-3",delete e.widthStack)}}const Hi=CSS.supports("color","#00000080");function _i(e){if(void 0===e)return"";if(Hi||!/^#([\da-f]{8})$/i.test(e))return e;const t=parseInt(e.slice(1,3),16),o=parseInt(e.slice(3,5),16),i=parseInt(e.slice(5,7),16),n=parseInt(e.slice(7,9),16)/255;return"rgba(".concat(t,", ").concat(o,", ").concat(i,", ").concat(n.toFixed(3),")")}const Yi=i({anchor:null,text:"",isVisible:!0});let Zi=0;function Ji(e,t){let o="string"==typeof t?t:t.text;function i(){let i="string"==typeof t?void 0!==app.tooltipDelay?app.tooltipDelay:1e3:t.delay;0!==Zi&&(clearTimeout(Zi),Zi=0),i>0?Zi=window.setTimeout(()=>{Yi.anchor=e,Yi.text=o,Yi.isVisible=!0},i):(Yi.anchor=e,Yi.text=o,Yi.isVisible=!0)}function n(){0!==Zi&&(clearTimeout(Zi),Zi=0),Yi.isVisible=!1}return e.addEventListener("mouseenter",i),e.addEventListener("mouseleave",n),e.addEventListener("focusin",i),e.addEventListener("focusout",n),{destroy(){Yi.isVisible=!1,Yi.anchor=null,e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",n),e.removeEventListener("focusin",i),e.removeEventListener("focusout",n)}}}var Xi=b('<div class="mdc-tooltip" role="tooltip" style="z-index: 9999;"><div class="mdc-tooltip__surface"><!></div></div>');var Ki=b("<div><!></div>");const Qi=function(e,t){let o=F(t,"text",3,""),i=F(t,"innerClass",3,"");var n=Ki(),l=M(n);R(l,()=>{var e;return null!=(e=t.children)?e:j}),P(n,(e,t)=>null==Ji?void 0:Ji(e,t),()=>({text:o(),delay:0})),$(()=>V(n,1,q(i()))),I(e,n)};var en=b("<input/>");function tn(e,t){C(t,!0);let o,n=F(t,"use",19,()=>[]),l=F(t,"class",3,""),a=F(t,"type",3,"text"),r=F(t,"placeholder",3," "),s=F(t,"value",15),c=F(t,"files",15,null),d=F(t,"dirty",15,!1),u=F(t,"invalid",15,!1),g=F(t,"updateInvalid",3,!0),p=F(t,"initialInvalid",3,!1),m=F(t,"emptyValueNull",19,()=>null===s()),h=F(t,"emptyValueUndefined",19,()=>void 0===s()),f=F(t,"step",3,"any"),b=U(t,["$$slots","$$events","$$legacy","use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","initialInvalid","emptyValueNull","emptyValueUndefined","step"]),w=i({}),y=i({});function x(e){return""===e?Number.NaN:+e}function O(e){if("file"!==a())if(""===e.currentTarget.value&&m())s(null);else if(""===e.currentTarget.value&&h())s(void 0);else switch(a()){case"number":/^-?0\d+/.test(e.currentTarget.value)&&(e.currentTarget.value=e.currentTarget.value.replace(/^(-?)0+(\d+)/,"$1$2")),"number"!=typeof s()&&"-0"!==e.currentTarget.value&&(s(x(e.currentTarget.value)),isNaN(s())&&(s(0),e.currentTarget.value="0")),function(e){return"inputType"in e&&"data"in e}(e)&&(""!==e.currentTarget.value&&"0"!==e.currentTarget.value||("-"===e.data?(s("-0"),e.currentTarget.value="-0"):"deleteContentBackward"===e.inputType?""===e.currentTarget.value&&("number"==typeof s()&&s()<0?(s("-0"),e.currentTarget.value="-0"):(s(0),e.currentTarget.value="0")):"insertFromPaste"===e.inputType&&e.data&&!isNaN(parseInt(e.data))?(s(parseFloat(e.data)),e.currentTarget.value=parseFloat(e.data).toString()):"."!==e.data&&(s(0),e.currentTarget.value="0")));break;case"range":s(x(e.currentTarget.value));break;default:s(e.currentTarget.value)}else c(e.currentTarget.files)}function A(){return o}v(()=>{"file"===a()?delete y.value:y.value=null==s()?"":s()}),N(()=>{g()&&p()&&u(A().matches(":invalid"))});var B={getAttr:function(e){return e in w?void 0!==w[e]?w[e]:null:A().getAttribute(e)},addAttr:function(e,t){w[e]!==t&&(w[e]=t)},removeAttr:function(e){e in w&&null==w[e]||(w[e]=void 0)},focus:function(){A().focus()},blur:function(){A().blur()},getElement:A},k=en(),M=e=>{var o;"file"!==a()&&O(e),null==(o=t.oninput)||o.call(t,e)},D=e=>{var o;!function(e){"file"!==a()&&"range"!==a()||O(e),"number"===a()&&s(parseFloat(e.currentTarget.value)),d(!0),g()&&u(A().matches(":invalid"))}(e),null==(o=t.onchange)||o.call(t,e)};return E(k,e=>({class:e,type:a(),placeholder:r(),...y,...w,step:f(),...b,oninput:M,onchange:D}),[()=>z({"mdc-text-field__input":!0,[l()]:!0})],void 0,void 0,!0),T(k,e=>o=e,()=>o),P(k,(e,t)=>{var o;return null==(o=G)?void 0:o(e,t)},n),I(e,k),S(B)}var on=b("<textarea></textarea>");function nn(e,t){C(t,!0);let o,n=F(t,"use",19,()=>[]),l=F(t,"class",3,""),a=F(t,"style",3,""),r=F(t,"value",15,""),s=F(t,"dirty",15,!1),c=F(t,"invalid",15,!1),d=F(t,"updateInvalid",3,!0),u=F(t,"initialInvalid",3,!1),g=F(t,"resizable",3,!0),p=U(t,["$$slots","$$events","$$legacy","use","class","style","value","dirty","invalid","updateInvalid","initialInvalid","resizable"]),m=i({});function h(){return o}N(()=>{d()&&u()&&c(h().matches(":invalid"))});var v={getAttr:function(e){return e in m?void 0!==m[e]?m[e]:null:h().getAttribute(e)},addAttr:function(e,t){m[e]!==t&&(m[e]=t)},removeAttr:function(e){e in m&&null==m[e]||(m[e]=void 0)},focus:function(){h().focus()},blur:function(){h().blur()},getElement:h},f=on(),b=e=>{var o;s(!0),d()&&c(h().matches(":invalid")),null==(o=t.onchange)||o.call(t,e)};return E(f,e=>({class:e,style:"".concat(g()?"":"resize: none; ").concat(a()),...m,...p,onchange:b}),[()=>z({"mdc-text-field__input":!0,[l()]:!0})]),T(f,e=>o=e,()=>o),P(f,(e,t)=>{var o;return null==(o=G)?void 0:o(e,t)},n),H(()=>_(f,r)),I(e,f),S(v)}var ln=b('<span class="mdc-text-field__ripple"></span>'),an=b("<!> <!>",1),rn=b("<span><!> <!></span>"),sn=b("<!> <!> <!>",1),cn=b("<label><!> <!> <!> <!> <!> <!> <!></label>"),dn=b("<div><!> <!> <!> <!> <!></div>"),un=b("<!> <!>",1);function gn(e,t){C(t,!0);const{applyPassive:o}=K;let n=()=>{};function l(e){return e===n}let a=F(t,"use",19,()=>[]),r=F(t,"class",3,""),s=F(t,"style",3,""),c=F(t,"ripple",3,!0),d=F(t,"disabled",3,!1),u=F(t,"required",3,!1),g=F(t,"textarea",3,!1),p=F(t,"variant",19,()=>g()?"outlined":"standard"),h=F(t,"noLabel",3,!1),b=F(t,"type",3,"text"),w=F(t,"value",15),O=F(t,"files",15,n),k=F(t,"invalid",15,n),H=F(t,"updateInvalid",19,()=>l(k())),_=F(t,"initialInvalid",3,!1),ge=F(t,"dirty",15,!1),pe=F(t,"validateOnValueChange",19,H),me=F(t,"useNativeValidation",19,H),he=F(t,"withLeadingIcon",3,n),ve=F(t,"withTrailingIcon",3,n),fe=F(t,"input",7),be=F(t,"floatingLabel",7),we=F(t,"lineRipple",7),Te=F(t,"notchedOutline",7),Ie=F(t,"alwaysFloat",3,!1),Se=U(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","initialInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","children","leadingIcon","trailingIcon","internalCounter","line","helper","alwaysFloat"]);const Ce=void 0!==w()||void 0===w()&&t.input$emptyValueUndefined||!l(O());l(O())&&O(null),l(k())&&k(!1);let ye,xe,Oe,Ae,Be,ke,Me=x(i(document.createElement("div"))),De=x(void 0),Fe=new X,Re=i({}),je=i({}),Pe=x(void 0),$e=x(!1),Ve=x(i(_())),qe=Y("SMUI:addLayoutListener"),We=new Promise(e=>xe=e);const Le=ie(()=>fe()&&fe().getElement());v(()=>{(ge()||y(Ve)||!H())&&y(De)&&y(De).isValid()!==!k()&&(H()?k(!y(De).isValid()):y(De).setValid(!k()))}),v(()=>{y(De)&&y(De).getValidateOnValueChange()!==pe()&&y(De).setValidateOnValueChange(!l(pe())&&pe())}),v(()=>{y(De)&&y(De).setUseNativeValidation(!!l(me())||me())}),v(()=>{y(De)&&y(De).setDisabled(d())});let Ue=w();function Ne(e){return e in Re?void 0!==Re[e]&&Re[e]:_e().classList.contains(e)}function Ee(e){Re[e]||(Re[e]=!0)}function ze(e){e in Re&&!Re[e]||(Re[e]=!1)}function Ge(e,t){je[e]!=t&&(""===t||null==t?delete je[e]:je[e]=t)}function He(){if(y(De)){const e=y(De).shouldFloat;y(De).notchOutline(e)}}function _e(){return y(Me)}v(()=>{if(y(De)&&Ce&&Ue!==w()){Ue=w();const e="".concat(null==w()?"":w());y(De).getValue()!==e&&y(De).setValue(e)}}),qe&&(ye=qe(He)),Z("SMUI:textfield:leading-icon:mount",e=>{Oe=e}),Z("SMUI:textfield:leading-icon:unmount",()=>{Oe=void 0}),Z("SMUI:textfield:trailing-icon:mount",e=>{Ae=e}),Z("SMUI:textfield:trailing-icon:unmount",()=>{Ae=void 0}),Z("SMUI:textfield:helper-text:id",e=>{D(Pe,e,!0)}),Z("SMUI:textfield:helper-text:mount",e=>{Be=e}),Z("SMUI:textfield:helper-text:unmount",()=>{D(Pe,void 0),Be=void 0}),Z("SMUI:textfield:character-counter:mount",e=>{ke=e}),Z("SMUI:textfield:character-counter:unmount",()=>{ke=void 0}),N(()=>{var e;if(D(De,new J({addClass:Ee,removeClass:ze,hasClass:Ne,registerTextFieldInteractionHandler:(e,t)=>Fe.on(_e(),e,t),deregisterTextFieldInteractionHandler:(e,t)=>Fe.off(_e(),e,t),registerValidationAttributeChangeHandler:e=>{const t=new MutationObserver(t=>{me()&&e((e=>e.map(e=>e.attributeName).filter(e=>e))(t))}),o={attributes:!0};return fe()&&t.observe(fe().getElement(),o),t},deregisterValidationAttributeChangeHandler:e=>{e.disconnect()},getNativeInput:()=>{var e;return void 0!==(null==(e=fe())?void 0:e.getElement())?fe().getElement():null},setInputAttr:(e,t)=>{var o;null==(o=fe())||o.addAttr(e,t)},removeInputAttr:e=>{var t;null==(t=fe())||t.removeAttr(e)},isFocused:()=>{var e;return document.activeElement===(null==(e=fe())?void 0:e.getElement())},registerInputInteractionHandler:(e,t)=>{var i;const n=null==(i=fe())?void 0:i.getElement();if(n){const i=o();Fe.on(n,e,t,"boolean"==typeof i?{capture:i}:i)}},deregisterInputInteractionHandler:(e,t)=>{var o;const i=null==(o=fe())?void 0:o.getElement();i&&Fe.off(i,e,t)},floatLabel:e=>be()&&be().float(e||Ie()),getLabelWidth:()=>be()?be().getWidth():0,hasLabel:()=>!!be(),shakeLabel:e=>be()&&be().shake(e),setLabelRequired:e=>be()&&be().setRequired(e),activateLineRipple:()=>we()&&we().activate(),deactivateLineRipple:()=>we()&&we().deactivate(),setLineRippleTransformOrigin:e=>we()&&we().setRippleCenter(e),closeOutline:()=>Te()&&Te().closeNotch(),hasOutline:()=>!!Te(),notchOutline:e=>Te()&&Te().notch(e)},{get helperText(){return Be},get characterCounter(){return ke},get leadingIcon(){return Oe},get trailingIcon(){return Ae}}),!0),Ce){if(null==fe())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null==(e=y(De))||e.init()}else m().then(()=>{var e;if(null==fe())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null==(e=y(De))||e.init()});return xe(),()=>{var e;null==(e=y(De))||e.destroy(),Fe.clear()}}),f(()=>{ye&&ye()});var Ye={focus:function(){var e;null==(e=fe())||e.focus()},blur:function(){var e;null==(e=fe())||e.blur()},layout:He,getElement:_e},Ze=un(),Je=B(Ze),Xe=e=>{var o=cn();E(o,(e,t,o)=>({class:e,style:t,for:void 0,...o}),[()=>z({"mdc-text-field":!0,"mdc-text-field--disabled":d(),"mdc-text-field--textarea":g(),"mdc-text-field--filled":"filled"===p(),"mdc-text-field--outlined":"outlined"===p(),"smui-text-field--standard":"standard"===p()&&!g(),"mdc-text-field--no-label":h()||null==t.label,"mdc-text-field--label-floating":y($e)||null!=w()&&""!==w(),"mdc-text-field--with-leading-icon":l(he())?t.leadingIcon:he(),"mdc-text-field--with-trailing-icon":l(ve())?t.trailingIcon:ve(),"mdc-text-field--with-internal-counter":g()&&t.internalCounter,"mdc-text-field--invalid":k(),...Re,[r()]:!0}),()=>Object.entries(je).map(([e,t])=>"".concat(e,": ").concat(t,";")).concat([s()]).join(" "),()=>te(Se,["input$","label$","ripple$","outline$","helperLine$"])]);var i=M(o),n=e=>{var o=an(),i=B(o),n=e=>{var t=ln();I(e,t)};Q(i,e=>{"filled"===p()&&e(n)});var l=ee(i,2),a=e=>{{let o=ie(()=>y($e)||Ie()||null!=w()&&""!==w()&&("number"!=typeof w()||!isNaN(w()))),i=ie(()=>le(Se,"label$"));T(re(e,L({get floatAbove(){return y(o)},get required(){return u()},wrapped:!0},()=>y(i),{children:(e,o)=>{var i=A(),n=B(i),l=e=>{},a=e=>{var o=A(),i=B(o),n=e=>{var o=se();$(()=>ce(o,t.label)),I(e,o)},l=e=>{var o=A(),i=B(o);R(i,()=>t.label),I(e,o)};Q(i,e=>{"string"==typeof t.label?e(n):e(l,!1)},!0),I(e,o)};Q(n,e=>{null==t.label?e(l):e(a,!1)}),I(e,i)},$$slots:{default:!0}})),e=>be(e),()=>be())}};Q(l,e=>{h()||null==t.label||e(a)}),I(e,o)};Q(i,e=>{"outlined"!==p()&&e(n)});var m=ee(i,2),v=e=>{{let o=ie(()=>h()||null==t.label),i=ie(()=>le(Se,"outline$"));T(ae(e,L({get noLabel(){return y(o)}},()=>y(i),{children:(e,o)=>{var i=A(),n=B(i),l=e=>{{let o=ie(()=>y($e)||Ie()||null!=w()&&""!==w()&&("number"!=typeof w()||!isNaN(w()))),i=ie(()=>le(Se,"label$"));T(re(e,L({get floatAbove(){return y(o)},get required(){return u()},wrapped:!0},()=>y(i),{children:(e,o)=>{var i=A(),n=B(i),l=e=>{},a=e=>{var o=A(),i=B(o),n=e=>{var o=se();$(()=>ce(o,t.label)),I(e,o)},l=e=>{var o=A(),i=B(o);R(i,()=>t.label),I(e,o)};Q(i,e=>{"string"==typeof t.label?e(n):e(l,!1)},!0),I(e,o)};Q(n,e=>{null==t.label?e(l):e(a,!1)}),I(e,i)},$$slots:{default:!0}})),e=>be(e),()=>be())}};Q(n,e=>{h()||null==t.label||e(l)}),I(e,i)},$$slots:{default:!0}})),e=>Te(e),()=>Te())}};Q(m,e=>{"outlined"===p()&&e(v)});var f=ee(m,2);oe(f,{key:"SMUI:textfield:icon:leading",value:!0,children:(e,o)=>{var i=A(),n=B(i);R(n,()=>{var e;return null!=(e=t.leadingIcon)?e:j}),I(e,i)},$$slots:{default:!0}});var x=ee(f,2);R(x,()=>{var e;return null!=(e=t.children)?e:j});var F=ee(x,2),N=e=>{var o=rn(),i=M(o);{let e=ie(()=>le(Se,"input$"));T(nn(i,L({get disabled(){return d()},get required(){return u()},get updateInvalid(){return H()},get initialInvalid(){return y(Ve)},get"aria-controls"(){return y(Pe)},get"aria-describedby"(){return y(Pe)}},()=>y(e),{onblur:e=>{var o;D($e,!1),D(Ve,!0),de(_e(),"blur",e),null==(o=t.input$onblur)||o.call(t,e)},onfocus:e=>{var o;D($e,!0),de(_e(),"focus",e),null==(o=t.input$onfocus)||o.call(t,e)},get value(){return w()},set value(e){w(e)},get dirty(){return ge()},set dirty(e){ge(e)},get invalid(){return k()},set invalid(e){k(e)}})),e=>fe(e),()=>fe())}var n=ee(i,2);R(n,()=>{var e;return null!=(e=t.internalCounter)?e:j}),$(e=>V(o,1,e),[()=>q(z({"mdc-text-field__resizer":!("input$resizable"in Se)||t.input$resizable}))]),I(e,o)},_=e=>{var o=sn(),i=B(o),n=e=>{var o=A(),i=B(o),n=e=>{!function(e,t){C(t,!0);let o,i=U(t,["$$slots","$$events","$$legacy","children"]);var n={getElement:function(){return o.getElement()}};T(W(e,L({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--prefix",tag:"span"},()=>i,{children:(e,o)=>{var i=A(),n=B(i);R(n,()=>{var e;return null!=(e=t.children)?e:j}),I(e,i)},$$slots:{default:!0}})),e=>o=e,()=>o),S(n)}(e,{children:(e,o)=>{var i=se();$(()=>ce(i,t.prefix)),I(e,i)},$$slots:{default:!0}})},l=e=>{var o=A(),i=B(o);R(i,()=>{var e;return null!=(e=t.prefix)?e:j}),I(e,o)};Q(i,e=>{"string"==typeof t.prefix?e(n):e(l,!1)}),I(e,o)};Q(i,e=>{null!=t.prefix&&e(n)});var l=ee(i,2);{let e=ie(()=>le(Se,"input$"));T(tn(l,L({get type(){return b()},get disabled(){return d()},get required(){return u()},get updateInvalid(){return H()},get initialInvalid(){return y(Ve)},get"aria-controls"(){return y(Pe)},get"aria-describedby"(){return y(Pe)}},()=>h()&&null!=t.label&&"string"==typeof t.label?{placeholder:t.label}:{},()=>y(e),{onblur:e=>{var o;D($e,!1),D(Ve,!0),de(_e(),"blur",e),null==(o=t.input$onblur)||o.call(t,e)},onfocus:e=>{var o;D($e,!0),de(_e(),"focus",e),null==(o=t.input$onfocus)||o.call(t,e)},get value(){return w()},set value(e){w(e)},get files(){return O()},set files(e){O(e)},get dirty(){return ge()},set dirty(e){ge(e)},get invalid(){return k()},set invalid(e){k(e)}})),e=>fe(e),()=>fe())}var a=ee(l,2),r=e=>{var o=A(),i=B(o),n=e=>{!function(e,t){C(t,!0);let o,i=U(t,["$$slots","$$events","$$legacy","children"]);var n={getElement:function(){return o.getElement()}};T(W(e,L({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--suffix",tag:"span"},()=>i,{children:(e,o)=>{var i=A(),n=B(i);R(n,()=>{var e;return null!=(e=t.children)?e:j}),I(e,i)},$$slots:{default:!0}})),e=>o=e,()=>o),S(n)}(e,{children:(e,o)=>{var i=se();$(()=>ce(i,t.suffix)),I(e,i)},$$slots:{default:!0}})},l=e=>{var o=A(),i=B(o);R(i,()=>{var e;return null!=(e=t.suffix)?e:j}),I(e,o)};Q(i,e=>{"string"==typeof t.suffix?e(n):e(l,!1)}),I(e,o)};Q(a,e=>{null!=t.suffix&&e(r)}),I(e,o)};Q(F,e=>{g()&&"string"==typeof w()?e(N):e(_,!1)});var Y=ee(F,2);oe(Y,{key:"SMUI:textfield:icon:leading",value:!1,children:(e,o)=>{var i=A(),n=B(i);R(n,()=>{var e;return null!=(e=t.trailingIcon)?e:j}),I(e,i)},$$slots:{default:!0}});var Z=ee(Y,2),J=e=>{{let t=ie(()=>le(Se,"ripple$"));T(ue(e,L(()=>y(t))),e=>we(e),()=>we())}};Q(Z,e=>{"outlined"!==p()&&c()&&e(J)}),T(o,e=>D(Me,e),()=>y(Me)),P(o,(e,t)=>{var o;return null==(o=ne)?void 0:o(e,t)},()=>({ripple:"filled"===p(),unbounded:!1,addClass:Ee,removeClass:ze,addStyle:Ge,eventTarget:y(Le),activeTarget:y(Le),initPromise:We})),P(o,(e,t)=>{var o;return null==(o=G)?void 0:o(e,t)},a),I(e,o)},Ke=e=>{var o=dn();E(o,(e,t,o)=>({class:e,style:t,...o}),[()=>z({"mdc-text-field":!0,"mdc-text-field--disabled":d(),"mdc-text-field--textarea":g(),"mdc-text-field--filled":"filled"===p(),"mdc-text-field--outlined":"outlined"===p(),"smui-text-field--standard":"standard"===p()&&!g(),"mdc-text-field--no-label":h()||null==t.label,"mdc-text-field--with-leading-icon":t.leadingIcon,"mdc-text-field--with-trailing-icon":t.trailingIcon,"mdc-text-field--invalid":k(),...Re,[r()]:!0}),()=>Object.entries(je).map(([e,t])=>"".concat(e,": ").concat(t,";")).concat([s()]).join(" "),()=>te(Se,["input$","label$","ripple$","outline$","helperLine$"])]);var i=M(o),n=e=>{var o=A(),i=B(o);R(i,()=>{var e;return null!=(e=t.label)?e:j}),I(e,o)};Q(i,e=>{"string"!=typeof t.label&&e(n)});var l=ee(i,2);oe(l,{key:"SMUI:textfield:icon:leading",value:!0,children:(e,o)=>{var i=A(),n=B(i);R(n,()=>{var e;return null!=(e=t.leadingIcon)?e:j}),I(e,i)},$$slots:{default:!0}});var u=ee(l,2);R(u,()=>{var e;return null!=(e=t.children)?e:j});var m=ee(u,2);oe(m,{key:"SMUI:textfield:icon:leading",value:!1,children:(e,o)=>{var i=A(),n=B(i);R(n,()=>{var e;return null!=(e=t.trailingIcon)?e:j}),I(e,i)},$$slots:{default:!0}});var v=ee(m,2);R(v,()=>{var e;return null!=(e=t.line)?e:j}),T(o,e=>D(Me,e),()=>y(Me)),P(o,(e,t)=>{var o;return null==(o=ne)?void 0:o(e,t)},()=>({ripple:c(),unbounded:!1,addClass:Ee,removeClass:ze,addStyle:Ge})),P(o,(e,t)=>{var o;return null==(o=G)?void 0:o(e,t)},a),I(e,o)};Q(Je,e=>{Ce?e(Xe):e(Ke,!1)});var Qe=ee(Je,2),et=e=>{{let o=ie(()=>le(Se,"helperLine$"));!function(e,t){C(t,!0);let o,i=U(t,["$$slots","$$events","$$legacy","children"]);var n={getElement:function(){return o.getElement()}};T(W(e,L({_smuiClass:"mdc-text-field-helper-line",tag:"div"},()=>i,{children:(e,o)=>{var i=A(),n=B(i);R(n,()=>{var e;return null!=(e=t.children)?e:j}),I(e,i)},$$slots:{default:!0}})),e=>o=e,()=>o),S(n)}(e,L(()=>y(o),{children:(e,o)=>{var i=A(),n=B(i);R(n,()=>{var e;return null!=(e=t.helper)?e:j}),I(e,i)},$$slots:{default:!0}}))}};return Q(Qe,e=>{t.helper&&e(et)}),I(e,Ze),S(Ye)}var pn=b('<div class="row"><div class="col-12 mt-4 mb-2"><!></div> <div class="col-sm-6 col-12 mb-4"><!></div> <div class="col-sm-6 col-12 mb-4"><!></div> <div class="col-12"><!> <!></div></div>'),mn=b("<!> <!> <!>",1);function hn(e,t){C(t,!0);let o=F(t,"open",7),i=x(""),n=x(!1);function l(){let e=[],t=Array.from(xt.keys()),o="";if(t.sort((e,t)=>{let o=kt.get(e),i=kt.get(t);return void 0!==o&&void 0!==i?o.row.index!==i.row.index?o.row.index-i.row.index:o.choice.index-i.choice.index:0}),y(n)){let i="";for(let o=0;o<t.length;o++){let n=kt.get(t[o]);if(void 0!==n){const t=n.row,o=n.choice;""!==o.title&&(t.id!==i?(""!==i&&e.push("\n"),e.push("**".concat(""!==t.title?t.title:t.debugTitle||"","**\n")),o.isSelectableMultiple?e.push("".concat(o.title,"(x").concat(o.multipleUseVariable,")")):e.push("".concat(o.title)),i=t.id):o.isSelectableMultiple?e.push(", ".concat(o.title,"(x").concat(o.multipleUseVariable,")")):e.push(", ".concat(o.title)))}}o=e.join("")}else{for(let o=0;o<t.length;o++){let i=kt.get(t[o]);if(void 0!==i){const t=i.choice;""!==t.title&&(t.isSelectableMultiple?e.push("".concat(t.title,"(x").concat(t.multipleUseVariable,")")):e.push("".concat(t.title)))}}o=e.join(", ")}const i=document.createElement("div");return i.innerHTML=o,i.textContent}ge(e,{surface$style:"width: 1920px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return o()},set open(e){o(e)},children:(e,t)=>{var o=mn(),a=B(o);pe(a,{class:"px-3 pb-0 toolbar toolbar__dialog",tabindex:0,autofocus:!0,children:(e,t)=>{var o=se("Build Form");I(e,o)},$$slots:{default:!0}});var r=ee(a,2);me(r,{children:(e,t)=>{var o=pn(),a=M(o),r=M(a);he(r,{label:e=>{var t=se("Separate Choice Titles by Row");I(e,t)},children:(e,t)=>{ve(e,{color:"secondary",class:"switch-scale",get checked(){return y(n)},set checked(e){D(n,e,!0)}})},$$slots:{label:!0,default:!0}});var s=ee(a,2),c=M(s);{let e=ie(l);gn(c,{textarea:!0,get value(){return y(e)},label:"Current Activated Choices Titles",variant:"filled",input$rows:5})}var d=ee(s,2),u=M(d);{let e=ie(so);gn(u,{textarea:!0,get value(){return y(e)},label:"Current Activated Choices ID's",variant:"filled",input$rows:5})}var g=ee(d,2),p=M(g);gn(p,{textarea:!0,label:"Area To Import Activated Choices With Lists Of Id's",variant:"filled",input$rows:5,get value(){return y(i)},set value(e){D(i,e,!0)}});var m=ee(p,2);fe(m,{onclickcapture:()=>ci(y(i)),variant:"raised",children:(e,t)=>{be(e,{children:(e,t)=>{var o=se("Import Choices/Clean if empty");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}});var s=ee(r,2);we(s,{children:(e,t)=>{fe(e,{action:"close",children:(e,t)=>{be(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=se("Cancel");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}}),S()}let vn=0;var fn=b("<div><!></div>");let bn=0;var wn=b("<input/>"),Tn=b('<span class="mdc-select__ripple"></span>'),In=b('<div><!> <div><!> <!> <!> <!> <span><span> </span></span> <span><svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5" focusable="false"><polygon class="mdc-select__dropdown-icon-inactive" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"></polygon><polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"></polygon></svg></span> <!></div> <!></div> <!>',1);function Sn(e,t){C(t,!0);const o=()=>Oe(Ke,"$selectedTextStore",n),[n,l]=Ae();let a=()=>{};function r(e){return e===a}let s=F(t,"use",19,()=>[]),c=F(t,"class",3,""),u=F(t,"style",3,""),g=F(t,"ripple",3,!0),p=F(t,"disabled",3,!1),m=F(t,"variant",3,"standard"),h=F(t,"noLabel",3,!1),b=F(t,"label",3,void 0),w=F(t,"value",15),O=F(t,"key",3,e=>e),k=F(t,"dirty",15,!1),V=F(t,"invalid",15,a),q=F(t,"updateInvalid",19,()=>r(V())),W=F(t,"required",3,!1),H=F(t,"inputId",19,()=>"SMUI-select-"+bn++),_=F(t,"hiddenInput",3,!1),J=F(t,"withLeadingIcon",3,a),X=F(t,"anchor$use",19,()=>[]),K=F(t,"anchor$class",3,""),oe=F(t,"selectedTextContainer$use",19,()=>[]),ge=F(t,"selectedTextContainer$class",3,""),pe=F(t,"selectedText$use",19,()=>[]),me=F(t,"selectedText$class",3,""),he=F(t,"dropdownIcon$use",19,()=>[]),ve=F(t,"dropdownIcon$class",3,""),fe=F(t,"menu$class",3,""),be=F(t,"alwaysFloat",3,!1),we=U(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","children","leadingIcon","helperText","alwaysFloat"]);const Be=r(V());let ke;r(V())&&V(!1);let Me,De=x(void 0),Fe=i({}),Re=i({}),je=i({}),Pe=x(-1);const $e=ie(()=>void 0!==we.menu$id?we.menu$id:H()+"-menu");let Ve,qe,We,Le,Ue=x(void 0),Ne=Y("SMUI:addLayoutListener"),Ee=x(!1),ze=i({}),Ge=x(void 0),He=x(void 0),_e=x(!1),Ye=Y("SMUI:select:context"),Ze=x(void 0),Je=x(void 0),Xe=x(void 0);Z("SMUI:list:role",""),Z("SMUI:list:nav",!1);const Ke=d("");Z("SMUI:select:selectedText",Ke);const Qe=d(w());v(()=>{Ie(Qe,w())}),Z("SMUI:select:value",Qe),v(()=>{y(De)&&y(De).getValue()!==O()(w())&&y(De).setValue(O()(w()))});let et=y(Pe);function tt(e){return e in Fe?Fe[e]:pt().classList.contains(e)}function ot(e){Fe[e]||(Fe[e]=!0)}function it(e){e in Fe&&!Fe[e]||(Fe[e]=!1)}function nt(e,t){Re[e]!=t&&(""===t||null==t?delete Re[e]:Re[e]=t)}function lt(e){ze[e]||(ze[e]=!0)}function at(e){e in ze&&!ze[e]||(ze[e]=!1)}function rt(e){return e in je?void 0!==je[e]?je[e]:null:pt().getAttribute(e)}function st(e,t){je[e]!==t&&(je[e]=t)}function ct(e){e in je&&null==je[e]||(je[e]=void 0)}function dt(){return qe.getOrderedList().map(e=>e.getValue())}function ut(e){var t;null==(t=y(De))||t.setUseDefaultValidation(e)}function gt(){var e;null==(e=y(De))||e.layout()}function pt(){return ke}v(()=>{if(et!==y(Pe))if(et=y(Pe),y(De))y(De).setSelectedIndex(y(Pe),!1,!0);else{const e=dt();w()!==e[y(Pe)]&&w(e[y(Pe)])}}),v(()=>{y(De)&&y(De).getDisabled()!==p()&&y(De).setDisabled(p())}),v(()=>{y(De)&&k()&&y(De).isValid()!==!V()&&(q()?V(!y(De).isValid()):y(De).setValid(!V()))}),v(()=>{y(De)&&y(De).getRequired()!==W()&&y(De).setRequired(W())}),Ne&&(Ve=Ne(gt)),Z("SMUI:select:leading-icon:mount",e=>{We=e}),Z("SMUI:select:leading-icon:unmount",()=>{We=void 0}),Z("SMUI:list:mount",e=>{qe=e}),Z("SMUI:select:helper-text:id",e=>{D(Ue,e,!0)}),Z("SMUI:select:helper-text:mount",e=>{Le=e}),Z("SMUI:select:helper-text:unmount",()=>{D(Ue,void 0),Le=void 0}),N(()=>(D(De,new Se({setSelectedText:e=>{Ie(Ke,e)},isSelectAnchorFocused:()=>document.activeElement===Me,getSelectAnchorAttr:rt,setSelectAnchorAttr:st,removeSelectAnchorAttr:ct,addMenuClass:lt,removeMenuClass:at,openMenu:()=>{D(Ee,!0)},closeMenu:()=>{D(Ee,!1)},getAnchorElement:()=>Me,setMenuAnchorElement:e=>{D(Ge,e,!0)},setMenuAnchorCorner:e=>{D(He,e,!0)},setMenuWrapFocus:e=>{D(_e,e,!0)},getSelectedIndex:()=>y(Pe),setSelectedIndex:e=>{et=e,D(Pe,e,!0),w(dt()[y(Pe)])},focusMenuItemAtIndex:e=>{qe.focusItemAtIndex(e)},getMenuItemCount:()=>qe.items.length,getMenuItemValues:()=>dt().map(O()),getMenuItemTextAtIndex:e=>qe.getPrimaryTextAtIndex(e),isTypeaheadInProgress:()=>qe.typeaheadInProgress,typeaheadMatchItem:(e,t)=>qe.typeaheadMatchItem(e,t),addClass:ot,removeClass:it,hasClass:tt,setRippleCenter:e=>y(Je)&&y(Je).setRippleCenter(e),activateBottomLine:()=>y(Je)&&y(Je).activate(),deactivateBottomLine:()=>y(Je)&&y(Je).deactivate(),notifyChange:e=>{var t;k(!0),q()&&V(!(null==(t=y(De))?void 0:t.isValid())),de(pt(),"SMUISelectChange",{value:w(),index:y(Pe)})},hasOutline:()=>!!y(Xe),notchOutline:e=>y(Xe)&&y(Xe).notch(e),closeOutline:()=>y(Xe)&&y(Xe).closeNotch(),hasLabel:()=>!!y(Ze),floatLabel:e=>y(Ze)&&y(Ze).float(e||be()),getLabelWidth:()=>y(Ze)?y(Ze).getWidth():0,setLabelRequired:e=>y(Ze)&&y(Ze).setRequired(e)},{get helperText(){return Le},get leadingIcon(){return We}}),!0),D(Pe,dt().indexOf(w()),!0),y(De).init(),ut(Be),()=>{var e;null==(e=y(De))||e.destroy()})),f(()=>{Ve&&Ve()});var mt={getUseDefaultValidation:function(){if(null==y(De))throw new Error("Instance is undefined.");return y(De).getUseDefaultValidation()},setUseDefaultValidation:ut,focus:function(){Me.focus()},layout:gt,getElement:pt},ht=In(),vt=B(ht);E(vt,(e,t,o)=>({class:e,style:t,...o}),[()=>z({"mdc-select":!0,"mdc-select--required":W(),"mdc-select--disabled":p(),"mdc-select--filled":"filled"===m(),"mdc-select--outlined":"outlined"===m(),"smui-select--standard":"standard"===m(),"mdc-select--with-leading-icon":r(J())?t.leadingIcon:J(),"mdc-select--no-label":h()||null==b(),"mdc-select--invalid":V(),"mdc-select--activated":y(Ee),"mdc-data-table__pagination-rows-per-page-select":"data-table:pagination"===Ye,...Fe,[c()]:!0}),()=>Object.entries(Re).map(([e,t])=>"".concat(e,": ").concat(t,";")).concat([u()]).join(" "),()=>te(we,["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])]);var ft=M(vt),bt=e=>{var t=wn();E(t,e=>({type:"hidden",required:W(),disabled:p(),value:w(),...e}),[()=>le(we,"input$")],void 0,void 0,!0),I(e,t)};Q(ft,e=>{_()&&e(bt)});var wt=ee(ft,2),Tt=e=>{var o;Me.focus(),y(De)&&y(De).handleClick(function(e){const t=e.currentTarget.getBoundingClientRect();return(function(e){return"touches"in e}(e)?e.touches[0].clientX:e.clientX)-t.left}(e)),null==(o=t.anchor$onclick)||o.call(t,e)},It=e=>{var o;y(De)&&y(De).handleKeydown(e),null==(o=t.onkeydown)||o.call(t,e)},St=e=>{var o;y(De)&&y(De).handleBlur(),de(pt(),"blur",e),null==(o=t.anchor$onblur)||o.call(t,e)},Ct=e=>{var o;y(De)&&y(De).handleFocus(),de(pt(),"focus",e),null==(o=t.anchor$onfocus)||o.call(t,e)};E(wt,(e,t)=>({class:e,"aria-required":W()?"true":void 0,"aria-disabled":p()?"true":void 0,"aria-controls":y($e),"aria-expanded":y(Ee)?"true":"false","aria-describedby":y(Ue),role:"combobox",tabindex:"0",...je,...t,onclick:Tt,onkeydown:It,onblur:St,onfocus:Ct}),[()=>z({[K()]:!0,"mdc-select__anchor":!0}),()=>le(we,"anchor$")]);var yt=M(wt),xt=e=>{var t=Tn();I(e,t)};Q(yt,e=>{"filled"===m()&&e(xt)});var Ot=ee(yt,2),At=e=>{{let t=ie(()=>H()+"-smui-label"),i=ie(()=>""!==o()||be()),n=ie(()=>le(we,"label$"));T(re(e,L({get id(){return y(t)},get floatAbove(){return y(i)},get required(){return W()}},()=>y(n),{children:(e,t)=>{var o=A(),i=B(o),n=e=>{},l=e=>{var t=A(),o=B(t),i=e=>{var t=se();$(()=>ce(t,b())),I(e,t)},n=e=>{var t=A(),o=B(t);R(o,b),I(e,t)};Q(o,e=>{"string"==typeof b()?e(i):e(n,!1)},!0),I(e,t)};Q(i,e=>{null==b()?e(n):e(l,!1)}),I(e,o)},$$slots:{default:!0}})),e=>D(Ze,e,!0),()=>y(Ze))}};Q(Ot,e=>{"outlined"===m()||h()||null==b()||e(At)});var Bt=ee(Ot,2),kt=e=>{{let t=ie(()=>h()||null==b()),i=ie(()=>le(we,"outline$"));T(ae(e,L({get noLabel(){return y(t)}},()=>y(i),{children:(e,t)=>{var i=A(),n=B(i),l=e=>{{let t=ie(()=>H()+"-smui-label"),i=ie(()=>""!==o()||be()),n=ie(()=>le(we,"label$"));T(re(e,L({get id(){return y(t)},get floatAbove(){return y(i)},get required(){return W()}},()=>y(n),{children:(e,t)=>{var o=A(),i=B(o),n=e=>{},l=e=>{var t=A(),o=B(t),i=e=>{var t=se();$(()=>ce(t,b())),I(e,t)},n=e=>{var t=A(),o=B(t);R(o,b),I(e,t)};Q(o,e=>{"string"==typeof b()?e(i):e(n,!1)},!0),I(e,t)};Q(i,e=>{null==b()?e(n):e(l,!1)}),I(e,o)},$$slots:{default:!0}})),e=>D(Ze,e,!0),()=>y(Ze))}};Q(n,e=>{h()||null==b()||e(l)}),I(e,i)},$$slots:{default:!0}})),e=>D(Xe,e,!0),()=>y(Xe))}};Q(Bt,e=>{"outlined"===m()&&e(kt)});var Mt=ee(Bt,2);R(Mt,()=>{var e;return null!=(e=t.leadingIcon)?e:j});var Dt=ee(Mt,2);E(Dt,(e,t)=>({class:e,...t}),[()=>z({[ge()]:!0,"mdc-select__selected-text-container":!0}),()=>le(we,"selectedTextContainer$")]);var Ft=M(Dt);E(Ft,(e,t)=>({id:H()+"-smui-selected-text",class:e,role:"button","aria-haspopup":"listbox","aria-labelledby":H()+"-smui-label",...t}),[()=>z({[me()]:!0,"mdc-select__selected-text":!0}),()=>le(we,"selectedText$")]);var Rt=M(Ft);P(Ft,(e,t)=>{var o;return null==(o=G)?void 0:o(e,t)},pe),P(Dt,(e,t)=>{var o;return null==(o=G)?void 0:o(e,t)},oe);var jt=ee(Dt,2);E(jt,(e,t)=>({class:e,...t}),[()=>z({[ve()]:!0,"mdc-select__dropdown-icon":!0}),()=>le(we,"dropdownIcon$")]),P(jt,(e,t)=>{var o;return null==(o=G)?void 0:o(e,t)},he);var Pt=ee(jt,2),$t=e=>{{let t=ie(()=>le(we,"ripple$"));T(ue(e,L(()=>y(t))),e=>D(Je,e,!0),()=>y(Je))}};Q(Pt,e=>{"outlined"!==m()&&g()&&e($t)}),T(wt,e=>Me=e,()=>Me),P(wt,(e,t)=>{var o;return null==(o=G)?void 0:o(e,t)},X);var Vt=ee(wt,2);{let e=ie(()=>z({[fe()]:!0,"mdc-select__menu":!0,...ze})),o=ie(()=>le(we,"menu$"));Ce(Vt,L({get class(){return y(e)},get id(){return y($e)},fullWidth:!0,anchor:!1,get anchorElement(){return y(Ge)},get anchorCorner(){return y(He)}},()=>y(o),{onSMUIMenuSelected:e=>{var o;y(De)&&y(De).handleMenuItemAction(e.detail.index),null==(o=t.onSMUIMenuSelected)||o.call(t,e)},onSMUIMenuSurfaceClosing:e=>{var o;y(De)&&y(De).handleMenuClosing(),null==(o=t.onSMUIMenuSurfaceClosing)||o.call(t,e)},onSMUIMenuSurfaceClosed:e=>{var o;y(De)&&y(De).handleMenuClosed(),null==(o=t.onSMUIMenuSurfaceClosed)||o.call(t,e)},onSMUIMenuSurfaceOpened:e=>{var o;y(De)&&y(De).handleMenuOpened(),null==(o=t.onSMUIMenuSurfaceOpened)||o.call(t,e)},get open(){return y(Ee)},set open(e){D(Ee,e,!0)},children:(e,o)=>{{let o=ie(()=>le(we,"list$"));ye(e,L({role:"listbox",get wrapFocus(){return y(_e)}},()=>y(o),{style:"max-height: 296px",get selectedIndex(){return y(Pe)},set selectedIndex(e){D(Pe,e,!0)},children:(e,o)=>{var i=A(),n=B(i);R(n,()=>{var e;return null!=(e=t.children)?e:j}),I(e,i)},$$slots:{default:!0}}))}},$$slots:{default:!0}}))}T(vt,e=>ke=e,()=>ke),P(vt,(e,t)=>{var o;return null==(o=ne)?void 0:o(e,t)},()=>({ripple:"filled"===m(),unbounded:!1,addClass:ot,removeClass:it,addStyle:nt})),P(vt,(e,t)=>{var o;return null==(o=xe)?void 0:o(e,t)},()=>({addClass:ot,removeClass:it})),P(vt,(e,t)=>{var o;return null==(o=G)?void 0:o(e,t)},s);var qt=ee(vt,2),Wt=e=>{{let o=ie(()=>le(we,"helperText$"));!function(e,t){C(t,!0);let o,n=F(t,"use",19,()=>[]),l=F(t,"class",3,""),a=F(t,"id",19,()=>"SMUI-select-helper-text-"+vn++),r=F(t,"persistent",3,!1),s=F(t,"validationMsg",3,!1),c=U(t,["$$slots","$$events","$$legacy","use","class","id","persistent","validationMsg","children"]),d=x(void 0),u=i({}),g=i({}),p=x(void 0);const m=Y("SMUI:select:helper-text:id"),h=Y("SMUI:select:helper-text:mount"),v=Y("SMUI:select:helper-text:unmount");function f(e){return e in u?u[e]:q().classList.contains(e)}function b(e){u[e]||(u[e]=!0)}function w(e){e in u&&!u[e]||(u[e]=!1)}function O(e){return e in g?void 0!==g[e]?g[e]:null:q().getAttribute(e)}function k(e,t){g[e]!==t&&(g[e]=t)}function V(e){e in g&&null==g[e]||(g[e]=void 0)}function q(){return o}N(()=>(D(d,new Te({addClass:b,removeClass:w,hasClass:f,getAttr:O,setAttr:k,removeAttr:V,setContent:e=>{D(p,e,!0)}}),!0),m&&m(a()),h&&h(y(d)),y(d).init(),()=>{var e;v&&y(d)&&v(y(d)),null==(e=y(d))||e.destroy()}));var W={getElement:q},L=fn();E(L,e=>({class:e,"aria-hidden":r()?void 0:"true",id:a(),...g,...c}),[()=>z({"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":s(),"mdc-select-helper-text--validation-msg-persistent":r(),...u,[l()]:!0})]);var H=M(L),_=e=>{var o=A(),i=B(o);R(i,()=>{var e;return null!=(e=t.children)?e:j}),I(e,o)},Z=e=>{var t=se();$(()=>ce(t,y(p))),I(e,t)};Q(H,e=>{null==y(p)?e(_):e(Z,!1)}),T(L,e=>o=e,()=>o),P(L,(e,t)=>{var o;return null==(o=G)?void 0:o(e,t)},n),I(e,L),S(W)}(e,L(()=>y(o),{children:(e,o)=>{var i=A(),n=B(i);R(n,()=>{var e;return null!=(e=t.helperText)?e:j}),I(e,i)},$$slots:{default:!0}}))}};Q(qt,e=>{t.helperText&&e(Wt)}),$(()=>ce(Rt,o())),I(e,ht);var Lt=S(mt);return l(),Lt}function Cn(e,t){C(t,!0);const[o,i]=Ae();let n=F(t,"use",19,()=>[]);F(t,"class",3,"");let l,a=F(t,"value",3,""),r=U(t,["$$slots","$$events","$$legacy","use","class","value","children"]);const s=Y("SMUI:select:selectedText"),c=Y("SMUI:select:value");Z("SMUI:list:item:role","option");const d=ie(()=>null!=a()&&""!==a()&&Oe(c,"$selectedValue",o)===a());function u(){y(d)&&l&&Ie(s,l.getPrimaryText())}N(u),f(u);var g={getElement:function(){return l.getElement()}};T(Be(e,L({get use(){return n()},get"data-value"(){return a()},get value(){return a()},get selected(){return y(d)}},()=>r,{children:(e,o)=>{var i=A(),n=B(i);R(n,()=>{var e;return null!=(e=t.children)?e:j}),I(e,i)},$$slots:{default:!0}})),e=>l=e,()=>l);var p=S(g);return i(),p}var yn=b('<div class="col-12 px-3 mt-0"><!></div>'),xn=b('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12"><!></div> <div class="col-12"><!></div> <!> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div></div></div>'),On=b("<b>Interactive CYOA Creator Plus</b>"),An=b('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12 text-right"> <br/></div></div></div>'),Bn=b("<!> <!>",1),kn=b("<!> <!>",1),Mn=b("<!> <!> <!>",1);function Dn(e,t){C(t,!0);let o=F(t,"open",7);const i=[{text:"2 per row",value:"col-6"},{text:"3 per row",value:"col-4"},{text:"4 per row",value:"col-3"}];let n=x("General");function l(){no&&no.abort(),ao()}function a(){const e=_t.allowDeselect;for(let t=0;t<app.backpack.length;t++){const o=app.backpack[t];o.isResultRow&&(o.isInfoRow=!e)}}ge(e,{surface$style:"width: 600px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return o()},set open(e){o(e)},children:(e,t)=>{var o=Mn(),r=B(o);pe(r,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:(e,t)=>{var o=se("Settings");I(e,o)},$$slots:{default:!0}});var s=ee(r,2);me(s,{children:(e,t)=>{var o=kn(),r=B(o);{const e=(e,t=j)=>{Me(e,{get tab(){return t()},children:(e,o)=>{be(e,{children:(e,o)=>{var i=se();$(()=>ce(i,t())),I(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ke(r,{tabs:["General","About"],get active(){return y(n)},set active(e){D(n,e,!0)},tab:e,$$slots:{tab:!0}})}var s=ee(r,2),c=e=>{De(e,{role:"tabpanel",variant:"unelevated",children:(e,t)=>{Fe(e,{children:(e,t)=>{var o=xn(),n=M(o),r=M(n);{const e=e=>{var t=se("Maximum Number of Choices per Row for Screens Between 720px and 1280px.");I(e,t)};Sn(M(r),{label:"Choices per row",variant:"standard",alwaysFloat:!0,get value(){return app.objectsPerRow},set value(e){app.objectsPerRow=e},helperText:e,children:(e,t)=>{var o=A(),n=B(o);Re(n,17,()=>i,e=>e.text,(e,t)=>{Cn(e,{get value(){return y(t).value},children:(e,o)=>{var i=se();$(()=>ce(i,y(t).text)),I(e,i)},$$slots:{default:!0}})}),I(e,o)},$$slots:{helperText:!0,default:!0}})}var s=ee(r,2),c=M(s);he(c,{label:e=>{var t=se("Enable Auto Save");I(e,t)},children:(e,t)=>{ve(e,{get checked(){return app.buildAutoSaveIsOn||!1},set checked(e){var t;t=e,app.buildAutoSaveIsOn=t},onSMUISwitchChange:()=>{app.buildAutoSaveIsOn&&l()},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var d=ee(s,2),g=e=>{var t=yn(),o=M(t);gn(o,{get value(){return app.buildAutoSaveInterval||10},set value(e){var t;t=e,app.buildAutoSaveInterval=t},label:"Auto Save Interval",type:"number",suffix:"min",variant:"standard",style:"max-width: 200px",input$class:"text-right",input$min:"1",onchange:()=>{app.buildAutoSaveInterval<1&&(app.buildAutoSaveInterval=1),l()}}),I(e,t)};Q(d,e=>{app.buildAutoSaveIsOn&&e(g)});var p=ee(d,2),m=M(p);he(m,{label:e=>{var t=se("Preload Images in Backpack");I(e,t)},children:(e,t)=>{ve(e,{get checked(){return app.preloadImages||!1},set checked(e){var t;t=e,app.preloadImages=t},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var h=ee(p,2),v=M(h);he(v,{label:e=>{var t=se("Allow Deselecting Choices in Backpack");I(e,t)},children:(e,t)=>{ve(e,{onSMUISwitchChange:a,color:"secondary",class:"switch-scale",get checked(){return _t.allowDeselect},set checked(e){_t.allowDeselect=e}})},$$slots:{label:!0,default:!0}});var f=ee(h,2),b=M(f);Qi(b,{text:"Enabling this option may cause image downloads to fail or reduce the image resolution.",children:(e,t)=>{he(e,{label:e=>{var t=se("Download Images as Single File");I(e,t)},children:(e,t)=>{ve(e,{color:"secondary",class:"switch-scale",get checked(){return _t.isSingleFile},set checked(e){_t.isSingleFile=e}})},$$slots:{label:!0,default:!0}})},$$slots:{default:!0}});var w=ee(f,2),T=M(w);he(T,{label:e=>{var t=se("Show Background Music Player");I(e,t)},children:(e,t)=>{ve(e,{get checked(){return app.showMusicPlayer||!1},set checked(e){var t;t=e,app.showMusicPlayer=t},color:"secondary",class:"switch-scale",onchange:()=>{if(app.showMusicPlayer){const e=u(Ut);if(e){let t=0,o=0;0!==Et.bgmTitleInterval&&(clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0),Et.bgmTitleInterval=window.setInterval(()=>{if(""!==Et.bgmObjectId){const t=kt.get(Et.bgmObjectId);if(void 0!==t){const o=t.choice;e.getId()===o.bgmId&&""!==e.getTitle()&&(Et.bgmTitle=e.getTitle(),Et.curBgmLength=e.getDuration(),clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0)}}},1e3),0!==Et.bgmPlayInterval&&(clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),Et.bgmPlayInterval=window.setInterval(()=>{if(!Et.isSeeking&&e.isPlaying()){const i=Math.floor(e.getCurrentTime());i!==Et.curBgmTime?t!==i?Et.curBgmTime=i:(o++,o>Et.curBgmLength&&(o=1),Et.curBgmTime=o):(t=i,o=i+1,Et.curBgmTime=o)}},1e3)}}else Et.bgmIsPlaying&&(0!==Et.bgmTitleInterval&&(clearInterval(Et.bgmTitleInterval),Et.bgmTitleInterval=0),0!==Et.bgmPlayInterval&&(clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0))}})},$$slots:{label:!0,default:!0}});var S=ee(w,2),C=M(S);gn(C,{get value(){return app.styling.backPackWidth||1200},set value(e){var t;t=e,app.styling.backPackWidth=t},label:"Backpack Width",type:"number",suffix:"px",variant:"standard",input$min:"0",onchange:()=>{void 0!==app.styling.backPackWidth&&app.styling.backPackWidth<0&&(app.styling.backPackWidth=0)}}),I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},d=e=>{var t=A(),o=B(t),i=e=>{De(e,{role:"tabpanel",variant:"unelevated",children:(e,t)=>{var o=Bn(),i=B(o);je(i,{class:"text-center",children:(e,t)=>{var o=On();I(e,o)},$$slots:{default:!0}});var n=ee(i,2);Fe(n,{children:(e,t)=>{var o=An(),i=M(o),n=M(i),l=M(n);$(()=>ce(l,"v".concat(ut))),I(e,o)},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}})};Q(o,e=>{"About"===y(n)&&e(i)},!0),I(e,t)};Q(s,e=>{"General"===y(n)?e(c):e(d,!1)}),I(e,o)},$$slots:{default:!0}});var c=ee(s,2);we(c,{children:(e,t)=>{fe(e,{action:"close",children:(e,t)=>{be(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=se("Close");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}}),S()}var Fn=b('<div><span class="d-flex text-prewrap align-items-center"><!> <!> <span translate="no"> </span> <!> <!></span></div>');var Rn=b('<div class="col-12"><!></div>'),jn=b('<div class="row pt-4"><div class="col-12"><!></div> <!></div>'),Pn=b('<div class="col-12"><!></div>'),$n=b('<div class="container-fluid"><div class="row"><!> <div class="col-6"><!></div> <div class="col-6"><!></div></div></div>'),Vn=b("<!> <!> <!>",1);function qn(e,t){C(t,!0);let o=F(t,"open",7),n=F(t,"title",3,""),l=F(t,"defaultRow",3,5),a=F(t,"textLabel",3,""),r=x(i(t.isWord&&t.prevText?t.prevText:""));ge(e,{surface$style:"width: 400px; max-width: calc(100vw - 32px);",onSMUIDialogClosed:function(e){t.isWord?t.closeHandler(e,y(r)):t.closeHandler(e),t.onclose()},get open(){return o()},set open(e){o(e)},children:(e,o)=>{var i=Vn(),s=B(i);pe(s,{class:"px-3 pb-0 toolbar toolbar__dialog",children:(e,t)=>{var o=A(),i=B(o);k(i,n),I(e,o)},$$slots:{default:!0}});var c=ee(s,2);me(c,{children:(e,o)=>{var i=jn(),n=M(i),s=M(n);k(s,()=>t.context);var c=ee(n,2),d=e=>{var t=Rn(),o=M(t),i=e=>{gn(e,{get label(){return a()},variant:"filled",get value(){return y(r)},set value(e){D(r,e,!0)}})},n=e=>{gn(e,{textarea:!0,get label(){return a()},variant:"filled",get input$rows(){return l()},get value(){return y(r)},set value(e){D(r,e,!0)}})};Q(o,e=>{1===l()?e(i):e(n,!1)}),I(e,t)};Q(c,e=>{t.isWord&&e(d)}),I(e,i)},$$slots:{default:!0}});var d=ee(c,2);we(d,{children:(e,o)=>{var i=$n(),n=M(i),l=M(n),a=e=>{var t=Pn(),o=M(t);fe(o,{action:"deselect",children:(e,t)=>{be(e,{children:(e,t)=>{var o=se("Deselect");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),I(e,t)};Q(l,e=>{t.isDeselect&&e(a)});var r=ee(l,2),s=M(r);fe(s,{action:"close",children:(e,t)=>{be(e,{children:(e,t)=>{var o=se("Cancel");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var c=ee(r,2),d=M(c);fe(d,{action:"accept",children:(e,t)=>{be(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=se("OK");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),I(e,i)},$$slots:{default:!0}}),I(e,i)},$$slots:{default:!0}}),S()}var Wn=b('<i class="mdi mdi-play"></i>'),Ln=b('<i class="mdi mdi-clipboard-outline"></i>'),Un=b('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-10 col-8"><div class="col-12 pt-1"><div> </div> <div> </div></div></div> <div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div></div>'),Nn=b('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-12" style="height: 48px">Empty</div></div>'),En=b('<i class="mdi mdi-alpha-a-box-outline"></i>'),zn=b('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12 pt-1"><div> </div> <div> </div></div></div></div>'),Gn=b('<i class="mdi mdi-play"></i>'),Hn=b('<i class="mdi mdi-trash-can"></i>'),_n=b('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-10 col-8"><div class="col-12 pt-1"><div> </div> <div> </div></div></div> <div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div></div>'),Yn=b('<i class="mdi mdi-content-save"></i>'),Zn=b('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12"><!></div></div></div>'),Jn=b("<!> <!>",1),Xn=b('<i class="mdi mdi-menu-left"></i>'),Kn=b('<i class="mdi mdi-menu-right"></i>'),Qn=b('<div class="container-fluid pb-2 mb-2" style="border: 1px solid"><!></div> <div class="row gy-2"><div class="col pb-2"><!></div> <div class="col pb-2"><div class="d-row align-items-center justify-end"><!> <span class="list-text px-2"> </span> <!></div></div></div> <div class="row gy-2"><div class="col-12"><!></div></div>',1),el=b("<!> <!> <!>",1),tl=b("<!> <!>",1);function ol(e,t){C(t,!0);let o=F(t,"open",7);const i={action:()=>{},title:"Warning",context:""};let n=x("none"),l=x(1),a=ie(()=>9*(y(l)-1)),r=ie(()=>Math.min(y(a)+9-1,99)),s=ie(()=>Array.from({length:y(r)-y(a)+1},(e,t)=>Zt[y(a)+t])),c=ie(()=>Array.from({length:y(r)-y(a)+1},(e,t)=>Jt[y(a)+t])),d=x(!1),u=ie(()=>9*(y(l)-1));function g(e){const t="".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(e),o=navigator.language,i=new Date,n=new Intl.DateTimeFormat(o,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(i);!async function(e,t,o,i,n){const l=(await io()).transaction(i,"readwrite").objectStore(i);try{await new Promise((o,i)=>{const n=l.put(e,t);n.onsuccess=()=>o(),n.onerror=()=>i(n.error)}),n&&(Zt[o].stored=!0,Zt[o].time=e.time,Zt[o].name=e.name)}catch(a){console.error(a)}}({stored:!0,name:Zt[e].name,time:n,app:so()},t,e,"buildStore",!0)}function p(e){!async function(e,t,o,i){const n=(await io()).transaction(o,"readwrite").objectStore(o);try{await new Promise((t,o)=>{const i=n.delete(e);i.onsuccess=()=>t(),i.onerror=()=>o(i.error)}),i&&(Zt[t].stored=!1,Zt[t].name="Slot ".concat(t+1),Zt[t].time="")}catch(l){console.error(l)}}("".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(e),e,"buildStore",!0)}var m=tl(),h=B(m);ge(h,{surface$style:"width: 700px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},id:"dialog",get open(){return o()},set open(e){o(e)},children:(e,t)=>{var o=el(),a=B(o);pe(a,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:(e,t)=>{var o=se("Save/Load Build");I(e,o)},$$slots:{default:!0}});var r=ee(a,2);me(r,{class:"pt-3",children:(e,t)=>{var o=Qn(),a=B(o),r=M(a),m=e=>{var t=A(),o=B(t);Re(o,17,()=>y(c),Ve,(e,t,o)=>{var l=A(),a=B(l),r=e=>{var l=Un(),a=M(l),r=M(a);$e(r,{onclickcapture:()=>{i.action=()=>async function(e){const t=y(c)[e].name,o=await ro(t,"buildStore",!0);ci(Array.isArray(o.value)?o.value.join(","):o.value)}(y(u)+o),i.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",D(n,"dlgCommon")},children:(e,t)=>{var o=Wn();I(e,o)},$$slots:{default:!0}});var s=ee(a,2),d=M(s),g=M(d),p=M(g),m=ee(g,2),h=M(m),v=ee(s,2),f=M(v);$e(f,{onclickcapture:()=>async function(e){const t=y(c)[e].name,o=await ro(t,"buildStore",!0),i=Array.isArray(o.value)?o.value.join(","):o.value;navigator.clipboard.writeText(i).then(()=>{Ht.labelText="Build code copied to clipboard.",Ht.isOpen=!0}).catch(e=>{Ht.labelText="Failed to copy build code to clipboard.",Ht.isOpen=!0,console.error(e)})}(y(u)+o),children:(e,t)=>{var o=Ln();I(e,o)},$$slots:{default:!0}}),$(()=>{ce(p,y(t).name),ce(h,y(t).time)}),I(e,l)},s=e=>{var t=Nn();I(e,t)};Q(a,e=>{y(t).stored?e(r):e(s,!1)}),I(e,l)}),I(e,t)},h=e=>{var t=Jn(),o=B(t),l=e=>{var t=zn(),o=M(t),l=M(o);$e(l,{onclickcapture:()=>{i.action=()=>async function(){const e="".concat(location.pathname.replace(/\/index\.html$/,"/"),"autoSave");ci((await ro(e,"buildStore")).app)}(),i.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",D(n,"dlgCommon")},children:(e,t)=>{var o=En();I(e,o)},$$slots:{default:!0}});var a=ee(o,2),r=M(a),s=M(r),c=M(s),d=ee(s,2),u=M(d);$(()=>{ce(c,Yt.name),ce(u,Yt.time)}),I(e,t)};Q(o,e=>{Yt.stored&&e(l)});var a=ee(o,2);Re(a,17,()=>y(s),Ve,(e,t,o)=>{var l=A(),a=B(l),r=e=>{var l=_n(),a=M(l),r=M(a);$e(r,{onclickcapture:()=>{i.action=()=>async function(e){const t="".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(e);ci((await ro(t,"buildStore")).app)}(y(u)+o),i.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",D(n,"dlgCommon")},children:(e,t)=>{var o=Gn();I(e,o)},$$slots:{default:!0}});var s=ee(a,2),c=M(s),d=M(c),g=M(d),m=ee(d,2),h=M(m),v=ee(s,2),f=M(v);$e(f,{onclickcapture:()=>{i.action=()=>p(y(u)+o),i.context="Are you sure you want to delete this build?<br>This action cannot be undone.",D(n,"dlgCommon")},children:(e,t)=>{var o=Hn();I(e,o)},$$slots:{default:!0}}),$(()=>{ce(g,y(t).name),ce(h,y(t).time)}),I(e,l)},s=e=>{var i=Zn(),n=M(i),l=M(n);$e(l,{onclickcapture:()=>g(y(u)+o),children:(e,t)=>{var o=Yn();I(e,o)},$$slots:{default:!0}});var a=ee(n,2),r=M(a);gn(M(r),{onclickcapture:()=>y(t).name="",onblur:()=>{""===y(t).name&&(y(t).name="Slot ".concat(y(u)+o+1))},input$onkeydown:e=>{"Enter"===e.key&&g(y(u)+o)},class:"textbox-mini",variant:"standard",get value(){return y(t).name},set value(e){y(t).name=e}}),I(e,i)};Q(a,e=>{y(t).stored?e(r):e(s,!1)}),I(e,l)}),I(e,t)};Q(r,e=>{y(d)?e(m):e(h,!1)});var v=ee(a,2),f=M(v),b=M(f);he(b,{style:"height: 48px",label:e=>{var t=se("Load from Legacy Version");I(e,t)},children:(e,t)=>{ve(e,{onSMUISwitchChange:()=>D(l,1),color:"secondary",class:"switch-scale",get checked(){return y(d)},set checked(e){D(d,e,!0)}})},$$slots:{label:!0,default:!0}});var w=ee(f,2),T=M(w),S=M(T);$e(S,{onclickcapture:()=>y(l)>1?D(l,y(l)-1):D(l,11),children:(e,t)=>{var o=Xn();I(e,o)},$$slots:{default:!0}});var C=ee(S,2),x=M(C),O=ee(C,2);$e(O,{onclickcapture:()=>y(l)<11?D(l,y(l)+1):D(l,1),children:(e,t)=>{var o=Kn();I(e,o)},$$slots:{default:!0}});var k=ee(v,2),F=M(k),R=M(F);fe(R,{onclickcapture:()=>D(n,"appBuildForm"),variant:"raised",children:(e,t)=>{be(e,{children:(e,t)=>{var o=se("Open Build Form");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),$(()=>{var e;return ce(x,"Page ".concat(null!=(e=y(l))?e:""))}),I(e,o)},$$slots:{default:!0}});var m=ee(r,2);we(m,{children:(e,t)=>{fe(e,{action:"close",children:(e,t)=>{be(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=se("Close");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}});var v=ee(h,2),f=e=>{{let t=ie(()=>"dlgCommon"===y(n));qn(e,{get open(){return y(t)},onclose:()=>D(n,"none"),get title(){return i.title},get context(){return i.context},closeHandler:e=>{"accept"===e.detail.action&&i.action()}})}},b=e=>{var t=A(),o=B(t),i=e=>{{let t=ie(()=>"appBuildForm"===y(n));hn(e,{get open(){return y(t)},onclose:()=>D(n,"none")})}};Q(o,e=>{"appBuildForm"===y(n)&&e(i)},!0),I(e,t)};Q(v,e=>{"dlgCommon"===y(n)?e(f):e(b,!1)}),I(e,m),S()}var il=b('<div class="col req text-prewrap"><!></div>'),nl=b('<div class="col req text-prewrap"><!></div>');function ll(e,t){C(t,!0);let o=ie(()=>{let e=Dt.get(t.required.reqId);return void 0!==e&&void 0!==app.globalRequirements?e.requireds:[]}),i=ie(()=>{let e=!1;return t.required.showRequired&&(e=!0,t.required.hideRequired2&&(e=Fo(t.required.requireds)),t.required.hideRequired&&(e=t.required.requireds.length>0?Fo(t.required.requireds)&&!Do(t.required):!Do(t.required))),e}),n=ie(()=>xo(uo(t.required)));var l=A(),a=B(l),r=e=>{var i=A(),l=B(i),a=e=>{var i=A(),n=B(i);Re(n,17,()=>y(o),Ve,(e,o)=>{var i=A(),n=B(i),l=e=>{var i=A(),n=B(i);w(n,()=>xo(uo(y(o))),e=>{var i=il(),n=M(i);k(n,()=>qe.sanitize(xo(uo(y(o))),Lt)),$(()=>Pe(i,t.scoreText)),I(e,i)}),I(e,i)};Q(n,e=>{y(o).showRequired&&e(l)}),I(e,i)}),I(e,i)},r=e=>{var o=A(),i=B(o);w(i,()=>y(n),e=>{var o=nl(),i=M(o);k(i,()=>qe.sanitize(y(n),Lt)),$(()=>Pe(o,t.scoreText)),I(e,o)}),I(e,o)};Q(l,e=>{"gid"===t.required.type?e(a):e(r,!1)}),I(e,i)};Q(a,e=>{y(i)&&e(r)}),I(e,l),S()}var al=b('<img class="me-1" alt=""/>'),rl=b('<img class="mx-1" alt=""/>'),sl=b('<img class="mx-1" alt=""/>'),cl=b('<img class="ms-1" alt=""/>'),dl=b("<!> <!><!> <!><!> <!><!>",1),ul=b('<p class="m-0 d-flex text-prewrap align-items-center"><!></p>'),gl=b('<div class="row m-0"><div class="col-12 p-0 m-0 d-flex align-items-center justify-center"><!></div></div>');function pl(e,t){C(t,!0);let o=ie(()=>Oo("privateTextIsOn",t.row,t.choice)),i=ie(()=>Oo("privateFilterIsOn",t.row,t.choice)),n=ie(()=>At.get(t.score.id)),l=ie(()=>Fo(t.choice.requireds)),a=ie(()=>{let e={isWithinCount:!1,isSimple:!1};if(!t.score.discountIsOn||!t.score.discountedFrom||0===t.score.discountedFrom.length)return e;for(let o=0;o<t.score.discountedFrom.length;o++){const i=kt.get(t.score.discountedFrom[o]);if(void 0!==i){const t=i.choice;if(!t.useDiscountCount||void 0===t.discountCount||!t.appliedDisChoices){e.isSimple=!0;break}if((t.isSelectableMultiple&&t.isMultipleUseVariable?t.discountCount*t.multipleUseVariable:t.discountCount)>t.appliedDisChoices.length){e.isWithinCount=!0;break}}}return e}),r=ie(()=>{let e=[];if(t.score.discountIsOn&&t.score.discountShow&&t.score.discountAfterText)if(t.score.appliedDiscount)t.score.replaceText||e.push("".concat(t.score.afterText)),e.push("".concat(t.score.discountAfterText));else if(y(a).isWithinCount)t.score.replaceText||e.push("".concat(t.score.afterText)),e.push("".concat(t.score.discountAfterText));else if(y(a).isSimple)t.score.replaceText||e.push("".concat(t.score.afterText)),e.push("".concat(t.score.discountAfterText));else if(void 0!==t.score.tmpDiscount){let o=t.score.value,i="",n=!1;for(let e=0;e<t.score.tmpDiscount.length;e++)t.score.tmpDiscount[e].showDiscount&&o>t.score.tmpDiscount[e].discountedValue&&(o=t.score.tmpDiscount[e].discountedValue,i=t.score.tmpDiscount[e].beforeText||"",n=t.score.tmpDiscount[e].replaceText||!1);n||e.push("".concat(t.score.afterText)),e.push("".concat(i))}else e.push("".concat(t.score.afterText));else e.push("".concat(t.score.afterText));return e.join(" ")}),s=ie(()=>{let e=[];if(t.score.discountIsOn&&t.score.discountShow&&t.score.discountBeforeText)if(t.score.appliedDiscount)t.score.replaceText||e.push("".concat(t.score.beforeText)),e.push("".concat(t.score.discountBeforeText));else if(y(a).isWithinCount)t.score.replaceText||e.push("".concat(t.score.beforeText)),e.push("".concat(t.score.discountBeforeText));else if(y(a).isSimple)t.score.replaceText||e.push("".concat(t.score.beforeText)),e.push("".concat(t.score.discountBeforeText));else if(void 0!==t.score.tmpDiscount){let o=t.score.value,i="",n=!1;for(let e=0;e<t.score.tmpDiscount.length;e++)t.score.tmpDiscount[e].showDiscount&&o>t.score.tmpDiscount[e].discountedValue&&(o=t.score.tmpDiscount[e].discountedValue,i=t.score.tmpDiscount[e].beforeText||"",n=t.score.tmpDiscount[e].replaceText||!1);n||e.push("".concat(t.score.beforeText)),e.push("".concat(i))}else e.push("".concat(t.score.beforeText));else e.push("".concat(t.score.beforeText));return e.join(" ")}),c=ie(()=>{var e,o;let i=t.score.value;if(!t.score.hideValue){if(t.score.isRandom&&!t.score.setValue)return y(d);if(!t.score.setValue&&t.score.useExpression&&t.score.expValue){if(void 0!==At.get(t.score.id))try{const e=t.score.expValue.replace(/\{([^{}]+)\}/g,(e,t)=>{const o=At.get(t);if(void 0!==o)return"".concat(o.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});i=g(e)}catch(l){console.error(l)}}if(t.score.discountShow)if(t.score.appliedDiscount){if(t.score.replaceText&&t.score.hideDisValue)return"";void 0!==t.score.discountScore&&(i=t.score.discountScore)}else if(y(a).isWithinCount||y(a).isSimple){if(t.score.replaceText&&t.score.hideDisValue)return"";if(t.score.useExpression&&t.score.expValue){if(t.score.discountedFrom&&t.score.discountedFrom.length>0)for(let e=0;e<t.score.discountedFrom.length;e++){const o=kt.get(t.score.discountedFrom[e]);if(void 0!==o){const e=o.choice;i=Wo(i,e.discountOperator,e.discountValue),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(i=Math.max(i,e.discountLowLimit))}}}else void 0!==t.score.discountScore&&(i=t.score.discountScore)}else if(void 0!==t.score.tmpDiscount){let e=!1;for(let o=0;o<t.score.tmpDiscount.length;o++)t.score.tmpDiscount[o].showDiscount&&i>t.score.tmpDiscount[o].discountedValue&&(i=t.score.tmpDiscount[o].discountedValue,e=t.score.tmpDiscount[o].hideValue||!1);if(e)return""}if(i=Math.abs(i),i=(null==(e=y(n))?void 0:e.allowFloat)?i%1==0?i:parseFloat(i.toFixed(void 0!==y(n).decimalPlaces?y(n).decimalPlaces:2)):Math.floor(i),t.choice.isSelectableMultiple&&t.score.multiplyByTimes&&t.score.displayMulScore&&(i*=t.choice.multipleUseVariable+1),null==(o=y(n))?void 0:o.plussOrMinusAdded){let e=y(n).plussOrMinusInverted?y(u)?"-":"+":y(u)?"+":"-";return"".concat(e).concat(i)}return"".concat(i)}return""}),d=ie(()=>{var e,o;let i=0,l=0,a=!1,r=!1;if(t.score.useExpression){if(t.score.expMaxValue)try{const e=t.score.expMaxValue.replace(/\{([^{}]+)\}/g,(e,t)=>{const o=At.get(t);if(void 0!==o)return"".concat(o.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});i=g(e),a=i<0}catch(s){console.error(s)}if(t.score.expMinValue)try{const e=t.score.expMinValue.replace(/\{([^{}]+)\}/g,(e,t)=>{const o=At.get(t);if(void 0!==o)return"".concat(o.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});l=g(e),r=l<0}catch(s){console.error(s)}}else void 0!==t.score.maxValue&&void 0!==t.score.minValue&&(a=t.score.maxValue<0,r=t.score.minValue<0,i=Math.abs(t.score.maxValue),l=Math.abs(t.score.minValue));if((null==(e=y(n))?void 0:e.allowFloat)?(i=i%1==0?i:parseFloat(i.toFixed(void 0!==y(n).decimalPlaces?y(n).decimalPlaces:2)),l=l%1==0?l:parseFloat(l.toFixed(void 0!==y(n).decimalPlaces?y(n).decimalPlaces:2))):(i=Math.floor(i),l=Math.floor(l)),null==(o=y(n))?void 0:o.plussOrMinusAdded){let e=y(n).plussOrMinusInverted?a?"-":"+":a?"+":"-",t=y(n).plussOrMinusInverted?r?"-":"+":r?"+":"-";return a?"".concat(e).concat(i," ~ ").concat(t).concat(l):"".concat(t).concat(l," ~ ").concat(e).concat(i)}return a?"".concat(i," ~ ").concat(l):"".concat(l," ~ ").concat(i)}),u=ie(()=>t.score.discountShow?(void 0!==t.score.discountScore&&(t.score.appliedDiscount||y(a).isWithinCount||y(a).isSimple)?t.score.discountScore:t.score.value)<0:t.score.value<0),p=ie(()=>{var e;let a=[];return a.push("font-family: '".concat(y(o).scoreText,"'; font-size: ").concat(y(o).scoreTextSize,"%; text-align: ").concat(y(o).scoreTextAlign,";")),(null==(e=y(n))?void 0:e.pointColorsIsOn)?y(u)?a.push("color: ".concat(_i(y(n).positiveColor),";")):a.push("color: ".concat(_i(y(n).negativeColor),";")):a.push("color: ".concat(_i(y(o).scoreTextColor),";")),y(l)?t.choice.isActive&&y(i).selScoreTextColorIsOn&&a.push("color: ".concat(_i(y(i).selFilterSTextColor))):y(i).reqScoreTextColorIsOn&&a.push("color: ".concat(_i(y(i).reqFilterSTextColor))),a.join(" ")}),m=ie(()=>{if(!y(n)||!y(n).iconIsOn)return!1;if(t.score.discountIsOn&&t.score.discountShow)if(t.score.appliedDiscount){if(t.score.replaceText&&t.score.hideDisIcon)return!1}else if(y(a).isWithinCount){if(t.score.replaceText&&t.score.hideDisIcon)return!1}else if(y(a).isSimple){if(t.score.hideDisIcon)return!1}else if(void 0!==t.score.tmpDiscount){let e=t.score.value,o=!1;for(let i=0;i<t.score.tmpDiscount.length;i++)t.score.tmpDiscount[i].showDiscount&&e>t.score.tmpDiscount[i].discountedValue&&(e=t.score.tmpDiscount[i].discountedValue,o=t.score.tmpDiscount[i].hideIcon||!1);if(o)return!1}return!0}),h=ie(()=>{var e;return(null==(e=y(n))?void 0:e.negativeIconIsOn)&&y(u)}),v=ie(()=>!!y(n)&&(y(h)?y(n).useSeperatePosition?!!y(n).negativeImageSidePlacementInChoice:!!y(n).negativeImageSidePlacement:y(n).useSeperatePosition?!!y(n).imageSidePlacementInChoice:!!y(n).imageSidePlacement)),f=ie(()=>!!y(n)&&(y(h)?y(n).useSeperatePosition?!!y(n).negativeImageOnSideInChoice:!!y(n).negativeImageOnSide:y(n).useSeperatePosition?!!y(n).imageOnSideInChoice:!!y(n).imageOnSide)),b=ie(()=>{var e,t;return(y(h)?null==(e=y(n))?void 0:e.negativeImage:null==(t=y(n))?void 0:t.image)||""}),T=ie(()=>{var e,t;return(y(h)?null==(e=y(n))?void 0:e.negativeIconWidth:null==(t=y(n))?void 0:t.iconWidth)||0}),x=ie(()=>{var e,t;return(y(h)?null==(e=y(n))?void 0:e.negativeIconHeight:null==(t=y(n))?void 0:t.iconHeight)||0}),O=ie(()=>!y(v)&&!y(f)),D=ie(()=>!y(v)&&y(f)),F=ie(()=>y(v)&&!y(f)),R=ie(()=>y(v)&&y(f)),j=ie(()=>"".concat(y(s)," ").concat(y(c)," ").concat(y(r)));var P=A(),V=B(P),q=e=>{var t=gl(),o=M(t),i=M(o);w(i,()=>y(j),e=>{var t=ul(),o=M(t),i=e=>{var t=dl(),o=B(t),i=e=>{var t=al();$(()=>{var e,o;We(t,"src",y(b)),Pe(t,"width: ".concat(null!=(e=y(T))?e:"","px; height: ").concat(null!=(o=y(x))?o:"","px;"))}),I(e,t)};Q(o,e=>{y(O)&&e(i)});var n=ee(o,2);k(n,()=>qe.sanitize(y(s),Lt));var l=ee(n),a=e=>{var t=rl();$(()=>{var e,o;We(t,"src",y(b)),Pe(t,"width: ".concat(null!=(e=y(T))?e:"","px; height: ").concat(null!=(o=y(x))?o:"","px;"))}),I(e,t)};Q(l,e=>{y(D)&&e(a)});var d=ee(l,2);k(d,()=>qe.sanitize(y(c),Lt));var u=ee(d),g=e=>{var t=sl();$(()=>{var e,o;We(t,"src",y(b)),Pe(t,"width: ".concat(null!=(e=y(T))?e:"","px; height: ").concat(null!=(o=y(x))?o:"","px;"))}),I(e,t)};Q(u,e=>{y(F)&&e(g)});var p=ee(u,2);k(p,()=>qe.sanitize(y(r),Lt));var m=ee(p),h=e=>{var t=cl();$(()=>{var e,o;We(t,"src",y(b)),Pe(t,"width: ".concat(null!=(e=y(T))?e:"","px; height: ").concat(null!=(o=y(x))?o:"","px;"))}),I(e,t)};Q(m,e=>{y(R)&&e(h)}),I(e,t)},n=e=>{var t=A(),o=B(t);k(o,()=>qe.sanitize("".concat(y(s)," ").concat(y(c)," ").concat(y(r)),Lt)),I(e,t)};Q(o,e=>{y(m)?e(i):e(n,!1)}),I(e,t)}),$(()=>Pe(o,y(p))),I(e,t)};Q(V,e=>{(function(){if(t.score.showScore){if(void 0!==y(n)&&y(n).isNotShownObjects){if(void 0!==y(n).activatedId&&""!==y(n).activatedId){let e=Dt.get(y(n).activatedId),t=Rt.get(y(n).activatedId);return void 0!==e?Fo(e.requireds):void 0!==t?t.isTrue:Bo(y(n).activatedId)}return!1}return!0}return!1})()&&Fo(t.score.requireds)&&e(q)}),I(e,P),S()}var ml=b('<img alt=""/>'),hl=b('<img alt=""/>'),vl=b('<h3 class="m-0"><!></h3>'),fl=b("<!> <!>",1),bl=b('<img alt=""/>'),wl=b('<img alt=""/>'),Tl=b('<p class="mb-0"><!></p>'),Il=b('<img alt=""/>'),Sl=b('<img alt=""/>'),Cl=b("<div><!> <!> <!> <!> <!> <!> <!></div>"),yl=b('<img alt=""/>'),xl=b('<img alt=""/>'),Ol=b('<h2 class="mb-0"><!></h2>'),Al=b("<!> <!>",1),Bl=b('<p class="mb-0"><!></p>'),kl=b('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!> <!> <!></div>',1),Ml=b('<h2 class="mb-0"><!></h2>'),Dl=b("<!> <!>",1),Fl=b('<p class="mb-0"><!></p>'),Rl=b('<img alt=""/>'),jl=b('<img alt=""/>'),Pl=b('<div class="col p-0 text-center"><!> <!> <!> <!></div> <div class="col p-0 text-center"><!></div>',1),$l=b('<div class="row m-0 p-0 w-100"><!></div>'),Vl=b("<div><!></div>");function ql(e,t){C(t,!0);const o=()=>Oe(Qt,"$winWidth",i),[i,n]=Ae();let l=F(t,"windowWidth",3,0),a=F(t,"preloadImages",3,!1),r=ie(()=>void 0!==t.choice&&t.choice.isActive),s=ie(()=>Oo("privateAddonImageIsOn",t.row,t.choice)),c=ie(()=>Oo("privateAddonIsOn",t.row,t.choice)),d=ie(()=>Oo("privateFilterIsOn",t.row,t.choice)),u=ie(()=>Oo("privateObjectImageIsOn",t.row,t.choice)),g=ie(()=>Oo("privateObjectIsOn",t.row,t.choice)),p=ie(()=>Oo("privateTextIsOn",t.row,t.choice)),m=ie(()=>Fo(t.addon.requireds)),h=ie(()=>xo(t.addon.title)),v=ie(()=>xo(t.addon.text)),f=ie(()=>void 0!==y(s).addonImageBoxWidth?y(s).addonImageBoxWidth:50),b=ie(()=>{let e=y(c).useAddonDesign,o=(e?y(c).addonBorderRadiusIsPixels:y(g).objectBorderRadiusIsPixels)?"px":"%",i=0,n=0,l=0,a=[];if(e){if(y(c).addonBorderImage&&a.push("border-image: url('".concat(y(c).addonBorderImage,"') ").concat(y(c).addonBorderImageSliceTop," ").concat(y(c).addonBorderImageSliceRight," ").concat(y(c).addonBorderImageSliceBottom," ").concat(y(c).addonBorderImageSliceLeft," / ").concat(y(c).addonBorderImageWidth,"px ").concat(y(c).addonBorderImageRepeat,"; border-style: solid; padding: ").concat(y(c).addonBorderImageWidth,"px;")),y(c).useAddonBackgroundImage&&y(c).addonBackgroundImage&&(a.push("background-image: url('".concat(y(c).addonBackgroundImage,"'); ").concat(y(c).isObjectBackgroundRepeat?"background-repeat: repeat;":y(c).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),i=a.length),y(c).addonBgColorIsOn&&(a.push("background-color: ".concat(_i(y(c).addonBgColor),";")),n=a.length),a.push("margin: ".concat(y(c).addonMargin,"px;")),a.push("border-radius: ".concat(y(c).addonBorderRadiusTopLeft).concat(o," ").concat(y(c).addonBorderRadiusTopRight).concat(o," ").concat(y(c).addonBorderRadiusBottomRight).concat(o," ").concat(y(c).addonBorderRadiusBottomLeft).concat(o,";")),y(c).addonOverflowIsOn&&a.push("overflow: hidden;"),y(c).addonBorderIsOn||y(r)&&y(d).selBorderColorIsOn||!t.isEnabled&&y(d).reqBorderColorIsOn){let e=y(c).addonBorderColor;!t.isEnabled&&y(d).reqBorderColorIsOn?e=y(d).reqFilterBorderColor:y(r)&&y(d).selBorderColorIsOn&&(e=y(d).selFilterBorderColor),a.push("border: ".concat(y(c).addonBorderWidth,"px ").concat(y(c).addonBorderStyle," ").concat(_i(e),";"))}y(c).addonGradientIsOn&&(t.isEnabled&&y(m)?y(r)?a.push("background-image: linear-gradient(".concat(y(c).addonGradientOnSelect,");")):a.push("background-image: linear-gradient(".concat(y(c).addonGradient,");")):a.push("background-image: linear-gradient(".concat(y(c).addonGradientOnReq,");"))),y(c).addonDropShadowIsOn&&(y(c).addonUseBoxShadowIsOn?a.push("box-shadow: ".concat(y(c).addonDropShadowH,"px ").concat(y(c).addonDropShadowV,"px ").concat(y(c).addonDropShadowBlur,"px ").concat(y(c).addonDropShadowSpread,"px ").concat(_i(y(c).addonDropShadowColor),";")):(l=a.length,a.push("filter: drop-shadow(".concat(y(c).addonDropShadowH,"px ").concat(y(c).addonDropShadowV,"px ").concat(y(c).addonDropShadowBlur,"px ").concat(_i(y(c).addonDropShadowColor),")")))),0===l&&(a.push("filter:"),l=a.length),t.isEnabled&&y(m)&&(y(r)?(y(d).selFilterBlurIsOn&&a.push(" blur(".concat(y(d).selFilterBlur,"px)")),y(d).selFilterBrightIsOn&&a.push(" brightness(".concat(y(d).selFilterBright,"%)")),y(d).selFilterContIsOn&&a.push(" contrast(".concat(y(d).selFilterCont,"%)")),y(d).selFilterGrayIsOn&&a.push(" grayscale(".concat(y(d).selFilterGray,"%)")),y(d).selFilterHueIsOn&&a.push(" hue-rotate(".concat(y(d).selFilterHue,"deg)")),y(d).selFilterInvertIsOn&&a.push(" invert(".concat(y(d).selFilterInvert,"%)")),y(d).selFilterOpacIsOn&&a.push(" opacity(".concat(y(d).selFilterOpac,"%)")),y(d).selFilterSaturIsOn&&a.push(" saturate(".concat(y(d).selFilterSatur,")")),y(d).selFilterSepiaIsOn&&a.push(" sepia(".concat(y(d).selFilterGray,"%)")),a.length===l?a.splice(l-1,1):a.push(";")):(y(d).unselFilterBlurIsOn&&a.push(" blur(".concat(y(d).unselFilterBlur,"px)")),y(d).unselFilterBrightIsOn&&a.push(" brightness(".concat(y(d).unselFilterBright,"%)")),y(d).unselFilterContIsOn&&a.push(" contrast(".concat(y(d).unselFilterCont,"%)")),y(d).unselFilterGrayIsOn&&a.push(" grayscale(".concat(y(d).unselFilterGray,"%)")),y(d).unselFilterHueIsOn&&a.push(" hue-rotate(".concat(y(d).unselFilterHue,"deg)")),y(d).unselFilterInvertIsOn&&a.push(" invert(".concat(y(d).unselFilterInvert,"%)")),y(d).unselFilterOpacIsOn&&a.push(" opacity(".concat(y(d).unselFilterOpac,"%)")),y(d).unselFilterSaturIsOn&&a.push(" saturate(".concat(y(d).unselFilterSatur,")")),y(d).unselFilterSepiaIsOn&&a.push(" sepia(".concat(y(d).unselFilterGray,"%)"))),a.length===l?a.splice(l-1,1):a.push(";"))}return(app.showAllAddons>0||t.addon.showAddon)&&t.isEnabled&&!y(m)&&(0===l&&(a.push("filter:"),l=a.length),y(d).reqFilterBlurIsOn&&a.push(" blur(".concat(y(d).reqFilterBlur,"px)")),y(d).reqFilterBrightIsOn&&a.push(" brightness(".concat(y(d).reqFilterBright,"%)")),y(d).reqFilterContIsOn&&a.push(" contrast(".concat(y(d).reqFilterCont,"%)")),y(d).reqFilterGrayIsOn&&a.push(" grayscale(".concat(y(d).reqFilterGray,"%)")),y(d).reqFilterHueIsOn&&a.push(" hue-rotate(".concat(y(d).reqFilterHue,"deg)")),y(d).reqFilterInvertIsOn&&a.push(" invert(".concat(y(d).reqFilterInvert,"%)")),y(d).reqFilterOpacIsOn&&a.push(" opacity(".concat(y(d).reqFilterOpac,"%)")),y(d).reqFilterSaturIsOn&&a.push(" saturate(".concat(y(d).reqFilterSatur,")")),y(d).reqFilterSepiaIsOn&&a.push(" sepia(".concat(y(d).reqFilterGray,"%)")),a.length===l?a.splice(l-1,1):a.push(";"),y(d).reqBgColorIsOn&&(y(d).reqOverlayOnImage||(0!==n&&a.splice(n-1,1),0!==i&&a.splice(i-1,1)),a.push("background-color: ".concat(_i(y(d).reqFilterBgColor),";"))),e&&y(c).addonGradientIsOn&&a.push("background-image: linear-gradient(".concat(y(c).addonGradientOnReq,");"))),a.join(" ")}),T=ie(()=>{let e=[];return e.push("white-space: pre-line; font-family: '".concat(y(p).addonTitle,"'; font-size: ").concat(y(p).addonTitleTextSize,"%; text-align: ").concat(y(p).addonTitleAlign,";")),!t.isEnabled&&y(d).reqATitleColorIsOn?e.push("color: ".concat(_i(y(d).reqFilterATitleColor),";")):y(r)&&y(d).selATitleColorIsOn?e.push("color: ".concat(_i(y(d).selFilterATitleColor),";")):e.push("color: ".concat(_i(y(p).addonTitleColor),";")),y(c).useAddonDesign?y(c).titlePaddingIsOn&&e.push("padding: ".concat(y(c).addonTextPadding,"px;")):y(g).titlePaddingIsOn&&e.push("padding: ".concat(y(g).objectTextPadding,"px;")),e.join(" ")}),x=ie(()=>{let e=[];return e.push("white-space: pre-wrap; font-family: '".concat(y(p).addonText,"'; text-align: ").concat(y(p).addonTextAlign,"; font-size: ").concat(y(p).addonTextTextSize,"%;")),!t.isEnabled&&y(d).reqATextColorIsOn?e.push("color: ".concat(_i(y(d).reqFilterATextColor),";")):y(r)&&y(d).selATextColorIsOn?e.push("color: ".concat(_i(y(d).selFilterATextColor),";")):e.push("color: ".concat(_i(y(p).addonTextColor),";")),y(c).useAddonDesign?e.push("padding: ".concat(y(c).addonTextPadding,"px;")):e.push("padding: ".concat(y(g).objectTextPadding,"px;")),e.join(" ")}),O=ie(()=>{var e;let o=[],i=y(s).useAddonImage,n=(i?y(s).addonImgBorderRadiusIsPixels:y(u).objectImgBorderRadiusIsPixels)?"px":"%";if(i){if(o.push("width: ".concat(y(s).addonImageWidth,"%; margin-top: ").concat(y(s).addonImageMarginTop,"%; margin-bottom: ").concat(y(s).addonImageMarginBottom,"%;")),y(s).addonImgObjectFillIsOn){o.push("object-fit: ".concat(y(s).addonImgObjectFillStyle,";"));const e=t.choice.addonImgObjectFillHeight||y(u).addonImgObjectFillHeight;e&&o.push("height: ".concat(e,"px"))}if(o.push("border-radius: ".concat(y(s).addonImgBorderRadiusTopLeft).concat(n," ").concat(y(s).addonImgBorderRadiusTopRight).concat(n," ").concat(y(s).addonImgBorderRadiusBottomRight).concat(n," ").concat(y(s).addonImgBorderRadiusBottomLeft).concat(n,";")),y(s).addonImgOverflowIsOn&&o.push("overflow: hidden;"),y(s).addonImgBorderIsOn){const e=t.isEnabled?y(r)&&y(d).selImgBorderColorIsOn&&y(d).selFilterImgBorderColor||y(s).addonImgBorderColor:y(d).reqImgBorderColorIsOn&&y(d).reqFilterImgBorderColor||y(s).addonImgBorderColor;o.push("border: ".concat(y(s).addonImgBorderWidth,"px ").concat(y(s).addonImgBorderStyle," ").concat(_i(e),";"))}}else{if(o.push("width: ".concat(y(u).objectImageWidth,"%; margin-top: ").concat(y(u).objectImageMarginTop,"%; margin-bottom: ").concat(y(u).objectImageMarginBottom,"%;")),y(u).objectImgObjectFillIsOn){o.push("object-fit: ".concat(y(u).objectImgObjectFillStyle,";"));const i=(null==(e=t.row)?void 0:e.objectImgObjectFillHeight)||y(u).objectImgObjectFillHeight;i&&o.push("height: ".concat(i,"px;"))}if(o.push("border-radius: ".concat(y(u).objectImgBorderRadiusTopLeft).concat(n," ").concat(y(u).objectImgBorderRadiusTopRight).concat(n," ").concat(y(u).objectImgBorderRadiusBottomRight).concat(n," ").concat(y(u).objectImgBorderRadiusBottomLeft).concat(n,";")),y(u).objectImgOverflowIsOn&&o.push("overflow: hidden;"),y(u).objectImgBorderIsOn){const e=t.isEnabled?y(r)&&y(d).selImgBorderColorIsOn&&y(d).selFilterImgBorderColor||y(u).objectImgBorderColor:y(d).reqImgBorderColorIsOn&&y(d).reqFilterImgBorderColor||y(u).objectImgBorderColor;o.push("border: ".concat(y(u).objectImgBorderWidth,"px ").concat(y(u).objectImgBorderStyle," ").concat(_i(e),";"))}}return o.join(" ")}),D=ie(()=>"font-family: '".concat(y(p).scoreText,"'; font-size: ").concat(y(p).scoreTextSize,"%; text-align: ").concat(y(p).scoreTextAlign,"; color: ").concat(_i(y(p).scoreTextColor),";"));function R(e){navigator.clipboard.writeText(t.addon.imageSourceTooltip).then(()=>{Ht.labelText="Tooltip copied to clipboard.",Ht.isOpen=!0}).catch(()=>{console.log(t.addon.imageSourceTooltip),Ht.labelText="Tooltip text logged to developer console.",Ht.isOpen=!0})}var j=Vl(),q=M(j),W=e=>{var o=Cl(),i=M(o),n=e=>{var o=A(),i=B(o),n=e=>{var o=ml();o.__contextmenu=R,P(o,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.addon.imageSourceTooltip),$(()=>{We(o,"src",t.addon.image),Pe(o,y(O)),We(o,"loading",a()?"eager":"lazy")}),I(e,o)},l=e=>{var o=hl();$(()=>{We(o,"src",t.addon.image),Pe(o,y(O)),We(o,"loading",a()?"eager":"lazy")}),I(e,o)};Q(i,e=>{t.addon.imageSourceTooltip?e(n):e(l,!1)}),I(e,o)};Q(i,e=>{var o;(1===t.addon.template||l()<=1280)&&t.addon.image&&!(null==(o=t.row)?void 0:o.addonImageRemoved)&&e(n)});var r=ee(i,2),s=e=>{var t=A(),o=B(t);w(o,()=>y(h),e=>{var t=vl(),o=M(t);k(o,()=>qe.sanitize(y(h),Lt)),$(()=>Pe(t,y(T))),I(e,t)}),I(e,t)};Q(r,e=>{var o;""===t.addon.title||(null==(o=t.row)?void 0:o.addonTitleRemoved)||e(s)});var c=ee(r,2),d=e=>{var o=A(),i=B(o);Re(i,17,()=>t.choice.scores,Ve,(e,o)=>{pl(e,{get score(){return y(o)},get row(){return t.row},get choice(){return t.choice}})}),I(e,o)};Q(c,e=>{var o;!(null==(o=t.row)?void 0:o.objectScoreRemoved)&&t.choice.showScoreInAddon&&t.isFirst&&e(d)});var u=ee(c,2),g=e=>{var o=fl(),i=B(o),n=e=>{var o=A(),i=B(o);Re(i,17,()=>t.choice.requireds,Ve,(e,t)=>{ll(e,{get required(){return y(t)},get scoreText(){return y(D)}})}),I(e,o)};Q(i,e=>{t.choice.showReqInAddon&&t.isFirst&&e(n)});var l=ee(i,2);Re(l,17,()=>t.addon.requireds,Ve,(e,t)=>{ll(e,{get required(){return y(t)},get scoreText(){return y(D)}})}),I(e,o)};Q(u,e=>{var o;(null==(o=t.row)?void 0:o.objectRequirementRemoved)||e(g)});var p=ee(u,2),m=e=>{var o=A(),i=B(o),n=e=>{var o=bl();o.__contextmenu=R,P(o,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.addon.imageSourceTooltip),$(()=>{We(o,"src",t.addon.image),Pe(o,y(O)),We(o,"loading",a()?"eager":"lazy")}),I(e,o)},l=e=>{var o=wl();$(()=>{We(o,"src",t.addon.image),Pe(o,y(O)),We(o,"loading",a()?"eager":"lazy")}),I(e,o)};Q(i,e=>{t.addon.imageSourceTooltip?e(n):e(l,!1)}),I(e,o)};Q(p,e=>{var o;5===t.addon.template&&l()>1280&&t.addon.image&&!(null==(o=t.row)?void 0:o.addonImageRemoved)&&e(m)});var f=ee(p,2),b=e=>{var t=A(),o=B(t);w(o,()=>y(v),e=>{var t=Tl(),o=M(t);k(o,()=>qe.sanitize(y(v),Lt)),$(()=>Pe(t,y(x))),I(e,t)}),I(e,t)};Q(f,e=>{var o;""===t.addon.text||(null==(o=t.row)?void 0:o.addonTextRemoved)||e(b)});var S=ee(f,2),C=e=>{var o=A(),i=B(o),n=e=>{var o=Il();o.__contextmenu=R,P(o,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.addon.imageSourceTooltip),$(()=>{We(o,"src",t.addon.image),Pe(o,y(O)),We(o,"loading",a()?"eager":"lazy")}),I(e,o)},l=e=>{var o=Sl();$(()=>{We(o,"src",t.addon.image),Pe(o,y(O)),We(o,"loading",a()?"eager":"lazy")}),I(e,o)};Q(i,e=>{t.addon.imageSourceTooltip?e(n):e(l,!1)}),I(e,o)};Q(S,e=>{var o;4===t.addon.template&&l()>1280&&t.addon.image&&!(null==(o=t.row)?void 0:o.addonImageRemoved)&&e(C)}),I(e,o)},L=e=>{var o=$l(),i=M(o),n=e=>{var o=kl(),i=B(o),n=M(i),l=e=>{var o=A(),i=B(o),n=e=>{var o=yl();o.__contextmenu=R,P(o,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.addon.imageSourceTooltip),$(()=>{We(o,"src",t.addon.image),Pe(o,y(O)),We(o,"loading",a()?"eager":"lazy")}),I(e,o)},l=e=>{var o=xl();$(()=>{We(o,"src",t.addon.image),Pe(o,y(O)),We(o,"loading",a()?"eager":"lazy")}),I(e,o)};Q(i,e=>{t.addon.imageSourceTooltip?e(n):e(l,!1)}),I(e,o)};Q(n,e=>{var o;t.addon.image&&!(null==(o=t.row)?void 0:o.addonImageRemoved)&&e(l)});var r=ee(i,2),s=M(r),c=e=>{var t=A(),o=B(t);w(o,()=>y(h),e=>{var t=Ol(),o=M(t);k(o,()=>qe.sanitize(y(h),Lt)),$(()=>Pe(t,y(T))),I(e,t)}),I(e,t)};Q(s,e=>{var o;""===t.addon.title||(null==(o=t.row)?void 0:o.addonTitleRemoved)||e(c)});var d=ee(s,2),u=e=>{var o=A(),i=B(o);Re(i,17,()=>t.choice.scores,Ve,(e,o)=>{pl(e,{get score(){return y(o)},get row(){return t.row},get choice(){return t.choice}})}),I(e,o)};Q(d,e=>{var o;!(null==(o=t.row)?void 0:o.objectScoreRemoved)&&t.choice.showScoreInAddon&&t.isFirst&&e(u)});var g=ee(d,2),p=e=>{var o=Al(),i=B(o),n=e=>{var o=A(),i=B(o);Re(i,17,()=>t.choice.requireds,Ve,(e,t)=>{ll(e,{get required(){return y(t)},get scoreText(){return y(D)}})}),I(e,o)};Q(i,e=>{t.choice.showReqInAddon&&t.isFirst&&e(n)});var l=ee(i,2);Re(l,17,()=>t.addon.requireds,Ve,(e,t)=>{ll(e,{get required(){return y(t)},get scoreText(){return y(D)}})}),I(e,o)};Q(g,e=>{var o;(null==(o=t.row)?void 0:o.objectRequirementRemoved)||e(p)});var m=ee(g,2),b=e=>{var t=A(),o=B(t);w(o,()=>y(v),e=>{var t=Bl(),o=M(t);k(o,()=>qe.sanitize(y(v),Lt)),$(()=>Pe(t,y(x))),I(e,t)}),I(e,t)};Q(m,e=>{var o;""===t.addon.text||(null==(o=t.row)?void 0:o.addonTextRemoved)||e(b)}),$(()=>{var e;Pe(i,"max-width: ".concat(null!=(e=y(f))?e:"","%")),Pe(r,"max-width: ".concat(100-y(f),"%"))}),I(e,o)},l=e=>{var o=A(),i=B(o),n=e=>{var o=Pl(),i=B(o),n=M(i),l=e=>{var t=A(),o=B(t);w(o,()=>y(h),e=>{var t=Ml(),o=M(t);k(o,()=>qe.sanitize(y(h),Lt)),$(()=>Pe(t,y(T))),I(e,t)}),I(e,t)};Q(n,e=>{var o;""===t.addon.title||(null==(o=t.row)?void 0:o.addonTitleRemoved)||e(l)});var r=ee(n,2),s=e=>{var o=A(),i=B(o);Re(i,17,()=>t.choice.scores,Ve,(e,o)=>{pl(e,{get score(){return y(o)},get row(){return t.row},get choice(){return t.choice}})}),I(e,o)};Q(r,e=>{var o;!(null==(o=t.row)?void 0:o.objectScoreRemoved)&&t.choice.showScoreInAddon&&t.isFirst&&e(s)});var c=ee(r,2),d=e=>{var o=Dl(),i=B(o),n=e=>{var o=A(),i=B(o);Re(i,17,()=>t.choice.requireds,Ve,(e,t)=>{ll(e,{get required(){return y(t)},get scoreText(){return y(D)}})}),I(e,o)};Q(i,e=>{t.choice.showReqInAddon&&t.isFirst&&e(n)});var l=ee(i,2);Re(l,17,()=>t.addon.requireds,Ve,(e,t)=>{ll(e,{get required(){return y(t)},get scoreText(){return y(D)}})}),I(e,o)};Q(c,e=>{var o;(null==(o=t.row)?void 0:o.objectRequirementRemoved)||e(d)});var u=ee(c,2),g=e=>{var t=A(),o=B(t);w(o,()=>y(v),e=>{var t=Fl(),o=M(t);k(o,()=>qe.sanitize(y(v),Lt)),$(()=>Pe(t,y(x))),I(e,t)}),I(e,t)};Q(u,e=>{var o;""===t.addon.text||(null==(o=t.row)?void 0:o.addonTextRemoved)||e(g)});var p=ee(i,2),m=M(p),b=e=>{var o=A(),i=B(o),n=e=>{var o=Rl();o.__contextmenu=R,P(o,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.addon.imageSourceTooltip),$(()=>{We(o,"src",t.addon.image),Pe(o,y(O)),We(o,"loading",a()?"eager":"lazy")}),I(e,o)},l=e=>{var o=jl();$(()=>{We(o,"src",t.addon.image),Pe(o,y(O)),We(o,"loading",a()?"eager":"lazy")}),I(e,o)};Q(i,e=>{t.addon.imageSourceTooltip?e(n):e(l,!1)}),I(e,o)};Q(m,e=>{var o;t.addon.image&&!(null==(o=t.row)?void 0:o.addonImageRemoved)&&e(b)}),$(()=>{var e;Pe(i,"max-width: ".concat(100-y(f),"%")),Pe(p,"max-width: ".concat(null!=(e=y(f))?e:"","%"))}),I(e,o)};Q(i,e=>{3===t.addon.template&&e(n)},!0),I(e,o)};Q(i,e=>{2===t.addon.template?e(n):e(l,!1)}),I(e,o)};Q(q,e=>{t.addon.template>=4||1===t.addon.template||l()<=1280?e(W):e(L,!1)}),$(e=>{V(j,1,"text-center addon".concat(t.addon.isSelectable?" addon-".concat(t.addon.id):""," ").concat(null!=e?e:"")),Pe(j,y(b))},[function(){let e=t.addon.addonWidth||"col-12",i=Io(e),n="col-6"===app.objectsPerRow?2:"col-4"===app.objectsPerRow?3:4;if(o()>1280)return e;if(!(o()>720))return o()>480?1===i?"col-12":"col-6":"col-12";switch(i){case 1:return"col-12";case 2:return"col-6";case 3:return n>2?"col-4":app.objectsPerRow;case 4:return n>3?"col-3":app.objectsPerRow;default:return app.objectsPerRow}}]),I(e,j),S(),n()}Le(["contextmenu"]);var Wl=b('<i class="mdi mdi-minus"></i>'),Ll=b('<i class="mdi mdi-plus"></i>'),Ul=b('<div class="px-5 w-100 multi-slider"><!></div>'),Nl=b('<div class="d-row justify-space-around w-100 multi-counter"><!> <div translate="no"> </div> <!></div> <!>',1);function El(e,t){C(t,!0);let o=x(0),i=ie(()=>{if(t.choice.isMultipleUseVariable)return t.choice.multipleUseVariable;if(void 0!==t.choice.multipleScoreId){let e=At.get(t.choice.multipleScoreId);if(void 0!==e)return e.startingSum}return 0});function n(e){t.selectedOneMore()}function l(e){t.selectedOneLess()}function a(){const e=y(o)-y(i);for(let o=0;o<Math.abs(e);o++)e>0?t.selectedOneMore():t.selectedOneLess();document.activeElement&&document.activeElement.blur()}function r(e){t.isEnabled&&(zt.currentDialog="selectDialog",zt.choice=t.choice,zt.func=s)}function s(e){const o=e-t.choice.multipleUseVariable;for(let i=0;i<Math.abs(o);i++)o>0?t.selectedOneMore():t.selectedOneLess()}v(()=>{t.choice.useSlider&&D(o,y(i),!0)});var c=A(),d=B(c),u=e=>{var s=Nl(),c=B(s),d=M(c),u=e=>{{let o=ie(()=>!t.isEnabled);$e(e,{class:"counter-icons",get disabled(){return y(o)},onclickcapture:l,children:(e,o)=>{var i=Wl();$(()=>Pe(i,t.multiChoiceButton)),I(e,i)},$$slots:{default:!0}})}};Q(d,e=>{t.choice.hideCounter||e(u)});var g=ee(d,2),p=M(g),m=ee(g,2),h=e=>{{let o=ie(()=>!t.isEnabled);$e(e,{class:"counter-icons",get disabled(){return y(o)},onclickcapture:n,children:(e,o)=>{var i=Ll();$(()=>Pe(i,t.multiChoiceButton)),I(e,i)},$$slots:{default:!0}})}};Q(m,e=>{t.choice.hideCounter||e(h)});var v=ee(c,2),f=e=>{var i=Ul(),n=M(i);{let e=ie(()=>!t.isEnabled);Ne(n,{get min(){return t.choice.numMultipleTimesMinus},get max(){return t.choice.numMultipleTimesPluss},step:1,class:"mx-2",onpointerup:a,get disabled(){return y(e)},discrete:!0,get value(){return y(o)},set value(e){D(o,e,!0)}})}I(e,i)};Q(v,e=>{t.choice.useSlider&&e(f)}),$(()=>{Pe(g,t.multiChoiceText),ce(p,y(i))}),Ue("click",g,r,!0),I(e,s)};Q(d,e=>{t.choice.hideCounterUntilSelect&&0===t.choice.multipleUseVariable||e(u)}),I(e,c),S()}var zl=b('<div class="col-12"><!></div>'),Gl=b('<img alt=""/>'),Hl=b('<img alt=""/>'),_l=b('<h3 class="m-0"><!></h3>'),Yl=b('<img alt=""/>'),Zl=b('<img alt=""/>'),Jl=b('<p class="mb-0"><!></p>'),Xl=b('<img alt=""/>'),Kl=b('<img alt=""/>'),Ql=b("<div></div>"),ea=b('<div class="d-column w-100 p-0 align-items-center"><!> <!> <div class="w-100"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!> <!></div>'),ta=b('<img alt=""/>'),oa=b('<img alt=""/>'),ia=b('<h2 class="mb-0"><!></h2>'),na=b('<p class="mb-0"><!></p>'),la=b("<div></div>"),aa=b("<!> <!>",1),ra=b("<div></div>"),sa=b('<div class="col-12 text-center"><!> <!></div>'),ca=b('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!>',1),da=b('<h2 class="mb-0"><!></h2>'),ua=b('<p class="mb-0"><!></p>'),ga=b("<div></div>"),pa=b("<!> <!>",1),ma=b('<img alt=""/>'),ha=b('<img alt=""/>'),va=b("<div></div>"),fa=b('<div class="col-12 text-center"><!> <!></div>'),ba=b('<div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="col p-0 text-center"><!></div> <!>',1),wa=b("<div><div><div><!></div></div></div>");function Ta(e,t){C(t,!0);const o=()=>Oe(Qt,"$winWidth",i),[i,n]=Ae(),l=F(t,"preloadImages",3,!1),a={linkedObjects:[],mainDiv:t.mainDiv,bCreatorMode:!1,isBackpack:t.isBackpack,isOverDlg:!1,isOverImg:!1};let r=ie(()=>{if(t.choice.addons)for(let e=0;e<t.choice.addons.length;e++){const o=t.choice.addons[e];if(app.showAllAddons>0||!o.skipIndex&&(!o.hideAddon||t.choice.isActive)&&(o.showAddon||Fo(o.requireds)))return e}return-1}),s=ie(()=>Oo("privateBackgroundIsOn",t.row,t.choice)),c=ie(()=>Oo("privateFilterIsOn",t.row,t.choice)),d=ie(()=>Oo("privateMultiChoiceIsOn",t.row,t.choice)),u=ie(()=>Oo("privateObjectImageIsOn",t.row,t.choice)),g=ie(()=>Oo("privateObjectIsOn",t.row,t.choice)),p=ie(()=>Oo("privateTextIsOn",t.row,t.choice)),m=ie(()=>void 0!==y(u).objectImageBoxWidth?y(u).objectImageBoxWidth:50),h=ie(()=>Fo(t.choice.requireds)),f=ie(()=>t.choice.isActive?!y(c).selFilterVisibleIsOn:y(h)?!y(c).unselFilterVisibleIsOn:!y(c).reqFilterVisibleIsOn),b=ie(()=>t.choice.addonJustify?" justify-".concat(t.choice.addonJustify):""),T=ie(()=>t.choice.isActive),x=ie(()=>y(g).objectHeight),O=ie(()=>{if(t.row.isResultRow){const e=kt.get(t.choice.id);if(void 0!==e)return e.row}return t.row}),D=ie(()=>{let e=[];return e.push("white-space: pre-line; font-family: '".concat(y(p).objectTitle,"'; font-size: ").concat(y(p).objectTitleTextSize,"%; text-align: ").concat(y(p).objectTitleAlign,";")),!y(h)&&y(c).reqCTitleColorIsOn?e.push("color: ".concat(_i(y(c).reqFilterCTitleColor),";")):y(T)&&y(c).selCTitleColorIsOn?e.push("color: ".concat(_i(y(c).selFilterCTitleColor),";")):e.push("color: ".concat(_i(y(p).objectTitleColor),";")),y(g).titlePaddingIsOn&&e.push("padding: ".concat(y(g).objectTextPadding,"px;")),e.join(" ")}),R=ie(()=>xo(""!==y(O).title?y(O).title:y(O).debugTitle||"")),j=ie(()=>xo(t.choice.title)),W=ie(()=>xo(t.choice.text)),L=ie(()=>"font-family: '".concat(y(d).multiChoiceTextFont,"'; color: ").concat(_i(y(p).scoreTextColor),"; font-size: ").concat(y(d).multiChoiceTextSize,"%; align-content: center;")),U=ie(()=>"font-size: ".concat(y(d).multiChoiceCounterSize,"%; color: ").concat(_i(y(p).scoreTextColor),";")),N=ie(()=>!t.choice.hideMultipleCounter||y(h)),E=ie(()=>{let e=[];return e.push("white-space: pre-wrap; font-family: '".concat(y(p).objectText,"'; text-align: ").concat(y(p).objectTextAlign,"; font-size: ").concat(y(p).objectTextTextSize,"%;")),!y(h)&&y(c).reqCTextColorIsOn?e.push("color: ".concat(_i(y(c).reqFilterCTextColor),";")):y(T)&&y(c).selCTextColorIsOn?e.push("color: ".concat(_i(y(c).selFilterCTextColor),";")):e.push("color: ".concat(_i(y(p).objectTextColor),";")),e.push("padding: ".concat(y(g).objectTextPadding,"px;")),e.join(" ")}),z=ie(()=>{const e=y(g).objectBorderRadiusIsPixels?"px":"%";let o=0,i=0,n=0,l=[];if(y(g).objectBorderImage&&l.push("border-image: url('".concat(y(g).objectBorderImage,"') ").concat(y(g).objectBorderImageSliceTop," ").concat(y(g).objectBorderImageSliceRight," ").concat(y(g).objectBorderImageSliceBottom," ").concat(y(g).objectBorderImageSliceLeft," / ").concat(y(g).objectBorderImageWidth,"px ").concat(y(g).objectBorderImageRepeat,"; border-style: solid; padding: ").concat(y(g).objectBorderImageWidth,"px;")),y(s).objectBackgroundImage&&(l.push("background-image: url('".concat(y(s).objectBackgroundImage,"'); ").concat(y(s).isObjectBackgroundRepeat?"background-repeat: repeat;":y(s).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),o=l.length),y(s).objectBgColorIsOn&&(l.push("background-color: ".concat(_i(y(s).objectBgColor),";")),i=l.length),l.push("margin: ".concat(y(g).objectMargin,"px;")),l.push("border-radius: ".concat(y(g).objectBorderRadiusTopLeft).concat(e," ").concat(y(g).objectBorderRadiusTopRight).concat(e," ").concat(y(g).objectBorderRadiusBottomRight).concat(e," ").concat(y(g).objectBorderRadiusBottomLeft).concat(e,";")),y(g).objectOverflowIsOn&&l.push("overflow: hidden;"),y(g).objectBorderIsOn||y(T)&&y(c).selBorderColorIsOn||!y(h)&&y(c).reqBorderColorIsOn){let e=y(g).objectBorderColor;!y(h)&&y(c).reqBorderColorIsOn?e=y(c).reqFilterBorderColor:y(T)&&y(c).selBorderColorIsOn&&(e=y(c).selFilterBorderColor),l.push("border: ".concat(y(g).objectBorderWidth,"px ").concat(y(g).objectBorderStyle," ").concat(_i(e),";"))}return y(g).objectDropShadowIsOn&&(y(g).objectUseBoxShadowIsOn?l.push("box-shadow: ".concat(y(g).objectDropShadowH,"px ").concat(y(g).objectDropShadowV,"px ").concat(y(g).objectDropShadowBlur,"px ").concat(y(g).objectDropShadowSpread,"px ").concat(_i(y(g).objectDropShadowColor),";")):(n=l.length,l.push("filter: drop-shadow(".concat(y(g).objectDropShadowH,"px ").concat(y(g).objectDropShadowV,"px ").concat(y(g).objectDropShadowBlur,"px ").concat(_i(y(g).objectDropShadowColor),")")))),0===n&&(l.push("filter:"),n=l.length),y(h)?(y(T)?(y(c).selFilterBlurIsOn&&l.push(" blur(".concat(y(c).selFilterBlur,"px)")),y(c).selFilterBrightIsOn&&l.push(" brightness(".concat(y(c).selFilterBright,"%)")),y(c).selFilterContIsOn&&l.push(" contrast(".concat(y(c).selFilterCont,"%)")),y(c).selFilterGrayIsOn&&l.push(" grayscale(".concat(y(c).selFilterGray,"%)")),y(c).selFilterHueIsOn&&l.push(" hue-rotate(".concat(y(c).selFilterHue,"deg)")),y(c).selFilterInvertIsOn&&l.push(" invert(".concat(y(c).selFilterInvert,"%)")),y(c).selFilterOpacIsOn&&l.push(" opacity(".concat(y(c).selFilterOpac,"%)")),y(c).selFilterSaturIsOn&&l.push(" saturate(".concat(y(c).selFilterSatur,")")),y(c).selFilterSepiaIsOn&&l.push(" sepia(".concat(y(c).selFilterGray,"%)")),l.length===n?l.splice(n-1,1):l.push(";"),y(c).selBgColorIsOn&&(0!==i&&l.splice(i-1,1),y(c).selOverlayOnImage||0!==o&&l.splice(o-1,1),l.push("background-color: ".concat(_i(y(c).selFilterBgColor),";"))),y(g).objectGradientIsOn&&l.push("background-image: linear-gradient(".concat(y(g).objectGradientOnSelect,");"))):(y(c).unselFilterBlurIsOn&&l.push(" blur(".concat(y(c).unselFilterBlur,"px)")),y(c).unselFilterBrightIsOn&&l.push(" brightness(".concat(y(c).unselFilterBright,"%)")),y(c).unselFilterContIsOn&&l.push(" contrast(".concat(y(c).unselFilterCont,"%)")),y(c).unselFilterGrayIsOn&&l.push(" grayscale(".concat(y(c).unselFilterGray,"%)")),y(c).unselFilterHueIsOn&&l.push(" hue-rotate(".concat(y(c).unselFilterHue,"deg)")),y(c).unselFilterInvertIsOn&&l.push(" invert(".concat(y(c).unselFilterInvert,"%)")),y(c).unselFilterOpacIsOn&&l.push(" opacity(".concat(y(c).unselFilterOpac,"%)")),y(c).unselFilterSaturIsOn&&l.push(" saturate(".concat(y(c).unselFilterSatur,")")),y(c).unselFilterSepiaIsOn&&l.push(" sepia(".concat(y(c).unselFilterGray,"%)")),l.length===n?l.splice(n-1,1):l.push(";"),y(g).objectGradientIsOn&&l.push("background-image: linear-gradient(".concat(y(g).objectGradient,");"))),app.isPointerCursor&&!t.choice.isNotSelectable&&(!t.choice.isSelectableMultiple||t.choice.allowSelectByClick&&0===t.choice.multipleUseVariable)&&l.push("cursor: pointer;")):(y(c).reqFilterBlurIsOn&&l.push(" blur(".concat(y(c).reqFilterBlur,"px)")),y(c).reqFilterBrightIsOn&&l.push(" brightness(".concat(y(c).reqFilterBright,"%)")),y(c).reqFilterContIsOn&&l.push(" contrast(".concat(y(c).reqFilterCont,"%)")),y(c).reqFilterGrayIsOn&&l.push(" grayscale(".concat(y(c).reqFilterGray,"%)")),y(c).reqFilterHueIsOn&&l.push(" hue-rotate(".concat(y(c).reqFilterHue,"deg)")),y(c).reqFilterInvertIsOn&&l.push(" invert(".concat(y(c).reqFilterInvert,"%)")),y(c).reqFilterOpacIsOn&&l.push(" opacity(".concat(y(c).reqFilterOpac,"%)")),y(c).reqFilterSaturIsOn&&l.push(" saturate(".concat(y(c).reqFilterSatur,")")),y(c).reqFilterSepiaIsOn&&l.push(" sepia(".concat(y(c).reqFilterGray,"%)")),l.length===n?l.splice(n-1,1):l.push(";"),y(c).reqBgColorIsOn&&(0!==i&&l.splice(i-1,1),y(c).reqOverlayOnImage||0!==o&&l.splice(o-1,1),l.push("background-color: ".concat(_i(y(c).reqFilterBgColor),";"))),y(g).objectGradientIsOn&&l.push("background-image: linear-gradient(".concat(y(g).objectGradientOnReq,");"))),l.join(" ")}),G=ie(()=>{let e=[];const o=y(u).objectImgBorderRadiusIsPixels?"px":"%";if(e.push("width: ".concat(y(u).objectImageWidth,"%; margin-top: ").concat(y(u).objectImageMarginTop,"%; margin-bottom: ").concat(y(u).objectImageMarginBottom,"%;")),y(u).objectImgObjectFillIsOn){e.push("object-fit: ".concat(y(u).objectImgObjectFillStyle,";"));const o=t.row.objectImgObjectFillHeight||y(u).objectImgObjectFillHeight;o&&e.push("height: ".concat(o,"px;"))}if(e.push("border-radius: ".concat(y(u).objectImgBorderRadiusTopLeft).concat(o," ").concat(y(u).objectImgBorderRadiusTopRight).concat(o," ").concat(y(u).objectImgBorderRadiusBottomRight).concat(o," ").concat(y(u).objectImgBorderRadiusBottomLeft).concat(o,";")),y(u).objectImgOverflowIsOn&&e.push("overflow: hidden;"),y(u).objectImgBorderIsOn){const t=y(h)?y(T)&&y(c).selImgBorderColorIsOn&&y(c).selFilterImgBorderColor||y(u).objectImgBorderColor:y(c).reqImgBorderColorIsOn&&y(c).reqFilterImgBorderColor||y(u).objectImgBorderColor;e.push("border: ".concat(y(u).objectImgBorderWidth,"px ").concat(y(u).objectImgBorderStyle," ").concat(_i(t),";"))}return e.join(" ")}),H=ie(()=>{let e=[];return e.push("font-family: '".concat(y(p).scoreText,"'; font-size: ").concat(y(p).scoreTextSize,"%; text-align: ").concat(y(p).scoreTextAlign,";")),e.push("color: ".concat(_i(y(p).scoreTextColor),";")),y(h)?t.choice.isActive&&y(c).selScoreTextColorIsOn&&e.push("color: ".concat(_i(y(c).selFilterSTextColor))):y(c).reqScoreTextColorIsOn&&e.push("color: ".concat(_i(y(c).reqFilterSTextColor))),e.join(" ")});function _(e,t,o){let i=e,n=!1;for(;i;){for(const e of i.classList){if(e.startsWith(t))return!0;e.startsWith(o)&&(n=!0)}if(n)return!1;i=i.parentElement}return!1}function Y(e,o,i,n=!1){const l=i&&i.target?i.target:null;let r=o;if(a.isOverDlg=!1,a.isOverImg=!1,!(l&&e.isActive&&e.addons&&e.addons.length>0&&_(l,"addon-","addon"))){if(o.isResultRow||o.isGroupRow){const t=kt.get(e.id);void 0!==t&&(r=t.row)}if(e.isSelectableMultiple){if(e.id===t.choice.id&&e.allowSelectByClick&&0===e.multipleUseVariable){if(l&&_(l,"multi-","choice-"))return;ii(e,r,a)}}else!Fo(e.requireds)||o.isInfoRow||n&&e.isNotSelectable||e.forcedActivated||(e.isActive?e.selectOnce||ti(e,r,a):oi(e,r,a))}}function Z(e){navigator.clipboard.writeText(t.choice.imageSourceTooltip).then(()=>{Ht.labelText="Tooltip copied to clipboard.",Ht.isOpen=!0}).catch(()=>{console.log(t.choice.imageSourceTooltip),Ht.labelText="Tooltip text logged to developer console.",Ht.isOpen=!0})}v(()=>{t.mainDiv&&(a.mainDiv=t.mainDiv),t.isBackpack&&(a.isBackpack=t.isBackpack)});var J={activateObject:Y,options:a},X=A(),K=B(X),te=e=>{var i=wa(),n=M(i);let s;var u=M(n),g=M(u),p=e=>{var o=ea(),i=M(o),n=e=>{var t=A(),o=B(t);w(o,()=>y(R),e=>{var t=zl(),o=M(t);k(o,()=>qe.sanitize(y(R),Lt)),$(()=>Pe(t,y(H))),I(e,t)}),I(e,t)};Q(i,e=>{t.row.resultShowRowTitle&&e(n)});var s=ee(i,2),c=e=>{var o=A(),i=B(o),n=e=>{var o=Gl();o.__contextmenu=Z,P(o,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.choice.imageSourceTooltip),$(()=>{We(o,"src",t.choice.image),Pe(o,y(G)),We(o,"loading",l()?"eager":"lazy")}),I(e,o)},a=e=>{var o=Hl();$(()=>{We(o,"src",t.choice.image),Pe(o,y(G)),We(o,"loading",l()?"eager":"lazy")}),I(e,o)};Q(i,e=>{t.choice.imageSourceTooltip?e(n):e(a,!1)}),I(e,o)};Q(s,e=>{(1===t.choice.template||t.windowWidth<=1280||t.row.choicesShareTemplate)&&t.choice.image&&!t.row.objectImageRemoved&&e(c)});var u=ee(s,2),g=M(u),p=e=>{var t=A(),o=B(t);w(o,()=>y(j),e=>{var t=_l(),o=M(t);k(o,()=>qe.sanitize(y(j),Lt)),$(()=>Pe(t,y(D))),I(e,t)}),I(e,t)};Q(g,e=>{""===t.choice.title||t.row.objectTitleRemoved||e(p)});var m=ee(g,2),v=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(m,e=>{t.choice.isSelectableMultiple&&y(N)&&0===y(d).multiChoiceCounterPosition&&e(v)});var f=ee(m,2),T=e=>{var o=A(),i=B(o);Re(i,17,()=>t.choice.scores,Ve,(e,o)=>{pl(e,{get score(){return y(o)},get row(){return t.row},get choice(){return t.choice}})}),I(e,o)};Q(f,e=>{t.row.objectScoreRemoved||t.choice.showScoreInAddon||e(T)});var S=ee(f,2),C=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(S,e=>{t.choice.isSelectableMultiple&&y(N)&&1===y(d).multiChoiceCounterPosition&&e(C)});var x=ee(S,2),O=e=>{var o=A(),i=B(o);Re(i,17,()=>t.choice.requireds,Ve,(e,t)=>{ll(e,{get required(){return y(t)},get scoreText(){return y(H)}})}),I(e,o)};Q(x,e=>{t.row.objectRequirementRemoved||t.choice.showReqInAddon||e(O)});var F=ee(x,2),q=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(F,e=>{t.choice.isSelectableMultiple&&y(N)&&2===y(d).multiChoiceCounterPosition&&e(q)});var z=ee(F,2),_=e=>{var o=A(),i=B(o),n=e=>{var o=Yl();o.__contextmenu=Z,P(o,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.choice.imageSourceTooltip),$(()=>{We(o,"src",t.choice.image),Pe(o,y(G)),We(o,"loading",l()?"eager":"lazy")}),I(e,o)},a=e=>{var o=Zl();$(()=>{We(o,"src",t.choice.image),Pe(o,y(G)),We(o,"loading",l()?"eager":"lazy")}),I(e,o)};Q(i,e=>{t.choice.imageSourceTooltip?e(n):e(a,!1)}),I(e,o)};Q(z,e=>{5===t.choice.template&&t.windowWidth>1280&&t.choice.image&&!t.row.objectImageRemoved&&e(_)});var Y=ee(z,2),J=e=>{var t=A(),o=B(t);w(o,()=>y(W),e=>{var t=Jl(),o=M(t);k(o,()=>qe.sanitize(y(W),Lt)),$(()=>Pe(t,y(E))),I(e,t)}),I(e,t)};Q(Y,e=>{""===t.choice.text||t.row.objectTextRemoved||e(J)});var X=ee(Y,2),K=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(X,e=>{t.choice.isSelectableMultiple&&y(N)&&3===y(d).multiChoiceCounterPosition&&e(K)});var te=ee(X,2),oe=e=>{var o=A(),i=B(o),n=e=>{var o=Xl();o.__contextmenu=Z,P(o,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.choice.imageSourceTooltip),$(()=>{We(o,"src",t.choice.image),Pe(o,y(G)),We(o,"loading",l()?"eager":"lazy")}),I(e,o)},a=e=>{var o=Kl();$(()=>{We(o,"src",t.choice.image),Pe(o,y(G)),We(o,"loading",l()?"eager":"lazy")}),I(e,o)};Q(i,e=>{t.choice.imageSourceTooltip?e(n):e(a,!1)}),I(e,o)};Q(te,e=>{4===t.choice.template&&t.windowWidth>1280&&t.choice.image&&!t.row.objectImageRemoved&&e(oe)});var ne=ee(u,2),le=e=>{var o=Ql();Re(o,21,()=>t.choice.addons,Ve,(e,o,i)=>{var n=A(),a=B(n),s=e=>{{let n=ie(()=>y(r)===i);ql(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return y(o)},get isEnabled(){return y(h)},get windowWidth(){return t.windowWidth},get preloadImages(){return l()},get isFirst(){return y(n)}})}};Q(a,e=>{(app.showAllAddons>0||(!y(o).hideAddon||t.choice.isActive)&&(y(o).showAddon||Fo(y(o).requireds)))&&e(s)}),I(e,n)}),$(()=>{var e;return V(o,1,"row g-0 p-0 w-100".concat(null!=(e=y(b))?e:""))}),I(e,o)};Q(ne,e=>{t.choice.addons&&t.choice.addons.length>0&&e(le)});var ae=ee(ne,2),re=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(ae,e=>{t.choice.isSelectableMultiple&&y(N)&&4===y(d).multiChoiceCounterPosition&&e(re)}),I(e,o)},v=e=>{var o=A(),i=B(o),n=e=>{var o=ca(),i=B(o),n=M(i),s=e=>{var o=A(),i=B(o),n=e=>{var o=ta();o.__contextmenu=Z,P(o,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.choice.imageSourceTooltip),$(()=>{We(o,"src",t.choice.image),Pe(o,y(G)),We(o,"loading",l()?"eager":"lazy")}),I(e,o)},a=e=>{var o=oa();$(()=>{We(o,"src",t.choice.image),Pe(o,y(G)),We(o,"loading",l()?"eager":"lazy")}),I(e,o)};Q(i,e=>{t.choice.imageSourceTooltip?e(n):e(a,!1)}),I(e,o)};Q(n,e=>{t.choice.image&&!t.row.objectImageRemoved&&e(s)});var c=ee(i,2),u=M(c),g=e=>{var t=A(),o=B(t);w(o,()=>y(j),e=>{var t=ia(),o=M(t);k(o,()=>qe.sanitize(y(j),Lt)),$(()=>Pe(t,y(D))),I(e,t)}),I(e,t)};Q(u,e=>{""===t.choice.title||t.row.objectTitleRemoved||e(g)});var p=ee(u,2),v=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(p,e=>{t.choice.isSelectableMultiple&&y(N)&&0===y(d).multiChoiceCounterPosition&&e(v)});var f=ee(p,2),T=e=>{var o=A(),i=B(o);Re(i,17,()=>t.choice.scores,Ve,(e,o)=>{pl(e,{get score(){return y(o)},get row(){return t.row},get choice(){return t.choice}})}),I(e,o)};Q(f,e=>{t.row.objectScoreRemoved||t.choice.showScoreInAddon||e(T)});var S=ee(f,2),C=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(S,e=>{t.choice.isSelectableMultiple&&y(N)&&1===y(d).multiChoiceCounterPosition&&e(C)});var x=ee(S,2),O=e=>{var o=A(),i=B(o);Re(i,17,()=>t.choice.requireds,Ve,(e,t)=>{ll(e,{get required(){return y(t)},get scoreText(){return y(H)}})}),I(e,o)};Q(x,e=>{t.row.objectRequirementRemoved||t.choice.showReqInAddon||e(O)});var F=ee(x,2),R=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(F,e=>{t.choice.isSelectableMultiple&&y(N)&&2===y(d).multiChoiceCounterPosition&&e(R)});var q=ee(F,2),z=e=>{var o=A(),i=B(o);w(i,()=>y(W),e=>{var o=na(),i=M(o);k(i,()=>qe.sanitize(xo(t.choice.text),Lt)),$(()=>Pe(o,y(E))),I(e,o)}),I(e,o)};Q(q,e=>{""===t.choice.text||t.row.objectTextRemoved||e(z)});var _=ee(q,2),Y=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(_,e=>{t.choice.isSelectableMultiple&&y(N)&&3===y(d).multiChoiceCounterPosition&&e(Y)});var J=ee(_,2),X=e=>{var o=aa(),i=B(o),n=e=>{var o=la();Re(o,21,()=>t.choice.addons,Ve,(e,o,i)=>{var n=A(),a=B(n),s=e=>{{let n=ie(()=>y(r)===i);ql(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return y(o)},get isEnabled(){return y(h)},get windowWidth(){return t.windowWidth},get preloadImages(){return l()},get isFirst(){return y(n)}})}};Q(a,e=>{(app.showAllAddons>0||(!y(o).hideAddon||t.choice.isActive)&&(y(o).showAddon||Fo(y(o).requireds)))&&e(s)}),I(e,n)}),$(()=>{var e;return V(o,1,"row g-0 p-0 col w-100".concat(null!=(e=y(b))?e:""))}),I(e,o)};Q(i,e=>{t.choice.addons&&t.choice.addons.length>0&&e(n)});var s=ee(i,2),c=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(s,e=>{t.choice.isSelectableMultiple&&y(N)&&4===y(d).multiChoiceCounterPosition&&e(c)}),I(e,o)};Q(J,e=>{t.choice.useSeperateAddon||e(X)});var K=ee(c,2),te=e=>{var o=sa(),i=M(o),n=e=>{var o=ra();Re(o,21,()=>t.choice.addons,Ve,(e,o,i)=>{var n=A(),a=B(n),s=e=>{{let n=ie(()=>y(r)===i);ql(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return y(o)},get isEnabled(){return y(h)},get windowWidth(){return t.windowWidth},get preloadImages(){return l()},get isFirst(){return y(n)}})}};Q(a,e=>{(app.showAllAddons>0||(!y(o).hideAddon||t.choice.isActive)&&(y(o).showAddon||Fo(y(o).requireds)))&&e(s)}),I(e,n)}),$(()=>{var e;return V(o,1,"row g-0 p-0 col w-100".concat(null!=(e=y(b))?e:""))}),I(e,o)};Q(i,e=>{t.choice.addons&&t.choice.addons.length>0&&e(n)});var s=ee(i,2),c=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(s,e=>{t.choice.isSelectableMultiple&&y(N)&&4===y(d).multiChoiceCounterPosition&&e(c)}),I(e,o)};Q(K,e=>{t.choice.useSeperateAddon&&e(te)}),$(()=>{var e;Pe(i,"max-width: ".concat(null!=(e=y(m))?e:"","%")),Pe(c,"max-width: ".concat(100-y(m),"%"))}),I(e,o)},s=e=>{var o=A(),i=B(o),n=e=>{var o=ba(),i=B(o),n=M(i),s=e=>{var t=A(),o=B(t);w(o,()=>y(j),e=>{var t=da(),o=M(t);k(o,()=>qe.sanitize(y(j),Lt)),$(()=>Pe(t,y(D))),I(e,t)}),I(e,t)};Q(n,e=>{""===t.choice.title||t.row.objectTitleRemoved||e(s)});var c=ee(n,2),u=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(c,e=>{t.choice.isSelectableMultiple&&y(N)&&0===y(d).multiChoiceCounterPosition&&e(u)});var g=ee(c,2),p=e=>{var o=A(),i=B(o);Re(i,17,()=>t.choice.scores,Ve,(e,o)=>{pl(e,{get score(){return y(o)},get row(){return t.row},get choice(){return t.choice}})}),I(e,o)};Q(g,e=>{t.row.objectScoreRemoved||t.choice.showScoreInAddon||e(p)});var v=ee(g,2),f=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(v,e=>{t.choice.isSelectableMultiple&&y(N)&&1===y(d).multiChoiceCounterPosition&&e(f)});var T=ee(v,2),S=e=>{var o=A(),i=B(o);Re(i,17,()=>t.choice.requireds,Ve,(e,t)=>{ll(e,{get required(){return y(t)},get scoreText(){return y(H)}})}),I(e,o)};Q(T,e=>{t.row.objectRequirementRemoved||t.choice.showReqInAddon||e(S)});var C=ee(T,2),x=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(C,e=>{t.choice.isSelectableMultiple&&y(N)&&2===y(d).multiChoiceCounterPosition&&e(x)});var O=ee(C,2),F=e=>{var t=A(),o=B(t);w(o,()=>y(W),e=>{var t=ua(),o=M(t);k(o,()=>qe.sanitize(y(W),Lt)),$(()=>Pe(t,y(E))),I(e,t)}),I(e,t)};Q(O,e=>{""===t.choice.text||t.row.objectTextRemoved||e(F)});var R=ee(O,2),q=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(R,e=>{t.choice.isSelectableMultiple&&y(N)&&3===y(d).multiChoiceCounterPosition&&e(q)});var z=ee(R,2),_=e=>{var o=pa(),i=B(o),n=e=>{var o=ga();Re(o,21,()=>t.choice.addons,Ve,(e,o,i)=>{var n=A(),a=B(n),s=e=>{{let n=ie(()=>y(r)===i);ql(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return y(o)},get isEnabled(){return y(h)},get windowWidth(){return t.windowWidth},get preloadImages(){return l()},get isFirst(){return y(n)}})}};Q(a,e=>{(app.showAllAddons>0||(!y(o).hideAddon||t.choice.isActive)&&(y(o).showAddon||Fo(y(o).requireds)))&&e(s)}),I(e,n)}),$(()=>{var e;return V(o,1,"row g-0 p-0 col w-100".concat(null!=(e=y(b))?e:""))}),I(e,o)};Q(i,e=>{t.choice.addons&&t.choice.addons.length>0&&e(n)});var s=ee(i,2),c=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(s,e=>{t.choice.isSelectableMultiple&&y(N)&&4===y(d).multiChoiceCounterPosition&&e(c)}),I(e,o)};Q(z,e=>{t.choice.useSeperateAddon||e(_)});var Y=ee(i,2),J=M(Y),X=e=>{var o=A(),i=B(o),n=e=>{var o=ma();o.__contextmenu=Z,P(o,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.choice.imageSourceTooltip),$(()=>{We(o,"src",t.choice.image),Pe(o,y(G)),We(o,"loading",l()?"eager":"lazy")}),I(e,o)},a=e=>{var o=ha();$(()=>{We(o,"src",t.choice.image),Pe(o,y(G)),We(o,"loading",l()?"eager":"lazy")}),I(e,o)};Q(i,e=>{t.choice.imageSourceTooltip?e(n):e(a,!1)}),I(e,o)};Q(J,e=>{t.choice.image&&!t.row.objectImageRemoved&&e(X)});var K=ee(Y,2),te=e=>{var o=fa(),i=M(o),n=e=>{var o=va();Re(o,21,()=>t.choice.addons,Ve,(e,o,i)=>{var n=A(),a=B(n),s=e=>{{let n=ie(()=>y(r)===i);ql(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return y(o)},get isEnabled(){return y(h)},get windowWidth(){return t.windowWidth},get preloadImages(){return l()},get isFirst(){return y(n)}})}};Q(a,e=>{(app.showAllAddons>0||(!y(o).hideAddon||t.choice.isActive)&&(y(o).showAddon||Fo(y(o).requireds)))&&e(s)}),I(e,n)}),$(()=>{var e;return V(o,1,"row g-0 p-0 col w-100".concat(null!=(e=y(b))?e:""))}),I(e,o)};Q(i,e=>{t.choice.addons&&t.choice.addons.length>0&&e(n)});var s=ee(i,2),c=e=>{{let o=ie(()=>y(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable);El(e,{get isEnabled(){return y(o)},get multiChoiceButton(){return y(U)},get multiChoiceText(){return y(L)},get choice(){return t.choice},selectedOneMore:()=>ii(t.choice,t.row,a),selectedOneLess:()=>ni(t.choice,t.row,a)})}};Q(s,e=>{t.choice.isSelectableMultiple&&y(N)&&4===y(d).multiChoiceCounterPosition&&e(c)}),I(e,o)};Q(K,e=>{t.choice.useSeperateAddon&&e(te)}),$(()=>{var e;Pe(i,"max-width: ".concat(100-y(m),"%")),Pe(Y,"max-width: ".concat(null!=(e=y(m))?e:"","%"))}),I(e,o)};Q(i,e=>{3===t.choice.template&&e(n)},!0),I(e,o)};Q(i,e=>{2===t.choice.template?e(n):e(s,!1)}),I(e,o)};Q(g,e=>{t.choice.template>=4||1===t.choice.template||t.windowWidth<=1280||t.row.choicesShareTemplate?e(p):e(v,!1)}),$((e,o)=>{var l,a;V(i,1,e),s=V(n,1,"d-flex",null,s,o),V(u,1,"row row-".concat(null!=(l=t.row.id)?l:""," choice-").concat(null!=(a=t.choice.id)?a:""," ").concat(y(T)?"choice-selected":"choice-unselected"," ").concat(y(h)?"choice-enabled":"choice-disabled"," ").concat(y(T)&&y(c).selOverlayOnImage||!y(h)&&y(c).reqOverlayOnImage?"bg-overlay ":"","w-100")),Pe(u,y(z))},[()=>q(function(){let e=t.choice.objectWidth||t.row.objectWidth,i=Io(e),n="col-6"===app.objectsPerRow?2:"col-4"===app.objectsPerRow?3:4;if(o()>1280)return e;if(!(o()>720))return o()>480?1===i?"col-12":"col-6":"col-12";switch(i){case 1:return"col-12";case 2:return"col-6";case 3:return n>2?"col-4":app.objectsPerRow;case 4:return n>3?"col-3":app.objectsPerRow;default:return app.objectsPerRow}}()),()=>({fullHeight:y(x)})]),Ue("click",u,e=>Y(t.choice,t.row,e,!0),!0),I(e,i)};Q(K,e=>{y(f)&&e(te)}),I(e,X);var oe=S(J);return n(),oe}Le(["contextmenu"]);var Ia=b('<img alt=""/>'),Sa=b('<img alt=""/>'),Ca=b('<h2 class="mb-0"><!></h2>'),ya=b('<img alt=""/>'),xa=b('<img alt=""/>'),Oa=b('<p class="mb-0"><!></p>'),Aa=b('<img alt=""/>'),Ba=b('<img alt=""/>'),ka=b('<div class="col-12 m-0 p-0"><!> <!> <!> <!> <!></div>'),Ma=b('<h2 class="mb-0"><!></h2>'),Da=b('<p class="mb-0"><!></p>'),Fa=b('<img alt=""/>'),Ra=b('<img alt=""/>'),ja=b('<div class="col p-0 text-center"><!> <!></div> <div class="col p-0 text-center"><!></div>',1),Pa=b('<img alt=""/>'),$a=b('<img alt=""/>'),Va=b('<h2 class="mb-0"><!></h2>'),qa=b('<p class="mb-0"><!></p>'),Wa=b('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!></div>',1),La=b("<div><!></div>"),Ua=b("<div><!></div>"),Na=b("<div><!> <!></div>");function Ea(e,t){C(t,!0);const o=F(t,"preloadImages",3,!1),i=F(t,"isBackpack",3,!1),l={linkedObjects:[]};let a=x(void 0),r=ie(()=>Oo("privateBackgroundIsOn",t.row)),s=ie(()=>Oo("privateRowImageIsOn",t.row)),c=ie(()=>Oo("privateRowIsOn",t.row)),d=ie(()=>Oo("privateTextIsOn",t.row)),u=x(0),g=ie(()=>void 0!==y(s).rowImageBoxWidth?y(s).rowImageBoxWidth:50),p=ie(()=>Fo(t.row.requireds)),m=ie(()=>t.row.onlyIfNoChoices&&0!==t.row.currentChoices),h=ie(()=>t.row.rowJustify?"justify-".concat(t.row.rowJustify):""),f=ie(()=>xo(t.row.title)),b=ie(()=>xo(t.row.titleText)),O=ie(()=>{const e=[];if(void 0!==t.row.resultGroupId&&""!==t.row.resultGroupId&&t.row.resultGroupId)for(const[o]of xt){const i=kt.get(o);if(void 0!==i){const o=i.choice,n=i.row;if(!o.isNotResult)if(t.row.resultGroupId===n.resultGroupId)e.push({choice:o,row:n});else if(void 0!==o.groups)for(let i=0;i<o.groups.length;i++)if(o.groups[i]===t.row.resultGroupId){e.push({choice:o,row:n});break}}}else for(const[t]of xt){const o=kt.get(t);if(void 0!==o){const t=o.choice,i=o.row;t.isNotResult||e.push({choice:t,row:i})}}return e.sort((e,t)=>e.row.index!==t.row.index?e.row.index-t.row.index:e.choice.index-t.choice.index),e}),R=ie(()=>{const e=[];if(void 0!==t.row.resultGroupId){const o=Mt.get(t.row.resultGroupId);if(void 0!==o)for(let t=0;t<o.elements.length;t++){const i=kt.get(o.elements[t]);void 0!==i&&e.push({choice:i.choice,row:i.row})}}return e.sort((e,t)=>e.row.index!==t.row.index?e.row.index-t.row.index:e.choice.index-t.choice.index),e}),j=ie(()=>{if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.backgroundImage)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(let e=0;e<t.row.rowDesignGroups.length;e++){let o=jt.get(t.row.rowDesignGroups[e]);if(void 0!==o&&o.privateBackgroundIsOn&&o.styling.backgroundImage){let e=o.activatedId,t=Dt.get(e);if(""===e||Bo(o.activatedId))return o.styling;if(void 0!==app.globalRequirements&&void 0!==t&&Fo(t.requireds))return o.styling}}return!1}),q=ie(()=>{if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.bgColorIsOn&&t.row.styling.backgroundColor)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(let e=0;e<t.row.rowDesignGroups.length;e++){let o=jt.get(t.row.rowDesignGroups[e]);if(void 0!==o&&o.privateBackgroundIsOn&&o.styling.bgColorIsOn&&o.styling.backgroundColor){let e=o.activatedId,t=Dt.get(e);if(""===e||Bo(o.activatedId))return o.styling;if(void 0!==app.globalRequirements&&void 0!==t&&Fo(t.requireds))return o.styling}}return!1}),W=ie(()=>{let e=[];return e.push("margin: ".concat(y(c).rowBodyMarginTop,"px ").concat(y(c).rowBodyMarginSides,"% ").concat(y(c).rowBodyMarginBottom,"px ").concat(y(c).rowBodyMarginSides,"%;")),y(j)&&e.push("background-image: url('".concat(y(j).backgroundImage,"'); ").concat(y(j).isBackgroundRepeat?"background-repeat: repeat;":y(j).isBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),y(q)&&e.push("background-color: ".concat(_i(y(q).backgroundColor),";")),e.join(" ")}),L=ie(()=>{let e=y(c).rowBorderRadiusIsPixels?"px":"%",t=[];return y(c).rowBorderImage&&t.push("border-image: url('".concat(y(c).rowBorderImage,"') ").concat(y(c).rowBorderImageSliceTop," ").concat(y(c).rowBorderImageSliceRight," ").concat(y(c).rowBorderImageSliceBottom," ").concat(y(c).rowBorderImageSliceLeft," / ").concat(y(c).rowBorderImageWidth,"px ").concat(y(c).rowBorderImageRepeat,"; border-style: solid; padding: ").concat(y(c).rowBorderImageWidth,"px;")),y(r).rowBackgroundImage&&t.push("background-image: url('".concat(y(r).rowBackgroundImage,"'); ").concat(y(r).isRowBackgroundRepeat?"background-repeat: repeat;":y(r).isRowBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),y(r).rowBgColorIsOn&&t.push("background-color: ".concat(_i(y(r).rowBgColor),";")),t.push("margin-left: ".concat(y(c).rowMargin,"%; margin-right: ").concat(y(c).rowMargin,"%;")),y(c).rowGradientIsOn&&t.push("background-image: linear-gradient(".concat(y(c).rowGradient,");")),t.push("border-radius: ".concat(y(c).rowBorderRadiusTopLeft).concat(e," ").concat(y(c).rowBorderRadiusTopRight).concat(e," ").concat(y(c).rowBorderRadiusBottomRight).concat(e," ").concat(y(c).rowBorderRadiusBottomLeft).concat(e,";")),y(c).rowOverflowIsOn&&t.push("overflow: hidden;"),y(c).rowBorderIsOn&&t.push("border: ".concat(y(c).rowBorderWidth,"px ").concat(y(c).rowBorderStyle," ").concat(_i(y(c).rowBorderColor),";")),y(c).rowDropShadowIsOn&&(y(c).rowUseBoxShadowIsOn?t.push("box-shadow: ".concat(y(c).rowDropShadowH,"px ").concat(y(c).rowDropShadowV,"px ").concat(y(c).rowDropShadowBlur,"px ").concat(y(c).rowDropShadowSpread,"px ").concat(_i(y(c).rowDropShadowColor),";")):t.push("filter: drop-shadow(".concat(y(c).rowDropShadowH,"px ").concat(y(c).rowDropShadowV,"px ").concat(y(c).rowDropShadowBlur,"px ").concat(_i(y(c).rowDropShadowColor),");"))),t.join(" ")}),U=ie(()=>"white-space: pre-line; font-family: '".concat(y(d).rowTitle,"'; font-size: ").concat(y(d).rowTitleTextSize,"%; text-align: ").concat(y(d).rowTitleAlign,"; color: ").concat(_i(y(d).rowTitleColor))),N=ie(()=>"white-space: pre-wrap; font-family: '".concat(y(d).rowText,"'; font-size: ").concat(y(d).rowTextTextSize,"%; text-align: ").concat(y(d).rowTextAlign,"; color: ").concat(_i(y(d).rowTextColor),"; padding: ").concat(y(c).rowTextPaddingX,"px ").concat(y(c).rowTextPaddingY,"% ").concat(y(c).rowTextPaddingX,"px ").concat(y(c).rowTextPaddingY,"%;")),E=ie(()=>{let e=y(s).rowImgBorderRadiusIsPixels?"px":"%",t=[];if(t.push("width: ".concat(y(s).rowImageWidth,"%; margin-top: ").concat(y(s).rowImageMarginTop,"%; margin-bottom: ").concat(y(s).rowImageMarginBottom,"%;")),y(s).rowImgObjectFillIsOn){t.push("object-fit: ".concat(y(s).rowImgObjectFillStyle,";"));const e=y(s).rowImgObjectFillHeight;e&&t.push("height: ".concat(e,"px;"))}return t.push("border-radius: ".concat(y(s).rowImgBorderRadiusTopLeft).concat(e," ").concat(y(s).rowImgBorderRadiusTopRight).concat(e," ").concat(y(s).rowImgBorderRadiusBottomRight).concat(e," ").concat(y(s).rowImgBorderRadiusBottomLeft).concat(e,";")),y(s).rowImgOverflowIsOn&&t.push("overflow: hidden;"),y(s).rowImgBorderIsOn&&t.push("border: ".concat(y(s).rowImgBorderWidth,"px ").concat(y(s).rowImgBorderStyle," ").concat(_i(y(s).rowImgBorderColor),";")),t.join(" ")}),z=ie(()=>"padding-left: ".concat(y(c).rowButtonYPadding,"px; padding-right: ").concat(y(c).rowButtonYPadding,"px; padding-top: ").concat(y(c).rowButtonXPadding,"px; padding-bottom: ").concat(y(c).rowButtonXPadding,"px;"));function G(){if(t.row.btnPointAddon&&"sumaddon"===t.row.buttonTypeRadio&&void 0!==t.row.pointTypeRandom){const e=t.row.randomMax||0,o=t.row.randomMin||0,i=Math.floor(Math.random()*(e-o)+o),a=new n,r=At.get(t.row.pointTypeRandom);if(void 0!==r){if(r.belowZeroNotAllowed&&r.startingSum+i<0)return;const e=xt.get(t.row.id);let o=0;r.startingSum+=i,void 0!==e&&e.pointNum&&(o=e.pointNum),xt.set(t.row.id,{multiple:0,isRowButton:!0,rndPoint:t.row.pointTypeRandom,pointNum:o+i}),a.set(r.id,i),Qo(null,a,0,void 0,void 0,l)}return}if(t.row.buttonRandom){const e=[],o=t.row.objects.filter(e=>Fo(e.requireds)&&(!e.isNotSelectable||t.row.allowActivateUnselectable));if(t.row.isWeightedRandom){let e=0;for(let t=0;t<o.length;t++){e+=o[t].randomWeight||100}if(void 0!==t.row.buttonRandomNumber)for(let i=0;i<t.row.buttonRandomNumber;i++){const i=Math.floor(Math.random()*e);let n=0;for(let e=0;e<o.length;e++){const l=o[e];if(n+=l.randomWeight||100,i<n){l.isSelectableMultiple&&l.isMultipleUseVariable&&l.numMultipleTimesPluss?l.numMultipleTimesPluss>l.multipleUseVariable?ii(l,t.row,y(a).options):ni(l,t.row,y(a).options):y(a).activateObject(l,t.row);break}}}}else if(void 0!==t.row.buttonRandomNumber)for(let i=0;i<t.row.buttonRandomNumber;i++){let i,n,l=0,r=100;do{n=Math.floor(Math.random()*o.length),i=o[n],l++}while(t.row.onlyUnselectedChoices&&(-1!==e.indexOf(n)||xt.has(i.id))&&l<r);i&&-1===e.indexOf(n)&&(e.push(n),i.isSelectableMultiple&&i.isMultipleUseVariable&&i.numMultipleTimesPluss?i.numMultipleTimesPluss>i.multipleUseVariable?ii(i,t.row,y(a).options):ni(i,t.row,y(a).options):y(a).activateObject(i,t.row))}}else if(void 0!==t.row.buttonId){const e=Rt.get(t.row.buttonId);void 0!==e&&(xt.has(e.id)?t.row.buttonType&&(e.isTrue=!1,xt.delete(e.id)):(e.isTrue=!0,xt.set(e.id,{multiple:0,isVariable:!0})))}}function H(e){navigator.clipboard.writeText(t.row.imageSourceTooltip).then(()=>{Ht.labelText="Tooltip copied to clipboard.",Ht.isOpen=!0}).catch(()=>{console.log(t.row.imageSourceTooltip),Ht.labelText="Tooltip text logged to developer console.",Ht.isOpen=!0})}v(()=>{if(t.row.deselectChoices&&!y(p))for(let e=0;e<t.row.objects.length;e++){const o=t.row.objects[e];if(o.isActive)if(o.isSelectableMultiple){if(o.isMultipleUseVariable){const e=o.multipleUseVariable;if(e>0)for(let i=0;i<e;i++)ni(o,t.row,y(a).options);else if(e<0)for(let i=e;i<0;i++)ii(o,t.row,y(a).options)}}else y(a).activateObject(o,t.row)}});var _=Na(),Y=M(_),Z=e=>{var i=La(),n=M(i),l=e=>{var i=ka(),n=M(i),l=e=>{var i=A(),n=B(i),l=e=>{{let o=ie(()=>!t.row.buttonType&&void 0!==t.row.buttonId&&xt.has(t.row.buttonId)||y(m));fe(e,{class:"row-button",onclickcapture:G,get disabled(){return y(o)},get style(){return y(z)},variant:"raised",children:(e,o)=>{be(e,{children:(e,o)=>{var i=A(),n=B(i);k(n,()=>void 0!==t.row.buttonText?t.row.buttonText:"Click"),I(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})}},a=e=>{var i=A(),n=B(i),l=e=>{var i=A(),n=B(i),l=e=>{var i=Ia();i.__contextmenu=H,P(i,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.row.imageSourceTooltip),$(()=>{We(i,"src",t.row.image),Pe(i,y(E)),We(i,"loading",o()?"eager":"lazy")}),I(e,i)},a=e=>{var i=Sa();$(()=>{We(i,"src",t.row.image),Pe(i,y(E)),We(i,"loading",o()?"eager":"lazy")}),I(e,i)};Q(n,e=>{t.row.imageSourceTooltip?e(l):e(a,!1)}),I(e,i)};Q(n,e=>{t.row.image&&e(l)},!0),I(e,i)};Q(n,e=>{t.row.isButtonRow?e(l):e(a,!1)}),I(e,i)};Q(n,e=>{(1===t.row.template||t.windowWidth<=1280)&&e(l)});var a=ee(n,2),r=e=>{var t=A(),o=B(t);w(o,()=>y(f),e=>{var t=Ca(),o=M(t);k(o,()=>qe.sanitize(y(f),Lt)),$(()=>Pe(t,y(U))),I(e,t)}),I(e,t)};Q(a,e=>{""!==t.row.title&&e(r)});var s=ee(a,2),c=e=>{var i=A(),n=B(i),l=e=>{{let o=ie(()=>!t.row.buttonType&&void 0!==t.row.buttonId&&xt.has(t.row.buttonId)||y(m));fe(e,{class:"row-button",onclickcapture:G,get disabled(){return y(o)},get style(){return y(z)},variant:"raised",children:(e,o)=>{be(e,{children:(e,o)=>{var i=A(),n=B(i);k(n,()=>void 0!==t.row.buttonText?t.row.buttonText:"Click"),I(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})}},a=e=>{var i=A(),n=B(i),l=e=>{var i=A(),n=B(i),l=e=>{var i=ya();i.__contextmenu=H,P(i,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.row.imageSourceTooltip),$(()=>{We(i,"src",t.row.image),Pe(i,y(E)),We(i,"loading",o()?"eager":"lazy")}),I(e,i)},a=e=>{var i=xa();$(()=>{We(i,"src",t.row.image),Pe(i,y(E)),We(i,"loading",o()?"eager":"lazy")}),I(e,i)};Q(n,e=>{t.row.imageSourceTooltip?e(l):e(a,!1)}),I(e,i)};Q(n,e=>{t.row.image&&e(l)},!0),I(e,i)};Q(n,e=>{t.row.isButtonRow?e(l):e(a,!1)}),I(e,i)};Q(s,e=>{5===t.row.template&&t.windowWidth>1280&&e(c)});var d=ee(s,2),u=e=>{var t=A(),o=B(t);w(o,()=>y(b),e=>{var t=Oa(),o=M(t);k(o,()=>qe.sanitize(y(b),Lt)),$(()=>Pe(t,y(N))),I(e,t)}),I(e,t)};Q(d,e=>{""!==t.row.titleText&&e(u)});var g=ee(d,2),p=e=>{var i=A(),n=B(i),l=e=>{{let o=ie(()=>!t.row.buttonType&&void 0!==t.row.buttonId&&xt.has(t.row.buttonId)||y(m));fe(e,{class:"row-button",onclickcapture:G,get disabled(){return y(o)},get style(){return y(z)},variant:"raised",children:(e,o)=>{be(e,{children:(e,o)=>{var i=A(),n=B(i);k(n,()=>void 0!==t.row.buttonText?t.row.buttonText:"Click"),I(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})}},a=e=>{var i=A(),n=B(i),l=e=>{var i=A(),n=B(i),l=e=>{var i=Aa();i.__contextmenu=H,P(i,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.row.imageSourceTooltip),$(()=>{We(i,"src",t.row.image),Pe(i,y(E)),We(i,"loading",o()?"eager":"lazy")}),I(e,i)},a=e=>{var i=Ba();$(()=>{We(i,"src",t.row.image),Pe(i,y(E)),We(i,"loading",o()?"eager":"lazy")}),I(e,i)};Q(n,e=>{t.row.imageSourceTooltip?e(l):e(a,!1)}),I(e,i)};Q(n,e=>{t.row.image&&e(l)},!0),I(e,i)};Q(n,e=>{t.row.isButtonRow?e(l):e(a,!1)}),I(e,i)};Q(g,e=>{4===t.row.template&&t.windowWidth>1280&&e(p)}),I(e,i)},a=e=>{var i=A(),n=B(i),l=e=>{var i=ja(),n=B(i),l=M(n),a=e=>{var t=A(),o=B(t);w(o,()=>y(f),e=>{var t=Ma(),o=M(t);k(o,()=>qe.sanitize(y(f),Lt)),$(()=>Pe(t,y(U))),I(e,t)}),I(e,t)};Q(l,e=>{""!==t.row.title&&e(a)});var r=ee(l,2),s=e=>{var t=A(),o=B(t);w(o,()=>y(b),e=>{var t=Da(),o=M(t);k(o,()=>qe.sanitize(y(b),Lt)),$(()=>Pe(t,y(N))),I(e,t)}),I(e,t)};Q(r,e=>{""!==t.row.titleText&&e(s)});var c=ee(n,2),d=M(c),u=e=>{{let o=ie(()=>!t.row.buttonType&&void 0!==t.row.buttonId&&xt.has(t.row.buttonId)||y(m));fe(e,{class:"row-button",onclickcapture:G,get disabled(){return y(o)},get style(){return y(z)},variant:"raised",children:(e,o)=>{be(e,{children:(e,o)=>{var i=A(),n=B(i);k(n,()=>void 0!==t.row.buttonText?t.row.buttonText:"Click"),I(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})}},p=e=>{var i=A(),n=B(i),l=e=>{var i=A(),n=B(i),l=e=>{var i=Fa();i.__contextmenu=H,P(i,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.row.imageSourceTooltip),$(()=>{We(i,"src",t.row.image),Pe(i,y(E)),We(i,"loading",o()?"eager":"lazy")}),I(e,i)},a=e=>{var i=Ra();$(()=>{We(i,"src",t.row.image),Pe(i,y(E)),We(i,"loading",o()?"eager":"lazy")}),I(e,i)};Q(n,e=>{t.row.imageSourceTooltip?e(l):e(a,!1)}),I(e,i)};Q(n,e=>{t.row.image&&e(l)},!0),I(e,i)};Q(d,e=>{t.row.isButtonRow?e(u):e(p,!1)}),$(()=>{var e;Pe(n,"max-width: ".concat(100-y(g),"%")),Pe(c,"max-width: ".concat(null!=(e=y(g))?e:"","%"))}),I(e,i)},a=e=>{var i=A(),n=B(i),l=e=>{var i=Wa(),n=B(i),l=M(n),a=e=>{{let o=ie(()=>!t.row.buttonType&&void 0!==t.row.buttonId&&xt.has(t.row.buttonId)||y(m));fe(e,{class:"row-button",onclickcapture:G,get disabled(){return y(o)},get style(){return y(z)},variant:"raised",children:(e,o)=>{be(e,{children:(e,o)=>{var i=A(),n=B(i);k(n,()=>void 0!==t.row.buttonText?t.row.buttonText:"Click"),I(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})}},r=e=>{var i=A(),n=B(i),l=e=>{var i=A(),n=B(i),l=e=>{var i=Pa();i.__contextmenu=H,P(i,(e,t)=>null==Ji?void 0:Ji(e,t),()=>t.row.imageSourceTooltip),$(()=>{We(i,"src",t.row.image),Pe(i,y(E)),We(i,"loading",o()?"eager":"lazy")}),I(e,i)},a=e=>{var i=$a();$(()=>{We(i,"src",t.row.image),Pe(i,y(E)),We(i,"loading",o()?"eager":"lazy")}),I(e,i)};Q(n,e=>{t.row.imageSourceTooltip?e(l):e(a,!1)}),I(e,i)};Q(n,e=>{t.row.image&&e(l)},!0),I(e,i)};Q(l,e=>{t.row.isButtonRow?e(a):e(r,!1)});var s=ee(n,2),c=M(s),d=e=>{var t=A(),o=B(t);w(o,()=>y(f),e=>{var t=Va(),o=M(t);k(o,()=>qe.sanitize(y(f),Lt)),$(()=>Pe(t,y(U))),I(e,t)}),I(e,t)};Q(c,e=>{""!==t.row.title&&e(d)});var u=ee(c,2),p=e=>{var t=A(),o=B(t);w(o,()=>y(b),e=>{var t=qa(),o=M(t);k(o,()=>qe.sanitize(y(b),Lt)),$(()=>Pe(t,y(N))),I(e,t)}),I(e,t)};Q(u,e=>{""!==t.row.titleText&&e(p)}),$(()=>{var e;Pe(n,"max-width: ".concat(null!=(e=y(g))?e:"","%")),Pe(s,"max-width: ".concat(100-y(g),"%"))}),I(e,i)};Q(n,e=>{3===t.row.template&&e(l)},!0),I(e,i)};Q(n,e=>{2===t.row.template?e(l):e(a,!1)}),I(e,i)};Q(n,e=>{t.row.template>=4||1===t.row.template||t.windowWidth<=1280?e(l):e(a,!1)}),$(()=>{var e,o;V(i,1,"row gx-0 row-".concat(null!=(e=t.row.id)?e:""," row-").concat(null!=(o=t.row.id)?o:"","-header")),Pe(i,""!==t.row.title?y(L):"")}),I(e,i)};Q(Y,e=>{y(p)&&e(Z)});var J=ee(Y,2),X=e=>{var n=Ua(),l=M(n),r=e=>{var i=A(),n=B(i);Re(n,17,()=>y(O),Ve,(e,i,n)=>{T(Ta(e,{get row(){return t.row},get choice(){return y(i).choice},index:n,get windowWidth(){return t.windowWidth},get preloadImages(){return o()}}),e=>D(a,e,!0),()=>y(a))}),I(e,i)},s=e=>{var n=A(),l=B(n),r=e=>{var n=A(),l=B(n);Re(l,17,()=>y(R),Ve,(e,n,l)=>{T(Ta(e,{get row(){return t.row},get choice(){return y(n).choice},index:l,get windowWidth(){return t.windowWidth},get preloadImages(){return o()},get isBackpack(){return i()},get mainDiv(){return t.mainDiv}}),e=>D(a,e,!0),()=>y(a))}),I(e,n)},s=e=>{var n=A(),l=B(n);Re(l,17,()=>t.row.objects,Ve,(e,n,l)=>{T(Ta(e,{get row(){return t.row},get choice(){return y(n)},index:l,get windowWidth(){return t.windowWidth},get preloadImages(){return o()},get isBackpack(){return i()},get mainDiv(){return t.mainDiv}}),e=>D(a,e,!0),()=>y(a))}),I(e,n)};Q(l,e=>{t.row.isGroupRow?e(r):e(s,!1)},!0),I(e,n)};Q(l,e=>{t.row.isResultRow?e(r):e(s,!1)}),$(()=>{var e;return V(n,1,"row gx-0 m-0 p-0 ".concat(null!=(e=y(h))?e:""))}),I(e,n)};Q(J,e=>{y(p)&&e(X)}),$(()=>{var e;V(_,1,"row-".concat(null!=(e=t.row.id)?e:"","-bg text-center").concat(y(p)?"":" hidden")),Pe(_,y(W))}),Ee(_,"clientWidth",e=>D(u,e)),I(e,_),S()}Le(["contextmenu"]);var za=b("<!> <!>",1),Ga=b('<div class="p-0 col-12"><!></div>'),Ha=b("<div><!></div>"),_a=b('<div class="container-fluid p-0 h-100"><div class="row gx-0"></div></div>'),Ya=b("<!> <!> <!>",1);function Za(e,t){C(t,!0);let o=F(t,"open",7),i=x(0),n=x(void 0),l=x(void 0),a=ie(()=>{let e=[];return e.push("overflow-wrap: break-word;"),e.push("white-space: normal;"),app.styling.useBackpackDesign?(app.styling.backpackBgImage&&e.push("background-image: url('".concat(app.styling.backpackBgImage,"');")),e.push("background-color: ".concat(_i(app.styling.backpackBgColor),";")),app.styling.isBackpackBgRepeat?e.push("background-repeat: repeat;"):app.styling.isBackpackBgFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")):(app.styling.backgroundImage&&e.push("background-image: url('".concat(app.styling.backgroundImage,"');")),e.push("background-color: ".concat(_i(app.styling.backgroundColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")),e.join(" ")});{let r=ie(()=>"dlgBackpack"!==zt.currentDialog?"close":""),s=ie(()=>"dlgBackpack"!==zt.currentDialog?"close":""),c=ie(()=>void 0!==app.styling.backPackWidth?app.styling.backPackWidth:1200);ge(e,{get escapeKeyAction(){return y(r)},get scrimClickAction(){return y(s)},get surface$style(){var e;return"width: ".concat(null!=(e=y(c))?e:"","px; max-width: 100vw;")},get onSMUIDialogClosed(){return t.onclose},get open(){return o()},set open(e){o(e)},children:(e,t)=>{var o=Ya(),r=B(o);pe(r,{class:"p-0 m-0 row",tabindex:0,autofocus:!0,children:(e,t)=>{var o=Ga(),i=M(o);fe(i,{onclickcapture:()=>async function(e){var t;if(e){let i=[];try{Ht.labelText="Downloading image...",Ht.isOpen=!0,Wi(e),await qi(e);const t=(await dt.maxArea({usePromise:!0})).height,i=e.offsetHeight,n=e.offsetWidth;if(!_t.isSingleFile&&i>t){let l=0,a=1;const r=Math.ceil(i/t);for(;l<i;){const s=Math.min(t,i-l),c=document.createElement("div");Ht.labelText="Splitting large image...(".concat(a," / ").concat(r,")"),Ht.isOpen=!0,app.styling.useBackpackDesign?(app.styling.backpackBgImage&&(c.style.backgroundImage=app.styling.backpackBgImage),app.styling.backpackBgColor&&(c.style.backgroundColor=_i(app.styling.backpackBgColor)),app.styling.isBackpackBgRepeat?c.style.backgroundRepeat="repeat":app.styling.isBackpackBgFitIn?c.style.backgroundSize="100% 100%":c.style.backgroundSize="cover"):(app.styling.backgroundImage&&(c.style.backgroundImage=app.styling.backgroundImage),app.styling.backgroundColor&&(c.style.backgroundColor=_i(app.styling.backgroundColor)),app.styling.isBackgroundRepeat?c.style.backgroundRepeat="repeat":app.styling.isBackgroundFitIn?c.style.backgroundSize="100% 100%":c.style.backgroundSize="cover"),e.parentElement&&e.parentElement.classList.contains("mdc-dialog__content")&&c.classList.add("backpack-wrapper"),c.style.width="".concat(n,"px"),c.style.height="".concat(s,"px"),c.style.overflow="hidden",c.style.position="absolute",c.style.display="block",c.style.top="0",c.style.left="0",c.style.zIndex="-9999",c.style.pointerEvents="none";const d=e.cloneNode(!0);Wi(d),d.style.position="relative",d.style.top="-".concat(l,"px"),c.appendChild(d),document.body.appendChild(c),await qi(c),await Li(c),await Ui(5);try{const e=await h(c,{filter:e=>{var t,o;return!(null==(t=e.classList)?void 0:t.contains("mdc-top-app-bar"))&&!(null==(o=e.classList)?void 0:o.contains("hidden"))&&e.nodeType!==Node.COMMENT_NODE}});if(!e)throw new Error("blob creation failed");const t=URL.createObjectURL(e),o=document.createElement("a");o.href=t,o.download="Build_".concat(co(),"_part").concat(a++,".png"),o.target="_blank",o.click(),setTimeout(()=>{URL.revokeObjectURL(t)},1e3)}catch(o){Ht.labelText="Download failed: Restricted content detected.",Ht.isOpen=!0,console.error(o)}finally{document.body.removeChild(c)}l+=t}Ht.labelText="Image downloads complete.",Ht.isOpen=!0}else{const t=await h(e,{filter:e=>{var t,o;return!(null==(t=e.classList)?void 0:t.contains("mdc-top-app-bar"))&&!(null==(o=e.classList)?void 0:o.contains("hidden"))&&e.nodeType!==Node.COMMENT_NODE}});if(!t)throw new Error("blob creation failed");const o=URL.createObjectURL(t),i=document.createElement("a");i.href=o,i.download="Build_".concat(co(),".png"),i.target="_blank",i.click(),setTimeout(()=>{URL.revokeObjectURL(o)},1e3),Ht.labelText="Image download complete.",Ht.isOpen=!0}}catch(o){Ht.labelText="Download failed: Restricted content detected.",Ht.isOpen=!0,console.error(o)}finally{for(let e=0;e<i.length;e++){const o=i[e];o.style.removeProperty("height"),""===(null==(t=o.getAttribute("style"))?void 0:t.trim())&&o.removeAttribute("style")}}}else Ht.labelText="Download failed: Cannot find window.",Ht.isOpen=!0}(y(n)),class:"h-100",children:(e,t)=>{var o=za(),i=B(o);ze(i,{class:"mdi mdi-file-image"});var n=ee(i,2);be(n,{children:(e,t)=>{var o=se("Download Image");I(e,o)},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}});var s=ee(r,2);me(s,{id:"backpackDialog",class:"p-0",children:(e,t)=>{var o=_a(),r=M(o);Re(r,21,()=>app.backpack,Ve,(e,t)=>{var o=Ha();Ea(M(o),{get row(){return y(t)},get windowWidth(){return y(i)},get preloadImages(){return app.preloadImages},isBackpack:!0}),$(()=>V(o,1,q(y(t).width?"col-6":"col-12"))),I(e,o)}),T(r,e=>D(l,e),()=>y(l)),T(o,e=>D(n,e),()=>y(n)),$(()=>Pe(o,y(a))),Ee(o,"clientWidth",e=>D(i,e)),I(e,o)},$$slots:{default:!0}});var c=ee(s,2);we(c,{class:"p-0",style:"min-height: 36px",children:(e,t)=>{fe(e,{action:"close",children:(e,t)=>{be(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=se("Close");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}})}S()}var Ja=b("<div><!></div>"),Xa=(e,t)=>{e.preventDefault(),t()},Ka=b('<span class="picture-inner-text"><!></span>'),Qa=b('<span class="picture-inner-text"><!></span>'),er=b('<div class="picture-inner"><!></div>'),tr=b('<div class="preview-container"><canvas tabindex="0"></canvas> <!></div> <!> <!> <!>',1),or=b("<div><!></div> <!> <!>",1),ir=b("<div><!></div>"),nr=b('<div id="picture-input" class="picture-input"><!> <input type="file"/></div>');function lr(e,o){C(o,!0);let n,l,a=F(o,"width",19,()=>Number.MAX_SAFE_INTEGER),r=F(o,"height",19,()=>Number.MAX_SAFE_INTEGER),s=F(o,"margin",3,0),c=F(o,"accept",3,"image/*, image/avif"),d=F(o,"capture",3,null),u=F(o,"size",19,()=>Number.MAX_SAFE_INTEGER),g=F(o,"name",3,null),p=F(o,"id",3,null),h=F(o,"buttonClass",3,""),b=F(o,"removeButtonClass",3,""),w=F(o,"aspectButtonClass",3,""),O=F(o,"prefill",11,""),R=F(o,"prefillOptions",19,()=>({})),j=F(o,"crop",3,!0),P=F(o,"radius",3,0),q=F(o,"removable",3,!1),W=F(o,"hideChangeButton",3,!1),L=F(o,"autoToggleAspectRatio",3,!1),U=F(o,"toggleAspectRatio",3,!1),E=F(o,"changeOnClick",3,!0),z=F(o,"plain",3,!1),G=F(o,"zIndex",3,1e4),H=F(o,"alertOnError",3,!0),_=F(o,"customStrings",19,()=>({})),Y=x(!1),Z=x(0),J=x(0),X=x(!1),K=x(0),te=x(0),oe=x(1),ne=x(0),le=x(""),ae=x(null),re=x(null),de=x(""),ue=x(0),ge=x(0),pe=x(""),me=x(!1),he=x(0),ve=x(0),we=x(0),Te=x(null),Ie=x(i([])),Se={upload:"<p>Your device does not support file uploading.</p>",drag:"Drag an image or <br>click here to select a file",tap:"Tap here to select a photo <br>from your gallery",change:"Change Photo",aspect:"Landscape/Portrait",remove:"Remove Photo",select:"Select a Photo",selected:"<p>Photo successfully selected!</p>",fileSize:"The file size exceeds the limit",fileType:"This file type is not supported."},Ce=x(void 0);const ye=ie(()=>{if(navigator.userAgent.match(/(Android (1\.0|1\.1|1\.5|1\.6|2\.0|2\.1))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.0|2\.5|3\.0))/))return!1;const e=document.createElement("input");return e.type="file",!e.disabled}),xe=ie(()=>!(!window.FileReader||!window.CanvasRenderingContext2D)),Oe=ie(()=>{const e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&!("ontouchstart"in window||navigator.maxTouchPoints)}),Ae=ie(()=>y(X)?"dragging-over":""),Be=ie(()=>"".concat(Math.min(.04*y(J),21),"px"));function ke(){y(Y)&&!E()||$e(),o.onclick&&o.onclick()}function Me(){Le()&&y(ae)&&je(y(ae))}function De(){y(Oe)&&D(X,!1)}function Fe(e,t=!1){var i;const n=e.target,l="drop"===e.type?null==(i=e.dataTransfer)?void 0:i.files:n.files;if(l&&0!==l.length){if(l[0].size<=0||l[0].size>1024*Number(u())*1024)return o.onerror&&o.onerror({type:"fileSize",fileSize:l[0].size,fileType:l[0].type,fileName:l[0].name,message:"".concat(Se.fileSize," (").concat(u(),"MB)")}),void(H()&&alert("".concat(Se.fileSize," (").concat(u(),"MB)")));if(l[0].name!==y(de)||l[0].size!==y(ue)||y(ge)!==l[0].lastModified){if(D(re,l[0],!0),D(de,l[0].name,!0),D(ue,l[0].size,!0),D(ge,l[0].lastModified,!0),D(pe,l[0].type.split(";")[0],!0),"image/*, image/avif"===c()){if(!y(pe).startsWith("image/"))return}else if(-1===y(Ie).indexOf(y(pe)))return o.onerror&&o.onerror({type:"fileType",fileSize:y(ue),fileType:y(pe),fileName:y(de),message:Se.fileType}),void(H()&&alert(Se.fileType));D(Y,!0),D(le,""),y(xe)&&y(re)?Re(y(re),t):t?o.onprefill&&o.onprefill():o.onchange&&o.onchange(y(le))}}}function Re(e,t){!function(e,t){const o=new FileReader;o.onload=e=>{const o=new DataView(e.target.result);if(65496!==o.getUint16(0,!1))return t(-2);const i=o.byteLength;let n=2;for(;n<i;){const e=o.getUint16(n,!1);if(n+=2,65505===e){if(1165519206!==o.getUint32(n+=2,!1))return t(-1);const e=18761===o.getUint16(n+=6,!1);n+=o.getUint32(n+4,e);const i=o.getUint16(n,e);n+=2;for(let l=0;l<i;l++)if(274===o.getUint16(n+12*l,e))return t(o.getUint16(n+12*l+8,e))}else{if(65280&~e)break;n+=o.getUint16(n,!1)}}return t(-1)},o.readAsArrayBuffer(e.slice(0,65536))}(e,i=>{!function(e){D(me,!1),8===e?D(me,-Math.PI/2):6===e?D(me,Math.PI/2):3===e&&D(me,-Math.PI)}(i);const n=new FileReader;n.onload=e=>{D(le,e.target.result,!0),D(ae,new Image,!0),y(ae).onload=()=>{if(L()){Ne(y(K),y(te))!==Ne(y(ae).width,y(ae).height)&&Ee()}je(y(ae))},y(ae).src=y(le),!t&&o.onchange&&o.onchange(y(le))},n.readAsDataURL(e)})}function je(e){D(he,e.width,!0),D(ve,e.height,!0),D(we,e.width/e.height);let t=0,o=0,i=y(J),n=y(Z);const l=y(J)/y(Z);j()?y(we)>=l?(i=n*y(we),t=(y(J)-i)/2):(n=i/y(we),o=(y(Z)-n)/2):y(we)>=l?(n=i/y(we),o=(y(Z)-n)/2):(i=n*y(we),t=(y(J)-i)/2),y(Ce)&&(y(Ce).style.background="none",y(Ce).width=y(J)*y(oe),y(Ce).height=y(Z)*y(oe),y(Te)&&(y(Te).setTransform(1,0,0,1,0,0),y(Te).clearRect(0,0,y(Ce).width,y(Ce).height),y(me)&&void 0===e.style.imageOrientation&&(y(Te).translate(t*y(oe),o*y(oe)),y(Te).translate(i/2*y(oe),n/2*y(oe)),y(Te).rotate(y(me)),t=-i/2,o=-n/2),y(Te).drawImage(e,t*y(oe),o*y(oe),i*y(oe),n*y(oe))))}function $e(){l.click()}function Ve(){l.value="",l.type="",l.type="file",D(de,""),D(pe,""),D(ue,0),D(ge,0),D(Y,!1),D(le,""),D(re,null),D(ae,null),y(Ce)&&(y(Ce).style.backgroundColor="rgba(200,200,200,.25)",y(Ce).width=y(J)*y(oe)),o.onremove&&o.onremove()}function qe(){Ee(),y(ae)&&je(y(ae));const e=Ne(y(K),y(te));o.onaspectratiochange&&o.onaspectratiochange(e)}function Le(){const e=y(K)/y(te),t=n.clientWidth;return!!t&&(!(!U()&&!L()&&t===y(ne))&&(D(ne,t,!0),D(J,Math.min(y(ne)-2*Number(s()),y(K)),!0),D(Z,y(J)/e),!0))}function Ne(e,t){return e>t?"landscape":e<t?"portrait":"square"}function Ee(){!function(){const e=y(K);D(K,y(te),!0),D(te,e,!0)}(),Le()}function ze(e,i){let n=window.File;try{new n([],"")}catch(a){n=class extends Blob{constructor(e,o,i={}){super(e,i),t(this,"lastModifiedDate",new Date),t(this,"lastModified",+this.lastModifiedDate),t(this,"name"),this.name=o}}}if(i=Object.assign({},i),"object"==typeof e)return D(Y,!0),D(le,""),void(y(xe)?Re(e,!0):o.onprefill&&o.onprefill());-1===e.indexOf("data:")&&(e+=-1!==e.indexOf("?")?"&_="+(new Date).getTime():"?_="+(new Date).getTime());const l=new Headers;l.append("Accept","image/*, image/avif"),fetch(e,{method:"GET",mode:"cors",headers:l}).then(e=>e.blob()).then(t=>{const o={target:{files:[]}},l=i.fileName||e.split("/").slice(-1)[0];let a=i.mediaType||t.type||"image/"+(i.fileType||l.split("?")[0].split(".").slice(-1)[0]);a=a.replace("jpg","jpeg").replace("image/svg","image/svg+xml"),"image/svg"===a&&(a="image/svg+xml"),o.target.files[0]=new n([t],l,{type:a}),Fe(o,!0)}).catch(e=>{o.onerror&&o.onerror({type:"failedPrefill",message:"Failed loading prefill image: "+e}),H()&&alert("Failed loading prefill image: "+e)})}v(()=>{O()&&ze(O(),R())}),N(async()=>{await m(),function(){if(_())for(const e in _())e in Se&&"string"==typeof _()[e]&&(Se[e]=_()[e])}(),O()&&ze(O(),R()),window.addEventListener("resize",Me),Me(),y(xe)&&y(Ce)&&(D(oe,Math.round(window.devicePixelRatio||1),!0),y(Ce).getContext&&(D(Te,y(Ce).getContext("2d"),!0),y(Te)&&y(Te).scale(y(oe),y(oe)))),"image/*, image/avif"!==c()&&D(Ie,c().split(",").map(e=>e.trim()),!0),D(K,a()!=Number.MAX_SAFE_INTEGER?Number(a()):n.clientWidth,!0),D(te,r()!=Number.MAX_SAFE_INTEGER?Number(r()):y(K),!0),D(J,y(K),!0),D(Z,y(te),!0)}),f(()=>{window.removeEventListener("resize",Me)});var Ge=nr(),He=M(Ge),_e=e=>{var t=Ja(),o=M(t);k(o,()=>Se.upload),I(e,t)},Ye=e=>{var t=A(),o=B(t),i=e=>{var t=tr(),o=B(t),i=M(o);i.__click=[Xa,ke],T(i,e=>D(Ce,e),()=>y(Ce));var n=ee(i,2),l=e=>{var t=er(),o=M(t),i=e=>{var t=Ka(),o=M(t);k(o,()=>Se.drag),I(e,t)},n=e=>{var t=Qa(),o=M(t);k(o,()=>Se.tap),I(e,t)};Q(o,e=>{y(Oe)?e(i):e(n,!1)}),$(e=>{var o,i,n,l;return Pe(t,"top: -".concat(null!=(o=y(Z))?o:"","px; margin-bottom: -").concat(null!=(i=y(Z))?i:"","px; font-size: ").concat(null!=(n=y(Be))?n:"","; border-radius: ").concat(null!=(l=P())?l:"","%; z-index: ").concat(null!=e?e:"",";"))},[()=>parseInt(G()+"")+2]),I(e,t)};Q(n,e=>{y(Y)||z()||e(l)});var s=ee(o,2),c=e=>{fe(e,{variant:"raised",onclick:$e,get class(){return h()},children:(e,t)=>{be(e,{children:(e,t)=>{var o=se();$(()=>ce(o,Se.change)),I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};Q(s,e=>{y(Y)&&!W()&&e(c)});var d=ee(s,2),u=e=>{fe(e,{variant:"raised",onclick:Ve,get class(){return b()},children:(e,t)=>{be(e,{children:(e,t)=>{var o=se();$(()=>ce(o,Se.remove)),I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};Q(d,e=>{y(Y)&&q()&&e(u)});var g=ee(d,2),p=e=>{fe(e,{variant:"raised",onclick:qe,get class(){return w()},children:(e,t)=>{be(e,{children:(e,t)=>{var o=se();$(()=>ce(o,Se.aspect)),I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};Q(g,e=>{y(Y)&&U()&&a()!==r()&&e(p)}),$(e=>{var t,n,l,a,r;Pe(o,"max-width: ".concat(null!=(t=y(J))?t:"","px; height: ").concat(null!=(n=y(Z))?n:"","px; border-radius: ").concat(null!=(l=P())?l:"","%;")),V(i,1,"picture-preview ".concat(null!=(a=y(Ae))?a:"")),Pe(i,"height: ".concat(null!=(r=y(Z))?r:"","px; z-index: ").concat(null!=e?e:"",";"))},[()=>parseInt(G()+"")+1]),Ue("drag",i,e=>{e.stopPropagation(),e.preventDefault()}),Ue("dragover",i,e=>{e.stopPropagation(),e.preventDefault()}),Ue("dragstart",i,e=>{e.stopPropagation(),e.preventDefault()}),Ue("dragend",i,e=>{e.stopPropagation(),e.preventDefault()}),Ue("dragenter",i,e=>{e.stopPropagation(),e.preventDefault(),y(Oe)&&D(X,!0)}),Ue("dragleave",i,e=>{e.stopPropagation(),e.preventDefault(),De()}),Ue("drop",i,e=>{e.stopPropagation(),e.preventDefault(),function(e){De(),Fe(e)}(e)}),I(e,t)},n=e=>{var t=ir(),o=M(t),i=e=>{fe(e,{variant:"raised",onclick:$e,get class(){return h()},children:(e,t)=>{be(e,{children:(e,t)=>{var o=se();$(()=>ce(o,Se.select)),I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},n=e=>{var t=or(),o=B(t),i=M(o);k(i,()=>Se.selected);var n=ee(o,2),l=e=>{fe(e,{variant:"raised",onclick:$e,get class(){return h()},children:(e,t)=>{be(e,{children:(e,t)=>{var o=se();$(()=>ce(o,Se.change)),I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};Q(n,e=>{W()||e(l)});var a=ee(n,2),r=e=>{fe(e,{variant:"raised",onclick:Ve,get class(){return b()},children:(e,t)=>{be(e,{children:(e,t)=>{var o=se();$(()=>ce(o,Se.remove)),I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};Q(a,e=>{q()&&e(r)}),I(e,t)};Q(o,e=>{y(Y)?e(n,!1):e(i)}),I(e,t)};Q(o,e=>{y(xe)?e(i):e(n,!1)},!0),I(e,t)};Q(He,e=>{y(ye)?e(Ye,!1):e(_e)});var Ze=ee(He,2);Ze.__change=Fe,T(Ze,e=>l=e,()=>l),T(Ge,e=>n=e,()=>n),$(()=>{We(Ze,"name",g()),We(Ze,"id",p()),We(Ze,"accept",c()),We(Ze,"capture",d())}),I(e,Ge),S()}Le(["click","change"]);var ar=b('<div class="mb-4 text-left"><!></div>'),rr=b('<img class="d-block w-100" alt="Converted" loading="lazy"/> <!> <!>',1),sr=b('<div class="col col-lg-4"><!> <!></div> <div class="col col-lg-8"><!></div>',1),cr=b('<div><img alt="Cropper" loading="lazy" class="cropper-image"/></div>'),dr=b('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div></div> <div class="mt-2"><!></div> <!>',1),ur=b('<div class="pt-3 col col-12"><img class="d-block w-100" alt="Compress" loading="lazy"/></div>'),gr=b('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div> <!></div>'),pr=b('<div class="col col-lg-4"><div><!></div> <div><b>Before:</b> <b>After:</b> </div> <!></div> <div class="col-lg-8"><!> <!> <!></div>',1),mr=b('<div class="container"><!> <div class="row"><!></div></div>'),hr=b('<div class="col-sm-6 col-12"><!></div> <div class="col-sm-6 col-12"><!></div>',1),vr=b("<!> <!> <!>",1);function fr(e,t){C(t,!0);let o,i=F(t,"open",7),n=F(t,"imgObject",7),l=F(t,"canHaveURL",3,!0),a=F(t,"isDeselect",3,!1),r=F(t,"closeHandler",3,e=>{}),s=x("Cropper"),c=x(100),d=x(90),u=x(1),g=x(1),p=x(void 0),m=x(void 0),h=x(void 0),f=x(!1),b=[],w=!1,O=ie(()=>{if(y(m)){const e=function(e){const t=e.match(/^data:.+;base64,(.+)$/);return t?t[1]:e}(y(m)).length*(3/4)-2;return Math.round(e/1024)}return 0}),k=ie(()=>{if(y(h)){const e=y(h).split(",")[1].length*(3/4)-2;return Math.round(e/1024)}return 0});function R(){const e=z(n(),t.imgProp);e&&L(e)}function P(){y(h)&&E(n(),t.imgProp,y(h))}function q(){o&&o.setAspectRatio(y(g)/y(u))}function W(){if(o&&y(p)){const e=o.getCroppedCanvas().toDataURL("image/webp");y(p).src=e,E(n(),t.imgProp,e)}}function L(e){b.push(e),w||U()}function U(){const e=b.shift();if(e){w=!0;const t=document.createElement("canvas"),o=t.getContext("2d"),i=new Image;i.crossOrigin="anonymous",i.onload=()=>{const e=y(c)/100,n=i.width*e,l=i.height*e;t.setAttribute("width",n.toString()),t.setAttribute("height",l.toString()),null==o||o.drawImage(i,0,0,n,l),D(h,t.toDataURL("image/webp",y(d)/100),!0),U()},i.src=e}else w=!1}function E(e,t,i){e&&(e[t]=i,D(m,i,!0),o&&o.replace(i),L(i))}function z(e,t){return e&&e[t]?e[t]:""}function G(){if(n().parentId){const e=kt.get(n().parentId);if(void 0!==e)return void(e.row.defaultAspectWidth=y(g))}if(n().id){const e=Bt.get(n().id);if(void 0!==e)return void(e.defaultAspectWidth=y(g));const t=kt.get(n().id);if(void 0!==t)return void(t.row.defaultAspectWidth=y(g))}}function H(){if(n().parentId){const e=kt.get(n().parentId);if(void 0!==e)return void(e.row.defaultAspectHeight=y(u))}if(n().id){const e=Bt.get(n().id);if(void 0!==e)return void(e.defaultAspectHeight=y(u));const t=kt.get(n().id);if(void 0!==t)return void(t.row.defaultAspectHeight=y(u))}}v(()=>(y(p)?o=new Ge(y(p),{viewMode:3,dragMode:"move"}):o&&o.destroy(),()=>{o&&o.destroy()})),N(()=>{!function(){if(n().parentId){const e=kt.get(n().parentId);return void(void 0!==e&&(void 0!==e.row.defaultAspectHeight&&D(u,e.row.defaultAspectHeight,!0),void 0!==e.row.defaultAspectWidth&&D(g,e.row.defaultAspectWidth,!0)))}if(n().id){const e=Bt.get(n().id);if(void 0!==e)return void 0!==e.defaultAspectHeight&&D(u,e.defaultAspectHeight,!0),void(void 0!==e.defaultAspectWidth&&D(g,e.defaultAspectWidth,!0));const t=kt.get(n().id);if(void 0!==t)void 0!==t.row.defaultAspectHeight&&D(u,t.row.defaultAspectHeight,!0),void 0!==t.row.defaultAspectWidth&&D(g,t.row.defaultAspectWidth,!0)}}();const e=z(n(),t.imgProp);if(e){D(m,e,!0);const t=document.createElement("canvas"),o=t.getContext("2d"),i=new Image;i.crossOrigin="anonymous",i.onload=()=>{const e=y(c)/100,n=i.width*e,l=i.height*e;t.setAttribute("width",n.toString()),t.setAttribute("height",l.toString()),null==o||o.drawImage(i,0,0,n,l),D(h,t.toDataURL("image/webp",y(d)/100),!0)},i.src=y(m)}}),ge(e,{surface$style:"width: 1200px; max-width: calc(100vw - 32px);",style:"text-align: center",onSMUIDialogClosed:function(e){r()(e),t.onclose()},get open(){return i()},set open(e){i(e)},children:(e,o)=>{var r=vr(),m=B(r);pe(m,{tabindex:0,autofocus:!0,children:(e,t)=>{var o=se("Image");I(e,o)},$$slots:{default:!0}});var h=ee(m,2);me(h,{children:(e,o)=>{var a=mr(),r=M(a),m=e=>{var t=ar(),o=M(t);he(o,{label:e=>{var t=se("Uploaded Image or External URL.");I(e,t)},children:(e,t)=>{ve(e,{color:"secondary",class:"switch-scale",get checked(){return y(f)},set checked(e){D(f,e,!0)}})},$$slots:{label:!0,default:!0}});I(e,t)};Q(r,e=>{l()&&e(m)});var h=ee(r,2),v=M(h),b=e=>{var o=sr(),i=B(o),l=M(i);gn(l,{get value(){return(null==(e=n())?void 0:e.imageLink)||"";var e},set value(e){var t;t=e,n().imageLink=t},label:"External Image URL",variant:"filled"});var a=ee(l,2);fe(a,{onclick:()=>{E(n(),t.imgProp,n().imageLink)},variant:"raised",children:(e,t)=>{be(e,{children:(e,t)=>{var o=se("Convert URL to Image");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var r=ee(i,2),s=M(r),c=e=>{var o=rr(),i=B(o),l=ee(i,2);fe(l,{onclick:()=>{E(n(),t.imgProp,""),delete n().imageLink},variant:"raised",class:"my-3",children:(e,t)=>{be(e,{children:(e,t)=>{var o=se("Remove Photo");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var a=ee(l,2);gn(a,{get value(){return(null==(e=n())?void 0:e.imageSourceTooltip)||"";var e},set value(e){var t;t=e,n().imageSourceTooltip=t},label:"Tooltip That Shows When Hovering over it",variant:"filled"}),$(e=>We(i,"src",e),[()=>z(n(),t.imgProp)]),I(e,o)};Q(s,e=>{void 0!==z(n(),t.imgProp)&&""!==z(n(),t.imgProp)&&e(c)}),I(e,o)},w=e=>{var o=pr(),l=B(o),a=M(l),r=M(a),m=e=>{{let o=ie(()=>ui(z(n(),t.imgProp))?z(n(),t.imgProp):"");lr(e,{hideChangeButton:!0,removable:!0,crop:!1,get prefill(){return y(o)},onchange:e=>{E(n(),t.imgProp,e)},onremove:()=>E(n(),t.imgProp,"")})}};Q(r,e=>{i()&&e(m)});var h=ee(a,2);let v;var f=ee(M(h)),b=ee(f,2),w=ee(h,2);gn(w,{get value(){return(null==(e=n())?void 0:e.imageSourceTooltip)||"";var e},set value(e){var t;t=e,n().imageSourceTooltip=t},label:"Tooltip That Shows When Hovering over it",variant:"filled"});var S=ee(l,2),C=M(S);{const e=(e,t=j)=>{Me(e,{get tab(){return t()},children:(e,o)=>{be(e,{children:(e,o)=>{var i=se();$(()=>ce(i,t())),I(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ke(C,{tabs:["Cropper","Compress"],get active(){return y(s)},set active(e){D(s,e,!0)},tab:e,$$slots:{tab:!0}})}var x=ee(C,2);{let e=ie(()=>"Cropper"!==y(s)?"display: none;":"");De(x,{role:"tabpanel",variant:"unelevated",get style(){return y(e)},children:(e,o)=>{Fe(e,{children:(e,o)=>{var i=dr(),l=B(i),a=M(l);gn(M(a),{onchange:G,label:"Width Aspect",type:"number",variant:"filled",get value(){return y(g)},set value(e){D(g,e,!0)}});var r=ee(a,2);gn(M(r),{onchange:H,label:"Height Aspect",type:"number",variant:"filled",get value(){return y(u)},set value(e){D(u,e,!0)}});var s=ee(r,2),c=M(s);fe(c,{onclick:q,variant:"raised",style:"height: 100%;",children:(e,t)=>{be(e,{children:(e,t)=>{var o=se("Change Aspect");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var d=ee(l,2),m=M(d);fe(m,{onclick:W,variant:"raised",children:(e,t)=>{be(e,{children:(e,t)=>{var o=se("Crop Image");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var h=ee(d,2),v=e=>{var o=cr(),i=M(o);T(i,e=>D(p,e),()=>y(p)),$(e=>We(i,"src",e),[()=>z(n(),t.imgProp)]),I(e,o)};Q(h,e=>{ui(z(n(),t.imgProp))&&e(v)}),I(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})}var A=ee(x,2);{let e=ie(()=>"Compress"!==y(s)?"display: none;":"");De(A,{role:"tabpanel",variant:"unelevated",get style(){return y(e)},children:(e,o)=>{Fe(e,{children:(e,o)=>{var i=gr(),l=M(i);gn(M(l),{onchange:R,label:"Image Scale",type:"number",variant:"filled",get value(){return y(c)},set value(e){D(c,e,!0)}});var a=ee(l,2);gn(M(a),{onchange:R,label:"Image Quality",type:"number",variant:"filled",get value(){return y(d)},set value(e){D(d,e,!0)}});var r=ee(a,2),s=M(r);fe(s,{onclick:P,variant:"raised",style:"height: 100%;",children:(e,t)=>{be(e,{children:(e,t)=>{var o=se("Compress Image");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var u=ee(r,2),g=e=>{var o=ur(),i=M(o);$(e=>We(i,"src",e),[()=>z(n(),t.imgProp)]),I(e,o)};Q(u,e=>{ui(z(n(),t.imgProp))&&e(g)}),I(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})}$(e=>{var t,o;v=V(h,1,"p-2",null,v,e),ce(f,"".concat(null!=(t=y(O))?t:""," kB|")),ce(b,"".concat(null!=(o=y(k))?o:""," kB"))},[()=>({hidden:!z(n(),t.imgProp)})]),I(e,o)};Q(v,e=>{y(f)?e(b):e(w,!1)}),I(e,a)},$$slots:{default:!0}});var v=ee(h,2);we(v,{children:(e,t)=>{var o=A(),i=B(o),n=e=>{var t=hr(),o=B(t),i=M(o);fe(i,{action:"deselect",children:(e,t)=>{be(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=se("Deselect Choice");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var n=ee(o,2),l=M(n);fe(l,{action:"close",children:(e,t)=>{be(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=se("Close");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),I(e,t)},l=e=>{fe(e,{action:"close",children:(e,t)=>{be(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=se("Close");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};Q(i,e=>{a()?e(n):e(l,!1)}),I(e,o)},$$slots:{default:!0}}),I(e,r)},$$slots:{default:!0}}),S()}var br=b('<div class="row pt-4"><div class="col-12"><!></div></div>'),wr=b('<div class="container-fluid"><div class="row"><div class="col-6"><!></div> <div class="col-6"><!></div></div></div>'),Tr=b("<!> <!> <!>",1);function Ir(e,t){C(t,!0);let o=F(t,"changeNum",7),i=F(t,"minVal",3,0),n=F(t,"maxVal",3,0);ge(e,{get open(){return t.open},set open(e){!e&&t.onclose()},surface$style:"width: 400px; max-width: calc(100vw - 32px);",children:(e,l)=>{var a=Tr(),r=B(a);pe(r,{class:"px-3 pb-0 toolbar toolbar__dialog",children:(e,t)=>{var o=se("Counter");I(e,o)},$$slots:{default:!0}});var s=ee(r,2);me(s,{children:(e,t)=>{var l=br(),a=M(l);gn(M(a),{label:"Number of Count",variant:"filled",type:"number",onchange:()=>{o(Math.min(Math.max(o(),i()),n()))},get input$min(){return i()},get input$max(){return n()},get value(){return o()},set value(e){o(e)}}),I(e,l)},$$slots:{default:!0}});var c=ee(s,2);we(c,{children:(e,l)=>{var a=wr(),r=M(a),s=M(r),c=M(s);fe(c,{children:(e,t)=>{be(e,{children:(e,t)=>{var o=se("Cancel");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var d=ee(s,2),u=M(d);fe(u,{defaultAction:!0,onclickcapture:()=>t.submit(Math.min(Math.max(o(),i()),n())),children:(e,t)=>{be(e,{class:"dialog-actions--btn",children:(e,t)=>{var o=se("OK");I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),I(e,a)},$$slots:{default:!0}}),I(e,a)},$$slots:{default:!0}}),S()}var Sr=b("<!> <!>",1),Cr=b("<!> <!>",1),yr=b("<!> <!>",1),xr=b("<!> <!>",1),Or=b("<!> <!>",1),Ar=b("<!> <!>",1),Br=b("<!> <!>",1),kr=b("<!> <!>",1),Mr=b("<!> <!> <!> <!> <!> <!> <!>",1),Dr=b("<i></i>"),Fr=b('<i class="mdi mdi-stop"></i>'),Rr=b("<i></i>"),jr=b('<!> <!> <!> <div class="px-1 music-player--volume" style="max-width: 104px; width: 100%"><!></div> <div class="ps-1" style="max-width:150px; overflow: hidden;"><span class="scrolling-text"> </span></div> <div class="px-1 col music-player--progress-bar"><!></div> <div class="text-center" style="width: 180px"> </div>',1),Pr=b('<i class="mdi mdi-format-list-checks"></i>'),$r=b('<i class="mdi mdi-format-list-checks"></i>'),Vr=b('<div class="py-0 justify-center"><!></div>'),qr=b('<i class="mdi mdi-checkbox-marked-circle-outline"></i>'),Wr=b("<!> <!> <!>",1),Lr=b("<div><!></div>"),Ur=b('<div class="ab-0"><div class="fadeOverlay"></div> <!> <!> <div class="s-main"><!> <!> <div class="container-fluid p-0"><div class="row gx-0"></div></div></div></div> <!> <!> <!> <!>',1);function Nr(e,t){C(t,!0);const o={action:()=>{},title:"Warning",context:""};let i=x(!1),n=x(!1),l=x("none"),a=ie(()=>y(n)?app.showMusicPlayer?"top: 32px;":"top: 0;":"bottom: 0;"),r=ie(()=>"opacity: ".concat(app.fadeTransitionIsOn?1:0,"; transition: opacity ").concat(app.fadeTransitionTime,"s ease-out; background-color: ").concat(_i(app.fadeTransitionColor),"; pointer-events: ").concat(app.fadeTransitionIsOn?"auto":"none","; cursor: ").concat(app.fadeTransitionIsOn?"none":"auto",";")),s=x(0),c=x(void 0),d=ie(()=>app.pointTypes.length>0||app.backpack.length>0||app.importedChoicesIsOpen),g=ie(()=>"background-color: ".concat(_i(app.styling.barBackgroundColor),"; margin:").concat(app.styling.barMargin,"px; padding:").concat(app.styling.barPadding,"px; ").concat(y(a))),p=ie(()=>"color: ".concat(_i(app.styling.barTextColor),"; margin: ").concat(app.styling.barTextMargin,"px; padding: ").concat(app.styling.barTextPadding,"px; font-family: '").concat(app.styling.barTextFont,"'; font-size: ").concat(app.styling.barTextSize,"px;")),m=ie(()=>"color: ".concat(_i(app.styling.barIconColor),";")),h=ie(()=>{let e=[];return app.styling.backgroundImage&&e.push("background-image: url('".concat(app.styling.backgroundImage,"');")),e.push("background-color: ".concat(_i(app.styling.backgroundColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;"),y(d)&&e.push("padding-bottom: 56px;"),app.useVW&&e.push("font-size: 0.835vw;"),e.join(" ")}),b=ie(()=>{let e=[];return app.showMusicPlayer&&e.push("padding-top: 32px;"),e.join(" ")}),F=ie(()=>"".concat(L(Et.curBgmTime)," | ").concat(L(Et.curBgmLength))),R=x(0),j=x(100),P=x(!1);function W(e){const t=e.currentTarget;e.preventDefault(),t.blur(),D(l,"appBuildForm")}function L(e){const t=Math.floor(e/3600),o=Math.floor(e%3600/60),i=Math.floor(e%60),n=String(o).padStart(2,"0"),l=String(i).padStart(2,"0");return t>0?"".concat(t,":").concat(n,":").concat(l):"".concat(n,":").concat(l)}function U(){const e=localStorage.getItem("theme");Wt.value="dark"===e?"light":"dark";let t=document.head.querySelector("#theme-dark"),o=document.head.querySelector("#theme-light");"dark"===Wt.value?(t&&(t.media="screen and (prefers-color-scheme: light)"),o&&(o.media="screen and (prefers-color-scheme: dark)")):(t&&(t.media="screen and (prefers-color-scheme: dark)"),o&&(o.media="screen and (prefers-color-scheme: light)")),localStorage.setItem("theme",Wt.value)}function N(){const e=u(Ut);if(e)if(Et.bgmIsPlaying)e.pause(),Et.bgmIsPlaying=!1,0!==Et.bgmPlayInterval&&(clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0);else{let t=0,o=0;0!==Et.bgmPlayInterval&&(clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0),e.play(),Et.bgmIsPlaying=!0,Et.bgmPlayInterval=window.setInterval(()=>{if(!Et.isSeeking&&e.isPlaying()){const i=Math.floor(e.getCurrentTime());i!==Et.curBgmTime?t!==i?Et.curBgmTime=i:(o++,o>Et.curBgmLength&&(o=1),Et.curBgmTime=o):(t=i,o=i+1,Et.curBgmTime=o)}},1e3)}}function E(){const e=u(Ut);e&&Et.bgmIsPlaying&&(e.stop(),Et.bgmIsPlaying=!1,Et.curBgmTime=0,0!==Et.bgmPlayInterval&&(clearInterval(Et.bgmPlayInterval),Et.bgmPlayInterval=0))}function z(){const e=u(Ut);app.isMute=!app.isMute,e&&(app.isMute?e.mute():e.unMute())}function G(){u(Ut)&&Et.bgmIsPlaying&&(Et.isSeeking=!0)}function H(){var e,t;if(Et.bgmIsPlaying){const t=u(Ut);t&&(null==(e=t.seekTo)?void 0:e.call(t,y(R)))&&(Et.curBgmTime=y(R)),Et.isSeeking=!1}null==(t=document.activeElement)||t.blur()}function _(){D(P,!0)}function Y(){var e;const t=u(Ut);app.curVolume=y(j),t&&t.setVolume(y(j)),D(P,!1),null==(e=document.activeElement)||e.blur()}v(()=>{Et.isSeeking||D(R,Et.curBgmTime,!0)}),v(()=>{y(P)||D(j,app.curVolume,!0)});var Z=Ur(),J=B(Z),X=M(J),K=ee(X,2);He(K,{style:"top: 0;",variant:"modal",get open(){return y(i)},set open(e){D(i,e,!0)},children:(e,t)=>{Ye(e,{class:"navigation-drawer",children:(e,t)=>{ye(e,{children:(e,t)=>{var a=Mr(),r=B(a);Be(r,{onSMUIAction:()=>D(i,!1),class:"my-0",children:(e,t)=>{var o=Sr(),i=B(o);Ze(i,{class:"mdi mdi-chevron-left"});var n=ee(i,2);Je(n,{class:"w-100 list-text text-center",children:(e,t)=>{var o=se("Close Menu");I(e,o)},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}});var s=ee(r,2);Xe(s,{class:"my-3"});var c=ee(s,2);Be(c,{onSMUIAction:U,class:"my-0",children:(e,t)=>{var o=Cr(),i=B(o);Ze(i,{class:"mdi mdi-theme-light-dark"});var n=ee(i,2);Je(n,{class:"w-100 list-text text-center",children:(e,t)=>{var o=se("Toogle Dark/Light Theme");I(e,o)},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}});var d=ee(c,2);Be(d,{onSMUIAction:()=>D(n,!y(n)),class:"my-0",children:(e,t)=>{var o=yr(),i=B(o);Ze(i,{class:"mdi mdi-swap-vertical"});var n=ee(i,2);Je(n,{class:"w-100 list-text text-center",children:(e,t)=>{var o=se("Top/Bottom Point Bar");I(e,o)},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}});var u=ee(d,2);Be(u,{onSMUIAction:()=>{o.action=()=>_o(),o.context="Are you sure you want to clear selected choices?<br>This action cannot be undone.",D(l,"dlgCommon"),D(i,!1)},class:"my-0",children:(e,t)=>{var o=xr(),i=B(o);Ze(i,{class:"mdi mdi-select-off"});var n=ee(i,2);Je(n,{class:"w-100 list-text text-center",children:(e,t)=>{var o=se("Clear Selected Choices");I(e,o)},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}});var g=ee(u,2),p=e=>{var t=Br(),o=B(t);Be(o,{onSMUIAction:()=>{D(l,"appBuildForm"),D(i,!1)},class:"my-0",children:(e,t)=>{var o=Or(),i=B(o);Ze(i,{class:"mdi mdi-format-list-checks"});var n=ee(i,2);Je(n,{class:"w-100 list-text text-center",children:(e,t)=>{var o=se("Open Build Form");I(e,o)},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}});var n=ee(o,2);Be(n,{onSMUIAction:()=>{D(l,"appSaveLoad"),D(i,!1)},class:"my-0",children:(e,t)=>{var o=Ar(),i=B(o);Ze(i,{class:"mdi mdi-content-save"});var n=ee(i,2);Je(n,{class:"w-100 list-text text-center",children:(e,t)=>{var o=se("Save/Load Build");I(e,o)},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}}),I(e,t)};Q(g,e=>{app.importedChoicesIsOpen&&e(p)});var m=ee(g,2);Be(m,{onSMUIAction:()=>{D(l,"appGlobalSettings"),D(i,!1)},class:"my-0",children:(e,t)=>{var o=kr(),i=B(o);Ze(i,{class:"mdi mdi-cog"});var n=ee(i,2);Je(n,{class:"w-100 list-text text-center",children:(e,t)=>{var o=se("Settings");I(e,o)},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}}),I(e,a)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var te=ee(K,2);_e(te,{});var oe=ee(te,2),ne=M(oe),le=e=>{Ke(e,{class:"music-player",variant:"fixed",children:(e,t)=>{Qe(e,{class:"music-player--row",children:(e,t)=>{et(e,{class:"px-2 justify-left",children:(e,t)=>{var o=jr(),i=B(o);$e(i,{class:"music-player--button",onclickcapture:N,size:"button","aria-label":"Play",children:(e,t)=>{var o=Dr();$(()=>V(o,1,q(Et.bgmIsPlaying?"mdi mdi-pause":"mdi mdi-play"))),I(e,o)},$$slots:{default:!0}});var n=ee(i,2);$e(n,{class:"music-player--button",onclickcapture:E,size:"button","aria-label":"Stop",children:(e,t)=>{var o=Fr();I(e,o)},$$slots:{default:!0}});var l=ee(n,2);$e(l,{class:"music-player--button",onclickcapture:z,size:"button","aria-label":"Mute",children:(e,t)=>{var o=Rr();$(()=>V(o,1,q(app.isMute?"mdi mdi-volume-off":"mdi mdi-volume-high"))),I(e,o)},$$slots:{default:!0}});var a=ee(l,2),r=M(a);Ne(r,{min:0,max:100,step:1,class:"mx-2",onpointerdown:_,onpointerup:Y,get disabled(){return app.isMute},get value(){return y(j)},set value(e){D(j,e,!0)}});var s=ee(a,2),c=M(s),d=M(c),u=ee(s,2),g=M(u);{let e=ie(()=>Et.curBgmLength||1);Ne(g,{min:0,get max(){return y(e)},step:1,class:"mx-2",onpointerdown:G,onpointerup:H,get value(){return y(R)},set value(e){D(R,e,!0)}})}var p=ee(u,2),m=M(p);$(()=>{ce(d,Et.bgmTitle),ce(m,y(F))}),I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})};Q(ne,e=>{app.showMusicPlayer&&e(le)});var ae=ee(ne,2),re=e=>{Ke(e,{class:"pointBar",get style(){return y(g)},variant:"fixed",color:"secondary",children:(e,t)=>{Qe(e,{class:"justify-space-around",children:(e,t)=>{var o=Wr(),n=B(o);et(n,{class:"py-0 justify-center",children:(e,t)=>{var o=A(),n=B(o),l=e=>{Qi(e,{text:"L-Click: Open Side Menu<br>R-Click: Open Build Form",children:(e,t)=>{$e(e,{class:"pointbar-icons",onclickcapture:()=>D(i,!0),oncontextmenu:W,"aria-label":"Open Import Window",get style(){return y(m)},children:(e,t)=>{var o=Pr();I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=e=>{$e(e,{class:"pointbar-icons",onclickcapture:()=>D(i,!0),"aria-label":"Open Import Window",get style(){return y(m)},children:(e,t)=>{var o=$r();I(e,o)},$$slots:{default:!0}})};Q(n,e=>{app.importedChoicesIsOpen?e(l):e(a,!1)}),I(e,o)},$$slots:{default:!0}});var a=ee(n,2);et(a,{class:"pointbar-center--viewer",children:(e,t)=>{var o=A(),i=B(o);Re(i,17,()=>app.pointTypes,Ve,(e,t)=>{var o=A(),i=B(o),n=e=>{var o=Vr();!function(e,t){C(t,!0);let o=ie(()=>"color: ".concat(_i(app.styling.barTextColor),"; margin: ").concat(app.styling.barTextMargin,"px; padding: ").concat(app.styling.barTextPadding,"px; font-family: '").concat(app.styling.barTextFont,"'; font-size: ").concat(app.styling.barTextSize,"px;")),i=ie(()=>{if(t.point.startingSum>=0){if(void 0!==app.styling.barPointPos)return"color: ".concat(_i(app.styling.barPointPos),";")}else if(void 0!==app.styling.barPointNeg)return"color: ".concat(_i(app.styling.barPointNeg),";");return""});function n(e,t){const o=t?e.negativeImage:e.image,i=t?e.negativeIconWidth:e.iconWidth,n=t?e.negativeIconHeight:e.iconHeight;return o?'<img src="'.concat(o,'" class="mx-1" style="width: ').concat(i,"px; height: ").concat(n,'px;" alt="">'):""}var l=Fn(),a=M(l),r=M(a),s=e=>{var o=A(),i=B(o),l=e=>{var o=A(),i=B(o),l=e=>{var o=A(),i=B(o);k(i,()=>n(t.point,!0)),I(e,o)};Q(i,e=>{t.point.negativeImageOnSide||t.point.negativeImageSidePlacement||e(l)}),I(e,o)},a=e=>{var o=A(),i=B(o),l=e=>{var o=A(),i=B(o);k(i,()=>n(t.point,!1)),I(e,o)};Q(i,e=>{t.point.imageOnSide||t.point.imageSidePlacement||e(l)}),I(e,o)};Q(i,e=>{t.point.negativeIconIsOn&&t.point.startingSum<0?e(l):e(a,!1)}),I(e,o)};Q(r,e=>{t.point.iconIsOn&&e(s)});var c=ee(r),d=ee(c),u=e=>{var o=A(),i=B(o),l=e=>{var o=A(),i=B(o),l=e=>{var o=A(),i=B(o);k(i,()=>n(t.point,!0)),I(e,o)};Q(i,e=>{t.point.negativeImageOnSide&&!t.point.negativeImageSidePlacement&&e(l)}),I(e,o)},a=e=>{var o=A(),i=B(o),l=e=>{var o=A(),i=B(o);k(i,()=>n(t.point,!1)),I(e,o)};Q(i,e=>{t.point.imageOnSide&&!t.point.imageSidePlacement&&e(l)}),I(e,o)};Q(i,e=>{t.point.negativeIconIsOn&&t.point.startingSum<0?e(l):e(a,!1)}),I(e,o)};Q(d,e=>{t.point.iconIsOn&&e(u)});var g=ee(d,2),p=M(g),m=ee(g,2),h=e=>{var o=A(),i=B(o),l=e=>{var o=A(),i=B(o),l=e=>{var o=A(),i=B(o);k(i,()=>n(t.point,!0)),I(e,o)};Q(i,e=>{!t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(l)}),I(e,o)},a=e=>{var o=A(),i=B(o),l=e=>{var o=A(),i=B(o);k(i,()=>n(t.point,!1)),I(e,o)};Q(i,e=>{!t.point.imageOnSide&&t.point.imageSidePlacement&&e(l)}),I(e,o)};Q(i,e=>{t.point.negativeIconIsOn&&t.point.startingSum<0?e(l):e(a,!1)}),I(e,o)};Q(m,e=>{t.point.iconIsOn&&e(h)});var v=ee(m),f=ee(v),b=e=>{var o=A(),i=B(o),l=e=>{var o=A(),i=B(o),l=e=>{var o=A(),i=B(o);k(i,()=>n(t.point,!0)),I(e,o)};Q(i,e=>{t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(l)}),I(e,o)},a=e=>{var o=A(),i=B(o),l=e=>{var o=A(),i=B(o);k(i,()=>n(t.point,!1)),I(e,o)};Q(i,e=>{t.point.imageOnSide&&t.point.imageSidePlacement&&e(l)}),I(e,o)};Q(i,e=>{t.point.negativeIconIsOn&&t.point.startingSum<0?e(l):e(a,!1)}),I(e,o)};Q(f,e=>{t.point.iconIsOn&&e(b)}),$((e,n)=>{var r,s;Pe(l,y(o)),Pe(a,e),ce(c," ".concat(null!=(r=t.point.beforeText)?r:""," ")),Pe(g,y(i)),ce(p,n),ce(v," ".concat(null!=(s=t.point.afterText)?s:""," "))},[()=>t.point.pointPrivateColorIsOn?"color: ".concat(t.point.startingSum>=0?_i(t.point.privateColor):_i(t.point.privateNegativeColor)):"",()=>t.point.startingSum%1==0?t.point.startingSum:parseFloat(t.point.startingSum.toFixed(void 0!==t.point.decimalPlaces?t.point.decimalPlaces:2))]),I(e,l),S()}(M(o),{get point(){return y(t)}}),$(()=>Pe(o,y(p))),I(e,o)};Q(i,e=>{(function(e){if(e.isNotShownPointBar){if(void 0!==e.activatedId&&""!==e.activatedId){let t=Dt.get(e.activatedId),o=Rt.get(e.activatedId);return void 0!==t?Fo(t.requireds):void 0!==o?o.isTrue:Bo(e.activatedId)}return!1}return!0})(y(t))&&e(n)}),I(e,o)}),I(e,o)},$$slots:{default:!0}});var r=ee(a,2);et(r,{class:"py-0 justify-center",children:(e,t)=>{var o=A(),i=B(o),n=e=>{$e(e,{class:"pointbar-icons",onclickcapture:()=>D(l,"dlgBackpack"),"aria-label":"Open Backpack Window",get style(){return y(m)},children:(e,t)=>{var o=qr();I(e,o)},$$slots:{default:!0}})};Q(i,e=>{app.backpack.length>0&&(void 0===app.hideBackpackBtn||0===app.hideBackpackBtn||app.hideBackpackBtn>0&&app.hideBackpackBtn===app.btnBackpackIsOn)&&e(n)}),I(e,o)},$$slots:{default:!0}}),I(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})};Q(ae,e=>{y(d)&&e(re)});var de=ee(ae,2),ue=M(de);Re(ue,21,()=>app.rows,Ve,(e,t)=>{var o=Lr();Ea(M(o),{get row(){return y(t)},get windowWidth(){return y(s)},get mainDiv(){return y(c)}}),$(()=>V(o,1,q(y(t).width?"col-6":"col-12"))),I(e,o)}),T(ue,e=>D(c,e),()=>y(c));var ge=ee(J,2),pe=e=>{{let t=ie(()=>"appSaveLoad"===y(l));ol(e,{get open(){return y(t)},onclose:()=>D(l,"none")})}},me=e=>{var t=A(),i=B(t),n=e=>{{let t=ie(()=>"dlgBackpack"===y(l));Za(e,{get open(){return y(t)},onclose:()=>D(l,"none")})}},a=e=>{var t=A(),i=B(t),n=e=>{{let t=ie(()=>"appGlobalSettings"===y(l));Dn(e,{get open(){return y(t)},onclose:()=>D(l,"none")})}},a=e=>{var t=A(),i=B(t),n=e=>{{let t=ie(()=>"appBuildForm"===y(l));hn(e,{get open(){return y(t)},onclose:()=>D(l,"none")})}},a=e=>{var t=A(),i=B(t),n=e=>{{let t=ie(()=>"dlgCommon"===y(l));qn(e,{get open(){return y(t)},onclose:()=>D(l,"none"),get title(){return o.title},get context(){return o.context},closeHandler:e=>{"accept"===e.detail.action&&o.action()}})}};Q(i,e=>{"dlgCommon"===y(l)&&e(n)},!0),I(e,t)};Q(i,e=>{"appBuildForm"===y(l)?e(n):e(a,!1)},!0),I(e,t)};Q(i,e=>{"appGlobalSettings"===y(l)?e(n):e(a,!1)},!0),I(e,t)};Q(i,e=>{"dlgBackpack"===y(l)?e(n):e(a,!1)},!0),I(e,t)};Q(ge,e=>{"appSaveLoad"===y(l)?e(pe):e(me,!1)});var he=ee(ge,2),ve=e=>{{let t=ie(()=>"appImageUpload"===zt.currentDialog);fr(e,{get open(){return y(t)},onclose:()=>zt.currentDialog="none",get imgObject(){return zt.data},get imgProp(){return zt.imgProp},get isDeselect(){return zt.isDeselect},get closeHandler(){return zt.cFunc}})}},fe=e=>{var t=A(),o=B(t),i=e=>{{let t=ie(()=>"dlgCommon"===zt.currentDialog);qn(e,{get open(){return y(t)},onclose:()=>zt.currentDialog="none",get closeHandler(){return zt.cFunc},get title(){return zt.title},get context(){return zt.context},get isWord(){return zt.isWord}})}},n=e=>{var t=A(),o=B(t),i=e=>{{let t=ie(()=>"selectDialog"===zt.currentDialog);Ir(e,{get open(){return y(t)},onclose:()=>zt.currentDialog="none",get submit(){return zt.func},get changeNum(){return zt.choice.multipleUseVariable},get minVal(){return zt.choice.numMultipleTimesMinus},get maxVal(){return zt.choice.numMultipleTimesPluss}})}};Q(o,e=>{"selectDialog"===zt.currentDialog&&void 0!==zt.choice&&void 0!==zt.func&&e(i)},!0),I(e,t)};Q(o,e=>{"dlgCommon"===zt.currentDialog&&void 0!==zt.cFunc&&void 0!==zt.context?e(i):e(n,!1)},!0),I(e,t)};Q(he,e=>{"appImageUpload"===zt.currentDialog&&void 0!==zt.data&&void 0!==zt.imgProp?e(ve):e(fe,!1)});var be=ee(he,2),we=e=>{{let t=ie(()=>"dlgCommon"===Gt.currentDialog);qn(e,{get open(){return y(t)},onclose:()=>Gt.currentDialog="none",get closeHandler(){return Gt.cFunc},get title(){return Gt.title},get context(){return Gt.context},get isWord(){return Gt.isWord},get prevText(){return Gt.prevText},get isDeselect(){return Gt.isDeselect}})}};Q(be,e=>{"dlgCommon"===Gt.currentDialog&&void 0!==Gt.cFunc&&void 0!==Gt.context&&e(we)}),function(e,t){C(t,!0);let o=x(void 0),i=null;v(()=>{y(o)&&""!==Yi.text&&(Yi.isVisible&&Yi.anchor&&Yi.anchor.isConnected?(null==i||i.destroy(),i=O(Yi.anchor,y(o),{placement:"top",modifiers:[{name:"offset",options:{offset:[0,6]}},{name:"preventOverflow",options:{boundary:"viewport"}},{name:"flip",options:{fallbackPlacements:["top","bottom"]}}]}),y(o).classList.add("mdc-tooltip--shown")):i&&(i.destroy(),i=null,y(o).classList.remove("mdc-tooltip--shown")))}),f(()=>{null==i||i.destroy()});var n=Xi(),l=M(n),a=M(l);w(a,()=>Yi.text,e=>{var t=A(),o=B(t);k(o,()=>Yi.text),I(e,t)}),T(n,e=>D(o,e),()=>y(o)),I(e,n),S()}(ee(be,2),{}),$(()=>{Pe(J,y(h)),Pe(X,y(r)),Pe(oe,y(b))}),Ee(J,"clientWidth",e=>D(s,e)),I(e,Z),S()}var Er=b('<div id="bgm-player" style="display:none"></div> <!> <!>',1);void 0===window.ResizeObserver&&(window.ResizeObserver=ot);const zr=e=>{e.preventDefault(),e.returnValue=""};window.addEventListener?window.addEventListener("beforeunload",zr):window.onbeforeunload=zr,it(function(e,t){let o,i,n;C(t,!0);let l,a="<div>Loading</div>";function r(){let e=localStorage.getItem("theme"),t=document.head.querySelector("#theme-dark"),o=document.head.querySelector("#theme-light"),i=function(){if(!window.matchMedia)return!1;try{return"not all"!==window.matchMedia("(prefers-color-scheme: dark)").media}catch(e){return!1}}();"dark"===e?i?(t&&(t.media="screen and (prefers-color-scheme: light)"),o&&(o.media="screen and (prefers-color-scheme: dark)"),Wt.value="dark"):(t&&(t.media="all"),o&&(o.media="not all")):i||(o&&(o.media="all"),t&&(t.media="not all"))}async function s(e){const t=Array.from(e);for(let n=0;n<t.length;n++){const e=t[n];try{await new Promise((t,o)=>{const i=new Image;i.onload=t,i.onerror=o,i.src=e})}catch(o){console.error(o)}finally{i&&(i.innerHTML="<div>Images</div><div>".concat(n," / ").concat(t.length,"</div>"))}}}async function c(){if(Kt.value){const t="Your browser does not support the .avif format.\n Avif images may not be displayed.";try{await new Promise((e,t)=>{const o=new Image;o.onload=e,o.onerror=t,o.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="})}catch(e){console.error(e),Ht.labelText=t,Ht.isOpen=!0}}}v(()=>{Ht.isOpen&&(l.close(),l.open(),Ht.isOpen=!1)}),N(()=>{window.debugApp=app,r(),async function(){const e=(await io()).transaction("buildStore","readonly").objectStore("buildStore"),t=location.pathname.replace(/\/index\.html$/,"/");await new Promise((o,i)=>{const n=e.openCursor();n.onsuccess=e=>{const i=e.target.result;if(!i)return void o();const n=i.key,l=i.value;if("string"==typeof n&&n.startsWith(t)){const e=n.slice(t.length);if("autoSave"===e)Yt.stored=!0,Yt.time=l.time;else{const t=e.match(/^slot-(\d+)$/),o=Number(null==t?void 0:t[1]);Zt[o].stored=!0,Zt[o].name=void 0!==l.name?l.name:"Slot ".concat(o+1),Zt[o].time=l.time}}i.continue()},n.onerror=i})}(),async function(){o=document.getElementById("lm"),n=document.getElementById("projectSize"),i=document.getElementById("indicator");const e=n?parseInt(n.innerHTML):0,t=i?i.className:"";if(i&&(a=i.innerHTML),o&&(o.style.pointerEvents="none",o.style.overflow="hidden"),"function"==typeof window.fetch)try{const l=await fetch("project.json");if(l&&l.body){const r=l.body.getReader(),d=new TextDecoder;let u=0,g="";for(;;){const{done:o,value:n}=await r.read();if(o)break;u+=n.length,g+=d.decode(n,{stream:!0}),i&&(i.innerHTML="ind2"===t&&e>0?"".concat(a,"<div>").concat((u/e*100).toFixed(1)," %</div>"):"ind3"===t&&e>0?"".concat(a,"<div>").concat((u/1e6).toFixed(1),"/").concat((e/1e6).toFixed(1)," MB</div>"):"".concat(a,"<div>").concat((u/1e6).toFixed(1)," MB</div>"))}o&&(o.style.height="0");const p=ji(JSON.parse(g)),m=Fi.safeParse(p);m.success?(Vi(m.data),app.preloadExternalImages&&Xt.size>0&&await s(Xt),setTimeout(()=>{const e=document.createElement("style");document.head.appendChild(e),setTimeout(()=>{o&&(o.style.height="",o.style.opacity="1",o.style.overflow="",o.style.pointerEvents=""),i&&i.remove(),n&&n.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),await c()):(Ht.labelText="Failed to load data.",Ht.isOpen=!0,console.error(m.error))}}catch(l){console.error(l),o&&(o.style.height="0"),Vi(JSON.parse(JSON.stringify(app))),app.preloadExternalImages&&Xt.size>0&&await s(Xt),setTimeout(()=>{const e=document.createElement("style");document.head.appendChild(e),setTimeout(()=>{o&&(o.style.height="",o.style.opacity="1",o.style.overflow="",o.style.pointerEvents=""),i&&i.remove(),n&&n.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),await c()}else{const l=new XMLHttpRequest;l.open("GET","project.json",!0),l.onprogress=o=>{i&&(i.innerHTML="ind2"===t&&e>0?"".concat(a,"<div>").concat((o.loaded/e*100).toFixed(1)," %</div>"):"ind3"===t&&e>0?"".concat(a,"<div>").concat((o.loaded/1e6).toFixed(1),"/").concat((e/1e6).toFixed(1)," MB</div>"):"".concat(a,"<div>").concat((o.loaded/1e6).toFixed(1)," MB</div>"))},l.onload=async()=>{o&&(o.style.height="0"),200===l.status?(Vi(JSON.parse(l.responseText)),app.preloadExternalImages&&app.externalImages.size>0&&await s(app.externalImages)):Vi(JSON.parse(JSON.stringify(app))),setTimeout(()=>{const e=document.createElement("style");document.head.appendChild(e),setTimeout(()=>{o&&(o.style.height="",o.style.opacity="1",o.style.overflow="",o.style.pointerEvents=""),i&&i.remove(),n&&n.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),await c()},l.send()}}(),f(()=>{Nt.update(e=>(null==e||e.destroy(),null))})});var d=Er(),u=ee(B(d),2);Nr(u,{});var g=ee(u,2);T(tt(g,{get labelText(){return Ht.labelText},get timeoutMs(){return Ht.timeoutMs},children:(e,t)=>{be(e,{class:"text-center"})},$$slots:{default:!0}}),e=>l=e,()=>l),I(e,d),S()},{target:document.getElementById("app")});export{o as __vite_legacy_guard};
