!function(){var e=["onError","onSuccess"];function t(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],i=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}throw new TypeError(u(e)+" is not iterable")}function i(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,b(o.key),o)}}function o(e,t,i){return t=c(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r()?Reflect.construct(t,i||[],c(e).constructor):t.apply(e,i))}function n(e){var t="function"==typeof Map?new Map:void 0;return n=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return function(e,t,i){if(r())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var n=new(e.bind.apply(e,o));return i&&a(n,i.prototype),n}(e,arguments,c(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a(i,e)},n(e)}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(r=function(){return!!e})()}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",n=i.toStringTag||"@@toStringTag";function r(i,o,n,r){var l=o&&o.prototype instanceof c?o:c,u=Object.create(l.prototype);return s(u,"_invoke",function(i,o,n){var r,c,l,s=0,u=n||[],d=!1,f={p:0,n:0,v:e,a:v,f:v.bind(e,4),d:function(t,i){return r=t,c=0,l=e,f.n=i,a}};function v(i,o){for(c=i,l=o,t=0;!d&&s&&!n&&t<u.length;t++){var n,r=u[t],v=f.p,g=r[2];i>3?(n=g===o)&&(l=r[(c=r[4])?5:(c=3,3)],r[4]=r[5]=e):r[0]<=v&&((n=i<2&&v<r[1])?(c=0,f.v=o,f.n=r[1]):v<g&&(n=i<3||r[0]>o||o>g)&&(r[4]=i,r[5]=o,f.n=g,c=0))}if(n||i>1)return a;throw d=!0,o}return function(n,u,g){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&v(u,g),c=u,l=g;(t=c<2?e:l)||!d;){r||(c?c<3?(c>1&&(f.n=-1),v(c,l)):f.n=l:f.v=l);try{if(s=2,r){if(c||(n="next"),t=r[n]){if(!(t=t.call(r,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=r.return)&&t.call(r),c<2&&(l=TypeError("The iterator does not provide a '"+n+"' method"),c=1);r=e}else if((t=(d=f.n<0)?l:i.call(o,f))!==a)break}catch(t){r=e,c=1,l=t}finally{s=1}}return{value:t,done:d}}}(i,n,r),!0),u}var a={};function c(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][o]?t(t([][o]())):(s(t={},o,function(){return this}),t),v=d.prototype=c.prototype=Object.create(f);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,n,"GeneratorFunction")),e.prototype=Object.create(v),e}return u.prototype=d,s(v,"constructor",d),s(d,"constructor",u),u.displayName="GeneratorFunction",s(d,n,"GeneratorFunction"),s(v),s(v,n,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),(l=function(){return{w:r,m:g}})()}function s(e,t,i,o){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}s=function(e,t,i,o){function r(t,i){s(e,t,function(e){return this._invoke(t,i,e)})}t?n?n(e,t,{value:i,enumerable:!o,configurable:!o,writable:!o}):e[t]=i:(r("next",0),r("throw",1),r("return",2))},s(e,t,i,o)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t,i,o,n,r,a){try{var c=e[r](a),l=c.value}catch(e){return void i(e)}c.done?t(l):Promise.resolve(l).then(o,n)}function f(e){return function(){var t=this,i=arguments;return new Promise(function(o,n){var r=e.apply(t,i);function a(e){d(r,o,n,a,c,"next",e)}function c(e){d(r,o,n,a,c,"throw",e)}a(void 0)})}}function v(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o,n,r,a,c=[],l=!0,s=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(o=r.call(i)).done)&&(c.push(o.value),c.length!==t);l=!0);}catch(e){s=!0,n=e}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(s)throw n}}return c}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach(function(t){h(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function h(e,t,i){return(t=b(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function b(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}function w(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=T(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(c)throw r}}}}function T(e,t){if(e){if("string"==typeof e)return I(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=Array(t);i<t;i++)o[i]=e[i];return o}System.register(["./chunk-vendors-legacy.CSCQ2wgA.js"],function(r,c){"use strict";var s,d,p,b,T,I,S,y,x,C,O,A,k,B,M,D,F,R,j,q,P,$,V,N,W,E,U,L,z,G,_,H,Y,J,Z,X,K,Q,ee,te,ie,oe,ne,re,ae,ce,le,se,ue,de,fe,ve,ge,pe,me,he,be,we,Te,Ie,Se,ye,xe,Ce,Oe,Ae,ke,Be,Me,De,Fe,Re,je,qe,Pe,$e,Ve,Ne,We,Ee,Ue,Le,ze,Ge,_e,He,Ye,Je,Ze,Xe,Ke,Qe,et,tt,it,ot,nt,rt,at,ct,lt,st,ut,dt,ft,vt,gt,pt,mt,ht,bt,wt;return{setters:[function(e){s=e.p,d=e.S,p=e.a,b=e.o,T=e.c,I=e.b,S=e.d,y=e.w,x=e.g,C=e.N,O=e.t,A=e.r,k=e.e,B=e.f,M=e.u,D=e.h,F=e.i,R=e.j,j=e.k,q=e.l,P=e.m,$=e.n,V=e.q,N=e.s,W=e.v,E=e.x,U=e.y,L=e.z,z=e.A,G=e.B,_=e.C,H=e.D,Y=e.E,J=e.F,Z=e.G,X=e.H,K=e.I,Q=e.J,ee=e.K,te=e.L,ie=e.M,oe=e.O,ne=e.P,re=e.Q,ae=e.R,ce=e.T,le=e.U,se=e.V,ue=e.W,de=e.X,fe=e.Y,ve=e.Z,ge=e._,pe=e.$,me=e.a0,he=e.a1,be=e.a2,we=e.a3,Te=e.a4,Ie=e.a5,Se=e.a6,ye=e.a7,xe=e.a8,Ce=e.a9,Oe=e.aa,Ae=e.ab,ke=e.ac,Be=e.ad,Me=e.ae,De=e.af,Fe=e.ag,Re=e.ah,je=e.ai,qe=e.aj,Pe=e.ak,$e=e.al,Ve=e.am,Ne=e.an,We=e.ao,Ee=e.ap,Ue=e.aq,Le=e.ar,ze=e.as,Ge=e.at,_e=e.au,He=e.av,Ye=e.aw,Je=e.ax,Ze=e.ay,Xe=e.az,Ke=e.aA,Qe=e.aB,et=e.aC,tt=e.aD,it=e.aE,ot=e.aF,nt=e.aG,rt=e.aH,at=e.aI,ct=e.aJ,lt=e.aK,st=e.aL,ut=e.aM,dt=e.aN,ft=e.aO,vt=e.aP,gt=e.aQ,pt=e.aR,mt=e.aS,ht=e.aT,bt=e.aU,wt=e.aV}],execute:function(){var r=document.createElement("style");
/*!
			 * canvas-size
			 * v2.0.0
			 * https://github.com/jhildenbiddle/canvas-size
			 * (c) 2015-2024 John Hildenbiddle <http://hildenbiddle.com>
			 * MIT license
			 */
function c(e){var t,i,o=e.sizes.shift(),n=Math.max(Math.ceil(o[0]),1),r=Math.max(Math.ceil(o[1]),1),a=[n-1,r-1,1,1],l=performance.now(),s="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;s?(t=new OffscreenCanvas(1,1),i=new OffscreenCanvas(n,r)):((t=document.createElement("canvas")).width=1,t.height=1,(i=document.createElement("canvas")).width=n,i.height=r);var u=t.getContext("2d"),d=i.getContext("2d");d&&(d.fillRect.apply(d,a),u.drawImage(i,n-1,r-1,1,1,0,0,1,1));var f=u&&0!==u.getImageData(0,0,1,1).data[3],v=parseInt(performance.now()-l);return[t,i].forEach(function(e){e.height=0,e.width=0}),s?(postMessage({width:n,height:r,testTime:v,isTestPass:f}),!f&&e.sizes.length&&setTimeout(function(){c(e)},0)):f?e.onSuccess({width:n,height:r,testTime:v}):(e.onError({width:n,height:r,testTime:v}),e.sizes.length&&setTimeout(function(){c(e)},0)),f}r.textContent="html,body{height:100%}p{margin-bottom:0}#app,#lm{height:100%}#backpackDialog{max-height:100%}img{padding-right:0!important;padding-left:0!important;width:100%}.fadeOverlay{position:fixed;top:0;left:0;width:100%;height:100%;opacity:0;pointer-events:none;z-index:10000}.ab-0{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-backface-visibility:hidden;backface-visibility:hidden;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:100%;max-width:100%;position:relative;background-position:center;background-attachment:fixed}.s-main{height:100%}.m-half{margin:.125rem!important}.mt-half{margin-top:.125rem!important}.ml-half{margin-left:.125rem!important}.mr-half{margin-right:.125rem!important}.mb-half{margin-bottom:.125rem!important}.m-n1{margin:-.25rem!important}.m-n2{margin:-.5rem!important}.m-n3{margin:-1rem!important}.m-n4{margin:-1.5rem!important}.m-n5{margin:-3rem!important}.mt-n1{margin-top:-.25rem!important}.mt-n2{margin-top:-.5rem!important}.mt-n3{margin-top:-1rem!important}.mt-n4{margin-top:-1.5rem!important}.mt-n5{margin-top:-3rem!important}.ml-n1{margin-left:-.25rem!important}.ml-n2{margin-left:-.5rem!important}.ml-n3{margin-left:-1rem!important}.ml-n4{margin-left:-1.5rem!important}.ml-n5{margin-left:-3rem!important}.mr-n1{margin-right:-.25rem!important}.mr-n2{margin-right:-.5rem!important}.mr-n3{margin-right:-1rem!important}.mr-n4{margin-right:-1.5rem!important}.mr-n5{margin-right:-3rem!important}.mb-n1{margin-bottom:-.25rem!important}.mb-n2{margin-bottom:-.5rem!important}.mb-n3{margin-bottom:-1rem!important}.mb-n4{margin-bottom:-1.5rem!important}.mb-n5{margin-bottom:-3rem!important}.h-100{height:100%!important}.w-auto{width:auto!important}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.align-center{align-items:center}.list-text{font-size:.8125rem;font-weight:500;line-height:1rem}.dialog-title{font-size:1.5rem}.d-column{display:flex;flex-direction:column}.d-row{display:flex;flex-direction:row}.justify-start{justify-content:flex-start}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.justify-space-around{justify-content:space-around}.justify-space-between{justify-content:space-between}.dialog-actions--btn{color:#43a047}.mdc-dialog__title:focus{outline:none}.mdc-dialog__content{max-height:810px;font-size:.875rem;font-weight:400;line-height:1.375rem;letter-spacing:.0071428571em}.mdc-dialog__actions{padding:4px}.backpack-wrapper{font-size:.875rem;font-weight:400;line-height:1.375rem;letter-spacing:.0071428571em}.mdc-text-field,.mdc-button{width:100%}.mdc-floating-label{font-size:.9125rem}.mdc-select{width:100%}.mdc-snackbar{top:0;bottom:auto}.no-shadow{box-shadow:none}.mdc-form-field{font-size:1rem}.mdc-form-field>label{cursor:pointer}.mdc-tooltip{pointer-events:none}.smui-autocomplete__menu{max-width:100%}.toolbar{width:100%;font-size:24px;display:flex;flex-direction:row;align-items:center;overflow:auto}.toolbar__dialog{font-size:.875rem}.toolbar__title{font-family:Roboto,sans-serif;font-size:1.25rem;line-height:1.5}.toolbar__title p{display:inline}.toolbar__title p:not(:last-child){margin-right:4px}.req p{display:inline}.req p:not(:last-child){margin-right:4px}.point-slot{border-radius:4px}.disabled{pointer-events:none;opacity:.5}.hidden{display:none!important}.transparent{pointer-events:none;opacity:0}.preview-image{cursor:pointer}.mdc-deprecated-list-divider{border-bottom-color:currentColor}.btn--image-background{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:none;font:inherit;color:inherit;width:100%}.btn--image{width:100%;height:auto;object-fit:contain;object-position:center}.pointBar{height:56px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px rgba(0,0,0,.14),0 1px 10px rgba(0,0,0,.12)}.mdc-drawer--mini{position:fixed;width:56px;transition:width .2s}.mdc-drawer--mini:hover{width:256px}.navigation-drawer{display:flex;flex-direction:column;justify-content:space-between}.pointbar-icons{font-size:32px;padding:0}.pointbar-center--viewer{flex:1 0 auto!important;max-width:calc(90vw - 96px);overflow-x:auto;overflow-y:hidden;white-space:nowrap;padding:0;justify-content:space-around}.counter-icons{width:36px;height:36px;font-size:.875rem;overflow:hidden}.button-icons{font-size:24px!important}.mdc-chip--small{font-size:12px;border-radius:12px;height:24px}.mdi--small{font-size:12px!important}.mdi--normal{font-size:18px!important}.mdi--big{font-size:24px!important}.smui-chip-input__container{padding-top:20px!important;padding-left:12px!important;padding-right:12px!important}.mdi{font-family:Material Design Icons;line-height:1}.mdc-deprecated-list-item__graphic{font-size:24px}.switch-scale{--mdc-ripple-fg-scale: 1.45 !important;margin:8px}.check-scale{--mdc-checkbox-touch-target-size: 32px}.b-line{border-bottom:1px solid #e9ecef}.floating-button-container{position:relative;width:100%}.floating-button{position:absolute;z-index:1;top:50%;right:5px;transform:translateY(-50%)}.spacer{margin-left:auto}.hide-file-ui input[type=file]::file-selector-button{display:none}.hide-file-ui input[type=file]:not(.mdc-text-field--label-floating){color:transparent}.line-default{line-height:1}.row-cm{margin:0 1% 25px}.fullHeight{display:flex;height:100%;align-content:start}.w-20{-webkit-box-flex:0;-ms-flex:0 0 20%!important;flex:0 0 20%!important;max-width:20%}.w-14{-webkit-box-flex:0;-ms-flex:0 0 14.28%!important;flex:0 0 calc(100% / 7)!important;max-width:calc(100% / 7)}.w-12{-webkit-box-flex:0;-ms-flex:0 0 12.5%!important;flex:0 0 12.5%!important;max-width:12.5%}.w-11{-webkit-box-flex:0;-ms-flex:0 0 11.11%!important;flex:0 0 calc(100% / 9)!important;max-width:calc(100% / 9)}.w-10{-webkit-box-flex:0;-ms-flex:0 0 10%!important;flex:0 0 10%!important;max-width:10%}.w-9{-webkit-box-flex:0;-ms-flex:0 0 9.09%!important;flex:0 0 calc(100% / 11)!important;max-width:calc(100% / 11)}.bordered-panel{border-top-width:1px!important;margin:0!important}.mdc-form-field>label{width:100%}.bg-overlay{background-blend-mode:overlay}.on-top{z-index:99999!important}.create-box{display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;color:gray;border:2px grey dashed;border-radius:10px;height:100%}.save-slot{border:1px grey solid}.textbox-mini{height:40px}.textbox-mini:before{height:24px}.panel--active,.mdc-tab--active .mdc-tab__text-label{color:#1976d2}.mdc-tab-indicator--active .mdc-tab-indicator__content--underline{border-color:#1976d2}.slider{max-width:104px;width:100%;height:32px}.mdc-slider,.mdc-slider .mdc-slider__thumb{height:32px}.mdc-slider .mdc-slider__thumb-knob{border:none;width:12px;height:12px}.mdc-slider .mdc-slider__track,.mdc-slider .mdc-slider__track--inactive{height:2px}.mdc-slider .mdc-slider__track--active{top:0;height:2px}.music-player{top:0;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px rgba(0,0,0,.14),0 1px 10px rgba(0,0,0,.12);font-family:Roboto,sans-serif}.music-player--row{height:32px}.music-player--button{font-size:24px!important}.scrolling-text{display:inline-block;white-space:nowrap;min-width:150px;animation:scrollText 10s linear infinite}.viewer-menu{height:48px}.picture-input{width:100%;margin:0 auto;text-align:center}.preview-container{width:100%;box-sizing:border-box;margin:0 auto;cursor:pointer;overflow:hidden;transform:translateZ(0)}.picture-preview{width:100%;height:100%;position:relative;z-index:10001;box-sizing:border-box;background-color:rgba(200,200,200,.25)}.picture-preview.dragging-over{filter:brightness(.5)}.picture-inner{position:relative;z-index:10002;pointer-events:none;box-sizing:border-box;margin:1em auto;padding:.5em;border:.3em dashed rgba(66,66,66,.15);border-radius:8px;width:calc(100% - 2.5em);height:calc(100% - 2.5em);display:table}.picture-inner .picture-inner-text{display:table-cell;vertical-align:middle;text-align:center;font-size:2em;line-height:1.5}.picture-input input[type=file]{display:none}.text-prewrap{white-space:pre-wrap}@keyframes scrollText{0%{transform:translate(150px)}to{transform:translate(-100%)}}\n/*$vite$:1*/",document.head.appendChild(r);var Tt=[16384,14188,11402,11180,10836,8192,4096,1],It={max:null,min:1,sizes:[],step:1024,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},St={};function yt(e){var t=e.width===e.height,i=1===e.height,o=1===e.width,n=[];if(e.width&&e.height)for(var r=e.min||It.min,a=e.step||It.step,c=Math.max(e.width,e.height);c>=r;){var l=t||i?c:1,s=t||o?c:1;n.push([l,s]),c-=a}else e.sizes.forEach(function(e){var r=t||i?e:1,a=t||o?e:1;n.push([r,a])});return n}function xt(t){var i="undefined"!=typeof window,o=i&&"Promise"in window,n=i&&"HTMLCanvasElement"in window,r=i&&"OffscreenCanvas"in window,a=URL.createObjectURL(new Blob([])).slice(-36),l=performance.now(),s=t.onError,u=t.onSuccess,d=function(e,t){if(null==e)return{};var i,o,n=function(e,t){if(null==e)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;i[o]=e[o]}return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)i=r[o],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(t,e),f=function(){return parseInt(performance.now()-l)},v=null;if(!n)return!1;if(t.useWorker&&r){var p="\n            var canvasTest = ".concat(c.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),h=new Blob([p],{type:"application/javascript"}),b=URL.createObjectURL(h);v=new Worker(b),URL.revokeObjectURL(b),v.onmessage=function(e){var t=e.data,i=t.width,o=t.height,n=t.testTime,r=t.isTestPass,c={width:i,height:o,testTime:n,totalTime:f()};r?(St[a].onSuccess(c),delete St[a]):St[a].onError(c)}}return o?new Promise(function(e){var i=m(m({},t),{},{onError:function(i){var o,n=i.width,r=i.height,a={width:n,height:r,testTime:i.testTime,totalTime:f()};if(0===t.sizes.length)o=!0;else{var c=g(t.sizes.slice(-1),1),l=g(c[0],2),u=l[0],d=l[1];o=n===u&&r===d}s(a),o&&e(m(m({},a),{},{success:!1}))},onSuccess:function(t){var i={width:t.width,height:t.height,testTime:t.testTime,totalTime:f()};u(i),e(m(m({},i),{},{success:!0}))}});if(v){var o=i.onError,n=i.onSuccess;St[a]={onError:o,onSuccess:n},v.postMessage(d)}else c(i)}):v?(St[a]={onError:s,onSuccess:u},void v.postMessage(d)):c(t)}var Ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=yt({width:e.max,height:e.max,min:e.min,step:e.step,sizes:v(Tt)});return xt(m(m(m({},It),e),{},{sizes:t}))},Ot="2.8.0",At={selFilterBlurIsOn:!1,selFilterBlur:0,selFilterBrightIsOn:!1,selFilterBright:100,selFilterContIsOn:!1,selFilterCont:100,selFilterGrayIsOn:!1,selFilterGray:0,selFilterHueIsOn:!1,selFilterHue:0,selFilterInvertIsOn:!1,selFilterInvert:0,selFilterOpacIsOn:!1,selFilterOpac:100,selFilterSaturIsOn:!1,selFilterSatur:1,selFilterSepiaIsOn:!1,selFilterSepia:0,selBgColorIsOn:!0,selOverlayOnImage:!1,selFilterBgColor:"#70FF7EFF",selBorderColorIsOn:!1,selFilterBorderColor:"#000000FF",selImgBorderColorIsOn:!1,selFilterImgBorderColor:"#000000FF",selCTitleColorIsOn:!1,selFilterCTitleColor:"#000000FF",selCTextColorIsOn:!1,selFilterCTextColor:"#000000FF",selATitleColorIsOn:!1,selFilterATitleColor:"#000000FF",selATextColorIsOn:!1,selFilterATextColor:"#000000FF",selScoreTextColorIsOn:!1,selFilterSTextColor:"#000000FF",selFilterVisibleIsOn:!1,reqFilterBlurIsOn:!1,reqFilterBlur:0,reqFilterBrightIsOn:!1,reqFilterBright:100,reqFilterContIsOn:!1,reqFilterCont:100,reqFilterGrayIsOn:!1,reqFilterGray:0,reqFilterHueIsOn:!1,reqFilterHue:0,reqFilterInvertIsOn:!1,reqFilterInvert:0,reqFilterOpacIsOn:!0,reqFilterOpac:50,reqFilterSaturIsOn:!1,reqFilterSatur:1,reqFilterSepiaIsOn:!1,reqFilterSepia:0,reqBgColorIsOn:!1,reqOverlayOnImage:!1,reqFilterBgColor:"#FFFFFFFF",reqBorderColorIsOn:!1,reqFilterBorderColor:"#000000FF",reqImgBorderColorIsOn:!1,reqImgFilterBorderColor:"#000000FF",reqCTitleColorIsOn:!1,reqFilterCTitleColor:"#000000FF",reqCTextColorIsOn:!1,reqFilterCTextColor:"#000000FF",reqATitleColorIsOn:!1,reqFilterATitleColor:"#000000FF",reqATextColorIsOn:!1,reqFilterATextColor:"#000000FF",reqScoreTextColorIsOn:!1,reqFilterSTextColor:"#000000FF",reqFilterVisibleIsOn:!1,unselFilterBlurIsOn:!1,unselFilterBlur:0,unselFilterBrightIsOn:!1,unselFilterBright:100,unselFilterContIsOn:!1,unselFilterCont:100,unselFilterGrayIsOn:!1,unselFilterGray:0,unselFilterHueIsOn:!1,unselFilterHue:0,unselFilterInvertIsOn:!1,unselFilterInvert:0,unselFilterOpacIsOn:!1,unselFilterOpac:100,unselFilterSaturIsOn:!1,unselFilterSatur:1,unselFilterSepiaIsOn:!1,unselFilterSepia:0,unselFilterVisibleIsOn:!1},kt={customRowTitle:!1,rowTitle:"Times New Roman",customRowText:!1,rowText:"Times New Roman",customObjectTitle:!1,objectTitle:"Times New Roman",customObjectText:!1,objectText:"Times New Roman",customAddonTitle:!1,addonTitle:"Times New Roman",customAddonText:!1,addonText:"Times New Roman",customScoreText:!1,scoreText:"Times New Roman",rowTitleTextSize:200,rowTextTextSize:100,objectTitleTextSize:200,objectTextTextSize:100,addonTitleTextSize:200,addonTextTextSize:100,scoreTextSize:75,rowTitleColor:"#000000",rowTextColor:"#000000",objectTitleColor:"#000000",objectTextColor:"#000000",addonTitleColor:"#000000",addonTextColor:"#000000",scoreTextColor:"#000000",rowTitleAlign:"center",rowTextAlign:"center",objectTitleAlign:"center",objectTextAlign:"center",addonTitleAlign:"center",addonTextAlign:"center",scoreTextAlign:"center"},Bt={objectImgBorderStyle:"solid",objectImgBorderWidth:2,objectImageWidth:100,objectImageMarginTop:0,objectImageMarginBottom:0,objectImgBorderRadiusTopLeft:0,objectImgBorderRadiusTopRight:0,objectImgBorderRadiusBottomRight:0,objectImgBorderRadiusBottomLeft:0,objectImgBorderRadiusIsPixels:!0,objectImgBorderIsOn:!1,objectImgOverflowIsOn:!1,objectImgBorderColor:"red",objectImgObjectFillStyle:"",objectImgObjectFillIsOn:!1,objectImgObjectFillHeight:0,objectImageBoxWidth:50},Mt={rowImgBorderStyle:"solid",rowImgBorderWidth:2,rowImageWidth:100,rowImageMarginTop:0,rowImageMarginBottom:0,rowImgBorderRadiusTopLeft:0,rowImgBorderRadiusTopRight:0,rowImgBorderRadiusBottomRight:0,rowImgBorderRadiusBottomLeft:0,rowImgBorderRadiusIsPixels:!0,rowImgBorderIsOn:!1,rowImgOverflowIsOn:!1,rowImgBorderColor:"red",rowImageBoxWidth:50,rowImgObjectFillStyle:"",rowImgObjectFillIsOn:!1,rowImgObjectFillHeight:0},Dt={useAddonImage:!1,addonImgBorderStyle:"solid",addonImgBorderWidth:2,addonImageWidth:100,addonImageMarginTop:0,addonImageMarginBottom:0,addonImgBorderRadiusTopLeft:0,addonImgBorderRadiusTopRight:0,addonImgBorderRadiusBottomRight:0,addonImgBorderRadiusBottomLeft:0,addonImgBorderRadiusIsPixels:!0,addonImgBorderIsOn:!1,addonImgOverflowIsOn:!1,addonImgBorderColor:"red",addonImgObjectFillStyle:"",addonImgObjectFillIsOn:!1,addonImgObjectFillHeight:0,addonImageBoxWidth:50},Ft={bgColorIsOn:!1,backgroundColor:"#FFFFFFFF",rowBgColorIsOn:!1,rowBgColor:"#FFFFFFFF",objectBgColorIsOn:!1,objectBgColor:"#FFFFFFFF",isBackgroundRepeat:!1,isBackgroundFitIn:!1,backgroundImage:"",isRowBackgroundRepeat:!1,isRowBackgroundFitIn:!1,rowBackgroundImage:"",isObjectBackgroundRepeat:!1,isObjectBackgroundFitIn:!1,objectBackgroundImage:""},Rt={objectHeight:!0,objectDesignIsAdvanced:!1,objectMargin:10,objectTextPadding:10,objectBorderStyle:"solid",objectBorderWidth:2,objectBorderIsOn:!1,objectDropShadowH:0,objectDropShadowV:0,objectDropShadowBlur:0,objectDropShadowSpread:0,objectDropShadowIsOn:!1,objectUseBoxShadowIsOn:!1,objectBorderRadiusTopLeft:0,objectBorderRadiusTopRight:0,objectBorderRadiusBottomRight:0,objectBorderRadiusBottomLeft:0,objectBorderRadiusIsPixels:!0,objectOverflowIsOn:!0,objectDropShadowColor:"grey",objectGradientIsOn:!1,objectGradient:"",objectGradientOnSelect:"",objectGradientOnReq:"",objectBorderColor:"red",objectBorderImage:"",objectBorderImageRepeat:"stretch",objectBorderImageWidth:5,objectBorderImageSliceTop:5,objectBorderImageSliceBottom:5,objectBorderImageSliceLeft:5,objectBorderImageSliceRight:5,removeSpaceAddonIsOn:!1,titlePaddingIsOn:!1},jt={rowDesignIsAdvanced:!1,rowMargin:10,rowBodyMarginSides:1,rowBodyMarginTop:25,rowBodyMarginBottom:25,rowTextPaddingY:5,rowTextPaddingX:10,rowOverflowIsOn:!0,rowDropShadowH:0,rowDropShadowV:0,rowDropShadowBlur:0,rowDropShadowSpread:0,rowDropShadowColor:"grey",rowButtonXPadding:0,rowButtonYPadding:0,rowDropShadowIsOn:!1,rowUseBoxShadowIsOn:!1,rowBorderRadiusTopLeft:0,rowBorderRadiusTopRight:0,rowBorderRadiusBottomRight:0,rowBorderRadiusBottomLeft:0,rowBorderRadiusIsPixels:!0,rowBorderStyle:"solid",rowBorderWidth:2,rowBorderIsOn:!1,rowBorderColor:"red",rowGradientIsOn:!1,rowGradient:"",rowBorderImage:"",rowBorderImageRepeat:"stretch",rowBorderImageWidth:5,rowBorderImageSliceTop:5,rowBorderImageSliceBottom:5,rowBorderImageSliceLeft:5,rowBorderImageSliceRight:5},qt={useAddonDesign:!1,addonDesignIsAdvanced:!1,addonMargin:10,addonTextPadding:10,addonBorderStyle:"solid",addonBorderWidth:2,addonBorderIsOn:!1,addonDropShadowH:0,addonDropShadowV:0,addonDropShadowBlur:0,addonDropShadowSpread:0,addonDropShadowIsOn:!1,addonUseBoxShadowIsOn:!1,addonBorderRadiusTopLeft:0,addonBorderRadiusTopRight:0,addonBorderRadiusBottomRight:0,addonBorderRadiusBottomLeft:0,addonBorderRadiusIsPixels:!0,addonOverflowIsOn:!0,addonDropShadowColor:"grey",addonGradientIsOn:!1,addonGradient:"",addonGradientOnSelect:"",addonGradientOnReq:"",addonBorderColor:"red",addonBorderImage:"",addonBorderImageRepeat:"stretch",addonBorderImageWidth:5,addonBorderImageSliceTop:5,addonBorderImageSliceBottom:5,addonBorderImageSliceLeft:5,addonBorderImageSliceRight:5,useAddonBackgroundImage:!1,addonBackgroundImage:"",isAddonBackgroundFitIn:!1,isAddonBackgroundRepeat:!1,addonBgColorIsOn:!1,addonBgColor:"#FFFFFFFF",addonTitlePaddingIsOn:!1},Pt={customMultiTextFont:!1,multiChoiceCounterPosition:0,multiChoiceCounterSize:170,multiChoiceTextFont:"Times New Roman",multiChoiceTextSize:100},$t={barTextPadding:17,barTextMargin:0,customBarTextFont:!1,barTextFont:"Times New Roman",barPadding:0,barMargin:0,barTextSize:15,barTextColor:"#000000",barPointPos:"#FF0000FF",barPointNeg:"#FF0000FF",barIconColor:"#0000008A",barBackgroundColor:"#FFFFFFFF"},Vt={useBackpackDesign:!1,backpackBgColor:"#FFFFFF",isBackpackBgRepeat:!1,isBackpackBgFitIn:!1,backpackBgImage:"",backPackWidth:1400},app=s(

/*! Delete and replace this part with your project if you're pasting it in, leave it here if you have placed your project.json file under index.html. */
{version:Ot,isEditModeOnAll:!0,isPointerCursor:!1,importedChoicesIsOpen:!0,curVolume:100,isMute:!1,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,showAllAddons:0,tmpRow:[],tmpChoice:[],tmpRequired:[],tmpScore:[],tmpAddon:[],tmpGroup:[],rowIdLength:4,objectIdLength:4,words:[],groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,useTextEditor:!0,useToolbarBtn:!1,useChoiceEditBtn:!0,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,addPrefix:!0,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],categories:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,tooltipDelay:1e3,checkDeleteRow:!0,checkDeleteObject:!1,checkSelectAll:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",defaultRowTemplate:1,defaultRowWidth:"col-md-3",defaultRowJustify:"start",defaultRowAllowedChoices:0,defaultChoiceTemplate:1,defaultChoiceWidth:"",defaultChoiceMaxNum:99,defaultAddonJustify:"start",defaultAddonTemplate:1,defaultAddonWidth:"col-12",defaultUseSeperateAddon:!1,defaultUseShowAddon:!1,defaultUseHideAddon:!1,defaultUseShowScore:!0,defaultUseHideValue:!1,defaultUseShowReq:!1,cropperPosition:4,enableSearch:!0,backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,rowJustify:"start",isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:m(m(m(m(m(m(m(m(m(m(m(m({},At),kt),Bt),Mt),Dt),Ft),Rt),jt),qt),Pt),$t),Vt)}
/*! End */

),Nt={version:Ot,isEditModeOnAll:!0,isPointerCursor:!1,importedChoicesIsOpen:!0,curVolume:100,isMute:!1,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,showAllAddons:0,tmpRow:[],tmpChoice:[],tmpRequired:[],tmpScore:[],tmpAddon:[],tmpGroup:[],rowIdLength:4,objectIdLength:4,words:[],groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,useTextEditor:!0,useToolbarBtn:!1,useChoiceEditBtn:!0,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,addPrefix:!0,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],categories:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,tooltipDelay:1e3,checkDeleteRow:!0,checkDeleteObject:!1,checkSelectAll:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",defaultRowTemplate:1,defaultRowWidth:"col-md-3",defaultRowJustify:"start",defaultRowAllowedChoices:0,defaultChoiceTemplate:1,defaultChoiceWidth:"",defaultChoiceMaxNum:99,defaultAddonJustify:"start",defaultAddonTemplate:1,defaultAddonWidth:"col-12",defaultUseSeperateAddon:!1,defaultUseShowAddon:!1,defaultUseHideAddon:!1,defaultUseShowScore:!0,defaultUseHideValue:!1,defaultUseShowReq:!1,cropperPosition:4,enableSearch:!0,backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,rowJustify:"start",isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:m(m(m(m(m(m(m(m(m(m(m(m({},At),kt),Bt),Mt),Dt),Ft),Rt),jt),qt),Pt),$t),Vt)},Wt=s(new d),Et=s(new d),Ut=s(new d),Lt=s(new d),zt=s(new d),Gt=s(new d),_t=s(new d),Ht=s(new d),Yt=s(new d),Jt=s(new d),Zt=s(new d),Xt=s(new p),Kt=s([]),Qt=s({value:"appCyoaViewer"}),ei=s({value:"light"}),ti={ALLOWED_TAGS:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr","font","iframe","img"],ADD_ATTR:["href","target","style","class"]},ii=y(null),oi=y(null),ni=s({isBgmInit:!1,bgmIsPlaying:!1,bgmPlayInterval:0,bgmTitleInterval:0,bgmFadeInterval:0,bgmFadeTimer:0,bgmTitle:"No Audio Title",curBgmTime:0,curBgmLength:0,isSeeking:!1,lastFadeTime:0,isFadingOut:!1,bgmObjectId:"",noCors:!1}),ri=s({currentDialog:"none"}),ai=s({currentDialog:"none"}),ci=s({currentDialog:"none"}),li=s({labelText:"",timeoutMs:4e3,isOpen:!1}),si=s({allowDeselect:!1,isSingleFile:!1}),ui=s({stored:!1,name:"Auto Save",time:"",app:""}),di=s(Array.from({length:99},function(e,t){return{stored:!1,name:"Slot ".concat(t+1),time:"",app:""}})),fi=s(Array.from({length:99},function(e,t){return{stored:!1,name:"Slot ".concat(t+1),time:"",app:""}}));s({backgroundColor:"",backgroundImage:"",barBgColor:""});var vi=new Set,gi={value:!1},pi=A(window.innerWidth,function(e){var t=function(){return e(window.innerWidth)};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),mi=M(function(){return[].concat(v(app.rows.flatMap(function(e){return e.objects}).filter(function(e){return!e.isNotSelectable&&!e.isNotSearchable}).map(function(e){return e.id})),v(app.rows.flatMap(function(e){return e.objects}).flatMap(function(e){var t;return null!==(t=e.addons)&&void 0!==t?t:[]}).filter(function(e){return e.isSelectable&&!e.isNotSelectable&&!e.isNotSearchable}).map(function(e){return e.id})))});function hi(){return B(mi)}var bi=null,wi=null;function Ti(){return new Promise(function(e,t){var i=indexedDB.open("cyoaPlusDB");i.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("cyoaStore")||t.createObjectStore("cyoaStore"),t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore")},i.onsuccess=function(t){var i=t.target.result;e(i)},i.onerror=t})}function Ii(){return new Promise(function(e,t){return wi?e(wi):t()})}function Si(){return new Promise(function(e,t){if(bi)return e(bi);var i=indexedDB.open("cyoaDB"),o=!1,n=[],r=[],a=[];i.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore",{keyPath:"title"}),o=!0},i.onsuccess=function(i){var c=i.target.result;if(1===c.version)if(o)Ti().then(function(t){e(bi=t)}).catch(t).finally(function(){c.close()});else if(c.objectStoreNames.contains("buildStore")){var l=c.transaction(["buildStore"],"readonly").objectStore("buildStore").getAll();l.onsuccess=function(){for(var i=l.result,o=0;o<i.length;o++){var n=l.result[o];fi[o].stored=!0,fi[o].name=n.title,fi[o].time="Unknown"}Ti().then(function(t){e(bi=t)}).catch(t).finally(function(){wi=c})},l.onerror=function(i){console.error(i),Ti().then(function(t){e(bi=t)}).catch(t).finally(function(){c.close()})}}else Ti().then(function(t){e(bi=t)}).catch(t).finally(function(){c.close()});else{var s=[new Promise(function(e,t){if(c.objectStoreNames.contains("cyoaStore")){var i=c.transaction("cyoaStore","readonly").objectStore("cyoaStore").openCursor();i.onsuccess=function(t){var i=t.target.result;i?(n.push({key:i.key,value:i.value}),i.continue()):e()},i.onerror=t}else e()}),new Promise(function(e,t){if(c.objectStoreNames.contains("buildStore")){var i=c.transaction("buildStore","readonly").objectStore("buildStore").openCursor();i.onsuccess=function(t){var i=t.target.result;i?(r.push({key:i.key,value:i.value}),i.continue()):e()},i.onerror=t}else e()})];Promise.all(s).then(function(){return c.close(),new Promise(function(e,t){var i=indexedDB.deleteDatabase("cyoaDB");i.onsuccess=function(){var i=indexedDB.open("cyoaDB",1);i.onupgradeneeded=function(e){e.target.result.createObjectStore("buildStore",{keyPath:"title"});var t=e.target.transaction;if(t)for(var i=t.objectStore("buildStore"),o=0,n=0;n<r.length;n++){var c=r[n];void 0!==c.value.title?(i.put(c.value),fi[o].stored=!0,fi[o].name=c.title,fi[o].time="Unknown",o+=1):a.push(c)}},i.onsuccess=function(t){var i=t.target.result;wi=i,e()},i.onerror=function(e){t(e)}},i.onerror=function(e){t(e)}})}).catch(function(e){console.error(e),c.close()}).finally(function(){var i=indexedDB.open("cyoaPlusDB");i.onupgradeneeded=function(e){var t=e.target.result;!t.objectStoreNames.contains("cyoaStore")&&n.length>0&&t.createObjectStore("cyoaStore"),t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore");var i=e.target.transaction;if(i){if(n.length>0)for(var o=i.objectStore("cyoaStore"),r=0;r<n.length;r++){var c=n[r];o.put(c.value,c.key)}if(a.length>0)for(var l=i.objectStore("buildStore"),s=0;s<a.length;s++){var u=a[s];l.put(u.value,u.key)}}},i.onsuccess=function(t){var i=t.target.result;e(bi=i)},i.onerror=function(e){t(e)}})}},i.onerror=function(e){t(e)}})}var yi=null;function xi(e,t){return new Promise(function(i,o){var n=setTimeout(function(){return i()},e);t&&t.addEventListener("abort",function(){clearTimeout(n),o(new DOMException("Aborted","AbortError"))})})}function Ci(){return Oi.apply(this,arguments)}function Oi(){return Oi=f(l().m(function e(){var i,o,n;return l().w(function(e){for(;;)switch(e.n){case 0:i=new AbortController,yi=i,o="".concat(location.pathname.replace(/\/index\.html$/,"/"),"autoSave"),n=l().m(function e(){var t,n,r,a,c,s,u,d,f;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,xi(1e3*app.buildAutoSaveInterval*60,i.signal);case 1:e.n=3;break;case 2:return e.p=2,e.v,e.a(2,0);case 3:if(app.buildAutoSaveIsOn){e.n=4;break}return e.a(2,0);case 4:return e.n=5,Si();case 5:return t=e.v,n=t.transaction("buildStore","readwrite"),r=n.objectStore("buildStore"),a=navigator.language,c=new Date,s=new Intl.DateTimeFormat(a,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),u=s.format(c),d={stored:!0,name:"Auto Save",time:u,app:Fi()},e.p=6,e.n=7,new Promise(function(e,t){var i=r.put(d,o);i.onsuccess=function(){return e()},i.onerror=function(){return t(i.error)}});case 7:ui.stored=!0,ui.time=u,li.labelText="Auto-save completed successfully.",li.isOpen=!0,e.n=9;break;case 8:e.p=8,f=e.v,console.error(f);case 9:return e.a(2)}},e,null,[[6,8],[0,2]])});case 1:if(!app.buildAutoSaveIsOn){e.n=4;break}return e.d(t(n()),2);case 2:if(0!==e.v){e.n=3;break}return e.a(3,4);case 3:e.n=1;break;case 4:return e.a(2)}},e)})),Oi.apply(this,arguments)}function Ai(){return Ai=f(l().m(function e(t,i,o,n,r){var a,c,s,u;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,Si();case 1:return a=e.v,c=a.transaction(n,"readwrite"),s=c.objectStore(n),e.p=2,e.n=3,new Promise(function(e,o){var n=s.put(t,i);n.onsuccess=function(){return e()},n.onerror=function(){return o(n.error)}});case 3:r&&(di[o].stored=!0,di[o].time=t.time,di[o].name=t.name),e.n=5;break;case 4:e.p=4,u=e.v,console.error(u);case 5:return e.a(2)}},e,null,[[2,4]])})),Ai.apply(this,arguments)}function ki(){return ki=f(l().m(function e(t,i,o,n){var r,a,c,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,Si();case 1:return r=e.v,a=r.transaction(o,"readwrite"),c=a.objectStore(o),e.p=2,e.n=3,new Promise(function(e,i){var o=c.delete(t);o.onsuccess=function(){return e()},o.onerror=function(){return i(o.error)}});case 3:n&&(di[i].stored=!1,di[i].name="Slot ".concat(i+1),di[i].time=""),e.n=5;break;case 4:e.p=4,s=e.v,console.error(s);case 5:return e.a(2)}},e,null,[[2,4]])})),ki.apply(this,arguments)}function Bi(e,t){return Mi.apply(this,arguments)}function Mi(){return Mi=f(l().m(function e(t,i){var o,n,r=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.n=2;break}return e.n=1,Ii();case 1:n=e.v,e.n=4;break;case 2:return e.n=3,Si();case 3:n=e.v;case 4:return o=n,e.a(2,new Promise(function(e,n){var r=o.transaction(i,"readonly").objectStore(i).get(t);r.onsuccess=function(){return e(void 0!==r.result?r.result:null)},r.onerror=n}))}},e)})),Mi.apply(this,arguments)}function Di(){return Di=f(l().m(function e(){var t,i,o,n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Si();case 1:return t=e.v,i=t.transaction("buildStore","readonly"),o=i.objectStore("buildStore"),n=location.pathname.replace(/\/index\.html$/,"/"),e.n=2,new Promise(function(e,t){var i=o.openCursor();i.onsuccess=function(t){var i=t.target.result;if(i){var o=i.key,r=i.value;if("string"==typeof o&&o.startsWith(n)){var a=o.slice(n.length);if("autoSave"===a)ui.stored=!0,ui.time=r.time;else{var c=a.match(/^slot-(\d+)$/),l=Number(null==c?void 0:c[1]);di[l].stored=!0,di[l].name=void 0!==r.name?r.name:"Slot ".concat(l+1),di[l].time=r.time}}i.continue()}else e()},i.onerror=t});case 2:return e.a(2)}},e)})),Di.apply(this,arguments)}function Fi(){var e=[];return Array.from(Wt.entries()).forEach(function(t){var i=g(t,2),o=i[0],n=i[1];if(n.isRowButton){if(void 0!==Lt.get(o)){var r="".concat(o,"/RP#").concat(n.rndPoint,"/NUM#").concat(n.pointNum);e.push(r)}}else if(n.isVariable){void 0!==Yt.get(o)&&e.push(o)}else{var a=zt.get(o);if(void 0!==a){var c=a.choice,l=o,s=[];if(0===n.multiple){for(var u=0;u<c.scores.length;u++){var d=c.scores[u];d.isRandom&&d.setValue&&s.push("".concat(u,":").concat(d.value))}s.length>0&&(l+="/RS#".concat(s.join("/AND#"))),c.isActivateRandom&&c.activatedRandom&&(l+="/RND#".concat(c.activatedRandom.join("/AND#").replace(/\/ON#/g,"/RON#"))),c.textfieldIsOn&&c.customTextfieldIsOn&&void 0!==c.wordChangeSelect&&(l+="/WORD#".concat(c.wordChangeSelect.replace(/,/g,"/CHAR#"))),c.isImageUpload&&c.image!==c.defaultImage&&(l+="/IMG#".concat(c.image.replace(/,/g,"/CHAR#"))),e.push(l)}else{l+="/ON#".concat(n.multiple);for(var f=0;f<c.scores.length;f++){var v=c.scores[f];v.isRandom&&v.setValue&&s.push("".concat(f,":").concat(v.value))}s.length>0&&(l+="/RS#".concat(s.join("/AND#"))),c.isActivateRandom&&c.activatedRandomMul&&(l+="/RND#".concat(c.activatedRandomMul.flat(2).join("/AND#").replace(/\/ON#/g,"/RON#"))),e.push(l)}}}}),e.join(",")}function Ri(){var e=new Date,t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),n=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(i,"-").concat(o,"_").concat(n,"-").concat(r,"-").concat(a)}function ji(e){switch(e.type){case"id":var t=e.reqId.split("/ON#"),i=zt.get(t[0]);if(void 0!==i){var o=i.choice;return"".concat(t.length>1?"".concat(t[1]," "):"").concat(o.title)}break;case"points":var n=Ut.get(e.reqId);if(void 0!==n)return"".concat(e.reqPoints," ").concat(n.name);break;case"or":var r=[];if(void 0!==e.orRequireds)for(var a=0;a<e.orRequireds.length;a++)r.push(ji(e.orRequireds[a]));return"1"===app.orderOrReqText?"".concat(r.join(", ")," ").concat(void 0!==e.orNum?"".concat(app.defaultOrReq," ").concat(e.orNum):"".concat(app.defaultOrReq," 1")):"".concat(void 0!==e.orNum?"".concat(e.orNum," ").concat(app.defaultOrReq):"1 ".concat(app.defaultOrReq)," ").concat(r.join(", "));case"selFromGroups":if(void 0!==e.selGroups){for(var c=[],l=0;l<e.selGroups.length;l++){var s=e.selGroups[l],u=Gt.get(s);void 0!==u&&c.push(u.name)}return"1"===app.orderSelReqText?"".concat(c.join(", ")," ").concat(app.defaultOrReq," ").concat(e.selNum):"".concat(e.selNum," ").concat(app.defaultOrReq," ").concat(c.join(", "))}case"selFromRows":if(void 0!==e.selRows){for(var d=[],f=0;f<e.selRows.length;f++){var v=e.selRows[f],g=Lt.get(v);void 0!==g&&d.push(g.title)}return"1"===app.orderSelReqText?"".concat(d.join(", ")," ").concat(app.defaultOrReq," ").concat(e.selNum):"".concat(e.selNum," ").concat(app.defaultOrReq," ").concat(d.join(", "))}case"selFromWhole":return"1"===app.orderSelReqText?"".concat(app.defaultOrReq," ").concat(e.selNum):"".concat(e.selNum," ").concat(app.defaultOrReq)}return""}function qi(e){return e.customTextIsOn?void 0!==e.customText?e.customText:"":"".concat(e.beforeText," ").concat(ji(e)," ").concat(e.afterText)}function Pi(e){return Lt.has(e)||zt.has(e)||Ht.has(e)||Ut.has(e)||Jt.has(e)||Zt.has(e)||Gt.has(e)||Yt.has(e)}function $i(e,t){for(var i=app.addPrefix?"row-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Pi(i)?e>2?$i(0,++t):$i(++e,t):i}function Vi(e,t){for(var i=app.addPrefix?"word-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Pi(i)?e>2?Vi(0,++t):Vi(++e,t):i}function Ni(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=app.addPrefix?i?"addon-":"choice-":"",n="abcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)o+=n.charAt(Math.floor(36*Math.random()));return Pi(o)?e>2?Ni(0,++t):Ni(++e,t):o}function Wi(e,t,i){for(var o=app.addPrefix?"design-":"",n="abcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)o+=n.charAt(Math.floor(36*Math.random()));return Pi(o)?e>2?Wi(0,++t):Wi(++e,t):o}function Ei(e,t){for(var i=app.addPrefix?"group-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Pi(i)?e>2?Ei(0,++t):Ei(++e,t):i}function Ui(e,t){for(var i=app.addPrefix?"point-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Pi(i)?e>2?Ui(0,++t):Ui(++e,t):i}function Li(e,t){for(var i=app.addPrefix?"variable-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Pi(i)?e>2?Li(0,++t):Li(++e,t):i}function zi(e,t){for(var i="s-",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Xt.has(i)?e>2?zi(0,++t):zi(++e,t):i}function Gi(e){switch(e){case"col-sm-6":case"col-sm-5":return 2;case"col-md-4":return 3;case"col-md-3":return 4;case"w-20":return 5;case"col-lg-2":return 6;case"w-14":return 7;case"w-12":return 8;case"w-11":return 9;case"w-10":return 10;case"w-9":return 11;case"col-xl-1":return 12;default:return 1}}var _i,Hi=[];function Yi(){return function(){if(Hi.length!==app.words.length)return!0;for(var e=0;e<Hi.length;e++){if(Hi[e].id!==app.words[e].id)return!0;if(Hi[e].replaceText!==app.words[e].replaceText)return!0}return!1}()&&(Hi=JSON.parse(JSON.stringify(app.words)),_i=new RegExp(app.words.map(function(e){return e.id}).sort(function(e,t){return t.length-e.length}).map(function(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}).join("|"),"g")),_i}function Ji(e){var t=e;return app.words&&(t=t.replace(Yi(),function(e){var t=Ut.get(e);if(void 0!==t)return(t.startingSum%1==0?t.startingSum:parseFloat(t.startingSum.toFixed(void 0!==t.decimalPlaces?t.decimalPlaces:2))).toString();var i=zt.get(e);if(void 0!==i){var o=i.choice;if(o.isSelectableMultiple&&o.isMultipleUseVariable)return o.multipleUseVariable.toString()}else{var n=Ht.get(e);if(void 0!==n)return n.replaceText}return e})),t}function Zi(e,t,i){if(void 0!==i){if(void 0!==i.styling&&i.isPrivateStyling&&i[e])return i.styling;if(void 0!==app.objectDesignGroups){if(i.objectDesignGroups)for(var o=0;o<i.objectDesignGroups.length;o++){var n=Zt.get(i.objectDesignGroups[o]);if(void 0!==n&&n[e]){var r=n.activatedId,a=_t.get(r);if(""===r||Ki(n.activatedId))return n.styling;if(void 0!==app.globalRequirements&&void 0!==a&&io(a.requireds))return n.styling}}if(i.groups)for(var c=0;c<i.groups.length;c++){var l=Gt.get(i.groups[c]);if(void 0!==l&&void 0!==l.designGroups)for(var s=0;s<l.designGroups.length;s++){var u=Zt.get(l.designGroups[c]);if(void 0!==u&&u[e]){var d=u.activatedId,f=_t.get(d);if(""===d||Ki(u.activatedId))return u.styling;if(void 0!==app.globalRequirements&&void 0!==f&&io(f.requireds))return u.styling}}}}}if(void 0!==t){if(void 0!==t.styling&&t.isPrivateStyling&&t[e])return t.styling;if(void 0!==app.rowDesignGroups){if(t.rowDesignGroups)for(var v=0;v<t.rowDesignGroups.length;v++){var g=Jt.get(t.rowDesignGroups[v]);if(void 0!==g&&g[e]){var p=g.activatedId,m=_t.get(p);if(""===p||Ki(g.activatedId))return g.styling;if(void 0!==app.globalRequirements&&void 0!==m&&io(m.requireds))return g.styling}}if(t.groups)for(var h=0;h<t.groups.length;h++){var b=Gt.get(t.groups[h]);if(void 0!==b&&void 0!==b.designGroups)for(var w=0;w<b.designGroups.length;w++){var T=Jt.get(b.designGroups[h]);if(void 0!==T&&T[e]){var I=T.activatedId,S=_t.get(I);if(""===I||Ki(T.activatedId))return T.styling;if(void 0!==app.globalRequirements&&void 0!==S&&io(S.requireds))return T.styling}}}}}return app.styling}function Xi(e,t){return t.has(e)?Xi("".concat(e,"_dup"),t):e}function Ki(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wt,o=g(e.split("/ON#"),2),n=o[0],r=o[1],a=parseInt(void 0===r?"0":r);return a>0?((null===(t=i.get(n))||void 0===t?void 0:t.multiple)||0)>=a:i.has(n)}function Qi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;switch(e){case"5":case"4":case"3":return 10*t+1;default:return 10*t+2}}function eo(e){if("number"==typeof e)return e;if("string"==typeof e)return Number(e);var t=eo(e.left),i=eo(e.right);switch(e.operator){case"1":return t+i;case"2":return t-i;case"3":return t*i;case"4":return 0!==i?t/i:t;case"5":return 0!==i?t%i:t;default:return t}}function to(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wt;if(e.required)switch(e.type){case"id":return Ki(e.reqId,t);case"points":var i=Ut.get(e.reqId);if(void 0!==i){if(void 0===e.operator)return i.startingSum>e.reqPoints;switch(e.operator){case"1":return i.startingSum>e.reqPoints;case"2":return i.startingSum>=e.reqPoints;case"3":return i.startingSum==e.reqPoints;case"4":return i.startingSum<=e.reqPoints;case"5":return i.startingSum<e.reqPoints}}return!1;case"or":var o=void 0===e.orNum?1:e.orNum,n=0;if(e.orRequireds)for(var r=0;r<e.orRequireds.length;r++){to(e.orRequireds[r],t)&&n++}return n>=o;case"pointCompare":var a=Ut.get(e.reqId),c=Ut.get(e.reqId1);if(void 0!==a&&void 0!==c){var l=c.startingSum;if(e.more)for(var s=0;s<e.more.length;s++){var u=0,d=e.more[s],f=d.operator||"1",v=Qi(f,d.priority);if(d.id){var g=Ut.get(d.id);void 0!==g&&(u=g.startingSum)}else void 0!==d.points&&(u=d.points);var p={left:l,operator:f,right:u,priority:v};l="number"!=typeof l&&v<l.priority?{left:l.left,operator:l.operator,right:{left:l.right,operator:f,right:u,priority:v},priority:l.priority}:p}var m=eo(l);switch(e.operator){case"1":return a.startingSum>m;case"2":return a.startingSum>=m;case"3":return a.startingSum==m;case"4":return a.startingSum<=m;case"5":return a.startingSum<m;default:return!1}}return!1;case"selFromGroups":if(e.selGroups){for(var h=0,b=void 0===e.selFromOperators?"1":e.selFromOperators,w=void 0===e.selNum?1:e.selNum,T=0;T<e.selGroups.length;T++){var I=Gt.get(e.selGroups[T]);if(void 0!==I)for(var S=I.elements,y=0;y<S.length;y++)Wt.has(S[y])&&h++}switch(b){case"1":return!(w>h||0===w&&h>0);case"2":return w===h;case"3":return!(w<h||0===w&&h>0);default:return!1}}case"selFromRows":if(e.selRows){for(var x=0,C=void 0===e.selFromOperators?"1":e.selFromOperators,O=void 0===e.selNum?1:e.selNum,A=0;A<e.selRows.length;A++){var k=Lt.get(e.selRows[A]);void 0!==k&&(x+=k.currentChoices)}switch(C){case"1":return!(O>x||0===O&&x>0);case"2":return O===x;case"3":return!(O<x||0===O&&x>0);default:return!1}}case"selFromWhole":for(var B=0,M=void 0===e.selFromOperators?"1":e.selFromOperators,D=void 0===e.selNum?1:e.selNum,F=0;F<app.rows.length;F++)B+=app.rows[F].currentChoices;switch(M){case"1":return!(D>B||0===D&&B>0);case"2":return D===B;case"3":return!(D<B||0===D&&B>0);default:return!1}case"gid":var R=_t.get(e.reqId);return void 0!==R&&void 0!==app.globalRequirements&&io(R.requireds,t);case"word":var j=Ht.get(e.reqId);if(void 0!==j){for(var q=0,P=0;P<e.orRequired.length;P++){var $=e.orRequired[P].req;void 0!==$&&j.replaceText===$&&q++}return q>=1}return!1}else switch(e.type){case"id":return!Ki(e.reqId,t);case"or":var V=void 0===e.orNum?1:e.orNum,N=0;if(e.orRequireds){for(var W=0;W<e.orRequireds.length;W++){to(e.orRequireds[W],t)&&N++}return N<e.orRequireds.length-V+1}case"gid":var E=_t.get(e.reqId);return void 0!==E&&void 0!==app.globalRequirements&&!io(E.requireds,t)}return!1}function io(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wt,i=!0;if(void 0!==e)for(var o=0;o<e.length;o++){var n=e[o],r=!0;if(void 0!==n.requireds)for(var a=0;a<n.requireds.length;a++)r=r&&to(n.requireds[a],t);r&&(i=i&&to(e[o],t))}return i}function oo(e){var t=new Audio;return t.controls=!1,t.preload="metadata",e&&(t.crossOrigin="anonymous"),function(e){var t=!1,i=1,o=!1,n=!0;return e.addEventListener("loadedmetadata",function(){(o=Number.isFinite(e.duration)&&e.seekable&&e.seekable.length>0)&&(ni.curBgmLength=e.duration)}),e.addEventListener("play",function(){n=!1}),e.addEventListener("ended",function(){n=!0}),{type:"audio",load:function(t,i){e.src=t,e.loop=!(null==i||!i.loop),e.load(),n=!0,o=!1},play:function(){return e.play().catch(function(e){throw n=!0,console.warn(e),e})},pause:function(){return e.pause()},stop:function(){e.pause(),o&&(e.currentTime=0),n=!0},mute:function(){t=!0,e.muted=!0},unMute:function(){t=!1,e.muted=!1},setVolume:function(o){i=o/100,t||(e.volume=i)},isPlaying:function(){return!e.paused&&!n},isStopped:function(){return n},isMuted:function(){return t},seekTo:function(t){if(!o)return!1;try{return e.currentTime=t,!0}catch(i){return!1}},getCurrentTime:function(){return o?e.currentTime:0},getDuration:function(){return o?e.duration:0},getTitle:function(){var t;return null!==(t=e.src.split("/").pop())&&void 0!==t?t:""},getId:function(){return e.src}}}(t)}function no(e,t,i,o){function n(){var i=o.play();ni.noCors=!1,Promise.resolve(i).catch(function(){o=function(e,t){var i=oo(!1);return i.load(e,{loop:t}),i.play(),ii.set(i),ni.noCors=!0,i}(t,!e.bgmNoLoop)})}function r(){var r=0,a=0,c=0;if(i&&o.load(t,{loop:!e.bgmNoLoop}),e.bgmFadeIn&&void 0!==e.bgmFadeInSec&&e.bgmFadeInSec>0){var l=e.bgmFadeInSec/20;ni.lastFadeTime=e.bgmFadeInSec,o.setVolume(0),n(),0!==ni.bgmFadeInterval&&(window.clearInterval(ni.bgmFadeInterval),ni.bgmFadeInterval=0),0!==ni.bgmPlayInterval&&(window.clearInterval(ni.bgmPlayInterval),ni.bgmPlayInterval=0),ni.isFadingOut&&(ni.isFadingOut=!1),ni.bgmFadeInterval=window.setInterval(function(){o.isPlaying()&&(r<app.curVolume?(r+=5,o.setVolume(r),ni.lastFadeTime=ni.lastFadeTime-l):(o.setVolume(app.curVolume),window.clearInterval(ni.bgmFadeInterval),ni.bgmFadeInterval=0,ni.lastFadeTime=0))},l)}else ni.isFadingOut&&(ni.isFadingOut=!1,window.clearInterval(ni.bgmFadeInterval),ni.bgmFadeInterval=0),n(),o.setVolume(app.curVolume);ni.bgmObjectId=e.id,app.showMusicPlayer&&(0!==ni.bgmTitleInterval&&(window.clearInterval(ni.bgmTitleInterval),ni.bgmTitleInterval=0),ni.bgmTitleInterval=window.setInterval(function(){o.getId()!==t||""===o.getTitle()||0===o.getDuration()&&!ni.noCors||(ni.bgmTitle=o.getTitle(),ni.curBgmLength=o.getDuration(),window.clearInterval(ni.bgmTitleInterval),ni.bgmTitleInterval=0)},1e3),0!==ni.bgmPlayInterval&&(window.clearInterval(ni.bgmPlayInterval),ni.bgmPlayInterval=0),ni.bgmPlayInterval=window.setInterval(function(){if(!ni.isSeeking&&o.isPlaying()){var e=Math.floor(o.getCurrentTime());e!==ni.curBgmTime?a!==e?ni.curBgmTime=e:(++c>ni.curBgmLength&&(c=1),ni.curBgmTime=c):(a=e,c=e+1,ni.curBgmTime=c)}},1e3))}if(ni.isFadingOut){var a=ni.lastFadeTime;0!==ni.bgmFadeTimer&&(window.clearTimeout(ni.bgmFadeTimer),ni.bgmFadeTimer=0),ni.bgmFadeTimer=window.setTimeout(function(){r()},a)}else r()}function ro(e,t){var i=app.curVolume/5;if(e.bgmFadeOut&&void 0!==e.bgmFadeOutSec&&e.bgmFadeOutSec>0&&i>0){var o=e.bgmFadeOutSec/i,n=app.curVolume;ni.lastFadeTime=e.bgmFadeOutSec,ni.isFadingOut=!0,0!==ni.bgmFadeInterval&&(window.clearInterval(ni.bgmFadeInterval),ni.bgmFadeInterval=0),ni.bgmFadeInterval=window.setInterval(function(){void 0!==t.setVolume&&(n>0?(n-=5,t.setVolume(n),ni.lastFadeTime-=o):ni.isFadingOut&&(t.pause(),t.setVolume(app.curVolume),window.clearInterval(ni.bgmFadeInterval),ni.bgmFadeInterval=0,ni.lastFadeTime=0,ni.isFadingOut=!1,0!==ni.bgmTitleInterval&&(window.clearInterval(ni.bgmTitleInterval),ni.bgmTitleInterval=0),0!==ni.bgmPlayInterval&&(window.clearInterval(ni.bgmPlayInterval),ni.bgmPlayInterval=0),ni.bgmTitle="No Audio Title",ni.curBgmTime=0,ni.curBgmLength=0))},o)}else t.pause(),0!==ni.bgmTitleInterval&&(window.clearInterval(ni.bgmTitleInterval),ni.bgmTitleInterval=0),0!==ni.bgmPlayInterval&&(window.clearInterval(ni.bgmPlayInterval),ni.bgmPlayInterval=0),ni.bgmTitle="No Audio Title",ni.curBgmTime=0,ni.curBgmLength=0}function ao(e,t,i){var o,n,r=x(oi),a=x(ii);e.useAudioURL?(!a||"audio"!==a.type||a.getId()!==t&&!0===ni.noCors)&&(null===(o=a)||void 0===o||o.stop(),a=oo(!0),ii.set(a)):!r||a&&"youtube"===a.type||(null===(n=a)||void 0===n||n.stop(),a=function(e){return{type:"youtube",load:function(t,i){null!=i&&i.loop?(e.loadPlaylist(t),e.setLoop(!0)):(e.loadVideoById(t),e.setLoop(!1))},play:function(){return e.playVideo()},pause:function(){return e.pauseVideo()},stop:function(){return e.stopVideo()},mute:function(){return e.mute()},unMute:function(){return e.unMute()},setVolume:function(t){return e.setVolume(t)},isPlaying:function(){return 1===e.getPlayerState()},isStopped:function(){return 2===e.getPlayerState()},isMuted:function(){return e.isMuted()},seekTo:function(t){return e.seekTo(t,!0),!0},getCurrentTime:function(){return e.getCurrentTime()},getDuration:function(){return e.getDuration()},getTitle:function(){var t,i;return null!==(t=null===(i=e.playerInfo)||void 0===i||null===(i=i.videoData)||void 0===i?void 0:i.title)&&void 0!==t?t:""},getId:function(){var t,i;return null!==(t=null===(i=e.playerInfo)||void 0===i||null===(i=i.videoData)||void 0===i?void 0:i.video_id)&&void 0!==t?t:""}}}(r),ii.set(a));if(a){var c=ni.bgmIsPlaying;a.getId()===t?ni.bgmObjectId===e.id?c?(a.isStopped()||a.stop(),no(e,t,!1,a)):ro(e,a):c?(a.stop(),no(e,t,!1,a)):ro(e,a):c&&no(e,t,!0,a)}else i<10?window.setTimeout(function(){ao(e,t,++i)},200):console.log("Failed to play bgm")}function co(){return new Promise(function(e){if(window.YT&&window.YT.Player)e(window.YT);else{var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t),window.onYouTubeIframeAPIReady=function(){return e(window.YT)}}})}function lo(e){return so.apply(this,arguments)}function so(){return(so=f(l().m(function e(t){var i,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,co();case 1:i=e.v,o=new i.Player("bgm-player",{width:0,height:0,events:{onReady:function(){oi.set(o),ao(t,t.bgmId||"",0),app.isMute&&!o.isMuted()&&o.mute()}}});case 2:return e.a(2)}},e)}))).apply(this,arguments)}function uo(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==e){if(t)for(var o=["addonBorderRadiusTopLeft","addonBorderRadiusTopRight","addonBorderRadiusBottomLeft","addonBorderRadiusBottomRight","addonImgBorderRadiusTopLeft","addonImgBorderRadiusTopRight","addonImgBorderRadiusBottomLeft","addonImgBorderRadiusBottomRight","objectBorderRadiusTopLeft","objectBorderRadiusTopRight","objectBorderRadiusBottomLeft","objectBorderRadiusBottomRight","objectImgBorderRadiusTopLeft","objectImgBorderRadiusTopRight","objectImgBorderRadiusBottomLeft","objectImgBorderRadiusBottomRight","rowBorderRadiusTopLeft","rowBorderRadiusTopRight","rowBorderRadiusBottomLeft","rowBorderRadiusBottomRight","rowImgBorderRadiusTopLeft","rowImgBorderRadiusTopRight","rowImgBorderRadiusBottomLeft","rowImgBorderRadiusBottomRight"],n=0;n<o.length;n++){var r=o[n];void 0!==e[r]&&(e[r]=10*e[r])}for(var a=["selFilterBgColor","selFilterBorderColor","selFilterCTitleColor","selFilterCTextColor","selFilterATitleColor","selFilterATextColor","selFilterSTextColor","reqFilterBgColor","reqFilterBorderColor","reqFilterCTitleColor","reqFilterCTextColor","reqFilterATitleColor","reqFilterATextColor","reqFilterSTextColor","rowTitleColor","rowTextColor","objectTitleColor","objectTextColor","addonTitleColor","addonTextColor","scoreTextColor","objectImgBorderColor","rowImgBorderColor","addonImgBorderColor","backgroundColor","rowBgColor","objectBgColor","objectDropShadowColor","objectBorderColor","rowDropShadowColor","rowBorderColor","addonDropShadowColor","addonBorderColor","addonBgColor","barTextColor","barIconColor","barBackgroundColor","backpackBgColor","barPointNeg","barPointPos"],c=0;c<a.length;c++){var l=a[c];"object"===u(e[l])&&(e[l]=e[l].hexa)}i&&(void 0===e.customMultiTextFont&&(e.customMultiTextFont=!1),void 0===e.multiChoiceCounterPosition&&(e.multiChoiceCounterPosition=0),void 0===e.multiChoiceCounterSize&&(e.multiChoiceCounterSize=170),void 0===e.multiChoiceTextFont&&(e.multiChoiceTextFont="Times New Roman"),void 0===e.multiChoiceTextSize&&(e.multiChoiceTextSize=100))}}function fo(e,t,i){switch(t){case"1":return e-i;case"2":return e+i;case"3":return e*i;case"4":return e/i;case"5":return i;default:return e}}function vo(e){delete e.tmpDiscount,delete e.discountTextA,delete e.discountTextB,delete e.dupTextA,delete e.dupTextB,delete e.discountedFrom,delete e.discountIsOn,delete e.discountScore,delete e.discountScoreCal,delete e.notStackableDiscount,delete e.discountShow,delete e.discountBeforeText,delete e.discountAfterText,delete e.isChangeDiscount,delete e.tmpDisScore,delete e.appliedDiscount,delete e.replaceText,delete e.hideDisValue,delete e.hideDisIcon}function go(e,t){for(var i=0;i<t.scores.length;i++){var o=t.scores[i],n=o.appliedDiscount;if(!o.isNotDiscountable&&(void 0===e.discountPointTypes||0===e.discountPointTypes.length||-1!==e.discountPointTypes.indexOf(o.id))){var r=Ut.get(o.id);if(void 0!==r&&void 0!==e.discountOperator&&void 0!==e.discountValue){var a=r.allowFloat?o.value:Math.floor(o.value),c=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value;c=r.allowFloat?c:Math.floor(c);var l=0,s=0,u=[],d=!1,f=0;if(e.stackableDiscount){if(o.notStackableDiscount){if(void 0!==o.tmpDiscount){for(var v=0;v<o.tmpDiscount.length;v++)o.tmpDiscount[v].isStackable&&(u=o.tmpDiscount[v].discountedFrom,a=o.tmpDiscount[v].discountedValue,f=v);o.tmpDiscount.splice(f,1)}}else if(void 0!==o.discountedFrom){var g=o.discountedFrom.indexOf(e.id);if(o.discountedFrom.splice(g,1),o.discountedFrom.length>0){var p=!1,m=!1,h=!1;l=a;for(var b=0;b<o.discountedFrom.length;b++){var w=zt.get(o.discountedFrom[b]);if(void 0!==w){var T=w.choice;void 0!==T.discountOperator&&void 0!==T.discountValue&&(l=fo(l,T.discountOperator,T.discountValue),s=l=r.allowFloat?l:Math.floor(l),T.replaceScoreText&&(p=T.replaceScoreText),T.hideScoreValue&&(m=T.hideScoreValue),T.hideScoreIcon&&(h=T.hideScoreIcon),T.discountLowLimitIsOn&&void 0!==T.discountLowLimit&&(l=Math.max(l,T.discountLowLimit)))}}if(e.discountShow){var I=void 0!==e.discountAfterText&&void 0!==o.discountTextA?o.discountTextA.indexOf(e.discountAfterText):-1,S=void 0!==e.discountBeforeText&&void 0!==o.discountTextB?o.discountTextB.indexOf(e.discountBeforeText):-1;if(e.discountTextDuplicated){var y,x;if(-1!==I&&void 0!==o.dupTextA&&void 0!==e.discountAfterText)if(o.dupTextA[e.discountAfterText]-=1,0===o.dupTextA[e.discountAfterText])null===(y=o.discountTextA)||void 0===y||y.splice(I,1),delete o.dupTextA[e.discountAfterText];if(-1!==S&&void 0!==o.dupTextB&&void 0!==e.discountBeforeText)if(o.dupTextB[e.discountBeforeText]-=1,0===o.dupTextB[e.discountBeforeText])null===(x=o.discountTextB)||void 0===x||x.splice(I,1),delete o.dupTextB[e.discountBeforeText]}else-1!==I&&void 0!==o.discountTextA&&(o.discountTextA.splice(I,1),o.discountAfterText=o.discountTextA.join(" ")),-1!==S&&void 0!==o.discountTextB&&(o.discountTextB.splice(S,1),o.discountBeforeText=o.discountTextB.join(" "))}if(o.discountScore=l,o.discountScoreCal=s,o.replaceText=p,o.hideDisValue=m,o.hideDisIcon=h,e.useDiscountCount&&o.appliedDiscount){o.tmpDisScore=c-o.value,t.isActive&&(o.isChangeDiscount=!0);continue}}else{if(void 0!==o.tmpDiscount)for(var C=0;C<o.tmpDiscount.length;C++)o.tmpDiscount[C].isStackable||l>o.tmpDiscount[C].discountedValue&&(u=o.tmpDiscount[C].discountedFrom,s=o.tmpDiscount[C].calcValue,l=o.tmpDiscount[C].discountedValue,f=C,d=!0);d&&void 0!==o.tmpDiscount?0===u.length?o.tmpDiscount.splice(f,1):(o.discountedFrom=u,o.tmpDiscount[f].showDiscount&&(o.discountBeforeText=o.tmpDiscount[f].beforeText,o.discountAfterText=o.tmpDiscount[f].afterText,o.replaceText=o.tmpDiscount[f].replaceText||!1,o.hideDisValue=o.tmpDiscount[f].hideValue||!1,o.hideDisIcon=o.tmpDiscount[f].hideIcon||!1),o.tmpDiscount.splice(f,1),o.notStackableDiscount=!0):vo(o)}}}else if(o.notStackableDiscount)if(void 0!==o.discountedFrom&&o.discountedFrom.length>0&&void 0!==o.tmpDiscount){if(-1!==o.discountedFrom.indexOf(e.id)){if(o.tmpDiscount.length>0){a=o.tmpDiscount[0].discountedValue,d=!0;for(var O=1;O<o.tmpDiscount.length;O++)a>o.tmpDiscount[O].discountedValue&&(a=o.tmpDiscount[O].discountedValue,f=O)}if(d){var A,k;if(o.discountScore=a,o.discountScoreCal=o.tmpDiscount[f].calcValue,o.discountedFrom=o.tmpDiscount[f].discountedFrom,o.notStackableDiscount=!o.tmpDiscount[f].isStackable,o.discountShow=o.tmpDiscount[f].showDiscount,o.tmpDiscount[f].isStackable&&o.tmpDiscount[f].showDiscount)o.discountBeforeText=null===(A=o.discountTextB)||void 0===A?void 0:A.join(""),o.discountAfterText=null===(k=o.discountTextA)||void 0===k?void 0:k.join("");else o.tmpDiscount[f].showDiscount?(o.discountBeforeText=o.tmpDiscount[f].beforeText,o.discountAfterText=o.tmpDiscount[f].afterText,o.replaceText=o.tmpDiscount[f].replaceText||!1,o.hideDisValue=o.tmpDiscount[f].hideValue||!1,o.hideDisIcon=o.tmpDiscount[f].hideIcon||!1):(o.discountBeforeText="",o.discountAfterText="",o.replaceText=!1,o.hideDisValue=!1,o.hideDisIcon=!1);o.tmpDiscount.splice(f,1)}else vo(o)}else for(var B=0;B<o.tmpDiscount.length;B++)if(-1!==o.tmpDiscount[B].discountedFrom.indexOf(e.id)){o.tmpDiscount.splice(B,1);break}}else vo(o);else if(void 0!==o.tmpDiscount){if(o.tmpDiscount=o.tmpDiscount.filter(function(t){return-1!==t.discountedFrom.indexOf(e.id)}),o.tmpDiscount.length>0){a=o.tmpDiscount[0].discountedValue,d=!0;for(var M=1;M<o.tmpDiscount.length;M++)a>o.tmpDiscount[M].discountedValue&&(a=o.tmpDiscount[M].discountedValue,f=M)}if(d){var D,F;if(o.discountScore=a,o.discountScoreCal=o.tmpDiscount[f].calcValue,o.discountedFrom=o.tmpDiscount[f].discountedFrom,o.notStackableDiscount=!o.tmpDiscount[f].isStackable,o.notStackableDiscount)o.tmpDiscount[f].showDiscount?(o.discountBeforeText=o.tmpDiscount[f].beforeText,o.discountAfterText=o.tmpDiscount[f].afterText,o.replaceText=o.tmpDiscount[f].replaceText||!1,o.hideDisValue=o.tmpDiscount[f].hideValue||!1,o.hideDisIcon=o.tmpDiscount[f].hideIcon||!1):(o.discountBeforeText="",o.discountAfterText="",o.replaceText=!1,o.hideDisValue=!1,o.hideDisIcon=!1);else o.discountBeforeText=null===(D=o.discountTextB)||void 0===D?void 0:D.join(""),o.discountAfterText=null===(F=o.discountTextA)||void 0===F?void 0:F.join("");o.tmpDiscount.splice(f,1)}else vo(o)}else vo(o);var R=void 0!==o.discountScore?o.discountScore:o.value;(R=r.allowFloat?R:Math.floor(R))!==c&&n?(o.tmpDisScore=c-R,t.isActive&&(o.isChangeDiscount=!0)):t.isActive&&(o.isChangeDiscount=!1)}}}}function po(e,t){for(var i=0;i<t.scores.length;i++){var o=t.scores[i];if(!o.isNotDiscountable&&(void 0===e.discountPointTypes||0===e.discountPointTypes.length||-1!==e.discountPointTypes.indexOf(o.id))){var n=Ut.get(o.id);if(void 0!==n&&void 0!==e.discountOperator&&void 0!==e.discountValue){var r=n.allowFloat?o.value:Math.floor(o.value),a=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:r,c=0,l=0,s=[],u=void 0,d=!1,f=0;if(void 0===o.discountedFrom&&(o.discountedFrom=[]),e.stackableDiscount)if(o.notStackableDiscount){if(void 0!==o.tmpDiscount){for(var g=0;g<o.tmpDiscount.length;g++)o.tmpDiscount[g].isStackable&&((s=o.tmpDiscount[g].discountedFrom).push(e.id),r=o.tmpDiscount[g].discountedValue,d=!0,f=g);var p;if(c=fo(r,e.discountOperator,e.discountValue),l=c=n.allowFloat?c:Math.floor(c),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(c=Math.max(c,e.discountLowLimit)),void 0!==o.discountScore&&o.discountScore>c)o.tmpDisScore=o.discountScore-c,t.isActive&&(o.isChangeDiscount=!0),u={isStackable:!1,discountedFrom:o.discountedFrom,calcValue:void 0!==o.discountScoreCal?o.discountScoreCal:o.discountScore,discountedValue:o.discountScore,showDiscount:!1,replaceText:!1,hideValue:!1,hideIcon:!1},o.discountShow&&(u.showDiscount=!0,u.beforeText=e.discountBeforeText,u.afterText=e.discountAfterText,e.replaceScoreText&&(u.replaceText=!0),e.hideScoreValue&&(u.hideValue=!0),e.hideScoreIcon&&(u.hideIcon=!0)),o.discountScore=c,o.discountScoreCal=l,e.discountShow&&(o.discountShow=!0,mo(e,o)),void 0!==o.discountTextA&&(o.discountAfterText=o.discountTextA.join(" ")),void 0!==o.discountTextB&&(o.discountBeforeText=o.discountTextB.join(" ")),(p=o.discountedFrom).push.apply(p,v(s)),d&&o.tmpDiscount.splice(f,1),o.tmpDiscount.push(u),o.notStackableDiscount=!1;else t.isActive&&(o.isChangeDiscount=!1),s.push(e.id),e.discountShow&&mo(e,o),d?(o.tmpDiscount[f].discountedFrom=s,o.tmpDiscount[f].calcValue=l,o.tmpDiscount[f].discountedValue=c):(u={isStackable:e.stackableDiscount||!1,discountedFrom:s,calcValue:l,discountedValue:c,showDiscount:e.discountShow||!1,replaceText:e.replaceScoreText||!1,hideValue:e.hideScoreValue||!1,hideIcon:e.hideScoreIcon||!1},o.tmpDiscount.push(u))}}else r=o.discountIsOn&&void 0!==o.discountScoreCal?o.discountScoreCal:o.value,r=n.allowFloat?r:Math.floor(r),a=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value,a=n.allowFloat?a:Math.floor(a),c=fo(r,e.discountOperator,e.discountValue),l=c=n.allowFloat?c:Math.floor(c),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(c=Math.max(c,e.discountLowLimit)),Array.isArray(o.discountedFrom)||(o.discountedFrom=[]),o.discountScore=c,o.discountScoreCal=l,o.discountedFrom.push(e.id),o.discountScore!==a?(o.tmpDisScore=a-o.discountScore,t.isActive&&(o.isChangeDiscount=!0)):!o.appliedDiscount&&e.useDiscountCount&&e.discountCount?(void 0===e.appliedDisChoices&&(e.appliedDisChoices=[]),o.tmpDisScore=o.value-o.discountScore,t.isActive&&(o.isChangeDiscount=!0)):t.isActive&&(o.isChangeDiscount=!1),o.discountIsOn||(o.discountIsOn=!0),e.discountShow&&(o.discountShow=!0,mo(e,o)),void 0!==o.discountTextA&&(o.discountAfterText=o.discountTextA.join(" ")),void 0!==o.discountTextB&&(o.discountBeforeText=o.discountTextB.join(" "));else void 0===o.tmpDiscount&&(o.tmpDiscount=[]),c=fo(r,e.discountOperator,e.discountValue),l=c=n.allowFloat?c:Math.floor(c),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(c=Math.max(c,e.discountLowLimit)),o.discountIsOn?void 0!==o.discountScore&&(o.discountScore>c?(u={isStackable:!o.notStackableDiscount,discountedFrom:o.discountedFrom,calcValue:void 0!==o.discountScoreCal?o.discountScoreCal:o.discountScore,discountedValue:o.discountScore,showDiscount:o.discountShow||!1},o.discountShow&&(u.showDiscount=!0,u.beforeText=o.discountBeforeText,u.afterText=o.discountAfterText,u.replaceText=o.replaceText||!1,u.hideValue=o.hideDisValue||!1,u.hideIcon=o.hideDisIcon||!1),o.discountScore=c,o.discountScoreCal=l,o.discountShow=e.discountShow,o.discountBeforeText=e.discountBeforeText,o.discountAfterText=e.discountAfterText,o.discountedFrom=[e.id],o.notStackableDiscount=!0,o.replaceText=e.replaceScoreText||!1,o.hideDisValue=e.hideScoreValue||!1,o.hideDisIcon=e.hideScoreIcon||!1):(u={isStackable:e.stackableDiscount||!1,discountedFrom:[e.id],calcValue:l,discountedValue:c,showDiscount:e.discountShow||!1,replaceText:o.replaceText||!1,hideValue:o.hideDisValue||!1,hideIcon:o.hideDisIcon||!1},e.discountShow&&(u.showDiscount=!0,u.beforeText=e.discountBeforeText,u.afterText=e.discountAfterText,e.replaceScoreText&&(u.replaceText=!0),e.hideScoreValue&&(u.hideValue=!0),e.hideScoreIcon&&(u.hideIcon=!0))),o.tmpDiscount.push(u)):(o.discountScore=c,o.discountScoreCal=l,e.discountShow&&(o.discountShow=e.discountShow,o.discountBeforeText=e.discountBeforeText,o.discountAfterText=e.discountAfterText,o.replaceText=e.replaceScoreText||!1,o.hideDisValue=e.hideScoreValue||!1,o.hideDisIcon=e.hideScoreIcon||!1),Array.isArray(o.discountedFrom)||(o.discountedFrom=[]),o.discountIsOn=!0,o.discountedFrom.push(e.id),o.notStackableDiscount=!0),void 0!==o.discountScore&&o.discountScore!==a?(o.tmpDisScore=a-o.discountScore,t.isActive&&(o.isChangeDiscount=!0)):t.isActive&&(o.isChangeDiscount=!1)}}}}function mo(e,t){void 0===t.discountTextA&&(t.discountTextA=[]),void 0===t.discountTextB&&(t.discountTextB=[]),void 0===t.dupTextA&&(t.dupTextA={}),void 0===t.dupTextB&&(t.dupTextB={}),e.discountTextDuplicated?(void 0!==e.discountAfterText&&(-1!==t.discountTextA.indexOf(e.discountAfterText)?t.dupTextA[e.discountAfterText]=(t.dupTextA[e.discountAfterText]||0)+1:(t.dupTextA[e.discountAfterText]=1,t.discountTextA.push(e.discountAfterText))),void 0!==e.discountBeforeText&&(-1!==t.discountTextB.indexOf(e.discountBeforeText)?t.dupTextB[e.discountBeforeText]=(t.dupTextB[e.discountBeforeText]||0)+1:(t.dupTextB[e.discountBeforeText]=1,t.discountTextB.push(e.discountBeforeText)))):(void 0!==e.discountAfterText&&t.discountTextA.push(e.discountAfterText),void 0!==e.discountBeforeText&&t.discountTextB.push(e.discountBeforeText)),t.replaceText=e.replaceScoreText||!1,t.hideDisValue=e.hideScoreValue||!1,t.hideDisIcon=e.hideScoreIcon||!1}function ho(e,t){if(t.discountedFrom&&t.discountedFrom.length>0)for(var i=0;i<t.discountedFrom.length;i++){var o=zt.get(t.discountedFrom[i]);if(void 0!==o){var n=o.choice,r=fo(t.value,n.discountOperator,n.discountValue),a=r=e.allowFloat?r:Math.floor(r);n.discountLowLimitIsOn&&void 0!==n.discountLowLimit&&(r=Math.max(r,n.discountLowLimit)),t.discountScore=r,t.discountScoreCal=a}}}function bo(e,t){var i=!0,o=new Map,n=new d(JSON.parse(JSON.stringify(v(Wt)))),r=n.get(e.id);t?e.isSelectableMultiple&&e.isMultipleUseVariable?void 0!==r?r.multiple+=1:n.set(e.id,{multiple:e.multipleUseVariable+1}):n.set(e.id,{multiple:0}):void 0!==r&&n.delete(e.id);for(var a=0;a<e.scores.length;a++){var l=e.scores[a],s=Ut.get(l.id);if(void 0!==s){if(l.useExpression&&!l.setValue){if(l.isRandom&&l.expMinValue&&l.expMaxValue)try{var u=l.expMinValue.replace(/\{([^{}]+)\}/g,function(e,t){var i=o.get(t);if(void 0!==i)return"".concat(i);var n=Ut.get(t);if(void 0!==n)return"".concat(n.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))}),f=l.expMaxValue.replace(/\{([^{}]+)\}/g,function(e,t){var i=o.get(t);if(void 0!==i)return"".concat(i);var n=Ut.get(t);if(void 0!==n)return"".concat(n.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))}),g=C(u),p=C(f);l.value=Math.floor(Math.random()*(p-g+1))+g,l.value=s.allowFloat?l.value:Math.floor(l.value),l.setValue=!0,e.isSelectableMultiple&&e.isMultipleUseVariable&&(void 0===l.mulValue&&(l.mulValue=[]),l.mulValue.push(l.value))}catch(c){console.error(c)}else if(l.expValue)try{var m=l.expValue.replace(/\{([^{}]+)\}/g,function(e,t){var i=o.get(t);if(void 0!==i)return"".concat(i);var n=Ut.get(t);if(void 0!==n)return"".concat(n.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});l.value=C(m),l.value=s.allowFloat?l.value:Math.floor(l.value),l.setValue=!0,e.isSelectableMultiple&&e.isMultipleUseVariable&&(void 0===l.mulValue&&(l.mulValue=[]),l.mulValue.push(l.value))}catch(c){console.error(c)}}else l.isRandom&&!l.setValue&&wo(s,l);var h=l.discountIsOn&&void 0!==l.discountScore&&l.appliedDiscount?l.discountScore:l.value;if(l.multiplyByTimes&&(h*=Math.abs(e.multipleUseVariable)+1),io(l.requireds,n)&&!l.isActive){var b=o.get(l.id);void 0!==b?(s.belowZeroNotAllowed&&(i=i&&(t?b-h>=0:b+h>=0)),o.set(l.id,b-h)):(s.belowZeroNotAllowed&&(i=i&&(t?s.startingSum-h>=0:s.startingSum+h>=0)),o.set(l.id,s.startingSum-h))}}}if(e.multiplyPointtypeIsOnCheck&&void 0!==e.pointTypeToMultiply)for(var w=0,T=0;T<e.pointTypeToMultiply.length;T++){var I=Ut.get(e.pointTypeToMultiply[T]);if(void 0!==I&&I.belowZeroNotAllowed){for(var S=I.startingSum,y=Kt.length-1;y>=0;y--){var x=Kt[y];if(x.multiplyPointtypeIsOnCheck&&void 0!==x.startingSumAtMultiply){var O=x.startingSumAtMultiply[T].value*x.startingSumAtMultiply[T].calcVal;S-=O=I.allowFloat?O:Math.floor(O),S+=x.startingSumAtMultiply[T].value}if(x.dividePointtypeIsOnCheck&&void 0!==x.startingSumAtDivide){var A=x.startingSumAtDivide[T].value/x.startingSumAtDivide[T].calcVal;S-=A=I.allowFloat?A:Math.floor(A),S+=x.startingSumAtDivide[T].value}if(x.setPointtypeIsOnCheck&&void 0!==x.startingSumAtSet&&(S=x.startingSumAtSet[T].value),x.id===e.id){w=y;break}}for(var k=w+1;k<Kt.length;k++){var B=Kt[k];B.multiplyPointtypeIsOnCheck&&void 0!==B.startingSumAtMultiply&&(S*=B.startingSumAtMultiply[T].calcVal,S=I.allowFloat?S:Math.floor(S)),B.dividePointtypeIsOnCheck&&void 0!==B.startingSumAtDivide&&(S/=B.startingSumAtDivide[T].calcVal,S=I.allowFloat?S:Math.floor(S)),B.setPointtypeIsOnCheck&&void 0!==B.startingSumAtSet&&(S=B.startingSumAtSet[T].calcVal,S=I.allowFloat?S:Math.floor(S))}i=i&&S>=0}}if(e.dividePointtypeIsOnCheck&&void 0!==e.pointTypeToDivide)for(var M=0,D=0;D<e.pointTypeToDivide.length;D++){var F=Ut.get(e.pointTypeToDivide[D]);if(void 0!==F&&F.belowZeroNotAllowed){for(var R=F.startingSum,j=Kt.length-1;j>=0;j--){var q=Kt[j];if(q.multiplyPointtypeIsOnCheck&&void 0!==q.startingSumAtMultiply){var P=q.startingSumAtMultiply[D].value*q.startingSumAtMultiply[D].calcVal;R-=P=F.allowFloat?P:Math.floor(P),R+=q.startingSumAtMultiply[D].value}if(q.dividePointtypeIsOnCheck&&void 0!==q.startingSumAtDivide){var $=q.startingSumAtDivide[D].value/q.startingSumAtDivide[D].calcVal;R-=$=F.allowFloat?$:Math.floor($),R+=q.startingSumAtDivide[D].value}if(q.setPointtypeIsOnCheck&&void 0!==q.startingSumAtSet&&(R=q.startingSumAtSet[D].value),q.id===e.id){M=j;break}}for(var V=M+1;V<Kt.length;V++){var N=Kt[V];N.multiplyPointtypeIsOnCheck&&void 0!==N.startingSumAtMultiply&&(R*=N.startingSumAtMultiply[D].calcVal,R=F.allowFloat?R:Math.floor(R)),N.dividePointtypeIsOnCheck&&void 0!==N.startingSumAtDivide&&(R/=N.startingSumAtDivide[D].calcVal,R=F.allowFloat?R:Math.floor(R)),N.setPointtypeIsOnCheck&&void 0!==N.startingSumAtSet&&(R=N.startingSumAtSet[D].calcVal,R=F.allowFloat?R:Math.floor(R))}i=i&&R>=0}}if(e.setPointtypeIsOnCheck&&void 0!==e.pointTypeToSet)for(var W=0,E=0;E<e.pointTypeToSet.length;E++){var U=Ut.get(e.pointTypeToSet[E]);if(void 0!==U&&U.belowZeroNotAllowed){for(var L=U.startingSum,z=Kt.length-1;z>=0;z--){var G=Kt[z];if(G.multiplyPointtypeIsOnCheck&&void 0!==G.startingSumAtMultiply){var _=G.startingSumAtMultiply[E].value*G.startingSumAtMultiply[E].calcVal;L-=_=U.allowFloat?_:Math.floor(_),L+=G.startingSumAtMultiply[E].value}if(G.dividePointtypeIsOnCheck&&void 0!==G.startingSumAtDivide){var H=G.startingSumAtDivide[E].value/G.startingSumAtDivide[E].calcVal;L-=H=U.allowFloat?H:Math.floor(H),L+=G.startingSumAtDivide[E].value}if(G.setPointtypeIsOnCheck&&void 0!==G.startingSumAtSet&&(L=G.startingSumAtSet[E].value),G.id===e.id){W=z;break}}for(var Y=W+1;Y<Kt.length;Y++){var J=Kt[Y];J.multiplyPointtypeIsOnCheck&&void 0!==J.startingSumAtMultiply&&(L*=J.startingSumAtMultiply[E].calcVal,L=U.allowFloat?L:Math.floor(L)),J.dividePointtypeIsOnCheck&&void 0!==J.startingSumAtDivide&&(L/=J.startingSumAtDivide[E].calcVal,L=U.allowFloat?L:Math.floor(L)),J.setPointtypeIsOnCheck&&void 0!==J.startingSumAtSet&&(L=J.startingSumAtSet[E].calcVal,L=U.allowFloat?L:Math.floor(L))}i=i&&L>=0}}return i}function wo(e,t){t.isRandom&&void 0!==t.maxValue&&void 0!==t.minValue&&(t.value=Math.floor(Math.random()*(t.maxValue-t.minValue+1))+t.minValue,t.value=e.allowFloat?t.value:Math.floor(t.value),t.setValue=!0)}function To(){var e=new Set,t=new Set;function i(o){if(o.activateOtherChoice&&void 0!==o.activateThisChoice)if(o.activatedRandom){if(o.isSelectableMultiple){for(var n=0;n<o.multipleUseVariable;n++)if(void 0!==o.activatedRandomMul)for(var r=0;r<o.activatedRandomMul[r].length;r++){var a=o.activatedRandomMul[n][r].split("/ON#"),c=zt.get(a[0]);if(void 0!==c){var l=c.choice;if(Wt.has(l.id)||o.activateAfterReset)o.isAllowDeselect&&!o.activateAfterReset||(o.activateAfterReset&&t.add(l.id),e.add(l.id),a.length>1&&l.isSelectableMultiple&&(void 0===l.tempMultipleValue?l.tempMultipleValue=parseInt(a[1]):l.tempMultipleValue+=parseInt(a[1])),i(l));else{var s=Et.get(l.id);void 0!==s?a.length>1&&(s.multiple+=parseInt(a[1])):Et.set(l.id,{multiple:a.length>1?parseInt(a[1]):0,isAllowDeselect:l.isAllowDeselect||!1})}}}}else if(void 0!==o.activatedRandom)for(var u=0;u<o.activatedRandom.length;u++){var d=o.activatedRandom[u].split("/ON#"),f=zt.get(d[0]);if(void 0!==f){var v=f.choice;if(Wt.has(v.id)||o.activateAfterReset)o.isAllowDeselect&&!o.activateAfterReset||(o.activateAfterReset&&t.add(v.id),e.add(v.id),d.length>1&&v.isSelectableMultiple&&(void 0===v.tempMultipleValue?v.tempMultipleValue=parseInt(d[1]):v.tempMultipleValue+=parseInt(d[1])),i(v));else{var g=Et.get(v.id);void 0!==g?d.length>1&&(g.multiple+=parseInt(d[1])):Et.set(v.id,{multiple:d.length>1?parseInt(d[1]):0,isAllowDeselect:v.isAllowDeselect||!1})}}}}else for(var p=o.activateThisChoice.split(","),m=0;m<p.length;m++){var h=p[m].split("/ON#"),b=zt.get(h[0]);if(void 0!==b){var w=b.choice;if(Wt.has(w.id)||o.activateAfterReset)o.isAllowDeselect&&!o.activateAfterReset||(o.activateAfterReset&&t.add(w.id),e.add(w.id),h.length>1&&w.isSelectableMultiple&&(void 0===w.tempMultipleValue?w.tempMultipleValue=parseInt(h[1]):w.tempMultipleValue+=parseInt(h[1])),i(w));else{var T=Et.get(w.id);void 0!==T?h.length>1&&(T.multiple+=parseInt(h[1])):Et.set(w.id,{multiple:h.length>1?parseInt(h[1]):0,isAllowDeselect:o.isAllowDeselect||!1})}}}}function o(e){if(delete e.activatedRandom,delete e.activatedRandomMul,e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var t=0;t<e.hiddenContentsRow.length;t++){var i=Lt.get(e.hiddenContentsRow[t]);if(void 0!==i)for(var o=0;o<e.hiddenContentsType.length;o++)switch(e.hiddenContentsType[o]){case"1":delete i.objectTitleRemoved;break;case"2":delete i.objectImageRemoved;break;case"3":delete i.objectTextRemoved;break;case"4":delete i.objectScoreRemoved;break;case"5":delete i.objectRequirementRemoved;break;case"6":delete i.addonTitleRemoved;break;case"7":delete i.addonImageRemoved;break;case"8":delete i.addonTextRemoved}}if(e.isChangeVariables&&void 0!==e.changedVariables)for(var n=0;n<e.changedVariables.length;n++){var r=Yt.get(e.changedVariables[n]);void 0!==r&&("1"===e.changeType?r.isTrue=!0:"2"===e.changeType?r.isTrue=!1:"3"===e.changeType&&(r.isTrue=!r.isTrue))}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){var a=Ht.get(e.idOfTheTextfieldWord);void 0!==a&&(a.replaceText=void 0===e.wordChangeDeselect?"":e.wordChangeDeselect)}if(e.isImageUpload&&void 0!==e.defaultImage&&(e.image=e.defaultImage),e.setBgmIsOn&&ii&&e.bgmId){var c=x(ii);c&&c.getId()===e.bgmId&&(c.stop(),ni.bgmIsPlaying=!1,0!==ni.bgmFadeInterval&&(window.clearInterval(ni.bgmFadeInterval),ni.bgmFadeInterval=0),0!==ni.bgmTitleInterval&&(window.clearInterval(ni.bgmTitleInterval),ni.bgmTitleInterval=0),0!==ni.bgmPlayInterval&&(window.clearInterval(ni.bgmPlayInterval),ni.bgmPlayInterval=0),ni.lastFadeTime=0,ni.isFadingOut=!1,ni.bgmTitle="No Audio Title",ni.curBgmTime=0,ni.curBgmLength=0)}void 0!==e.initMultipleTimesMinus&&(e.numMultipleTimesMinus=e.initMultipleTimesMinus),e.multipleUseVariable=0,e.isActive=!1,Wt.delete(e.id)}Et.clear(),Array.from(Wt.entries()).forEach(function(t){var o=g(t,1)[0],n=zt.get(o);if(void 0!==n){var r=n.choice;(r.notDeselectedByClean||r.isAutoActive)&&(e.add(r.id),i(r))}else{var a=Yt.get(o);void 0!==a&&(a.isTrue=!a.isTrue),Wt.delete(o)}});var n,r=new Set,a=w(Wt.keys());try{for(a.s();!(n=a.n()).done;){var c=n.value;r.add(c)}}catch(Je){a.e(Je)}finally{a.f()}var l,s=w(zt);try{for(s.s();!(l=s.n()).done;){var d=g(l.value,2),f=d[0],p=d[1];p.choice.isActive?r.add(f):p.choice.isAutoActive&&Et.set(f,{multiple:0})}}catch(Je){s.e(Je)}finally{s.f()}for(var m=[].concat(v(r),v(t)),h=m.length-1;h>=0;h--){var b=zt.get(m[h]);if(void 0!==b){var T=b.choice;if(delete T.multiplyPointtypeIsOnCheck,delete T.startingSumAtMultiply,delete T.dividePointtypeIsOnCheck,delete T.startingSumAtDivide,delete T.numDiscountChoices,delete T.appliedDisChoices,T.addToAllowChoice&&void 0!==T.idOfAllowChoice&&void 0!==T.numbAddToAllowChoice)for(var I=0;I<T.idOfAllowChoice.length;I++){var S=Lt.get(T.idOfAllowChoice[I]);void 0!==S&&(S.allowedChoices-=T.numbAddToAllowChoice)}if(T.muteBgm&&ii){var y=x(ii);app.isMute=!1,y&&"function"==typeof y.unMute&&y.unMute()}e.has(T.id)?(T.isSelectableMultiple&&T.isMultipleUseVariable&&void 0!==T.tempMultipleValue&&(T.multipleUseVariable=T.tempMultipleValue,delete T.tempMultipleValue),t.has(T.id)&&(T.isActive=!0,Wt.set(T.id,{multiple:T.isSelectableMultiple&&T.isMultipleUseVariable?T.multipleUseVariable:0}))):o(T)}else Wt.delete(m[h])}for(var C=0;C<app.pointTypes.length;C++){var O=app.pointTypes[C];O.startingSum=O.initValue}for(var A=0;A<app.rows.length;A++){var k=app.rows[A];k.isEditModeOn=!1,k.currentChoices=0,k.index=A,delete k.isSimpleEditMode,delete k.templateStack,delete k.widthStack;for(var B=0;B<k.objects.length;B++){var M=k.objects[B];M.index=B,delete M.isEditModeOn,void 0!==M.defaultTemplate&&(M.template=M.defaultTemplate),void 0!==M.defaultWidth&&(M.width=M.defaultWidth),M.isActive||(delete M.forcedActivated,delete M.activatedFrom,delete M.numDiscountChoices,delete M.appliedDisChoices),delete M.templateStack,delete M.widthStack;for(var D=0;D<M.scores.length;D++){var F=M.scores[D];M.isSelectableMultiple?(delete F.isActiveMul,delete F.isActiveMulMinus):delete F.isActive,M.notDeselectedByClean||delete F.setValue,vo(F)}}}for(var R=0;R<app.backpack.length;R++){var j=app.backpack[R];j.isEditModeOn=!1,j.currentChoices=0,j.index=R,delete j.isSimpleEditMode,delete j.templateStack,delete j.widthStack;for(var q=0;q<j.objects.length;q++){var P=j.objects[q];P.index=q,delete P.isEditModeOn,void 0!==P.defaultTemplate&&(P.template=P.defaultTemplate),void 0!==P.defaultWidth&&(P.width=P.defaultWidth),P.isActive||(delete P.forcedActivated,delete P.activatedFrom,delete P.numDiscountChoices,delete P.appliedDisChoices),delete P.templateStack,delete P.widthStack;for(var $=0;$<P.scores.length;$++){var V=P.scores[$];P.isSelectableMultiple?(delete V.isActiveMul,delete V.isActiveMulMinus):delete V.isActive,P.notDeselectedByClean||delete V.setValue,vo(V)}}}if(void 0!==app.defaultBgColor&&(app.styling.backgroundColor=app.defaultBgColor,delete app.defaultBgColor),void 0!==app.defaultBgImage&&(app.styling.backgroundImage=app.defaultBgImage,delete app.defaultBgImage),void 0!==app.defaultBarBgColor&&(app.styling.barBackgroundColor=app.defaultBarBgColor,delete app.defaultBarBgColor),void 0!==app.defaultBarIconColor&&(app.styling.barIconColor=app.defaultBarIconColor,delete app.defaultBarIconColor),void 0!==app.defaultBarTextColor&&(app.styling.barTextColor=app.defaultBarTextColor,delete app.defaultBarTextColor),delete app.bgColorStack,delete app.bgImageStack,delete app.barBgColorStack,delete app.barIconColorStack,delete app.barTextColorStack,app.btnBackpackIsOn=0,app.showAllAddons=0,app.isMute=!1,app.curVolume=100,ii){var N=x(ii);N&&"function"==typeof N.unMute&&N.unMute()}Kt.splice(0),m=v(Wt.keys());for(var W=0;W<m.length;W++){var E=zt.get(m[W]);if(void 0!==E){var U=E.choice;if(io(U.requireds)&&bo(U,!0)){if(U.discountOther&&void 0!==U.discountOperator&&void 0!==U.discountValue)if(U.isDisChoices){if(void 0!==U.discountChoices)for(var L=0;L<U.discountChoices.length;L++){var z=zt.get(U.discountChoices[L]);void 0!==z&&po(U,z.choice)}}else if(void 0!==U.discountGroups)for(var G=0;G<U.discountGroups.length;G++){var _=Gt.get(U.discountGroups[G]);if(void 0!==_)for(var H=0;H<_.elements.length;H++){var Y=zt.get(_.elements[H]);void 0!==Y&&po(U,Y.choice)}}if(U.addToAllowChoice&&void 0!==U.idOfAllowChoice&&void 0!==U.numbAddToAllowChoice)for(var J=0;J<U.idOfAllowChoice.length;J++){var Z=Lt.get(U.idOfAllowChoice[J]);void 0!==Z&&(Z.allowedChoices+=U.numbAddToAllowChoice)}}else{var X=U.multipleUseVariable||0;delete U.forcedActivated,delete U.activatedFrom,delete U.numDiscountChoices,delete U.appliedDisChoices,o(U),Et.set(U.id,{multiple:X})}}}for(var K=0;K<m.length;K++){var Q=zt.get(m[K]);if(void 0!==Q){var ee=Q.choice,te=Q.row;if(io(ee.requireds)&&bo(ee,!0)){for(var ie=0;ie<ee.scores.length;ie++){var oe=ee.scores[ie],ne=Ut.get(oe.id);if(void 0!==ne)if(ee.isSelectableMultiple&&ee.isMultipleUseVariableultiple)for(var re=0;re<ee.multipleUseVariable;re++)io(oe.requireds)&&(void 0===oe.isActiveMul&&(oe.isActiveMul=[]),oe.isActiveMul[re]||(oe.multiplyByTimes?ne.startingSum-=oe.discountIsOn&&void 0!==oe.discountScore?oe.discountScore*(re+1):oe.value*(re+1):ne.startingSum-=oe.discountIsOn&&void 0!==oe.discountScore?oe.discountScore:oe.value,oe.isActiveMul[re]=!0));else ee.isSelectableMultiple||io(oe.requireds)&&!oe.isActive&&(ne.startingSum-=oe.discountIsOn&&void 0!==oe.discountScore?oe.discountScore:oe.value,oe.isActive=!0)}if(ee.multiplyPointtypeIsOn&&void 0!==ee.pointTypeToMultiply&&void 0!==ee.multiplyWithThis){var ae=0;ee.multiplyPointtypeIsOnCheck=!0,"object"!==u(ee.startingSumAtMultiply)&&(ee.startingSumAtMultiply=[]);for(var ce=0;ce<ee.pointTypeToMultiply.length;ce++){var le=Ut.get(ee.pointTypeToMultiply[ce]);if(void 0!==le)if(ee.multiplyPointtypeIsId&&"string"==typeof ee.multiplyWithThis){var se=Ut.get(ee.multiplyWithThis);void 0!==se?(ee.startingSumAtMultiply[ce]={value:le.startingSum,calcVal:se.startingSum},le.startingSum*=se.startingSum):ae++}else"number"==typeof ee.multiplyWithThis&&(ee.startingSumAtMultiply[ce]={value:le.startingSum,calcVal:ee.multiplyWithThis},le.startingSum*=ee.multiplyWithThis);else ae++}ae===ee.pointTypeToMultiply.length&&delete ee.multiplyPointtypeIsOnCheck,ee.multiplyPointtypeIsOnCheck&&Kt.push(ee)}if(ee.dividePointtypeIsOn&&void 0!==ee.pointTypeToDivide&&void 0!==ee.divideWithThis){var ue=0;ee.dividePointtypeIsOnCheck=!0,"object"!==u(ee.startingSumAtDivide)&&(ee.startingSumAtDivide=[]);for(var de=0;de<ee.pointTypeToDivide.length;de++){var fe=Ut.get(ee.pointTypeToDivide[de]);if(void 0!==fe)if(ee.dividePointtypeIsId&&"string"==typeof ee.divideWithThis){var ve=Ut.get(ee.divideWithThis);void 0!==ve?0===ve.startingSum?ue++:(ee.startingSumAtDivide[de]={value:fe.startingSum,calcVal:ve.startingSum},fe.startingSum/=ve.startingSum):ue++}else"number"==typeof ee.divideWithThis&&(0===ee.dividedWithThis?ue++:(ee.startingSumAtDivide[de]={value:fe.startingSum,calcVal:ee.divideWithThis},fe.startingSum/=ee.divideWithThis));else ue++}ue===ee.pointTypeToDivide.length&&delete ee.dividePointtypeIsOnCheck,!ee.multiplyPointtypeIsOnCheck&&ee.dividePointtypeIsOnCheck&&Kt.push(ee)}if(ee.changeBackground&&(ee.changeBgImage?void 0!==ee.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:ee.id,data:ee.bgImage}),app.styling.backgroundImage=ee.bgImage):void 0!==ee.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:ee.id,data:ee.changedBgColorCode}),app.styling.backgroundColor=ee.changedBgColorCode)),ee.changePointBar&&(ee.changeBarBgColorIsOn&&void 0!==ee.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:ee.id,data:ee.changedBarBgColor}),app.styling.barBackgroundColor=ee.changedBarBgColor),ee.changeBarIconColorIsOn&&void 0!==ee.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:ee.id,data:ee.changedBarIconColor}),app.styling.barIconColor=ee.changedBarIconColor),ee.changeBarTextColorIsOn&&void 0!==ee.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:ee.id,data:ee.changedBarTextColor}),app.styling.barTextColor=ee.changedBarTextColor)),ee.changeTemplates&&ee.changeTemplatesList&&ee.changeToThisTemplate)for(var ge=ee.changeTemplatesList.split(","),pe=0;pe<ge.length;pe++){var me=ge[pe],he=zt.get(me);if(void 0===he){var be=Lt.get(me);if(void 0===be){var we=Gt.get(me);if(void 0===we);else{for(var Te=we.rowElements,Ie=0;Ie<Te.length;Ie++){var Se=Lt.get(Te[Ie]);void 0!==Se&&wn(Se,ee.id,ee.changeToThisTemplate)}for(var ye=we.elements,xe=0;xe<ye.length;xe++){var Ce=zt.get(ye[xe]);if(void 0!==Ce)wn(Ce.choice,ee.id,ee.changeToThisTemplate)}}}else wn(be,ee.id,ee.changeToThisTemplate)}else{var Oe=he.choice;if(wn(Oe,ee.id,ee.changeToThisTemplate),ee.changeAddonTemplate)for(var Ae=0;Ae<Oe.addons.length;Ae++){wn(Oe.addons[Ae],ee.id,ee.changeToThisTemplate)}}}if(ee.changeWidth&&ee.changeWidthList&&ee.changeToThisWidth)for(var ke=ee.changeWidthList.split(","),Be=0;Be<ke.length;Be++){var Me=ke[Be],De=zt.get(Me);if(void 0===De){var Fe=Lt.get(Me);if(void 0===Fe){var Re=Gt.get(Me);if(void 0===Re);else{for(var je=Re.rowElements,qe=0;qe<je.length;qe++){var Pe=Lt.get(je[qe]);void 0!==Pe&&In(Pe,ee.id,ee.changeToThisWidth)}for(var $e=Re.elements,Ve=0;Ve<$e.length;Ve++){var Ne=zt.get($e[Ve]);if(void 0!==Ne)In(Ne.choice,ee.id,ee.changeToThisWidth)}}}else In(Fe,ee.id,ee.changeToThisWidth)}else{In(De.choice,ee.id,ee.changeToThisWidth)}}if(ee.muteBgm&&ii){var We=x(ii);app.isMute=!0,We&&"function"==typeof We.mute&&We.mute()}ee.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),ee.showAllAddons&&(app.showAllAddons+=1),te.currentChoices+=1}else{if(ee.discountOther&&void 0!==ee.discountOperator&&void 0!==ee.discountValue)if(ee.isDisChoices){if(void 0!==ee.discountChoices)for(var Ee=0;Ee<ee.discountChoices.length;Ee++){var Ue=zt.get(ee.discountChoices[Ee]);void 0!==Ue&&go(ee,Ue.choice)}}else if(void 0!==ee.discountGroups)for(var Le=0;Le<ee.discountGroups.length;Le++){var ze=Gt.get(ee.discountGroups[Le]);if(void 0!==ze)for(var Ge=0;Ge<ze.elements.length;Ge++){var _e=zt.get(ze.elements[Ge]);void 0!==_e&&go(ee,_e.choice)}}if(ee.addToAllowChoice&&void 0!==ee.idOfAllowChoice&&void 0!==ee.numbAddToAllowChoice)for(var He=0;He<ee.idOfAllowChoice.length;He++){var Ye=Lt.get(ee.idOfAllowChoice[He]);void 0!==Ye&&(Ye.allowedChoices-=ee.numbAddToAllowChoice)}Wt.delete(ee.id),ee.forcedActivated&&(delete ee.forcedActivated,Et.set(ee.id,{multiple:ee.multipleUseVariable}))}}else Wt.delete(m[K])}Ao({linkedObjects:[]})}function Io(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{linkedObjects:[]},n=t;if(t.isResultRow||t.isGroupRow){var r=zt.get(e.id);void 0!==r&&(n=r.row)}!io(e.requireds)||t.isInfoRow||i&&e.isNotSelectable||(e.isActive?e.selectOnce||e.forcedActivated||ko(e,n,o):Bo(e,n,o))}function So(e,t,i,o,n){if(!t.isNotSelectable||!e.isNotActiveUnselectable){var r=!1;if(t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===n.linkedObjects.indexOf(e.id)&&t.activateThisChoice.split(",").some(function(t){return t.split("/ON#")[0]===e.id})&&(n.linkedObjects.push(e.id),r=!0),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss){var a=t.multipleUseVariable;if(o>0){e.isAllowDeselect||!t.customTextfieldIsOn&&!t.confirmIsOn||(ai.isForced=!0);for(var c=0;c<o;c++)Mo(t,i,n),a++,e.isAllowDeselect||(t.numMultipleTimesMinus+=1)}else if(o<0)for(var l=0;l>-1*o;l++)Do(t,i,n),a--,e.isAllowDeselect||(t.numMultipleTimesPluss-=1);if(t.multipleUseVariable!==a){var s=Math.abs(t.numMultipleTimesMinus-t.numMultipleTimesPluss);if(t.numMultipleTimesMinus>t.numMultipleTimePluss){var u=Et.get(t.id);o>0?(t.numMultipleTimesMinus-=s,void 0!==u?u.multiple+=s:Et.set(t.id,{multiple:s,isAllowDeselect:e.isAllowDeselect||!1})):o<0&&(void 0!==u?u.multiple-=s:Et.set(t.id,{multiple:-s,isAllowDeselect:e.isAllowDeselect||!1}))}}}}else t.isActive||((t.customTextfieldIsOn||t.confirmIsOn)&&(ai.isForced=!0),Io(t,i,!1,n)),e.isAllowDeselect||(t.forcedActivated=!0),void 0===t.activatedFrom&&(t.activatedFrom=0),r||t.activatedFrom++;if(t.isSelectDelayed&&void 0!==t.selectDelayTime){var d=function(){t.selectDelayTimer?setTimeout(d,1e3):e.isActive?t.isActive||(delete t.forcedActivated,Et.set(t.id,{multiple:o,isAllowDeselect:e.isAllowDeselect||!1})):delete t.forcedActivated};setTimeout(d,t.selectDelayTime+1e3)}else t.isActive||(delete t.forcedActivated,Et.set(t.id,{multiple:o,isAllowDeselect:e.isAllowDeselect||!1}))}}function yo(e,t,i,o,n){if(n.isOverDlg=!0,n.isOverImg=!0,t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===n.linkedObjects.indexOf(e.id)&&t.activateThisChoice.split(",").some(function(t){return t.split("/ON#")[0]===e.id})&&n.linkedObjects.push(e.id),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss)if(t.isActive){if(o>0)for(var r=0;r<o;r++)e.isAllowDeselect||(t.numMultipleTimesMinus-=1),e.isNotDeactivate||Do(t,i,n);else if(o<0)for(var a=0;a>-1*o;a++)e.isAllowDeselect||(t.numMultipleTimesPluss+=1),e.isNotDeactivate||Mo(t,i,n)}else{var c=Et.get(t.id),l=0;void 0!==c?0===(l=c.multiple-o)?Et.delete(t.id):Et.set(t.id,{multiple:l,isAllowDeselect:e.isAllowDeselect||!1}):Et.delete(t.id)}}else void 0!==t.activatedFrom?(t.activatedFrom--,(t.activatedFrom<=0||-1!==n.linkedObjects.indexOf(e.id))&&(t.isActive?(delete t.activatedFrom,delete t.forcedActivated,e.isNotDeactivate||ko(t,i,n)):Et.delete(t.id))):(delete t.forcedActivated,!e.isNotDeactivate&&t.isActive&&ko(t,i,n));!t.isActive&&t.selectDelayTimer&&(clearTimeout(t.selectDelayTimer),delete t.selectDelayTimer,delete t.forcedActivated,Et.delete(t.id))}function xo(e,t){if(void 0!==e.activateThisChoice){for(var i=e.activateThisChoice.split(","),o=new Map,n=0;n<i.length;n++){var r=g(i[n].split("/ON#"),2),a=r[0],c=r[1],l=parseInt(void 0===c?"0":c),s=Gt.get(a);if(void 0!==s)for(var u=0;u<s.elements.length;u++){var d=zt.get(s.elements[u]);if(void 0!==d){var f=d.choice,p=f.isSelectableMultiple&&f.isMultipleUseVariable&&void 0!==f.numMultipleTimesPluss&&f.numMultipleTimesPluss>=f.multipleUseVariable+l&&!f.isInfoRow&&!f.isNotSelectable&&io(f.requireds);Wt.has(f.id)&&!p||o.set(f.id,l)}}else{var m=zt.get(a);if(void 0!==m){var h=m.choice,b=h.isSelectableMultiple&&h.isMultipleUseVariable&&void 0!==h.numMultipleTimesPluss&&h.numMultipleTimesPluss>=h.multipleUseVariable+l&&!h.isInfoRow&&!h.isNotSelectable&&io(h.requireds);Wt.has(a)&&!b||o.set(a,l)}}}for(var w=v(o.keys()),T=Math.min(w.length,e.numActivateRandom||0),I=T,S=w.length-1;S>0;S--){var y=Math.floor(Math.random()*(S+1)),x=[w[y],w[S]];w[S]=x[0],w[y]=x[1]}for(var C=[],O=0;O<T;){var A=w[O],k=zt.get(A);if(void 0!==k){var B=k.row,M=k.choice,D=o.get(A)||0,F=M.multipleUseVariable;if(So(e,M,B,D,t),!M.isActive||M.isSelectableMultiple&&M.isMultipleUseVariable&&M.multipleUseVariable===F){if(C.length<T&&w.length>I){w[O]=w[I++],void 0!==M.activatedFrom&&(M.activatedFrom--,0===M.activatedFrom&&Et.delete(M.id));continue}break}var R=D>0?"".concat(A,"/ON#").concat(D):A;C.push(R)}O++}e.isSelectableMultiple?(void 0===e.activatedRandomMul&&(e.activatedRandomMul=[]),e.activatedRandomMul[e.multipleUseVariable-1]=[].concat(C)):e.activatedRandom=[].concat(C)}}function Co(e,t,i){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5?arguments[5]:void 0,a=Array.from(Wt.keys()),c=function(){var c=a[l],s=zt.get(c);if(void 0!==s){for(var u=s.row,f=s.choice,g=new d,p=new Set,m=new Set,h=new Set,b=!1,w=!1,T=e.appliedDisChoices?e.appliedDisChoices.indexOf(f.id):-1,I=0;I<f.scores.length;I++){var S=f.scores[I];if(!S.isNotRecalculatable){var y=Ut.get(S.id);if(void 0!==y){if(e.discountOther&&S.isChangeDiscount&&S.isActive&&void 0!==S.tmpDisScore&&(!e.useDiscountCount||e.useDiscountCount&&e.appliedDisChoices)){var x=f.multipleUseVariable,C=!1;if(e.useDiscountCount&&S.discountedFrom&&S.discountedFrom.length>0)if(-1!==T)for(var O=0;O<S.discountedFrom.length;O++){var A=zt.get(S.discountedFrom[O]);if(void 0!==A){var k=A.choice,B=k.isSelectableMultiple&&k.isMultipleUseVariable&&k.stackableDiscount&&k.discountCount?k.discountCount*k.multipleUseVariable+Number(e.id===k.id):k.discountCount;k.useDiscountCount&&k.appliedDisChoices&&B&&B>k.appliedDisChoices.length&&(k.id!==e.id&&h.add(k),C=!0)}}else C=!0;if(C){delete S.isChangeDiscount,delete S.tmpDisScore;continue}if(f.isSelectableMultiple&&f.isMultipleUseVariable&&void 0!==f.numMultipleTimesMinus){for(var M=x-1;M>=0;M--)f.isActive&&(y.belowZeroNotAllowed&&y.startingSum+S.tmpDisScore<0?f.forcedActivated&&f.isActive?(f.forcedActivated=!1,f.numMultipleTimesMinus--,Do(f,u,r),f.forcedActivated=!0):Do(f,u,r):y.startingSum+=S.tmpDisScore);f.isActive&&(g.set(S.id,S.tmpDisScore),delete S.isChangeDiscount,delete S.tmpDisScore)}else if(!f.isSelectableMultiple)if(y.belowZeroNotAllowed&&y.startingSum+S.tmpDisScore<0)if(f.forcedActivated&&(delete f.forcedActivated,Et.set(f.id,{multiple:f.multipleUseVariable})),f.isSelectableMultiple&&f.isMultipleUseVariable)for(var D=0;D<f.multipleUseVariable;D++)f.isActive&&Do(f,u,r);else f.isActive&&ko(f,u,r);else y.startingSum+=S.tmpDisScore,g.set(S.id,S.tmpDisScore),delete S.isChangeDiscount,delete S.tmpDisScore;b=e.id!==f.id,S.discountIsOn||delete S.appliedDiscount,w=!0}if(!o.has(S.idx))for(var F=e.scores.length>0,R=e.scores.length||1,j=0;j<R;j++){var q=F?e.scores[j]:null,P=q&&t.get(q.id)||0,$=q?Ut.get(q.id):null;if((!F||F&&$)&&f.isActive){var V=io(S.requireds),N=new d(JSON.parse(JSON.stringify(v(Wt))));N.set(e.id,{multiple:e.multipleUseVariable}),u.currentChoices+=1,$&&($.startingSum+=P);var W=io(S.requireds,N);if(u.currentChoices-=1,$&&($.startingSum-=P),W!==V){S.setValue||wo(y,S);var E=S.discountIsOn&&void 0!==S.discountScore&&S.appliedDiscount?S.discountScore:S.value;E=y.allowFloat?E:Math.floor(E);var U=!1;if(W){if(f.isSelectableMultiple&&f.isMultipleUseVariable&&void 0!==f.numMultipleTimesMinus)for(var L=f.multipleUseVariable-1;L>=0;L--)void 0!==S.isActiveMul&&S.isActiveMul[L]&&(y.belowZeroNotAllowed&&y.startingSum+E<0?f.forcedActivated&&f.isActive?(f.forcedActivated=!1,f.numMultipleTimesMinus--,Do(f,u,r),f.forcedActivated=!0):Do(f,u,r):(y.startingSum+=E,g.set(S.id,E),S.isActiveMul[L]=!1,U||(U=!0)));else f.isSelectableMultiple||S.isActive&&(y.belowZeroNotAllowed&&y.startingSum+E<0?(f.forcedActivated&&delete f.forcedActivated,ko(f,u,r)):(y.startingSum+=E,g.set(S.id,E),delete S.isActive,U=!0));if(U&&S.discountIsOn&&S.appliedDiscount&&S.discountedFrom)for(var z=0;z<S.discountedFrom.length;z++){var G=zt.get(S.discountedFrom[z]);if(void 0!==G){var _=G.choice;if(_.useDiscountCount&&void 0!==_.discountCount&&_.appliedDisChoices&&-1!==_.appliedDisChoices.indexOf(f.id)){delete S.appliedDiscount,m.add(_);break}delete S.appliedDiscount;break}}S.setValue&&delete S.setValue}else{if(f.isSelectableMultiple&&f.isMultipleUseVariable&&void 0!==f.numMultipleTimesMinus){var H=f.multipleUseVariable;void 0===S.isActiveMul&&(S.isActiveMul=[]);for(var Y=H-1;Y>=0;Y--)S.isActiveMul[Y]||(y.belowZeroNotAllowed&&y.startingSum+E<0?f.forcedActivated&&f.isActive?(f.forcedActivated=!1,f.numMultipleTimesMinus--,Do(f,u,r),f.forcedActivated=!0):Do(f,u,r):(y.startingSum-=E,g.set(S.id,E),S.isActiveMul[Y]=!0,U||(U=!0)))}else f.isSelectableMultiple||S.isActive||(y.belowZeroNotAllowed&&y.startingSum-E<0?(f.forcedActivated&&delete f.forcedActivated,ko(f,u,r)):(y.startingSum-=E,g.set(S.id,E),S.isActive=!0,U=!0));if(U&&S.discountIsOn&&!S.appliedDiscount&&S.discountedFrom)for(var J=0;J<S.discountedFrom.length;J++){var Z=zt.get(S.discountedFrom[J]);if(void 0!==Z){var X=Z.choice;if(!X.useDiscountCount||void 0===X.discountCount){S.appliedDiscount=!0;break}var K=X.isSelectableMultiple&&X.isMultipleUseVariable&&X.stackableDiscount?X.discountCount*X.multipleUseVariable:X.discountCount;if(X.appliedDisChoices||(X.appliedDisChoices=[]),K>X.appliedDisChoices.length||-1!==X.appliedDisChoices.indexOf(f.id)){S.appliedDiscount=!0,p.add(X);break}}}}b||(b=!0),o.add(S.idx)}}}}}}if(h.size>0)for(var Q=Array.from(h),ee=0;ee<Q.length;ee++){var te=Q[ee];te.appliedDisChoices||(te.appliedDisChoices=[]),-1===te.appliedDisChoices.indexOf(f.id)&&te.appliedDisChoices.push(f.id),-1!==T&&e.appliedDisChoices.splice(T,1)}w&&e.appliedDisChoices&&-1!==T&&e.appliedDisChoices.splice(T,1),m.size>0&&m.forEach(function(e){if(e.appliedDisChoices&&!e.scores.some(function(e){return e.appliedDiscount})){var t=e.appliedDisChoices.indexOf(f.id);-1!==t&&e.appliedDisChoices.splice(t,1)}}),p.size>0&&p.forEach(function(e){e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(f.id)&&e.appliedDisChoices.push(f.id)}),b&&(0===n.length?n.push("Scores Updated On: ".concat(f.title)):n.push(", ".concat(f.title)),Co(f,g,i+1,o,n,r))}},l=a.length-1;l>=0;l--)c();if(0===i){if(n.length>0&&!app.hideScoresUpdated){var s=document.createElement("div");s.innerHTML=n.join(""),li.labelText=s.textContent,li.isOpen=!0}n.splice(0)}}function Oo(e,t,i){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5?arguments[5]:void 0,a=Array.from(Wt.keys()),c=function(){var c=a[l],s=zt.get(c);if(void 0!==s){var u=s.row,f=s.choice,g=new d,p=new Set,m=new Set,h=!1,b=!1;e&&e.useDiscountCount&&!e.appliedDisChoices&&(e.appliedDisChoices=[]);for(var w=0;w<f.scores.length;w++){var T=f.scores[w];if(!T.isNotRecalculatable){var I=Ut.get(T.id);if(void 0!==I){if(e&&e.discountOther&&T.isChangeDiscount&&T.isActive&&void 0!==T.tmpDisScore&&f.id!==e.id){var S=f.multipleUseVariable,y=e.isSelectableMultiple&&e.isMultipleUseVariable&&e.stackableDiscount&&e.discountCount?e.discountCount*e.multipleUseVariable:e.discountCount;if(!e.useDiscountCount||e.useDiscountCount&&y&&y>e.appliedDisChoices.length){if(f.isSelectableMultiple&&f.isMultipleUseVariable&&void 0!==f.numMultipleTimesMinus){for(var x=S-1;x>=0;x--)f.isActive&&(I.belowZeroNotAllowed&&I.startingSum+T.tmpDisScore<0?f.forcedActivated&&f.isActive?(f.forcedActivated=!1,f.numMultipleTimesMinus--,Do(f,u,r),f.forcedActivated=!0):Do(f,u,r):I.startingSum+=T.tmpDisScore);f.isActive&&(g.set(T.id,T.tmpDisScore),delete T.isChangeDiscount,delete T.tmpDisScore)}else f.isSelectableMultiple||(I.belowZeroNotAllowed&&I.startingSum+T.tmpDisScore<0?(f.forcedActivated&&delete f.forcedActivated,ko(f,u,r)):(I.startingSum+=T.tmpDisScore,g.set(T.id,T.tmpDisScore),delete T.isChangeDiscount,delete T.tmpDisScore));b=!0,f.isActive&&(T.appliedDiscount=!0,h=!0)}}if(!o.has(T.idx))for(var C=e&&e.scores.length>0,O=e&&e.scores.length||1,A=0;A<O;A++){var k=C?e.scores[A]:null,B=k&&t.get(k.id)||0,M=k?Ut.get(k.id):null,D=e?null:Ut.get(t.keys().next().value||""),F=D&&t.values().next().value||0;if((!C||C&&M)&&f.isActive&&!T.isChanged){var R=io(T.requireds),j=new d(JSON.parse(JSON.stringify(v(Wt))));e?(j.delete(e.id),u.currentChoices-=1,M&&(M.startingSum+=B)):D&&(D.startingSum-=F);var q=io(T.requireds,j);if(e?(u.currentChoices+=1,M&&(M.startingSum-=B)):D&&(D.startingSum+=F),q!==R){T.setValue||wo(I,T);var P=T.discountIsOn&&void 0!==T.discountScore&&T.appliedDiscount?T.discountScore:T.value;P=I.allowFloat?P:Math.floor(P);var $=!1;if(q){if(f.isSelectableMultiple&&f.isMultipleUseVariable&&void 0!==f.numMultipleTimesMinus)for(var V=f.multipleUseVariable-1;V>=0;V--)void 0!==T.isActiveMul&&T.isActiveMul[V]&&(I.belowZeroNotAllowed&&I.startingSum+P<0?f.forcedActivated&&f.isActive?(f.forcedActivated=!1,f.numMultipleTimesMinus--,Do(f,u,r),f.forcedActivated=!0):Do(f,u,r):(I.startingSum+=P,g.set(T.id,P),T.isActiveMul[V]=!1,$||($=!0)));else f.isSelectableMultiple||T.isActive&&(I.belowZeroNotAllowed&&I.startingSum+P<0?(f.forcedActivated&&delete f.forcedActivated,ko(f,u,r)):(I.startingSum+=P,g.set(T.id,P),delete T.isActive,$=!0));if($&&T.discountIsOn&&T.appliedDiscount&&T.discountedFrom)for(var N=0;N<T.discountedFrom.length;N++){var W=zt.get(T.discountedFrom[N]);if(void 0!==W){var E=W.choice;if(E.useDiscountCount&&void 0!==E.discountCount&&E.appliedDisChoices&&-1!==E.appliedDisChoices.indexOf(f.id)){delete T.appliedDiscount,m.add(E);break}delete T.appliedDiscount;break}}T.setValue&&delete T.setValue}else{if(f.isSelectableMultiple&&f.isMultipleUseVariable&&void 0!==f.numMultipleTimesMinus){var U=f.multipleUseVariable;void 0===T.isActiveMul&&(T.isActiveMul=[]);for(var L=U-1;L>=0;L--)T.isActiveMul[L]||(I.belowZeroNotAllowed&&I.startingSum+P<0?f.forcedActivated&&f.isActive?(f.forcedActivated=!1,f.numMultipleTimesMinus--,Do(f,u,r),f.forcedActivated=!0):Do(f,u,r):(I.startingSum-=P,g.set(T.id,P),T.isActiveMul[L]=!0,$||($=!0)))}else f.isSelectableMultiple||T.isActive||(I.belowZeroNotAllowed&&I.startingSum-P<0?(f.forcedActivated&&delete f.forcedActivated,ko(f,u,r)):(I.startingSum-=P,g.set(T.id,P),T.isActive=!0,$=!0));if($&&T.discountIsOn&&!T.appliedDiscount&&T.discountedFrom)for(var z=0;z<T.discountedFrom.length;z++){var G=zt.get(T.discountedFrom[z]);if(void 0!==G){var _=G.choice;if(!_.useDiscountCount||void 0===_.discountCount){T.appliedDiscount=!0;break}var H=_.isSelectableMultiple&&_.isMultipleUseVariable&&_.stackableDiscount?_.discountCount*_.multipleUseVariable:_.discountCount;if(_.appliedDisChoices||(_.appliedDisChoices=[]),H>_.appliedDisChoices.length||-1!==_.appliedDisChoices.indexOf(f.id)){T.appliedDiscount=!0,p.add(_);break}}}}b||(b=!0),o.add(T.idx)}}}}}}h&&e&&e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(f.id)&&e.appliedDisChoices.push(f.id),m.size>0&&m.forEach(function(e){if(e.appliedDisChoices&&!e.scores.some(function(e){return e.appliedDiscount})){var t=e.appliedDisChoices.indexOf(f.id);-1!==t&&e.appliedDisChoices.splice(t,1)}}),p.size>0&&p.forEach(function(e){e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(f.id)&&e.appliedDisChoices.push(f.id)}),b&&(0===n.length?n.push("Scores Updated On: ".concat(f.title)):n.push(", ".concat(f.title)),Oo(f,g,i+1,o,n,r))}},l=0;l<a.length;l++)c();if(0===i){if(n.length>0&&!app.hideScoresUpdated){var s=document.createElement("div");s.innerHTML=n.join(""),li.labelText=s.textContent,li.isOpen=!0}n.splice(0)}}function Ao(e){var t=!1;Array.from(Et.entries()).forEach(function(i){var o=g(i,2),n=o[0],r=o[1],a=zt.get(n);if(void 0!==a){var c=a.row,l=a.choice;l.isActive||(Io(l,c,!1,e),l.isActive&&(Et.delete(n),t=!0,r.isAllowDeselect||(l.forcedActivated=!0)))}}),t&&Ao(e)}function ko(e,t,i){var o=void 0===e.parentId,n=bo(e,!1),r=!o||function(e,t,i){if(e.addons&&e.addons.length>0)for(var o=e.addons.filter(function(e){return!0===e.isSelectable}),n=0;n<o.length;n++){var r=o[n];if(r.isActive){if(r.selectOnce)return!1;if(r.isSelectableMultiple&&r.isMultipleUseVariable)for(var a=r.multipleUseVariable,c=0;c<Math.abs(a);c++)a>0?Do(r,t,i):Mo(r,t,i);else ko(r,t,i);if(r.isActive)return!1}}return!0}(e,t,i);if(n&&r){var a=function(){for(var n=new d,r=new Set,a=0;a<e.scores.length;a++){var c=e.scores[a];if(io(c.requireds)&&c.isActive||c.isActive){var l=Ut.get(c.id);if(void 0!==l){var s=c.value;if(c.discountIsOn&&void 0!==c.discountScore&&c.appliedDiscount){if(c.discountedFrom&&c.discountedFrom.length>0)for(var u=0;u<c.discountedFrom.length;u++){var f=zt.get(c.discountedFrom[u]);if(void 0!==f){var v=f.choice;if(v.useDiscountCount&&void 0!==v.discountCount&&v.appliedDisChoices&&v.appliedDisChoices.length>0){r.add(v);break}}}s=c.discountScore}s=l.allowFloat?s:Math.floor(s),l.startingSum+=s;var p=n.get(c.id);void 0!==p?n.set(c.id,-s+p):n.set(c.id,-s),delete c.isActive,delete c.setValue,delete c.appliedDiscount}}else delete c.setValue,delete c.appliedDiscount}if(r.size>0&&r.forEach(function(t){if(t.appliedDisChoices){var i=t.appliedDisChoices.indexOf(e.id);-1!==i&&t.appliedDisChoices.splice(i,1)}}),e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandom){for(var m=0;m<e.activatedRandom.length;m++){var h=zt.get(e.activatedRandom[m]);if(void 0!==h){var b=h.row,w=h.choice;yo(e,w,b,0,i)}}delete e.activatedRandom}else for(var T=e.activateThisChoice.split(","),I=0;I<T.length;I++){var S=T[I].split("/ON#"),y=S.length>1?parseInt(S[1]):0,C=zt.get(S[0]);if(void 0!==C){var O=C.row,A=C.choice;yo(e,A,O,y,i)}else{var k=Gt.get(S[0]);if(void 0!==k)for(var B=k.elements,M=0;M<B.length;M++){var D=zt.get(B[M]);if(void 0!==D){var F=D.row,R=D.choice;yo(e,R,F,y,i)}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(void 0===e.discountPointTypes&&(e.discountPointTypes=[]),e.isDisChoices){var j=new Set;if(void 0!==e.discountRows)for(var q=0;q<e.discountRows.length;q++){var P=Lt.get(e.discountRows[q]);if(void 0!==P)for(var $=0;$<P.objects.length;$++){var V=P.objects[$];go(e,V),j.add(V.id)}}if(void 0!==e.discountChoices)for(var N=0;N<e.discountChoices.length;N++)if(!j.has(e.discountChoices[N])){var W=zt.get(e.discountChoices[N]);void 0!==W&&go(e,W.choice)}}else if(void 0!==e.discountGroups)for(var E=0;E<e.discountGroups.length;E++){var U=Gt.get(e.discountGroups[E]);if(void 0!==U)for(var L=0;L<U.elements.length;L++){var z=zt.get(U.elements[L]);void 0!==z&&go(e,z.choice)}}if(e.isActive=!1,o&&(t.currentChoices-=1),Wt.delete(e.id),Array.from(Wt.entries()).forEach(function(t){var o=g(t,2),n=o[0],r=o[1],a=zt.get(n);if(void 0!==a){var c=a.row,l=a.choice;if(l.id!==e.id&&!io(l.requireds))if(l.forcedActivated&&(delete l.forcedActivated,Et.set(l.id,{multiple:r.multiple})),0===r.multiple)l.isActive&&ko(l,c,i);else if(r.multiple>0)for(var s=0;s<r.multiple;s++)l.isActive&&Do(l,c,i)}}),e.multiplyPointtypeIsOnCheck&&void 0!==e.pointTypeToMultiply){for(var G=0,_=0;_<e.pointTypeToMultiply.length;_++){var H=Ut.get(e.pointTypeToMultiply[_]);if(void 0!==H){for(var Y=Kt.length-1;Y>=0;Y--){var J=Kt[Y];if(J.multiplyPointtypeIsOnCheck&&void 0!==J.startingSumAtMultiply){var Z=J.startingSumAtMultiply[_].value*J.startingSumAtMultiply[_].calcVal;Z=H.allowFloat?Z:Math.floor(Z),H.startingSum-=Z,H.startingSum+=J.startingSumAtMultiply[_].value}if(J.dividePointtypeIsOnCheck&&void 0!==J.startingSumAtDivide){var X=J.startingSumAtDivide[_].value/J.startingSumAtDivide[_].calcVal;X=H.allowFloat?X:Math.floor(X),H.startingSum-=X,H.startingSum+=J.startingSumAtDivide[_].value}if(J.setPointtypeIsOnCheck&&void 0!==J.startingSumAtSet&&(H.startingSum=J.startingSumAtSet[_].value),J.id===e.id){G=Y;break}}for(var K=G+1;K<Kt.length;K++){var Q=Kt[K];Q.multiplyPointtypeIsOnCheck&&void 0!==Q.startingSumAtMultiply&&(Q.startingSumAtMultiply[_].value=H.startingSum,H.startingSum*=Q.startingSumAtMultiply[_].calcVal,H.startingSum=H.allowFloat?H.startingSum:Math.floor(H.startingSum)),Q.dividePointtypeIsOnCheck&&void 0!==Q.startingSumAtDivide&&(Q.startingSumAtDivide[_].value=H.startingSum,H.startingSum/=Q.startingSumAtDivide[_].calcVal,H.startingSum=H.allowFloat?H.startingSum:Math.floor(H.startingSum)),Q.setPointtypeIsOnCheck&&void 0!==Q.startingSumAtSet&&(Q.startingSumAtSet[_].value=H.startingSum,H.startingSum=Q.startingSumAtSet[_].calcVal,H.startingSum=H.allowFloat?H.startingSum:Math.floor(H.startingSum))}}}delete e.multiplyPointtypeIsOnCheck,delete e.startingSumAtMultiply,e.dividePointtypeIsOnCheck||e.setPointtypeIsOnCheck||Kt.splice(G,1)}if(e.dividePointtypeIsOnCheck&&void 0!==e.pointTypeToDivide){for(var ee=0,te=0;te<e.pointTypeToDivide.length;te++){var ie=Ut.get(e.pointTypeToDivide[te]);if(void 0!==ie){for(var oe=Kt.length-1;oe>=0;oe--){var ne=Kt[oe];if(ne.multiplyPointtypeIsOnCheck&&void 0!==ne.startingSumAtMultiply){var re=ne.startingSumAtMultiply[te].value*ne.startingSumAtMultiply[te].calcVal;re=ie.allowFloat?re:Math.floor(re),ie.startingSum-=re,ie.startingSum+=ne.startingSumAtMultiply[te].value}if(ne.dividePointtypeIsOnCheck&&void 0!==ne.startingSumAtDivide){var ae=ne.startingSumAtDivide[te].value/ne.startingSumAtDivide[te].calcVal;ae=ie.allowFloat?ae:Math.floor(ae),ie.startingSum-=ae,ie.startingSum+=ne.startingSumAtDivide[te].value}if(ne.setPointtypeIsOnCheck&&void 0!==ne.startingSumAtSet&&(ie.startingSum=ne.startingSumAtSet[te].value),ne.id===e.id){ee=oe;break}}for(var ce=ee+1;ce<Kt.length;ce++){var le=Kt[ce];le.multiplyPointtypeIsOnCheck&&void 0!==le.startingSumAtMultiply&&(le.startingSumAtMultiply[te].value=ie.startingSum,ie.startingSum*=le.startingSumAtMultiply[te].calcVal,ie.startingSum=ie.allowFloat?ie.startingSum:Math.floor(ie.startingSum)),le.dividePointtypeIsOnCheck&&void 0!==le.startingSumAtDivide&&(le.startingSumAtDivide[te].value=ie.startingSum,ie.startingSum/=le.startingSumAtDivide[te].calcVal,ie.startingSum=ie.allowFloat?ie.startingSum:Math.floor(ie.startingSum)),le.setPointtypeIsOnCheck&&void 0!==le.startingSumAtSet&&(le.startingSumAtSet[te].value=ie.startingSum,ie.startingSum=le.startingSumAtSet[te].calcVal,ie.startingSum=ie.allowFloat?ie.startingSum:Math.floor(ie.startingSum))}}}delete e.dividePointtypeIsOnCheck,delete e.startingSumAtDivide,e.setPointtypeIsOnCheck||Kt.splice(ee,1)}if(e.setPointtypeIsOnCheck&&void 0!==e.pointTypeToSet){for(var se=0,ue=0;ue<e.pointTypeToSet.length;ue++){var de=Ut.get(e.pointTypeToSet[ue]);if(void 0!==de){for(var fe=Kt.length-1;fe>=0;fe--){var ve=Kt[fe];if(ve.multiplyPointtypeIsOnCheck&&void 0!==ve.startingSumAtMultiply){var ge=ve.startingSumAtMultiply[ue].value*ve.startingSumAtMultiply[ue].calcVal;ge=de.allowFloat?ge:Math.floor(ge),de.startingSum-=ge,de.startingSum+=ve.startingSumAtMultiply[ue].value}if(ve.dividePointtypeIsOnCheck&&void 0!==ve.startingSumAtDivide){var pe=ve.startingSumAtDivide[ue].value/ve.startingSumAtDivide[ue].calcVal;pe=de.allowFloat?pe:Math.floor(pe),de.startingSum-=pe,de.startingSum+=ve.startingSumAtDivide[ue].value}if(ve.setPointtypeIsOnCheck&&void 0!==ve.startingSumAtSet&&(de.startingSum=ve.startingSumAtSet[ue].value),ve.id===e.id){se=fe;break}}for(var me=se+1;me<Kt.length;me++){var he=Kt[me];he.multiplyPointtypeIsOnCheck&&void 0!==he.startingSumAtMultiply&&(he.startingSumAtMultiply[ue].value=de.startingSum,de.startingSum*=he.startingSumAtMultiply[ue].calcVal,de.startingSum=de.allowFloat?de.startingSum:Math.floor(de.startingSum)),he.dividePointtypeIsOnCheck&&void 0!==he.startingSumAtDivide&&(he.startingSumAtDivide[ue].value=de.startingSum,de.startingSum/=he.startingSumAtDivide[ue].calcVal,de.startingSum=de.allowFloat?de.startingSum:Math.floor(de.startingSum)),he.setPointtypeIsOnCheck&&void 0!==he.startingSumAtSet&&(he.startingSumAtSet[ue].value=de.startingSum,de.startingSum=he.startingSumAtSet[ue].calcVal,de.startingSum=de.allowFloat?de.startingSum:Math.floor(de.startingSum))}}}delete e.setPointtypeIsOnCheck,delete e.startingSumAtSet,Kt.splice(se,1)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(var be=0;be<e.changedVariables.length;be++){var we=Yt.get(e.changedVariables[be]);void 0!==we&&("1"===e.changeType?we.isTrue=!1:"2"===e.changeType?we.isTrue=!0:"3"===e.changeType&&(we.isTrue=!we.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var Te=0;Te<e.idOfAllowChoice.length;Te++){var Ie=Lt.get(e.idOfAllowChoice[Te]);if(void 0!==Ie&&(Ie.allowedChoices-=e.numbAddToAllowChoice,Ie.allowedChoices>0&&Ie.currentChoices>=Ie.allowedChoices))for(var Se=0;Se<Ie.objects.length;Se++){var ye=Ie.objects[Se];if(ye.isActive&&!ye.forcedActivated)if(ye.isSelectableMultiple)for(var xe=ye.multipleUseVariable,Ce=0;Ce<xe;Ce++)Do(ye,Ie,i);else ko(ye,Ie,i);if(Ie.allowedChoices>=Ie.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){var Oe=Ht.get(e.idOfTheTextfieldWord);void 0!==Oe&&(Oe.replaceText=void 0===e.wordChangeDeselect?"":e.wordChangeDeselect)}if(e.isImageUpload&&void 0!==e.defaultImage&&(e.image=e.defaultImage),e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.showAllAddons&&void 0!==app.showAllAddons&&(app.showAllAddons-=1),e.changeBackground)if(e.changeBgImage){if(void 0!==app.bgImageStack){var Ae=app.bgImageStack.findIndex(function(t){return t.id===e.id});-1!==Ae&&app.bgImageStack.splice(Ae,1);var ke=app.bgImageStack.length;ke>0?app.styling.backgroundImage=app.bgImageStack[ke-1].data:(app.styling.backgroundImage=app.defaultBgImage||"",delete app.bgImageStack)}}else if(void 0!==e.changedBgColorCode&&void 0!==app.bgColorStack){var Be=app.bgColorStack.findIndex(function(t){return t.id===e.id});-1!==Be&&app.bgColorStack.splice(Be,1);var Me=app.bgColorStack.length;Me>0?app.styling.backgroundColor=app.bgColorStack[Me-1].data:(app.styling.backgroundColor=app.defaultBgColor||"#FFFFFFFF",delete app.bgColorStack)}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&void 0!==app.barBgColorStack){var De=app.barBgColorStack.findIndex(function(t){return t.id===e.id});-1!==De&&app.barBgColorStack.splice(De,1);var Fe=app.barBgColorStack.length;Fe>0?app.styling.barBackgroundColor=app.barBgColorStack[Fe-1].data:(app.styling.barBackgroundColor=app.defaultBarBgColor||"#FFFFFFFF",delete app.barBgColorStack)}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&void 0!==app.barIconColorStack){var Re=app.barIconColorStack.findIndex(function(t){return t.id===e.id});-1!==Re&&app.barIconColorStack.splice(Re,1);var je=app.barIconColorStack.length;je>0?app.styling.barIconColor=app.barIconColorStack[je-1].data:(app.styling.barIconColor=app.defaultBarIconColor||"#0000008A",delete app.barIconColorStack)}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&void 0!==app.barTextColorStack){var qe=app.barTextColorStack.findIndex(function(t){return t.id===e.id});-1!==qe&&app.barTextColorStack.splice(qe,1);var Pe=app.barTextColorStack.length;Pe>0?app.styling.barTextColor=app.barTextColorStack[Pe-1].data:(app.styling.barTextColor=app.defaultBarIconColor||"#000000",delete app.barTextColorStack)}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var $e=e.changeTemplatesList.split(","),Ve=0;Ve<$e.length;Ve++){var Ne=$e[Ve],We=zt.get(Ne);if(void 0===We){var Ee=Lt.get(Ne);if(void 0===Ee){var Ue=Gt.get(Ne);if(void 0===Ue);else{for(var Le=Ue.rowElements,ze=0;ze<Le.length;ze++){var Ge=Lt.get(Le[ze]);void 0!==Ge&&Tn(Ge,e.id)}for(var _e=Ue.elements,He=0;He<_e.length;He++){var Ye=zt.get(_e[He]);if(void 0!==Ye){var Je=Ye.choice;if(Tn(Je,e.id),e.changeAddonTemplate)for(var Ze=0;Ze<Je.addons.length;Ze++){Tn(Je.addons[Ze],e.id)}}}}}else Tn(Ee,e.id)}else{var Xe=We.choice;if(Tn(Xe,e.id),e.changeAddonTemplate)for(var Ke=0;Ke<Xe.addons.length;Ke++){Tn(Xe.addons[Ke],e.id)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var Qe=e.changeWidthList.split(","),et=0;et<Qe.length;et++){var tt=Qe[et],it=zt.get(tt);if(void 0===it){var ot=Lt.get(tt);if(void 0===ot){var nt=Gt.get(tt);if(void 0===nt);else{for(var rt=nt.rowElements,at=0;at<rt.length;at++){var ct=Lt.get(rt[at]);void 0!==ct&&Sn(ct,e.id)}for(var lt=nt.elements,st=0;st<lt.length;st++){var ut=zt.get(lt[st]);if(void 0!==ut)Sn(ut.choice,e.id)}}}else Sn(ot,e.id)}else{Sn(it.choice,e.id)}}if(e.setBgmIsOn&&ii&&e.bgmId&&(ni.bgmIsPlaying=!1,ao(e,e.bgmId,0)),e.muteBgm&&ii){var dt=x(ii);app.isMute=!1,dt&&"function"==typeof dt.unMute&&dt.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var ft=0;ft<e.hiddenContentsRow.length;ft++){var vt=Lt.get(e.hiddenContentsRow[ft]);if(void 0!==vt)for(var gt=0;gt<e.hiddenContentsType.length;gt++)switch(e.hiddenContentsType[gt]){case"1":delete vt.objectTitleRemoved;break;case"2":delete vt.objectImageRemoved;break;case"3":delete vt.objectTextRemoved;break;case"4":delete vt.objectScoreRemoved;break;case"5":delete vt.objectRequirementRemoved;break;case"6":delete vt.addonTitleRemoved;break;case"7":delete vt.addonImageRemoved;break;case"8":delete vt.addonTextRemoved}}if(delete e.tempSlots,Co(e,n,0,void 0,void 0,i),Ao(i),delete e.appliedDisChoices,e.isAutoActive&&Et.set(e.id,{multiple:0}),!e.isActive&&e.deselectParent&&e.parentId){var pt=zt.get(e.parentId);if(void 0!==pt){var mt=pt.choice;if(mt.isActive)if(mt.isSelectableMultiple&&mt.isMultipleUseVariable)for(var ht=mt.multipleUseVariable,bt=0;bt<Math.abs(ht);bt++)ht>0?Do(mt,t,i):Mo(mt,t,i);else ko(mt,t,i)}}};if(e.isSelectDelayed&&void 0!==e.selectDelayTime&&!e.selectDelayTimer)e.selectDelayTimer=window.setTimeout(function(){return e.customTextfieldIsOn&&!i.isOverDlg?(ai.choice=e,ai.row=t,ai.context=void 0!==e.wordPromptText?e.wordPromptText:"",ai.prevText=e.wordChangeSelect||"",ai.isWord=!0,ai.currentDialog="dlgCommon",ai.isDeselect=!0,void(ai.cFunc=function(o,n){if("deselect"===o.detail.action)i.isOverDlg=!0,ko(e,t,i);else if("accept"===o.detail.action&&ai.choice&&ai.choice.idOfTheTextfieldWord){if(ai.isWord){ai.choice.wordChangeSelect=n;var r=Ht.get(ai.choice.idOfTheTextfieldWord);void 0!==r&&(r.replaceText=ai.choice.wordChangeSelect||"")}i.isOverDlg=!0}delete ai.isDeselect})):e.isImageUpload&&!i.isOverImg?(ci.currentDialog="appImageUpload",ci.data=e,ci.imgProp="image",ci.isDeselect=!0,void(ci.cFunc=function(o){"deselect"===o.detail.action&&(i.isOverImg=!0,ko(e,t,i)),delete ci.isDeselect})):(-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,a()},1e3*app.fadeTransitionTime)):a()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0),e.selectDelayTimer=0,void delete e.selectDelayTimer)},e.selectDelayTime);else{if(e.customTextfieldIsOn&&!i.isOverDlg)return ai.choice=e,ai.row=t,ai.context=void 0!==e.wordPromptText?e.wordPromptText:"",ai.prevText=e.wordChangeSelect||"",ai.isWord=!0,ai.currentDialog="dlgCommon",ai.isDeselect=!0,void(ai.cFunc=function(o,n){if("deselect"===o.detail.action)i.isOverDlg=!0,ko(e,t,i);else if("accept"===o.detail.action&&ai.choice&&ai.choice.idOfTheTextfieldWord){if(ai.isWord){ai.choice.wordChangeSelect=n;var r=Ht.get(ai.choice.idOfTheTextfieldWord);void 0!==r&&(r.replaceText=ai.choice.wordChangeSelect||"")}i.isOverDlg=!0}delete ai.isDeselect});if(e.isImageUpload&&!i.isOverImg)return ci.currentDialog="appImageUpload",ci.data=e,ci.imgProp="image",ci.isDeselect=!0,void(ci.cFunc=function(o){"deselect"===o.detail.action&&(i.isOverImg=!0,ko(e,t,i)),delete ci.isDeselect});-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,a()},1e3*app.fadeTransitionTime)):a()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0)}}}function Bo(e,t,i){var o=void 0===e.parentId,n=!0;if(o&&t.allowedChoices>0&&t.currentChoices>=t.allowedChoices){for(var r=0,a=0;a<t.objects.length;a++){var l=t.objects[a];if(l.isActive){if(!l.forcedActivated&&!l.selectOnce){if(l.isSelectableMultiple)for(var s=l.multipleUseVariable,f=0;f<s;f++)Do(l,t,i);else Io(l,t,!1,i);break}r++}}r>=t.allowedChoices&&(n=!1)}if(n)if(bo(e,!0)){var v=function(){var n=new d;if(e.isActive=!0,Wt.set(e.id,{multiple:0}),o&&(t.currentChoices+=1),e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(e.isDisChoices){var r=new Set;if(void 0!==e.discountRows)for(var a=0;a<e.discountRows.length;a++){var l=Lt.get(e.discountRows[a]);if(void 0!==l)for(var s=0;s<l.objects.length;s++){var f=l.objects[s];po(e,f),r.add(f.id)}}if(void 0!==e.discountChoices)for(var v=0;v<e.discountChoices.length;v++)if(!r.has(e.discountChoices[v])){var p=zt.get(e.discountChoices[v]);void 0!==p&&po(e,p.choice)}}else if(void 0!==e.discountGroups)for(var h=0;h<e.discountGroups.length;h++){var b=Gt.get(e.discountGroups[h]);if(void 0!==b)for(var w=0;w<b.elements.length;w++){var T=zt.get(b.elements[w]);void 0!==T&&po(e,T.choice)}}for(var I=new Set,S=0;S<e.scores.length;S++){var y=e.scores[S];if(io(y.requireds)&&!y.isActive){var A=Ut.get(y.id);if(void 0!==A){var k=y.value;if(y.useExpression&&y.setValue&&ho(A,y),y.appliedDiscount&&void 0!==y.discountScore)k=y.discountScore;else if(y.discountIsOn&&void 0!==y.discountScore&&y.discountedFrom&&y.discountedFrom.length>0){for(var B=!1,M=0;M<y.discountedFrom.length;M++){var D=zt.get(y.discountedFrom[M]);if(void 0!==D){var F=D.choice;if(!F.useDiscountCount||void 0===F.discountCount){k=y.discountScore,y.appliedDiscount=!0,B=!0;break}var R=F.isSelectableMultiple&&F.isMultipleUseVariable&&F.stackableDiscount?F.discountCount*F.multipleUseVariable:F.discountCount;if(F.appliedDisChoices||(F.appliedDisChoices=[]),R>F.appliedDisChoices.length){I.add(F),k=y.discountScore,y.appliedDiscount=!0,B=!0;break}}}if(!B&&void 0!==y.tmpDiscount)for(var j=0;j<y.tmpDiscount.length;j++)k>y.tmpDiscount[j].discountedValue&&(k=y.tmpDiscount[j].discountedValue)}k=A.allowFloat?k:Math.floor(k),A.startingSum-=k,y.isActive=!0;var q=n.get(y.id);void 0!==q?n.set(y.id,k+q):n.set(y.id,k)}}}if(I.size>0&&I.forEach(function(t){t.appliedDisChoices&&-1===t.appliedDisChoices.indexOf(e.id)&&t.appliedDisChoices.push(e.id)}),e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&$o(e),e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom){var P=m({},i);P.isOverDlg=!1,P.isOverImg=!1,xo(e,P)}else for(var $=e.activateThisChoice.split(","),V=0;V<$.length;V++){var N=$[V].split("/ON#"),W=N.length>1?parseInt(N[1]):0,E=zt.get(N[0]);if(void 0!==E){var U=E.row,L=E.choice,z=m({},i);z.isOverDlg=!1,z.isOverImg=!1,So(e,L,U,W,z)}else{var G=Gt.get(N[0]);if(void 0!==G)for(var _=G.elements,H=0;H<_.length;H++){var Y=zt.get(_[H]);if(void 0!==Y){var J=Y.row,Z=Y.choice,X=m({},i);X.isOverDlg=!1,X.isOverImg=!1,So(e,Z,J,W,X)}}}}if(e.deactivateOtherChoice&&void 0!==e.deactivateThisChoice)for(var K=e.deactivateThisChoice.split(","),Q=0;Q<K.length;Q++){var ee=K[Q].split("/ON#"),te=ee.length>1?parseInt(ee[1]):0,ie=zt.get(ee[0]);if(void 0!==ie){var oe=ie.row,ne=ie.choice;if(ne.isActive)if(ne.isSelectableMultiple&&ne.isMultipleUseVariable)for(var re=0;re<te;re++){var ae=m({},i);ae.isOverDlg=!0,ae.isOverImg=!0,Do(ne,oe,ae)}else{var ce=m({},i);ce.isOverDlg=!0,ce.isOverImg=!0,ko(ne,oe,ce)}}else{var le=Gt.get(ee[0]);if(void 0!==le)for(var se=le.elements,ue=0;ue<se.length;ue++){var de=zt.get(se[ue]);if(void 0!==de){var fe=de.row,ve=de.choice;if(ve.isActive)if(ve.isSelectableMultiple&&ve.isMultipleUseVariable)for(var ge=0;ge<te;ge++){var pe=m({},i);pe.isOverDlg=!0,pe.isOverImg=!0,Do(ve,fe,pe)}else{var me=m({},i);me.isOverDlg=!0,me.isOverImg=!0,ko(ve,fe,me)}}}}}if(Array.from(Wt.entries()).forEach(function(t){var o=g(t,2),n=o[0],r=o[1],a=zt.get(n);if(void 0!==a){var c=a.row,l=a.choice;if(l.id!==e.id&&!io(l.requireds))if(l.forcedActivated&&(delete l.forcedActivated,Et.set(l.id,{multiple:r.multiple})),0===r.multiple){if(l.isActive){var s=m({},i);s.isOverDlg=!0,s.isOverImg=!0,ko(l,c,s)}}else if(r.multiple>0)for(var u=0;u<r.multiple;u++)if(l.isActive){var d=m({},i);d.isOverDlg=!0,d.isOverImg=!0,Do(l,c,d)}}}),e.multiplyPointtypeIsOn&&void 0!==e.pointTypeToMultiply&&void 0!==e.multiplyWithThis){var he=0;e.multiplyPointtypeIsOnCheck=!0,"object"!==u(e.startingSumAtMultiply)&&(e.startingSumAtMultiply=[]);for(var be=0;be<e.pointTypeToMultiply.length;be++){var we=Ut.get(e.pointTypeToMultiply[be]);if(void 0!==we)if(e.multiplyPointtypeIsId&&"string"==typeof e.multiplyWithThis){var Te=Ut.get(e.multiplyWithThis);void 0!==Te?(e.startingSumAtMultiply[be]={value:we.startingSum,calcVal:Te.startingSum},we.startingSum*=Te.startingSum,we.startingSum=we.allowFloat?we.startingSum:Math.floor(we.startingSum)):he++}else"number"==typeof e.multiplyWithThis&&(e.startingSumAtMultiply[be]={value:we.startingSum,calcVal:e.multiplyWithThis},we.startingSum*=e.multiplyWithThis,we.startingSum=we.allowFloat?we.startingSum:Math.floor(we.startingSum));else he++}he===e.pointTypeToMultiply.length&&delete e.multiplyPointtypeIsOnCheck,e.multiplyPointtypeIsOnCheck&&Kt.push(e)}if(e.dividePointtypeIsOn&&void 0!==e.pointTypeToDivide&&void 0!==e.divideWithThis){var Ie=0;e.dividePointtypeIsOnCheck=!0,"object"!==u(e.startingSumAtDivide)&&(e.startingSumAtDivide=[]);for(var Se=0;Se<e.pointTypeToDivide.length;Se++){var ye=Ut.get(e.pointTypeToDivide[Se]);void 0!==ye?0===e.dividedWithThis?Ie++:(e.startingSumAtDivide[Se]={value:ye.startingSum,calcVal:e.divideWithThis},ye.startingSum/=e.divideWithThis,ye.startingSum=ye.allowFloat?ye.startingSum:Math.floor(ye.startingSum)):Ie++}Ie===e.pointTypeToDivide.length&&delete e.dividePointtypeIsOnCheck,!e.multiplyPointtypeIsOnCheck&&e.dividePointtypeIsOnCheck&&Kt.push(e)}if(e.setPointtypeIsOn&&void 0!==e.pointTypeToSet&&void 0!==e.setWithThis){var xe=0;e.setPointtypeIsOnCheck=!0,"object"!==u(e.startingSumAtSet)&&(e.startingSumAtSet=[]);for(var Ce=0;Ce<e.pointTypeToSet.length;Ce++){var Oe=Ut.get(e.pointTypeToSet[Ce]);if(void 0!==Oe){var Ae=0;try{var ke=e.setWithThis.replace(/\{([^{}]+)\}/g,function(e,t){var i=Ut.get(t);if(void 0!==i)return"".concat(i.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});Ae=C(ke),Ae=Oe.allowFloat?Ae:Math.floor(Ae)}catch(c){console.error(c)}e.startingSumAtSet[Ce]={value:Oe.startingSum,calcVal:Ae},Oe.startingSum=Ae}else xe++}xe===e.pointTypeToSet.length&&delete e.setPointtypeIsOnCheck,e.multiplyPointtypeIsOnCheck||e.dividePointtypeIsOnCheck||!e.setPointtypeIsOnCheck||Kt.push(e)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(var Be=0;Be<e.changedVariables.length;Be++){var Me=Yt.get(e.changedVariables[Be]);void 0!==Me&&("1"===e.changeType?Me.isTrue=!0:"2"===e.changeType?Me.isTrue=!1:"3"===e.changeType&&(Me.isTrue=!Me.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var De=0;De<e.idOfAllowChoice.length;De++){var Fe=Lt.get(e.idOfAllowChoice[De]);if(void 0!==Fe&&(Fe.allowedChoices+=e.numbAddToAllowChoice,Fe.allowedChoices>0&&Fe.currentChoices>=Fe.allowedChoices))for(var Re=0;Re<Fe.objects.length;Re++){var je=Fe.objects[Re];if(je.isActive&&!je.forcedActivated)if(je.isSelectableMultiple)for(var qe=je.multipleUseVariable,Pe=0;Pe<qe;Pe++){var $e=m({},i);$e.isOverDlg=!1,$e.isOverImg=!1,Do(je,Fe,$e)}else{var Ve=m({},i);Ve.isOverDlg=!1,Ve.isOverImg=!1,ko(je,Fe,Ve)}if(Fe.allowedChoices>=Fe.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){var Ne=Ht.get(e.idOfTheTextfieldWord);void 0!==Ne&&(Ne.replaceText=e.wordChangeSelect)}if(e.isImageUpload&&(e.defaultImage=e.image,ci.currentDialog="appImageUpload",ci.data=e,ci.imgProp="image"),e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var We=e.changeTemplatesList.split(","),Ee=0;Ee<We.length;Ee++){var Ue=We[Ee],Le=zt.get(Ue);if(void 0===Le){var ze=Lt.get(Ue);if(void 0===ze){var Ge=Gt.get(Ue);if(void 0===Ge);else{for(var _e=Ge.rowElements,He=0;He<_e.length;He++){var Ye=Lt.get(_e[He]);void 0!==Ye&&wn(Ye,e.id,e.changeToThisTemplate)}for(var Je=Ge.elements,Ze=0;Ze<Je.length;Ze++){var Xe=zt.get(Je[Ze]);if(void 0!==Xe){var Ke=Xe.choice;if(wn(Ke,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(var Qe=0;Qe<Ke.addons.length;Qe++){wn(Ke.addons[Qe],e.id,e.changeToThisTemplate)}}}}}else wn(ze,e.id,e.changeToThisTemplate)}else{var et=Le.choice;if(wn(et,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(var tt=0;tt<et.addons.length;tt++){wn(et.addons[tt],e.id,e.changeToThisTemplate)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var it=e.changeWidthList.split(","),ot=0;ot<it.length;ot++){var nt=it[ot],rt=zt.get(nt);if(void 0===rt){var at=Lt.get(nt);if(void 0===at){var ct=Gt.get(nt);if(void 0===ct);else{for(var lt=ct.rowElements,st=0;st<lt.length;st++){var ut=Lt.get(lt[st]);void 0!==ut&&In(ut,e.id,e.changeToThisWidth)}for(var dt=ct.elements,ft=0;ft<dt.length;ft++){var vt=zt.get(dt[ft]);if(void 0!==vt)In(vt.choice,e.id,e.changeToThisWidth)}}}else In(at,e.id,e.changeToThisWidth)}else{In(rt.choice,e.id,e.changeToThisWidth)}}if(e.setBgmIsOn&&e.bgmId&&(ni.bgmIsPlaying=!0,ni.isBgmInit||e.useAudioURL?ao(e,e.bgmId,0):(lo(e),ni.isBgmInit=!0)),e.muteBgm&&ii){var gt=x(ii);app.isMute=!0,gt&&"function"==typeof gt.mute&&gt.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var pt=0;pt<e.hiddenContentsRow.length;pt++){var mt=Lt.get(e.hiddenContentsRow[pt]);if(void 0!==mt){mt.textIsRemoved||(mt.textIsRemoved=!0);for(var ht=0;ht<e.hiddenContentsType.length;ht++)switch(e.hiddenContentsType[ht]){case"1":mt.objectTitleRemoved=!0;break;case"2":mt.objectImageRemoved=!0;break;case"3":mt.objectTextRemoved=!0;break;case"4":mt.objectScoreRemoved=!0;break;case"5":mt.objectRequirementRemoved=!0;break;case"6":mt.addonTitleRemoved=!0;break;case"7":mt.addonImageRemoved=!0;break;case"8":mt.addonTextRemoved=!0}}}e.scrollToRow&&O().then(function(){setTimeout(function(){if(e.scrollToObject){if(e.scrollObjectId){var t=zt.get(e.scrollObjectId);if(void 0!==t){var o,n=t.choice,r=t.row,a=app.useToolbarBtn||!i.bCreatorMode||"appCyoaViewer"===Qt.value?r.index:r.index+1,c="appCyoaViewer"===Qt.value?0:1,l=null===(o=i.mainDiv)||void 0===o||null===(o=o.children[a])||void 0===o||null===(o=o.children[c])||void 0===o||null===(o=o.children[1])||void 0===o?void 0:o.children;if(void 0!==l){if(i.isBackpack){var s=document.getElementById("backpackDialog");null==s||s.scrollTo({top:l[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}window.scrollTo({top:l[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}}else if(e.scrollRowId){var u=Lt.get(e.scrollRowId);if(void 0!==u){var d,f=null===(d=i.mainDiv)||void 0===d?void 0:d.children;if(void 0!==f){var v=app.useToolbarBtn||!i.bCreatorMode?u.index:u.index+1;if(i.isBackpack){var g=document.getElementById("backpackDialog");null==g||g.scrollTo({top:f[v].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:f[v].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}},10)}),e.cleanACtivatedOnSelect&&To(),Oo(e,n,0,void 0,void 0,i),Ao(i),!io(e.requireds)&&e.isActive&&ko(e,t,i)};if(e.isSelectDelayed&&void 0!==e.selectDelayTime&&!e.selectDelayTimer)e.selectDelayTimer=window.setTimeout(function(){return e.customTextfieldIsOn&&!i.isOverDlg?(ai.choice=e,ai.row=t,ai.context=void 0!==e.wordPromptText?e.wordPromptText:"",ai.prevText=e.wordChangeSelect||"",ai.isWord=!0,ai.currentDialog="dlgCommon",void(ai.cFunc=function(e,t){"accept"===e.detail.action&&ai.choice&&ai.row&&(ai.isWord&&(ai.choice.wordChangeSelect=t),i.isOverDlg=!0,ai.isForced=!1,Et.delete(ai.choice.id),Bo(ai.choice,ai.row,i))})):e.confirmIsOn&&!i.isOverDlg?(ai.choice=e,ai.row=t,ai.context=void 0!==e.wordPromptText?e.wordPromptText:"",ai.isWord=!1,ai.currentDialog="dlgCommon",void(ai.cFunc=function(e){"accept"===e.detail.action&&ai.choice&&ai.row&&(i.isOverDlg=!0,ai.isForced=!1,Et.delete(ai.choice.id),Bo(ai.choice,ai.row,i))})):(-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,v()},1e3*app.fadeTransitionTime)):v()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0),e.selectDelayTimer=0,void delete e.selectDelayTimer)},e.selectDelayTime);else{if(e.customTextfieldIsOn&&!i.isOverDlg)return ai.choice=e,ai.row=t,ai.context=void 0!==e.wordPromptText?e.wordPromptText:"",ai.prevText=e.wordChangeSelect||"",ai.isWord=!0,ai.currentDialog="dlgCommon",void(ai.cFunc=function(e,t){"accept"===e.detail.action&&ai.choice&&ai.row&&(ai.isWord&&(ai.choice.wordChangeSelect=t),i.isOverDlg=!0,ai.isForced=!1,Et.delete(ai.choice.id),Bo(ai.choice,ai.row,i))});if(e.confirmIsOn&&!i.isOverDlg)return ai.choice=e,ai.row=t,ai.context=void 0!==e.wordPromptText?e.wordPromptText:"",ai.isWord=!1,ai.currentDialog="dlgCommon",void(ai.cFunc=function(e){"accept"===e.detail.action&&ai.choice&&ai.row&&(i.isOverDlg=!0,ai.isForced=!1,Et.delete(ai.choice.id),Bo(ai.choice,ai.row,i))});-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,v()},1e3*app.fadeTransitionTime)):v()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0)}}else for(var p=0;p<e.scores.length;p++){var h=e.scores[p];h.setValue&&delete h.setValue}}function Mo(e,t,i){var o=void 0===e.parentId,n=io(e.requireds)&&!t.isInfoRow&&!e.isNotSelectable,r=!0,a=t;if(t.isResultRow){var c=zt.get(e.id);void 0!==c&&(a=c.row)}if(n&&o&&e.isMultipleUseVariable&&0===e.multipleUseVariable&&a.allowedChoices>0&&a.currentChoices>=a.allowedChoices){for(var l=0,s=0;s<a.objects.length;s++){var u=a.objects[s];if(u.isActive){if(!u.forcedActivated&&!u.selectOnce){if(u.isSelectableMultiple)for(var f=u.multipleUseVariable,v=0;v<f;v++)Do(u,a,i);else Io(u,a,!1,i);break}l++}}l>=a.allowedChoices&&(r=!1)}if(r)if(bo(e,!0)){var p=function(){var n=new d,r=e.isActive,c=e.multipleUseVariable>=0,l=Math.abs(e.multipleUseVariable);if(e.multipleUseVariable+=1,0===e.multipleUseVariable?(Wt.delete(e.id),e.isActive=!1,o&&(a.currentChoices-=1)):(1===e.multipleUseVariable&&(e.isActive=!0,o&&(a.currentChoices+=1)),Wt.set(e.id,{multiple:e.multipleUseVariable})),c){if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue&&(e.stackableDiscount||!e.stackableDiscount&&1===e.multipleUseVariable))if(e.isDisChoices){var s=new Set;if(void 0!==e.discountRows)for(var u=0;u<e.discountRows.length;u++){var f=Lt.get(e.discountRows[u]);if(void 0!==f)for(var v=0;v<f.objects.length;v++){var p=f.objects[v];po(e,p),s.add(p.id)}}if(void 0!==e.discountChoices)for(var h=0;h<e.discountChoices.length;h++)if(!s.has(e.discountChoices[h])){var b=zt.get(e.discountChoices[h]);void 0!==b&&po(e,b.choice)}}else if(void 0!==e.discountGroups)for(var w=0;w<e.discountGroups.length;w++){var T=Gt.get(e.discountGroups[w]);if(void 0!==T)for(var I=0;I<T.elements.length;I++){var S=zt.get(T.elements[I]);void 0!==S&&po(e,S.choice)}}for(var y=new Set,C=0;C<e.scores.length;C++){var A=e.scores[C];if(void 0===A.isActiveMul&&(A.isActiveMul=[]),io(A.requireds)&&!A.isActiveMul[l]){var k=Ut.get(A.id);if(void 0!==k){var B=A.value;if(A.useExpression&&A.setValue&&ho(k,A),A.appliedDiscount&&void 0!==A.discountScore)B=A.discountScore;else if(A.discountIsOn&&void 0!==A.discountScore&&A.discountedFrom&&A.discountedFrom.length>0){for(var M=!1,D=0;D<A.discountedFrom.length;D++){var F=zt.get(A.discountedFrom[D]);if(void 0!==F){var R=F.choice;if(!R.useDiscountCount||void 0===R.discountCount){B=A.discountScore,A.appliedDiscount=!0,M=!0;break}var j=R.isSelectableMultiple&&R.isMultipleUseVariable&&R.stackableDiscount?R.discountCount*R.multipleUseVariable:R.discountCount;if(R.appliedDisChoices||(R.appliedDisChoices=[]),j>R.appliedDisChoices.length){y.add(R),B=A.discountScore,A.appliedDiscount=!0,M=!0;break}}}if(!M&&void 0!==A.tmpDiscount)for(var q=0;q<A.tmpDiscount.length;q++)B>A.tmpDiscount[q].discountedValue&&(B=A.tmpDiscount[q].discountedValue)}B=k.allowFloat?B:Math.floor(B),A.multiplyByTimes&&(B*=l+1),k.startingSum-=B,A.isActiveMul[l]=!0;var P=n.get(A.id);void 0!==P?n.set(A.id,B+P):n.set(A.id,B)}}}y.size>0&&y.forEach(function(t){t.appliedDisChoices&&-1===t.appliedDisChoices.indexOf(e.id)&&t.appliedDisChoices.push(e.id)})}else for(var $=0;$<e.scores.length;$++){var V=e.scores[$];if(void 0===V.isActiveMulMinus&&(V.isActiveMulMinus=[]),io(V.requireds)&&V.isActiveMulMinus[l]||V.isActiveMulMinus[l]){var N=Ut.get(V.id);if(void 0!==N){var W=V.discountIsOn&&void 0!==V.discountScore?V.discountScore:V.value;W=N.allowFloat?W:Math.floor(W),V.multiplyByTimes&&(W*=Math.abs(l)),N.startingSum-=W;var E=n.get(V.id);void 0!==E?n.set(V.id,W+E):n.set(V.id,W),delete V.isActiveMulMinus[l]}}}if(c&&(e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&$o(e),e.activateOtherChoice&&void 0!==e.activateThisChoice))if(e.isActivateRandom)xo(e,i);else for(var U=e.activateThisChoice.split(","),L=0;L<U.length;L++){var z=U[L].split("/ON#"),G=z.length>1?parseInt(z[1]):0,_=zt.get(z[0]);if(void 0!==_){var H=_.row,Y=_.choice;!Y.isSelectableMultiple&&r||So(e,Y,H,G,i)}else{var J=Gt.get(z[0]);if(void 0!==J)for(var Z=J.elements,X=0;X<Z.length;X++){var K=zt.get(Z[X]);if(void 0!==K){var Q=K.row,ee=K.choice;!ee.isSelectableMultiple&&r||So(e,ee,Q,G,i)}}}}if(Array.from(Wt.entries()).forEach(function(t){var o=g(t,2),n=o[0],r=o[1],a=zt.get(n);if(void 0!==a){var c=a.row,l=a.choice;if(l.id!==e.id&&!io(l.requireds))if(l.forcedActivated&&(delete l.forcedActivated,Et.set(l.id,{multiple:r.multiple})),0===r.multiple){if(l.isActive){var s=m({},i);s.isOverDlg=!1,s.isOverImg=!1,ko(l,c,s)}}else if(r.multiple>0)for(var u=0;u<r.multiple;u++)if(l.isActive){var d=m({},i);d.isOverDlg=!1,d.isOverImg=!1,Do(l,c,d)}}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var te=0;te<e.idOfAllowChoice.length;te++){var ie=Lt.get(e.idOfAllowChoice[te]);if(void 0!==ie&&(ie.allowedChoices+=e.numbAddToAllowChoice,ie.allowedChoices>0&&ie.currentChoices>=ie.allowedChoices))for(var oe=0;oe<ie.objects.length;oe++){var ne=ie.objects[oe];if(ne.isActive&&!ne.forcedActivated)if(ne.isSelectableMultiple)for(var re=ne.multipleUseVariable,ae=0;ae<re;ae++){var ce=m({},i);ce.isOverDlg=!1,ce.isOverImg=!1,Do(ne,ie,ce)}else if(ne.isActive){var le=m({},i);le.isOverDlg=!1,le.isOverImg=!1,ko(ne,ie,le)}if(ie.allowedChoices>=ie.currentChoices)break}}if(!r){if(e.isChangeVariables&&void 0!==e.changedVariables)for(var se=0;se<e.changedVariables.length;se++){var ue=Yt.get(e.changedVariables[se]);void 0!==ue&&("1"===e.changeType?ue.isTrue=!0:"2"===e.changeType?ue.isTrue=!1:"3"===e.changeType&&(ue.isTrue=!ue.isTrue))}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){var de=Ht.get(e.idOfTheTextfieldWord);void 0!==de&&(de.replaceText=e.wordChangeSelect)}if(e.isImageUpload&&(e.defaultImage=e.image,ci.currentDialog="appImageUpload",ci.data=e,ci.imgProp="image"),e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var fe=e.changeTemplatesList.split(","),ve=0;ve<fe.length;ve++){var ge=fe[ve],pe=zt.get(ge);if(void 0===pe){var me=Lt.get(ge);if(void 0===me){var he=Gt.get(ge);if(void 0===he);else{for(var be=he.rowElements,we=0;we<be.length;we++){var Te=Lt.get(be[we]);void 0!==Te&&wn(Te,e.id,e.changeToThisTemplate)}for(var Ie=he.elements,Se=0;Se<Ie.length;Se++){var ye=zt.get(Ie[Se]);if(void 0!==ye){var xe=ye.choice;if(wn(xe,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(var Ce=0;Ce<xe.addons.length;Ce++){wn(xe.addons[Ce],e.id,e.changeToThisTemplate)}}}}}else wn(me,e.id,e.changeToThisTemplate)}else{var Oe=pe.choice;if(wn(Oe,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(var Ae=0;Ae<Oe.addons.length;Ae++){wn(Oe.addons[Ae],e.id,e.changeToThisTemplate)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var ke=e.changeWidthList.split(","),Be=0;Be<ke.length;Be++){var Me=ke[Be],De=zt.get(Me);if(void 0===De){var Fe=Lt.get(Me);if(void 0===Fe){var Re=Gt.get(Me);if(void 0===Re);else{for(var je=Re.rowElements,qe=0;qe<je.length;qe++){var Pe=Lt.get(je[qe]);void 0!==Pe&&In(Pe,e.id,e.changeToThisWidth)}for(var $e=Re.elements,Ve=0;Ve<$e.length;Ve++){var Ne=zt.get($e[Ve]);if(void 0!==Ne)In(Ne.choice,e.id,e.changeToThisWidth)}}}else In(Fe,e.id,e.changeToThisWidth)}else{In(De.choice,e.id,e.changeToThisWidth)}}if(e.setBgmIsOn&&e.bgmId&&(ni.bgmIsPlaying=!0,ni.isBgmInit||e.useAudioURL?ao(e,e.bgmId,0):(lo(e),ni.isBgmInit=!0)),e.muteBgm&&oi){var We=x(oi);app.isMute=!0,We&&"function"==typeof We.mute&&We.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var Ee=0;Ee<e.hiddenContentsRow.length;Ee++){var Ue=Lt.get(e.hiddenContentsRow[Ee]);if(void 0!==Ue){Ue.textIsRemoved||(Ue.textIsRemoved=!0);for(var Le=0;Le<e.hiddenContentsType.length;Le++)switch(e.hiddenContentsType[Le]){case"1":Ue.objectTitleRemoved=!0;break;case"2":Ue.objectImageRemoved=!0;break;case"3":Ue.objectTextRemoved=!0;break;case"4":Ue.objectScoreRemoved=!0;break;case"5":Ue.objectRequirementRemoved=!0;break;case"6":Ue.addonTitleRemoved=!0;break;case"7":Ue.addonImageRemoved=!0;break;case"8":Ue.addonTextRemoved=!0}}}e.scrollToRow&&O().then(function(){setTimeout(function(){if(e.scrollToObject){if(e.scrollObjectId){var t=zt.get(e.scrollObjectId);if(void 0!==t){var o,n=t.choice,r=t.row,a=app.useToolbarBtn||!i.bCreatorMode||"appCyoaViewer"===Qt.value?r.index:r.index+1,c="appCyoaViewer"===Qt.value?0:1,l=null===(o=i.mainDiv)||void 0===o||null===(o=o.children[a])||void 0===o||null===(o=o.children[c])||void 0===o||null===(o=o.children[1])||void 0===o?void 0:o.children;if(void 0!==l){if(i.isBackpack){var s=document.getElementById("backpackDialog");null==s||s.scrollTo({top:l[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}window.scrollTo({top:l[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}}else if(e.scrollRowId){var u=Lt.get(e.scrollRowId);if(void 0!==u){var d,f=null===(d=i.mainDiv)||void 0===d?void 0:d.children;if(void 0!==f){var v=app.useToolbarBtn||!i.bCreatorMode?u.index:u.index+1;if(i.isBackpack){var g=document.getElementById("backpackDialog");null==g||g.scrollTo({top:f[v].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:f[v].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}},10)})}if(Oo(e,n,0,void 0,void 0,i),Ao(i),!io(e.requireds)&&e.isActive&&Do(e,t,i),!e.isActive&&e.deselectParent&&e.parentId){var ze=zt.get(e.parentId);if(void 0!==ze){var Ge=ze.choice;if(Ge.isActive)if(Ge.isSelectableMultiple&&Ge.isMultipleUseVariable)for(var _e=Ge.multipleUseVariable,He=0;He<Math.abs(_e);He++)_e>0?Do(Ge,t,i):Mo(Ge,t,i);else ko(Ge,t,i)}}};if(n)if(e.isMultipleUseVariable){if(void 0===e.multipleUseVariable&&(e.multipleUseVariable=0),void 0===e.numMultipleTimesPluss&&(e.numMultipleTimesPluss=0),e.numMultipleTimesPluss>e.multipleUseVariable)if(e.isSelectDelayed&&void 0!==e.selectDelayTime)e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(function(){return!e.customTextfieldIsOn||i.isOverDlg||e.isActive?e.confirmIsOn&&!i.isOverDlg?(ai.choice=e,ai.row=t,ai.context=void 0!==e.wordPromptText?e.wordPromptText:"",ai.isWord=!1,ai.currentDialog="dlgCommon",void(ai.cFunc=function(e){"accept"===e.detail.action&&ai.choice&&ai.row&&(i.isOverDlg=!0,ai.isForced=!1,Et.delete(ai.choice.id),Mo(ai.choice,ai.row,i))})):(-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,p()},1e3*app.fadeTransitionTime)):p()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0),e.selectDelayTimer=0,void delete e.selectDelayTimer):(ai.choice=e,ai.row=t,ai.context=void 0!==e.wordPromptText?e.wordPromptText:"",ai.prevText=e.wordChangeSelect||"",ai.isWord=!0,ai.currentDialog="dlgCommon",void(ai.cFunc=function(e,t){"accept"===e.detail.action&&ai.choice&&ai.row&&(ai.isWord&&(ai.choice.wordChangeSelect=t),i.isOverDlg=!0,ai.isForced=!1,Et.delete(ai.choice.id),Mo(ai.choice,ai.row,i))}))},e.selectDelayTime));else{if(e.customTextfieldIsOn&&!i.isOverDlg&&!e.isActive)return ai.choice=e,ai.row=t,ai.context=void 0!==e.wordPromptText?e.wordPromptText:"",ai.prevText=e.wordChangeSelect||"",ai.isWord=!0,ai.currentDialog="dlgCommon",void(ai.cFunc=function(e,t){"accept"===e.detail.action&&ai.choice&&ai.row&&(ai.isWord&&(ai.choice.wordChangeSelect=t),i.isOverDlg=!0,ai.isForced=!1,Et.delete(ai.choice.id),Mo(ai.choice,ai.row,i))});if(e.confirmIsOn&&!i.isOverDlg)return ai.choice=e,ai.row=t,ai.context=void 0!==e.wordPromptText?e.wordPromptText:"",ai.isWord=!1,ai.currentDialog="dlgCommon",void(ai.cFunc=function(e){"accept"===e.detail.action&&ai.choice&&ai.row&&(i.isOverDlg=!0,ai.isForced=!1,Et.delete(ai.choice.id),Mo(ai.choice,ai.row,i))});-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,p()},1e3*app.fadeTransitionTime)):p()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0)}}else if(void 0!==e.multipleScoreId){var h=Ut.get(e.multipleScoreId);void 0!==h&&(void 0===e.numMultipleTimesPluss&&(e.numMultipleTimesPluss=0),e.numMultipleTimesPluss>h.startingSum&&(h.startingSum+=1))}}else for(var b=0;b<e.scores.length;b++){var w=e.scores[b];w.setValue&&delete w.setValue}}function Do(e,t,i){var o=void 0===e.parentId,n=bo(e,!1),r=t;if(t.isResultRow){var a=zt.get(e.id);void 0!==a&&(r=a.row)}if(n){var c=function(){var n=new d,a=e.multipleUseVariable>0,c=Math.abs(e.multipleUseVariable-1);if(a){for(var l=0;l<e.scores.length;l++){var s=e.scores[l];if(void 0!==s.isActiveMul&&(io(s.requireds)&&s.isActiveMul[c]||s.isActiveMul[c])){var u=Ut.get(s.id);if(void 0!==u){var f=s.discountIsOn&&void 0!==s.discountScore?s.discountScore:s.useExpression&&s.mulValue&&s.mulValue[c]?s.mulValue[c]:s.value;f=u.allowFloat?f:Math.floor(f),s.multiplyByTimes&&(f*=c+1),u.startingSum+=f;var v=n.get(s.id);void 0!==v?n.set(s.id,-f+v):n.set(s.id,-f),delete s.isActiveMul[c],s.mulValue&&delete s.mulValue[c],0===c&&delete s.setValue}}}if(e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandomMul&&void 0!==e.activatedRandomMul[c]){for(var p=0;p<e.activatedRandomMul[c].length;p++){var h=e.activatedRandomMul[c][p].split("/ON#"),b=zt.get(h[0]);if(void 0!==b){var w=b.row,T=b.choice,I=h.length>1?Number(h[1]):0,S=m({},i);S.isOverDlg=!1,S.isOverImg=!1,yo(e,T,w,I,S)}}e.activatedRandomMul.splice(c,1)}else for(var y=e.activateThisChoice.split(","),C=0;C<y.length;C++){var O=y[C].split("/ON#"),A=O.length>1?parseInt(O[1]):0,k=zt.get(O[0]);if(void 0!==k){var B=k.row,M=k.choice;if(0===c||M.isSelectableMultiple){var D=m({},i);D.isOverDlg=!1,D.isOverImg=!1,yo(e,M,B,A,D)}}else{var F=Gt.get(O[0]);if(void 0!==F)for(var R=F.elements,j=0;j<R.length;j++){var q=zt.get(R[j]);if(void 0!==q){var P=q.row,$=q.choice;if(0===c||$.isSelectableMultiple){var V=m({},i);V.isOverDlg=!1,V.isOverImg=!1,yo(e,$,P,A,V)}}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue&&(e.stackableDiscount||!e.stackableDiscount&&1===e.multipleUseVariable))if(void 0===e.discountPointTypes&&(e.discountPointTypes=[]),e.isDisChoices){var N=new Set;if(void 0!==e.discountRows)for(var W=0;W<e.discountRows.length;W++){var E=Lt.get(e.discountRows[W]);if(void 0!==E)for(var U=0;U<E.objects.length;U++){var L=E.objects[U];go(e,L),N.add(L.id)}}if(void 0!==e.discountChoices)for(var z=0;z<e.discountChoices.length;z++)if(!N.has(e.discountChoices[z])){var G=zt.get(e.discountChoices[z]);void 0!==G&&go(e,G.choice)}}else if(void 0!==e.discountGroups)for(var _=0;_<e.discountGroups.length;_++){var H=Gt.get(e.discountGroups[_]);if(void 0!==H)for(var Y=0;Y<H.elements.length;Y++){var J=zt.get(H.elements[Y]);void 0!==J&&go(e,J.choice)}}}else for(var Z=0;Z<e.scores.length;Z++){var X=e.scores[Z];if(void 0===X.isActiveMulMinus&&(X.isActiveMulMinus=[]),io(X.requireds)&&!X.isActiveMulMinus[c]){var K=Ut.get(X.id);if(void 0!==K){var Q=X.discountIsOn&&void 0!==X.discountScore?X.discountScore:X.value;Q=K.allowFloat?Q:Math.floor(Q),X.multiplyByTimes&&(Q*=c),K.startingSum+=Q;var ee=n.get(X.id);void 0!==ee?n.set(X.id,-Q+ee):n.set(X.id,-Q),X.isActiveMulMinus[c]=!0}}}if(e.multipleUseVariable-=1,0===e.multipleUseVariable?(e.isActive=!1,o&&(r.currentChoices-=1),Wt.delete(e.id)):(-1===e.multipleUseVariable&&(e.isActive=!0,o&&(r.currentChoices+=1)),Wt.set(e.id,{multiple:e.multipleUseVariable})),Array.from(Wt.entries()).forEach(function(t){var o=g(t,2),n=o[0],r=o[1],a=zt.get(n);if(void 0!==a){var c=a.row,l=a.choice;if(l.id!==e.id&&!io(l.requireds))if(l.forcedActivated&&(delete l.forcedActivated,Et.set(l.id,{multiple:r.multiple})),0===r.multiple){if(l.forcedActivated&&delete l.forcedActivated,l.isActive){var s=m({},i);s.isOverDlg=!1,s.isOverImg=!1,ko(l,c,s)}}else if(r.multiple>0)for(var u=0;u<r.multiple;u++)if(l.isActive){var d=m({},i);d.isOverDlg=!1,d.isOverImg=!1,Do(l,c,d)}}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var te=0;te<e.idOfAllowChoice.length;te++){var ie=Lt.get(e.idOfAllowChoice[te]);if(void 0!==ie&&(ie.allowedChoices-=e.numbAddToAllowChoice,ie.allowedChoices>0&&ie.currentChoices>=ie.allowedChoices))for(var oe=0;oe<ie.objects.length;oe++){var ne=ie.objects[oe];if(ne.isActive&&!ne.forcedActivated)if(ne.isSelectableMultiple)for(var re=ne.multipleUseVariable,ae=0;ae<re;ae++){var ce=m({},i);ce.isOverDlg=!1,ce.isOverImg=!1,Do(ne,ie,ce)}else if(ne.isActive){var le=m({},i);le.isOverDlg=!1,le.isOverImg=!1,ko(ne,ie,le)}if(ie.allowedChoices>=ie.currentChoices)break}}if(0===c){if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){var se=Ht.get(e.idOfTheTextfieldWord);void 0!==se&&(se.replaceText=void 0===e.wordChangeDeselect?"":e.wordChangeDeselect)}if(e.isImageUpload&&void 0!==e.defaultImage&&(e.image=e.defaultImage),e.isChangeVariables&&void 0!==e.changedVariables)for(var ue=0;ue<e.changedVariables.length;ue++){var de=Yt.get(e.changedVariables[ue]);void 0!==de&&("1"===e.changeType?de.isTrue=!1:"2"===e.changeType?de.isTrue=!0:"3"===e.changeType&&(de.isTrue=!de.isTrue))}if(e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.showAllAddons&&void 0!==app.showAllAddons&&(app.showAllAddons-=1),e.changeBackground)if(e.changeBgImage){if(void 0!==app.bgImageStack){var fe=app.bgImageStack.findIndex(function(t){return t.id===e.id});-1!==fe&&app.bgImageStack.splice(fe,1);var ve=app.bgImageStack.length;ve>0?app.styling.backgroundImage=app.bgImageStack[ve-1].data:(app.styling.backgroundImage=app.defaultBgImage||"",delete app.bgImageStack)}}else if(void 0!==e.changedBgColorCode&&void 0!==app.bgColorStack){var ge=app.bgColorStack.findIndex(function(t){return t.id===e.id});-1!==ge&&app.bgColorStack.splice(ge,1);var pe=app.bgColorStack.length;pe>0?app.styling.backgroundColor=app.bgColorStack[pe-1].data:(app.styling.backgroundColor=app.defaultBgColor||"#FFFFFFFF",delete app.bgColorStack)}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&void 0!==app.barBgColorStack){var me=app.barBgColorStack.findIndex(function(t){return t.id===e.id});-1!==me&&app.barBgColorStack.splice(me,1);var he=app.barBgColorStack.length;he>0?app.styling.barBackgroundColor=app.barBgColorStack[he-1].data:(app.styling.barBackgroundColor=app.defaultBarBgColor||"#FFFFFFFF",delete app.barBgColorStack)}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&void 0!==app.barIconColorStack){var be=app.barIconColorStack.findIndex(function(t){return t.id===e.id});-1!==be&&app.barIconColorStack.splice(be,1);var we=app.barIconColorStack.length;we>0?app.styling.barIconColor=app.barIconColorStack[we-1].data:(app.styling.barIconColor=app.defaultBarIconColor||"#0000008A",delete app.barIconColorStack)}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&void 0!==app.barTextColorStack){var Te=app.barTextColorStack.findIndex(function(t){return t.id===e.id});-1!==Te&&app.barTextColorStack.splice(Te,1);var Ie=app.barTextColorStack.length;Ie>0?app.styling.barTextColor=app.barTextColorStack[Ie-1].data:(app.styling.barTextColor=app.defaultBarIconColor||"#000000",delete app.barTextColorStack)}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var Se=e.changeTemplatesList.split(","),ye=0;ye<Se.length;ye++){var xe=Se[ye],Ce=zt.get(xe);if(void 0===Ce){var Oe=Lt.get(xe);if(void 0===Oe){var Ae=Gt.get(xe);if(void 0===Ae);else{for(var ke=Ae.rowElements,Be=0;Be<ke.length;Be++){var Me=Lt.get(ke[Be]);void 0!==Me&&Tn(Me,e.id)}for(var De=Ae.elements,Fe=0;Fe<De.length;Fe++){var Re=zt.get(De[Fe]);if(void 0!==Re){var je=Re.choice;if(Tn(je,e.id),e.changeAddonTemplate)for(var qe=0;qe<je.addons.length;qe++){Tn(je.addons[qe],e.id)}}}}}else Tn(Oe,e.id)}else{var Pe=Ce.choice;if(Tn(Pe,e.id),e.changeAddonTemplate)for(var $e=0;$e<Pe.addons.length;$e++){Tn(Pe.addons[$e],e.id)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var Ve=e.changeWidthList.split(","),Ne=0;Ne<Ve.length;Ne++){var We=Ve[Ne],Ee=zt.get(We);if(void 0===Ee){var Ue=Lt.get(We);if(void 0===Ue){var Le=Gt.get(We);if(void 0===Le);else{for(var ze=Le.rowElements,Ge=0;Ge<ze.length;Ge++){var _e=Lt.get(ze[Ge]);void 0!==_e&&Sn(_e,e.id)}for(var He=Le.elements,Ye=0;Ye<He.length;Ye++){var Je=zt.get(He[Ye]);if(void 0!==Je)Sn(Je.choice,e.id)}}}else Sn(Ue,e.id)}else{Sn(Ee.choice,e.id)}}if(e.setBgmIsOn&&oi&&e.bgmId&&(ni.bgmIsPlaying=!1,ao(e,e.bgmId,0)),e.muteBgm&&oi){var Ze=x(oi);app.isMute=!1,Ze&&"function"==typeof Ze.unMute&&Ze.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var Xe=0;Xe<e.hiddenContentsRow.length;Xe++){var Ke=Lt.get(e.hiddenContentsRow[Xe]);if(void 0!==Ke)for(var Qe=0;Qe<e.hiddenContentsType.length;Qe++)switch(e.hiddenContentsType[Qe]){case"1":Ke.objectTitleRemoved=!1;break;case"2":Ke.objectImageRemoved=!1;break;case"3":Ke.objectTextRemoved=!1;break;case"4":Ke.objectScoreRemoved=!1;break;case"5":Ke.objectRequirementRemoved=!1;break;case"6":Ke.addonTitleRemoved=!1;break;case"7":Ke.addonImageRemoved=!1;break;case"8":Ke.addonTextRemoved=!1}}}if(Co(e,n,0,void 0,void 0,i),Ao(i),!e.isActive&&e.deselectParent&&e.parentId){var et=zt.get(e.parentId);if(void 0!==et){var tt=et.choice;if(tt.isActive)if(tt.isSelectableMultiple&&tt.isMultipleUseVariable)for(var it=tt.multipleUseVariable,ot=0;ot<Math.abs(it);ot++)it>0?Do(tt,t,i):Mo(tt,t,i);else ko(tt,t,i)}}};if(!t.isInfoRow&&!e.isNotSelectable&&!e.selectOnce)if(e.isMultipleUseVariable){if(void 0===e.numMultipleTimesMinus&&(e.numMultipleTimesMinus=0),e.multipleUseVariable>e.numMultipleTimesMinus)if(e.isSelectDelayed&&void 0!==e.selectDelayTime)e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(function(){if(e.customTextfieldIsOn&&!i.isOverDlg&&e.multipleUseVariable===e.numMultipleTimesMinus+1)return ai.choice=e,ai.row=t,ai.context=void 0!==e.wordPromptText?e.wordPromptText:"",ai.prevText=e.wordChangeSelect||"",ai.isWord=!0,ai.currentDialog="dlgCommon",ai.isDeselect=!0,void(ai.cFunc=function(o,n){if("deselect"===o.detail.action)i.isOverDlg=!0,Do(e,t,i);else if("accept"===o.detail.action&&ai.choice&&ai.choice.idOfTheTextfieldWord){if(ai.isWord){ai.choice.wordChangeSelect=n;var r=Ht.get(ai.choice.idOfTheTextfieldWord);void 0!==r&&(r.replaceText=ai.choice.wordChangeSelect||"")}i.isOverDlg=!0}delete ai.isDeselect});-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,c()},1e3*app.fadeTransitionTime)):c()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0),e.selectDelayTimer=0,delete e.selectDelayTimer},e.selectDelayTime));else{if(e.customTextfieldIsOn&&!i.isOverDlg&&e.multipleUseVariable===e.numMultipleTimesMinus+1)return ai.choice=e,ai.row=t,ai.context=void 0!==e.wordPromptText?e.wordPromptText:"",ai.prevText=e.wordChangeSelect||"",ai.isWord=!0,ai.currentDialog="dlgCommon",ai.isDeselect=!0,void(ai.cFunc=function(o,n){if("deselect"===o.detail.action)i.isOverDlg=!0,Do(e,t,i);else if("accept"===o.detail.action&&ai.choice&&ai.choice.idOfTheTextfieldWord){if(ai.isWord){ai.choice.wordChangeSelect=n;var r=Ht.get(ai.choice.idOfTheTextfieldWord);void 0!==r&&(r.replaceText=ai.choice.wordChangeSelect||"")}i.isOverDlg=!0}delete ai.isDeselect});-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,c()},1e3*app.fadeTransitionTime)):c()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0)}}else if(void 0!==e.multipleScoreId){var l=Ut.get(e.multipleScoreId);void 0!==l&&(void 0===e.numMultipleTimesMinus&&(e.numMultipleTimesMinus=0),l.startingSum>e.numMultipleTimesMinus&&(l.startingSum-=1))}}}function Fo(e,t,i){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,n=Array.from(Wt.keys()),r=0;r<n.length;r++){var a=n[r],c=zt.get(a);if(void 0!==c){var l=c.row,s=c.choice,u=new d,f=!1,g=!1;e.useDiscountCount&&!e.appliedDisChoices&&(e.appliedDisChoices=[]);for(var p=0;p<s.scores.length;p++){var m=s.scores[p];if(!m.isNotRecalculatable){var h=Ut.get(m.id);if(void 0!==h){if(e.discountOther&&m.isChangeDiscount&&void 0!==m.tmpDisScore){var b=s.multipleUseVariable,w=e.isSelectableMultiple&&e.isMultipleUseVariable&&e.stackableDiscount&&e.discountCount?e.discountCount*e.multipleUseVariable:e.discountCount;if(!e.useDiscountCount||e.useDiscountCount&&w&&w>e.appliedDisChoices.length){if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){for(var T=b-1;T>=0;T--)s.isActive&&(h.startingSum+=m.tmpDisScore);s.isActive&&(u.set(m.id,m.tmpDisScore),delete m.isChangeDiscount,delete m.tmpDisScore)}else s.isSelectableMultiple||(h.startingSum+=m.tmpDisScore,u.set(m.id,m.tmpDisScore),delete m.isChangeDiscount,delete m.tmpDisScore);g=!0,s.isActive&&(m.appliedDiscount=!0,f=!0)}}if(!o.has(m.idx))for(var I=e.scores.length>0,S=e.scores.length||1,y=0;y<S;y++){var x=I?e.scores[y]:null,C=x&&t.get(x.id)||0,O=x?Ut.get(x.id):null;if((!I||I&&O)&&s.isActive){var A=io(m.requireds),k=new d(JSON.parse(JSON.stringify(v(Wt))));k.delete(e.id),l.currentChoices-=1,O&&(O.startingSum+=C);var B=io(m.requireds,k);if(l.currentChoices+=1,O&&(O.startingSum-=C),B!==A){m.setValue||wo(h,m);var M=m.discountIsOn&&m.appliedDiscount&&void 0!==m.discountScore?m.discountScore:m.value;if(M=h.allowFloat?M:Math.floor(M),B)if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus)for(var D=s.multipleUseVariable-1;D>=0;D--)void 0!==m.isActiveMul&&m.isActiveMul[D]&&(h.startingSum+=M,u.set(m.id,M),m.isActiveMul[D]=!1);else s.isSelectableMultiple||m.isActive&&(h.startingSum+=M,u.set(m.id,M),delete m.isActive);else if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){var F=s.multipleUseVariable;void 0===m.isActiveMul&&(m.isActiveMul=[]);for(var R=F-1;R>=0;R--)m.isActiveMul[R]||(h.startingSum-=M,u.set(m.id,M),m.isActiveMul[R]=!0)}else s.isSelectableMultiple||m.isActive||(h.startingSum-=M,u.set(m.id,M),m.isActive=!0);g||(g=!0),o.add(m.idx)}}}}}}f&&e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(s.id)&&e.appliedDisChoices.push(s.id),g&&Fo(s,u,++i,o)}}}function Ro(e,t){var i=e.split("/IMG#"),o=i.length>1?i[1].replace(/\/CHAR#/g,","):"",n=(i=i[0].split("/WORD#")).length>1?i[1].replace(/\/CHAR#/g,","):"",r=(i=i[0].split("/RND#")).length>1?i[1].split("/AND#"):"",a=(i=i[0].split("/RS#")).length>1?i[1]:"",l=i[0],s=zt.get(l);if(void 0!==s){var f=s.row,g=s.choice,p=new Map,m=void 0===g.parentId;if(a)for(var h=a.split("/AND#"),b=0;b<h.length;b++){var w=h[b].split(":"),T=Number(w[0]),I=Number(w[1]);Number.isNaN(T)||p.set(T,Number.isNaN(I)?0:I)}for(var S=0;S<g.scores.length;S++){var y=g.scores[S],O=Ut.get(y.id);void 0===O||y.setValue||(p.size>0&&p.has(S)?(y.value=p.get(S),y.setValue=!0):wo(O,y))}var A=new d;if(g.isActive=!0,Wt.set(g.id,{multiple:0}),m&&(f.currentChoices+=1),g.discountOther&&void 0!==g.discountOperator&&void 0!==g.discountValue)if(g.isDisChoices){var k=new Set;if(void 0!==g.discountRows)for(var B=0;B<g.discountRows.length;B++){var M=Lt.get(g.discountRows[B]);if(void 0!==M)for(var D=0;D<M.objects.length;D++){var F=M.objects[D];po(g,F),k.add(F.id)}}if(void 0!==g.discountChoices)for(var R=0;R<g.discountChoices.length;R++)if(!k.has(g.discountChoices[R])){var j=zt.get(g.discountChoices[R]);if(void 0!==j){var q=j.choice;po(g,q)}}}else if(void 0!==g.discountGroups)for(var P=0;P<g.discountGroups.length;P++){var $=Gt.get(g.discountGroups[P]);if(void 0!==$)for(var V=0;V<$.elements.length;V++){var N=zt.get($.elements[V]);if(void 0!==N){var W=N.choice;po(g,W)}}}for(var E=new Set,U=0;U<g.scores.length;U++){var L=g.scores[U];if(io(L.requireds)&&!L.isActive){var z=Ut.get(L.id);if(void 0!==z){var G=L.value;if(L.useExpression&&L.setValue&&ho(z,L),L.appliedDiscount&&void 0!==L.discountScore)G=L.discountScore;else if(L.discountIsOn&&void 0!==L.discountScore&&L.discountedFrom&&L.discountedFrom.length>0){for(var _=!1,H=0;H<L.discountedFrom.length;H++){var Y=zt.get(L.discountedFrom[H]);if(void 0!==Y){var J=Y.choice;if(!J.useDiscountCount||void 0===J.discountCount){G=L.discountScore,L.appliedDiscount=!0,_=!0;break}var Z=J.isSelectableMultiple&&J.isMultipleUseVariable&&J.stackableDiscount?J.discountCount*J.multipleUseVariable:J.discountCount;if(J.appliedDisChoices||(J.appliedDisChoices=[]),Z>J.appliedDisChoices.length){E.add(J),G=L.discountScore,L.appliedDiscount=!0,_=!0;break}}}if(!_&&void 0!==L.tmpDiscount)for(var X=0;X<L.tmpDiscount.length;X++)G>L.tmpDiscount[X].discountedValue&&(G=L.tmpDiscount[X].discountedValue)}G=z.allowFloat?G:Math.floor(G),z.startingSum-=G,L.isActive=!0;var K=A.get(L.id);void 0!==K?A.set(L.id,G+K):A.set(L.id,G)}}}if(E.size>0&&E.forEach(function(e){e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(g.id)&&e.appliedDisChoices.push(g.id)}),g.duplicateRow&&void 0!==g.duplicateRowId&&void 0!==g.duplicateRowPlace&&$o(g),g.activateOtherChoice&&void 0!==g.activateThisChoice){var Q=new Set(t.map(function(e){return e.split("/ON#")[0]}));if(g.isActivateRandom&&void 0!==g.numActivateRandom)if(""===r){for(var ee=g.activateThisChoice.split(",").filter(function(e){return Q.has(e.split("/ON#")[0])}),te=g.numActivateRandom>ee.length?ee.length:g.numActivateRandom,ie=new Set,oe=0;oe<ee.length;oe++){var ne=zt.get(ee[oe]);if(void 0!==ne)if(!io(ne.choice.requireds)){var re=ee[oe];ee.splice(oe,1),ee.push(re)}}for(var ae=ee.length-1;ae>=0;ae--)ie.add(ee[ae]);ee=v(ie).reverse(),g.activatedRandom=ee.slice(0,te);for(var ce=0;ce<te;ce++){var le=g.activatedRandom[ce].split("/ON#"),se=zt.get(le[0]);if(void 0!==se){var ue=se.choice;if(!g.isAllowDeselect){if(ue.isSelectableMultiple&&ue.isMultipleUseVariable)for(var de=parseInt(le[1]),fe=0;fe<Math.abs(de);fe++)de>0&&void 0!==ue.numMultipleTimesMinus?ue.numMultipleTimesMinus++:de<0&&void 0!==ue.numMultipleTimesPluss&&ue.numMultipleTimesPluss--;ue.forcedActivated=!0}ue.isSelectableMultiple||(void 0===ue.activatedFrom&&(ue.activatedFrom=0),ue.activatedFrom+=1)}}}else{var ve=r.filter(function(e){return Q.has(e.split("/RON#")[0])});g.activatedRandom=ve;for(var ge=0;ge<ve.length;ge++){var pe=g.activatedRandom[ge].split("/RON#"),me=zt.get(pe[0]);if(void 0!==me){var he=me.choice;if(!g.isAllowDeselect){if(he.isSelectableMultiple&&he.isMultipleUseVariable)for(var be=parseInt(pe[1]),we=0;we<Math.abs(be);we++)be>0&&void 0!==he.numMultipleTimesMinus?he.numMultipleTimesMinus++:be<0&&void 0!==he.numMultipleTimesPluss&&he.numMultipleTimesPluss--;he.forcedActivated=!0}he.isSelectableMultiple||(void 0===he.activatedFrom&&(he.activatedFrom=0),he.activatedFrom+=1)}}}else{for(var Te=g.activateThisChoice.split(","),Ie=Te.filter(function(e){return Q.has(e.split("/ON#")[0])}),Se=Te.filter(function(e){return!Q.has(e.split("/ON#")[0])}),ye=0;ye<Ie.length;ye++){var xe=Ie[ye].split("/ON#"),Ce=xe.length>1?parseInt(xe[1]):0,Oe=zt.get(xe[0]);if(void 0!==Oe){var Ae=Oe.choice;if(!g.isAllowDeselect){if(Ae.isSelectableMultiple&&Ae.isMultipleUseVariable)if(g.isSelectableMultiple&&g.isMultipleUseVariable)for(var ke=0;ke<Math.abs(g.multipleUseVariable);ke++)for(var Be=0;Be<Math.abs(Ce);Be++)Ce>0&&void 0!==Ae.numMultipleTimesMinus?Ae.numMultipleTimesMinus++:Ce<0&&void 0!==Ae.numMultipleTimesPluss&&Ae.numMultipleTimesPluss--;else for(var Me=0;Me<Math.abs(Ce);Me++)Ce>0&&void 0!==Ae.numMultipleTimesMinus?Ae.numMultipleTimesMinus++:Ce<0&&void 0!==Ae.numMultipleTimesPluss&&Ae.numMultipleTimesPluss--;Ae.forcedActivated=!0}Ae.isSelectableMultiple||(void 0===Ae.activatedFrom&&(Ae.activatedFrom=0),Ae.activatedFrom+=1)}else{var De=Gt.get(xe[0]);if(void 0!==De)for(var Fe=De.elements,Re=0;Re<Fe.length;Re++){var je=zt.get(Fe[Re]);if(void 0!==je){var qe=je.choice;if(!g.isAllowDeselect){if(qe.isSelectableMultiple&&qe.isMultipleUseVariable)if(g.isSelectableMultiple&&g.isMultipleUseVariable)for(var Pe=0;Pe<Math.abs(g.multipleUseVariable);Pe++)for(var $e=0;$e<Math.abs(Ce);$e++)Ce>0&&void 0!==qe.numMultipleTimesMinus?qe.numMultipleTimesMinus++:Ce<0&&void 0!==qe.numMultipleTimesPluss&&qe.numMultipleTimesPluss--;else for(var Ve=0;Ve<Math.abs(Ce);Ve++)Ce>0&&void 0!==qe.numMultipleTimesMinus?qe.numMultipleTimesMinus++:Ce<0&&void 0!==qe.numMultipleTimesPluss&&qe.numMultipleTimesPluss--;qe.forcedActivated=!0}qe.isSelectableMultiple||(void 0===qe.activatedFrom&&(qe.activatedFrom=0),qe.activatedFrom+=1)}}}}for(var Ne=0;Ne<Se.length;Ne++){var We=Se[Ne].split("/ON#"),Ee=We.length>1?parseInt(We[1]):0,Ue=zt.get(We[0]);if(void 0!==Ue){var Le=Ue.choice;Et.set(Le.id,{multiple:Ee,isAllowDeselect:g.isAllowDeselect||!1})}}}}if(g.multiplyPointtypeIsOn&&void 0!==g.pointTypeToMultiply&&void 0!==g.multiplyWithThis){var ze=0;g.multiplyPointtypeIsOnCheck=!0,"object"!==u(g.startingSumAtMultiply)&&(g.startingSumAtMultiply=[]);for(var Ge=0;Ge<g.pointTypeToMultiply.length;Ge++){var _e=Ut.get(g.pointTypeToMultiply[Ge]);if(void 0!==_e)if(g.multiplyPointtypeIsId&&"string"==typeof g.multiplyWithThis){var He=Ut.get(g.multiplyWithThis);void 0!==He?(g.startingSumAtMultiply[Ge]={value:_e.startingSum,calcVal:He.startingSum},_e.startingSum*=He.startingSum,_e.startingSum=_e.allowFloat?_e.startingSum:Math.floor(_e.startingSum)):ze++}else"number"==typeof g.multiplyWithThis&&(g.startingSumAtMultiply[Ge]={value:_e.startingSum,calcVal:g.multiplyWithThis},_e.startingSum*=g.multiplyWithThis,_e.startingSum=_e.allowFloat?_e.startingSum:Math.floor(_e.startingSum));else ze++}ze===g.pointTypeToMultiply.length&&delete g.multiplyPointtypeIsOnCheck,g.multiplyPointtypeIsOnCheck&&Kt.push(g)}if(g.dividePointtypeIsOn&&void 0!==g.pointTypeToDivide&&void 0!==g.divideWithThis){var Ye=0;g.dividePointtypeIsOnCheck=!0,"object"!==u(g.startingSumAtDivide)&&(g.startingSumAtDivide=[]);for(var Je=0;Je<g.pointTypeToDivide.length;Je++){var Ze=Ut.get(g.pointTypeToDivide[Je]);void 0!==Ze?0===g.dividedWithThis?Ye++:(g.startingSumAtDivide[Je]={value:Ze.startingSum,calcVal:g.divideWithThis},Ze.startingSum/=g.divideWithThis,Ze.startingSum=Ze.allowFloat?Ze.startingSum:Math.floor(Ze.startingSum)):Ye++}Ye===g.pointTypeToDivide.length&&delete g.dividePointtypeIsOnCheck,!g.multiplyPointtypeIsOnCheck&&g.dividePointtypeIsOnCheck&&Kt.push(g)}if(g.setPointtypeIsOn&&void 0!==g.pointTypeToSet&&void 0!==g.setWithThis){var Xe=0;g.setPointtypeIsOnCheck=!0,"object"!==u(g.startingSumAtSet)&&(g.startingSumAtSet=[]);for(var Ke=0;Ke<g.pointTypeToSet.length;Ke++){var Qe=Ut.get(g.pointTypeToSet[Ke]);if(void 0!==Qe){var et=0;try{var tt=g.setWithThis.replace(/\{([^{}]+)\}/g,function(e,t){var i=Ut.get(t);if(void 0!==i)return"".concat(i.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});et=C(tt),et=Qe.allowFloat?et:Math.floor(et)}catch(c){console.error(c)}g.startingSumAtSet[Ke]={value:Qe.startingSum,calcVal:et},Qe.startingSum=et}else Xe++}Xe===g.pointTypeToSet.length&&delete g.setPointtypeIsOnCheck,g.multiplyPointtypeIsOnCheck||g.dividePointtypeIsOnCheck||!g.setPointtypeIsOnCheck||Kt.push(g)}if(g.isChangeVariables&&void 0!==g.changedVariables)for(var it=0;it<g.changedVariables.length;it++){var ot=Yt.get(g.changedVariables[it]);void 0!==ot&&("1"===g.changeType?ot.isTrue=!0:"2"===g.changeType?ot.isTrue=!1:"3"===g.changeType&&(ot.isTrue=!ot.isTrue))}if(g.addToAllowChoice&&void 0!==g.idOfAllowChoice&&void 0!==g.numbAddToAllowChoice)for(var nt=0;nt<g.idOfAllowChoice.length;nt++){var rt=Lt.get(g.idOfAllowChoice[nt]);void 0!==rt&&(rt.allowedChoices+=g.numbAddToAllowChoice)}if(g.textfieldIsOn&&void 0!==g.idOfTheTextfieldWord&&void 0!==g.wordChangeSelect){var at=Ht.get(g.idOfTheTextfieldWord);void 0!==at&&(g.customTextfieldIsOn?at.replaceText=n:at.replaceText=g.wordChangeSelect)}if(g.isImageUpload&&(g.defaultImage=g.image,g.image=o),g.backpackBtnRequirement&&(void 0===app.btnBackpackIsOn&&(app.btnBackpackIsOn=0),app.btnBackpackIsOn+=1),g.showAllAddons&&(void 0===app.showAllAddons&&(app.showAllAddons=0),app.showAllAddons+=1),g.changeBackground&&(g.changeBgImage?void 0!==g.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:g.id,data:g.bgImage}),app.styling.backgroundImage=g.bgImage):void 0!==g.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:g.id,data:g.changedBgColorCode}),app.styling.backgroundColor=g.changedBgColorCode)),g.changePointBar&&(g.changeBarBgColorIsOn&&void 0!==g.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:g.id,data:g.changedBarBgColor}),app.styling.barBackgroundColor=g.changedBarBgColor),g.changeBarIconColorIsOn&&void 0!==g.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:g.id,data:g.changedBarIconColor}),app.styling.barIconColor=g.changedBarIconColor),g.changeBarTextColorIsOn&&void 0!==g.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:g.id,data:g.changedBarTextColor}),app.styling.barTextColor=g.changedBarTextColor)),g.changeTemplates&&g.changeTemplatesList&&g.changeToThisTemplate)for(var ct=g.changeTemplatesList.split(","),lt=0;lt<ct.length;lt++){var st=ct[lt],ut=zt.get(st);if(void 0===ut){var dt=Lt.get(st);if(void 0===dt){var ft=Gt.get(st);if(void 0===ft);else{for(var vt=ft.rowElements,gt=0;gt<vt.length;gt++){var pt=Lt.get(vt[gt]);void 0!==pt&&wn(pt,g.id,g.changeToThisTemplate)}for(var mt=ft.elements,ht=0;ht<mt.length;ht++){var bt=zt.get(mt[ht]);if(void 0!==bt){var wt=bt.choice;if(wn(wt,g.id,g.changeToThisTemplate),g.changeAddonTemplate)for(var Tt=0;Tt<wt.addons.length;Tt++){wn(wt.addons[Tt],g.id,g.changeToThisTemplate)}}}}}else wn(dt,g.id,g.changeToThisTemplate)}else{var It=ut.choice;if(wn(It,g.id,g.changeToThisTemplate),g.changeAddonTemplate)for(var St=0;St<It.addons.length;St++){wn(It.addons[St],g.id,g.changeToThisTemplate)}}}if(g.changeWidth&&g.changeWidthList&&g.changeToThisWidth)for(var yt=g.changeWidthList.split(","),xt=0;xt<yt.length;xt++){var Ct=yt[xt],Ot=zt.get(Ct);if(void 0===Ot){var At=Lt.get(Ct);if(void 0===At){var kt=Gt.get(Ct);if(void 0===kt);else{for(var Bt=kt.rowElements,Mt=0;Mt<Bt.length;Mt++){var Dt=Lt.get(Bt[Mt]);void 0!==Dt&&In(Dt,g.id,g.changeToThisWidth)}for(var Ft=kt.elements,Rt=0;Rt<Ft.length;Rt++){var jt=zt.get(Ft[Rt]);if(void 0!==jt)In(jt.choice,g.id,g.changeToThisWidth)}}}else In(At,g.id,g.changeToThisWidth)}else{In(Ot.choice,g.id,g.changeToThisWidth)}}if(g.setBgmIsOn&&g.bgmId&&(ni.bgmIsPlaying=!0,ni.isBgmInit||g.useAudioURL?ao(g,g.bgmId,0):(lo(g),ni.isBgmInit=!0)),g.muteBgm&&oi){var qt=x(oi);app.isMute=!0,qt&&"function"==typeof qt.mute&&qt.mute()}if(g.isContentHidden&&void 0!==g.hiddenContentsRow&&void 0!==g.hiddenContentsType)for(var Pt=0;Pt<g.hiddenContentsRow.length;Pt++){var $t=Lt.get(g.hiddenContentsRow[Pt]);if(void 0!==$t){$t.textIsRemoved||($t.textIsRemoved=!0);for(var Vt=0;Vt<g.hiddenContentsType.length;Vt++)switch(g.hiddenContentsType[Vt]){case"1":$t.objectTitleRemoved=!0;break;case"2":$t.objectImageRemoved=!0;break;case"3":$t.objectTextRemoved=!0;break;case"4":$t.objectScoreRemoved=!0;break;case"5":$t.objectRequirementRemoved=!0;break;case"6":$t.addonTitleRemoved=!0;break;case"7":$t.addonImageRemoved=!0;break;case"8":$t.addonTextRemoved=!0}}}Fo(g,A,0)}}function jo(e,t){var i=e.split("/IMG#"),o=i.length>1?i[1].replace(/\/CHAR#/g,","):"",n=(i=i[0].split("/WORD#")).length>1?i[1].replace(/\/CHAR#/g,","):"",r=(i=i[0].split("/RND#")).length>1?i[1].split("/AND#"):"",a=(i=i[0].split("/RS#")).length>1?i[1]:"",c=i[0].split("/ON#"),l=zt.get(c[0]);if(void 0!==l){var s=l.choice,u=l.row,f=new Map,g=void 0===s.parentId;if(a)for(var p=a.split("/AND#"),m=0;m<p.length;m++){var h=p[m].split(":"),b=Number(h[0]),w=Number(h[1]);Number.isNaN(b)||f.set(b,Number.isNaN(w)?0:w)}for(var T=0;T<s.scores.length;T++){var I=s.scores[T],S=Ut.get(I.id);void 0===S||I.setValue||(f.size>0&&f.has(T)?(I.value=f.get(T),I.setValue=!0):wo(S,I))}var y=new d,C=s.isActive,O=s.multipleUseVariable>=0,A=Math.abs(s.multipleUseVariable);if(s.isActive||(s.isActive=!0,g&&(u.currentChoices+=1)),s.multipleUseVariable++,Wt.set(s.id,{multiple:s.multipleUseVariable}),O&&s.discountOther&&void 0!==s.discountOperator&&void 0!==s.discountValue)if(s.isDisChoices){var k=new Set;if(void 0!==s.discountRows)for(var B=0;B<s.discountRows.length;B++){var M=Lt.get(s.discountRows[B]);if(void 0!==M)for(var D=0;D<M.objects.length;D++){var F=M.objects[D];po(s,F),k.add(F.id)}}if(void 0!==s.discountChoices)for(var R=0;R<s.discountChoices.length;R++)if(!k.has(s.discountChoices[R])){var j=zt.get(s.discountChoices[R]);if(void 0!==j){var q=j.choice;po(s,q)}}}else if(void 0!==s.discountGroups)for(var P=0;P<s.discountGroups.length;P++){var $=Gt.get(s.discountGroups[P]);if(void 0!==$)for(var V=0;V<$.elements.length;V++){var N=zt.get($.elements[V]);if(void 0!==N){var W=N.choice;po(s,W)}}}for(var E=new Set,U=0;U<s.scores.length;U++){var L=s.scores[U];if(void 0===L.isActiveMul&&(L.isActiveMul=[]),io(L.requireds)&&!L.isActiveMul[A]){var z=Ut.get(L.id);if(void 0!==z){var G=L.value;if(L.useExpression&&L.setValue&&ho(z,L),L.discountIsOn&&void 0!==L.discountScore&&L.discountedFrom&&L.discountedFrom.length>0){var _=zt.get(L.discountedFrom[0]);if(void 0!==_){var H=_.choice;if(H.useDiscountCount&&void 0!==H.discountCount){if(H.appliedDisChoices||(H.appliedDisChoices=[]),H.discountCount>H.appliedDisChoices.length)E.add(H),G=L.discountScore,L.appliedDiscount=!0;else if(void 0!==L.tmpDiscount)for(var Y=0;Y<L.tmpDiscount.length;Y++)G>L.tmpDiscount[Y].discountedValue&&(G=L.tmpDiscount[Y].discountedValue)}else G=L.discountScore,L.appliedDiscount=!0}}G=z.allowFloat?G:Math.floor(G),L.multiplyByTimes&&(G*=A+1),z.startingSum-=G,L.isActiveMul[A]=!0;var J=y.get(L.id);void 0!==J?y.set(L.id,G+J):y.set(L.id,G)}}}if(E.size>0&&E.forEach(function(e){e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(s.id)&&e.appliedDisChoices.push(s.id)}),O&&(s.duplicateRow&&void 0!==s.duplicateRowId&&void 0!==s.duplicateRowPlace&&$o(s),s.activateOtherChoice&&void 0!==s.activateThisChoice)){var Z=new Set(t.map(function(e){return e.split("/ON#")[0]}));if(s.isActivateRandom&&void 0!==s.numActivateRandom)if(void 0===s.activatedRandomMul&&(s.activatedRandomMul=[]),""===r){if(1===s.multipleUseVariable){var X=s.activateThisChoice.split(",").filter(function(e){return Z.has(e.split("/ON#")[0])});s.numActivateRandom>X.length?X.length:s.numActivateRandom;for(var K=new Set,Q=0;Q<X.length;Q++){var ee=zt.get(X[Q]);if(void 0!==ee)if(!io(ee.choice.requireds)){var te=X[Q];X.splice(Q,1),X.push(te)}}for(var ie=X.length-1;ie>=0;ie--)K.add(X[ie]);X=v(K).reverse();for(var oe=0,ne=[],re=0;re<s.numActivateRandom;re++){ne[re]=X.length/(s.numActivateRandom*(re+1))<1?X.length%(s.numActivateRandom*(re+1)):s.numActivateRandom,s.activatedRandomMul.push(X.slice(oe,ne[re]+oe));for(var ae=0;ae<ne[re]-oe;ae++){var ce=s.activatedRandomMul[re][ae].split("/ON#"),le=ce.length>1?parseInt(ce[1]):0,se=zt.get(ce[0]);if(void 0!==se){var ue=se.choice;if(!s.isAllowDeselect){if(ue.isSelectableMultiple&&ue.isMultipleUseVariable)for(var de=0;de<Math.abs(le);de++)le>0&&void 0!==ue.numMultipleTimesMinus?ue.numMultipleTimesMinus++:le<0&&void 0!==ue.numMultipleTimesPluss&&ue.numMultipleTimesPluss--;ue.forcedActivated=!0}}}oe+=ne[re]}}}else{var fe=(s.multipleUseVariable-1)*s.numActivateRandom,ve=r.splice(fe,fe+s.numActivateRandom);s.activatedRandomMul.push(ve);for(var ge=0;ge<s.activatedRandomMul[s.multipleUseVariable-1].length;ge++){var pe=s.activatedRandomMul[s.multipleUseVariable-1][ge].split("/RON#"),me=pe.length>1?parseInt(pe[1]):0,he=zt.get(pe[0]);if(void 0!==he){var be=he.choice;if(!s.isAllowDeselect&&Z.has(be.id)){if(be.isSelectableMultiple&&be.isMultipleUseVariable)for(var we=0;we<Math.abs(me);we++)me>0&&void 0!==be.numMultipleTimesMinus?be.numMultipleTimesMinus++:me<0&&void 0!==be.numMultipleTimesPluss&&be.numMultipleTimesPluss--;be.forcedActivated=!0}}}}else{for(var Te=s.activateThisChoice.split(","),Ie=Te.filter(function(e){return Z.has(e.split("/ON#")[0])}),Se=Te.filter(function(e){return!Z.has(e.split("/ON#")[0])}),ye=0;ye<Ie.length;ye++){var xe=Ie[ye].split("/ON#"),Ce=xe.length>1?parseInt(xe[1]):0,Oe=zt.get(xe[0]);if(void 0!==Oe){var Ae=Oe.choice;if(!s.isAllowDeselect){if(Ae.isSelectableMultiple&&Ae.isMultipleUseVariable)if(s.isSelectableMultiple&&s.isMultipleUseVariable)for(var ke=0;ke<Math.abs(s.multipleUseVariable);ke++)for(var Be=0;Be<Math.abs(Ce);Be++)Ce>0&&void 0!==Ae.numMultipleTimesMinus?Ae.numMultipleTimesMinus++:Ce<0&&void 0!==Ae.numMultipleTimesPluss&&Ae.numMultipleTimesPluss--;else for(var Me=0;Me<Math.abs(Ce);Me++)Ce>0&&void 0!==Ae.numMultipleTimesMinus?Ae.numMultipleTimesMinus++:Ce<0&&void 0!==Ae.numMultipleTimesPluss&&Ae.numMultipleTimesPluss--;Ae.forcedActivated=!0}}else{var De=Gt.get(xe[0]);if(void 0!==De)for(var Fe=De.elements,Re=0;Re<Fe.length;Re++){var je=zt.get(Fe[Re]);if(void 0!==je){var qe=je.choice;if(!s.isAllowDeselect){if(qe.isSelectableMultiple&&qe.isMultipleUseVariable)if(s.isSelectableMultiple&&s.isMultipleUseVariable)for(var Pe=0;Pe<Math.abs(s.multipleUseVariable);Pe++)for(var $e=0;$e<Math.abs(Ce);$e++)Ce>0&&void 0!==qe.numMultipleTimesMinus?qe.numMultipleTimesMinus++:Ce<0&&void 0!==qe.numMultipleTimesPluss&&qe.numMultipleTimesPluss--;else for(var Ve=0;Ve<Math.abs(Ce);Ve++)Ce>0&&void 0!==qe.numMultipleTimesMinus?qe.numMultipleTimesMinus++:Ce<0&&void 0!==qe.numMultipleTimesPluss&&qe.numMultipleTimesPluss--;qe.forcedActivated=!0}}}}}for(var Ne=0;Ne<Se.length;Ne++){var We=Se[Ne].split("/ON#"),Ee=We.length>1?parseInt(We[1]):0,Ue=zt.get(We[0]);if(void 0!==Ue){var Le=Ue.choice;Et.set(Le.id,{multiple:Ee,isAllowDeselect:s.isAllowDeselect||!1})}}}}if(s.addToAllowChoice&&void 0!==s.idOfAllowChoice&&void 0!==s.numbAddToAllowChoice)for(var ze=0;ze<s.idOfAllowChoice.length;ze++){var Ge=Lt.get(s.idOfAllowChoice[ze]);void 0!==Ge&&(Ge.allowedChoices+=s.numbAddToAllowChoice)}if(!C){if(s.isChangeVariables&&void 0!==s.changedVariables)for(var _e=0;_e<s.changedVariables.length;_e++){var He=Yt.get(s.changedVariables[_e]);void 0!==He&&("1"===s.changeType?He.isTrue=!0:"2"===s.changeType?He.isTrue=!1:"3"===s.changeType&&(He.isTrue=!He.isTrue))}if(s.textfieldIsOn&&void 0!==s.idOfTheTextfieldWord&&void 0!==s.wordChangeSelect){var Ye=Ht.get(s.idOfTheTextfieldWord);void 0!==Ye&&(s.customTextfieldIsOn?Ye.replaceText=n:Ye.replaceText=s.wordChangeSelect)}if(s.isImageUpload&&(s.defaultImage=s.image,s.image=o),s.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),s.showAllAddons&&(app.showAllAddons+=1),s.changeBackground&&(s.changeBgImage?void 0!==s.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:s.id,data:s.bgImage}),app.styling.backgroundImage=s.bgImage):void 0!==s.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:s.id,data:s.changedBgColorCode}),app.styling.backgroundColor=s.changedBgColorCode)),s.changePointBar&&(s.changeBarBgColorIsOn&&void 0!==s.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:s.id,data:s.changedBarBgColor}),app.styling.barBackgroundColor=s.changedBarBgColor),s.changeBarIconColorIsOn&&void 0!==s.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:s.id,data:s.changedBarIconColor}),app.styling.barIconColor=s.changedBarIconColor),s.changeBarTextColorIsOn&&void 0!==s.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:s.id,data:s.changedBarTextColor}),app.styling.barTextColor=s.changedBarTextColor)),s.changeTemplates&&s.changeTemplatesList&&s.changeToThisTemplate)for(var Je=s.changeTemplatesList.split(","),Ze=0;Ze<Je.length;Ze++){var Xe=Je[Ze],Ke=zt.get(Xe);if(void 0===Ke){var Qe=Lt.get(Xe);if(void 0===Qe){var et=Gt.get(Xe);if(void 0===et);else{for(var tt=et.rowElements,it=0;it<tt.length;it++){var ot=Lt.get(tt[it]);void 0!==ot&&wn(ot,s.id,s.changeToThisTemplate)}for(var nt=et.elements,rt=0;rt<nt.length;rt++){var at=zt.get(nt[rt]);if(void 0!==at){var ct=at.choice;if(wn(ct,s.id,s.changeToThisTemplate),s.changeAddonTemplate)for(var lt=0;lt<ct.addons.length;lt++){wn(ct.addons[lt],s.id,s.changeToThisTemplate)}}}}}else wn(Qe,s.id,s.changeToThisTemplate)}else{var st=Ke.choice;if(wn(st,s.id,s.changeToThisTemplate),s.changeAddonTemplate)for(var ut=0;ut<st.addons.length;ut++){wn(st.addons[ut],s.id,s.changeToThisTemplate)}}}if(s.changeWidth&&s.changeWidthList&&s.changeToThisWidth)for(var dt=s.changeWidthList.split(","),ft=0;ft<dt.length;ft++){var vt=dt[ft],gt=zt.get(vt);if(void 0===gt){var pt=Lt.get(vt);if(void 0===pt){var mt=Gt.get(vt);if(void 0===mt);else{for(var ht=mt.rowElements,bt=0;bt<ht.length;bt++){var wt=Lt.get(ht[bt]);void 0!==wt&&In(wt,s.id,s.changeToThisWidth)}for(var Tt=mt.elements,It=0;It<Tt.length;It++){var St=zt.get(Tt[It]);if(void 0!==St)In(St.choice,s.id,s.changeToThisWidth)}}}else In(pt,s.id,s.changeToThisWidth)}else{In(gt.choice,s.id,s.changeToThisWidth)}}if(s.setBgmIsOn&&s.bgmId&&(ni.bgmIsPlaying=!0,ni.isBgmInit||s.useAudioURL?ao(s,s.bgmId,0):(lo(s),ni.isBgmInit=!0)),s.muteBgm&&oi){var yt=x(oi);app.isMute=!0,yt&&"function"==typeof yt.mute&&yt.mute()}if(s.isContentHidden&&void 0!==s.hiddenContentsRow&&void 0!==s.hiddenContentsType)for(var xt=0;xt<s.hiddenContentsRow.length;xt++){var Ct=Lt.get(s.hiddenContentsRow[xt]);if(void 0!==Ct){Ct.textIsRemoved||(Ct.textIsRemoved=!0);for(var Ot=0;Ot<s.hiddenContentsType.length;Ot++)switch(s.hiddenContentsType[Ot]){case"1":Ct.objectTitleRemoved=!0;break;case"2":Ct.objectImageRemoved=!0;break;case"3":Ct.objectTextRemoved=!0;break;case"4":Ct.objectScoreRemoved=!0;break;case"5":Ct.objectRequirementRemoved=!0;break;case"6":Ct.addonTitleRemoved=!0;break;case"7":Ct.addonImageRemoved=!0;break;case"8":Ct.addonTextRemoved=!0}}}}Fo(s,y,0)}}function qo(e,t){for(var i=new d,o=Math.abs(e.multipleUseVariable-1),n=0;n<e.scores.length;n++){var r=e.scores[n];if(void 0===r.isActiveMulMinus&&(r.isActiveMulMinus=[]),io(r.requireds)&&!r.isActiveMulMinus[o]){var a=Ut.get(r.id);if(void 0!==a){var c=r.discountIsOn&&void 0!==r.discountScore?r.discountScore:r.value;c=a.allowFloat?c:Math.floor(c),r.multiplyByTimes&&(c*=Math.abs(o)),a.startingSum+=c;var l=i.get(r.id);void 0!==l?i.set(r.id,-c+l):i.set(r.id,-c),r.isActiveMulMinus[o]=!0}}}if(e.multipleUseVariable-=1,0===e.multipleUseVariable?(e.isActive=!1,t.currentChoices-=1,Wt.delete(e.id)):(-1===e.multipleUseVariable&&(e.isActive=!0,t.currentChoices+=1),Wt.set(e.id,{multiple:e.multipleUseVariable})),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var s=0;s<e.idOfAllowChoice.length;s++){var u=Lt.get(e.idOfAllowChoice[s]);void 0!==u&&(u.allowedChoices-=e.numbAddToAllowChoice)}Fo(e,i,0)}function Po(e){To();for(var t=e.split(","),i=0;i<t.length;i++){var o=t[i].split("/RP#");if(o.length>1){var n=o[1].split("/NUM#"),r=n.length>1?parseInt(n[1]):0,a=Ut.get(n[0]);void 0!==a&&(a.startingSum+=r),Wt.set(o[0],{multiple:0,isRowButton:!0,rndPoint:n[0],pointNum:r})}else{var c=t[i].split(/\/(IMG|WORD|RND|RS)#/)[0].split("/ON#"),l=c.length>1?parseInt(c[1]):0,s=zt.get(c[0]);if(void 0!==s){var u=s.choice;if(u.isSelectableMultiple&&u.isMultipleUseVariable)for(var d=0;d<Math.abs(l);d++)l>0?jo(t[i],t):qo(u,s.row);else Ro(t[i],t)}else{var f=Yt.get(c[0]);void 0!==f&&(f.isTrue=!0,Wt.set(f.id,{multiple:0,isVariable:!0}))}}}}function $o(e,t){if(void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace){var i=e.duplicateRowId,o=0;Array.from(Lt.entries()).forEach(function(e){g(e,1)[0].split("/D#")[0]===i.split("/D#")[0]&&o++});var n=Lt.get(e.duplicateRowId),r=Lt.get(e.duplicateRowPlace),a="/D#".concat(o);if(void 0!==n&&void 0!==r){var c=JSON.parse(JSON.stringify(n));if(c.id="".concat(c.id.split("/D#")[0]).concat(a),r.isBackpack){app.backpack.splice(r.index+1,0,c),Lt.set(c.id,app.backpack[r.index+1]);for(var l=r.index+1;l<app.backpack.length;l++)app.backpack[l].index=l}else{app.rows.splice(r.index+1,0,c),Lt.set(c.id,app.rows[r.index+1]);for(var s=r.index+1;s<app.rows.length;s++)app.rows[s].index=s}for(var u=0;u<c.objects.length;u++){var d=c.objects[u];d.id="".concat(d.id.split("/D#")[0]).concat(a),d.isActive=!1,delete d.forcedActivated,delete d.appliedDisChoices;for(var f=0;f<d.scores.length;f++){var v=d.scores[f];v.idx=zi(0,5),Xt.add(v.idx),d.isSelectableMultiple?(delete v.isActiveMul,delete v.isActiveMulMinus):delete v.isActive,delete v.setValue,vo(v)}for(var p=0;p<d.addons.length;p++){d.addons[p].parentId=d.id}if(!e.dRowAddSufReq){for(var m=0;m<d.requireds.length;m++){var h=d.requireds[m];if("id"===h.type){var b=h.reqId.split("/ON#"),w="".concat(b[0].split("/D#")[0]).concat(a);b.length>1?h.reqId="".concat(w,"/ON#").concat(b[1]):h.reqId=w}else if("or"===h.type)for(var T=0;T<h.orRequired.length;T++){var I=h.orRequired[T];if(void 0!==I.req){var S=I.req.split("/ON#"),y="".concat(S[0].split("/D#")[0]).concat(a);S.length>1?I.req="".concat(y,"/ON#").concat(S[1]):I.req=y}}if(void 0!==h.requireds)for(var x=0;x<h.requireds.length;x++){var C=d.requireds[m];if("id"===C.type){var O=C.reqId.split("/ON#"),A="".concat(O[0].split("/D#")[0]).concat(a);O.length>1?C.reqId="".concat(A,"/ON#").concat(O[1]):C.reqId=A}else if("or"===C.type)for(var k=0;k<C.orRequired.length;k++){var B=C.orRequired[k];if(void 0!==B.req){var M=B.req.split("/ON#"),D="".concat(M[0].split("/D#")[0]).concat(a);M.length>1?B.req="".concat(D,"/ON#").concat(M[1]):B.req=D}}}}for(var F=0;F<d.scores.length;F++){var R=d.scores[F];if(void 0!==R.requireds)for(var j=0;j<R.requireds.length;j++){var q=R.requireds[j];if("id"===q.type){var P=q.reqId.split("/ON#"),$="".concat(P[0].split("/D#")[0]).concat(a);P.length>1?q.reqId="".concat($,"/ON#").concat(P[1]):q.reqId=$}else if("or"===q.type)for(var V=0;V<q.orRequired.length;V++){var N=q.orRequired[V];if(void 0!==N.req){var W=N.req.split("/ON#"),E="".concat(W[0].split("/D#")[0]).concat(a);W.length>1?N.req="".concat(E,"/ON#").concat(W[1]):N.req=E}}}}for(var U=0;U<d.addons.length;U++){var L=d.addons[U];if(void 0!==L.requireds)for(var z=0;z<L.requireds.length;z++){var G=L.requireds[z];if("id"===G.type){var _=G.reqId.split("/ON#"),H="".concat(_[0].split("/D#")[0]).concat(a);_.length>1?G.reqId="".concat(H,"/ON#").concat(_[1]):G.reqId=H}else if("or"===G.type)for(var Y=0;Y<G.orRequired.length;Y++){var J=G.orRequired[Y];if(void 0!==J.req){var Z=J.req.split("/ON#"),X="".concat(Z[0].split("/D#")[0]).concat(a);Z.length>1?J.req="".concat(X,"/ON#").concat(Z[1]):J.req=X}}}}}if(!e.dRowAddSufFunc){if(d.activateOtherChoice&&void 0!==d.activateThisChoice){for(var K=d.activateThisChoice.split(","),Q="",ee=0;ee<K.length;ee++){var te=K[ee].split("/ON#"),ie="".concat(te[0].split("/D#")[0]).concat(a);te.length>1?Q+="".concat(ie,"/ON#").concat(te[1],","):Q+="".concat(ie,",")}d.activateThisChoice=Q}if(d.deactivateOtherChoice&&void 0!==d.deactivateThisChoice){for(var oe=d.deactivateThisChoice.split(","),ne="",re=0;re<oe.length;re++){var ae=oe[re].split("/ON#"),ce="".concat(ae[0].split("/D#")[0]).concat(a);ae.length>1?ne+="".concat(ce,"/ON#").concat(ae[1],","):ne+="".concat(ce,",")}d.deactivateThisChoice=ne}if(d.duplicateRow&&void 0!==d.duplicateRowId&&void 0!==d.duplicateRowPlace){var le=d.duplicateRowId,se=d.duplicateRowPlace;d.duplicateRowId="".concat(le.split("/D")[0]).concat(a),d.duplicateRowPlace="".concat(se.split("/D")[0]).concat(a)}}if(d.backpackBtnRequirement&&(void 0!==app.hideBackpackBtn?app.hideBackpackBtn+=1:delete d.backpackBtnRequirement),r.isBackpack?zt.set(d.id,{choice:app.backpack[r.index+1].objects[u],row:app.backpack[r.index+1]}):zt.set(d.id,{choice:app.rows[r.index+1].objects[u],row:app.rows[r.index+1]}),d.groups)for(var ue=0;ue<d.groups.length;ue++){var de=Gt.get(d.groups[ue]);if(void 0!==de)-1===de.elements.indexOf(d.id)&&de.elements.push(d.id)}if(d.objectDesignGroups)for(var fe=0;fe<d.objectDesignGroups.length;fe++){var ve=Zt.get(d.objectDesignGroups[fe]);if(void 0!==ve)-1===ve.elements.indexOf(d.id)&&ve.elements.push(d.id)}}}}}function Vo(e){return/^data:[a-zA-Z]+\/[a-zA-Z]+;base64,/.test(e)}function No(e){var t=e.match(/^data:(image\/[a-zA-Z0-9.+-]+);base64,/);return!!t&&"image/avif"===t[1].toLowerCase()}var Wo=b({selFilterBlur:T.number().optional(),selFilterBright:T.number().optional(),selFilterCont:T.number().optional(),selFilterGray:T.number().optional(),selFilterHue:T.number().optional(),selFilterInvert:T.number().optional(),selFilterOpac:T.number().optional(),selFilterSatur:T.number().optional(),selFilterSepia:T.number().optional(),reqFilterBlur:T.number().optional(),reqFilterBright:T.number().optional(),reqFilterCont:T.number().optional(),reqFilterGray:T.number().optional(),reqFilterHue:T.number().optional(),reqFilterInvert:T.number().optional(),reqFilterOpac:T.number().optional(),reqFilterSatur:T.number().optional(),reqFilterSepia:T.number().optional(),unselFilterBlur:T.number().optional(),unselFilterBright:T.number().optional(),unselFilterCont:T.number().optional(),unselFilterGray:T.number().optional(),unselFilterHue:T.number().optional(),unselFilterInvert:T.number().optional(),unselFilterOpac:T.number().optional(),unselFilterSatur:T.number().optional(),unselFilterSepia:T.number().optional()}).passthrough(),Eo=b({rowTitleTextSize:T.number().optional(),rowTextTextSize:T.number().optional(),objectTitleTextSize:T.number().optional(),objectTextTextSize:T.number().optional(),addonTitleTextSize:T.number().optional(),addonTextTextSize:T.number().optional(),scoreTextSize:T.number().optional()}).passthrough(),Uo=b({objectImgBorderWidth:T.number().optional(),objectImageWidth:T.number().optional(),objectImageMarginTop:T.number().optional(),objectImageMarginBottom:T.number().optional(),objectImgBorderRadiusTopLeft:T.number().optional(),objectImgBorderRadiusTopRight:T.number().optional(),objectImgBorderRadiusBottomRight:T.number().optional(),objectImgBorderRadiusBottomLeft:T.number().optional(),objectImageBoxWidth:T.number().optional()}).passthrough(),Lo=b({rowImgBorderWidth:T.number().optional(),rowImageWidth:T.number().optional(),rowImageMarginTop:T.number().optional(),rowImageMarginBottom:T.number().optional(),rowImgBorderRadiusTopLeft:T.number().optional(),rowImgBorderRadiusTopRight:T.number().optional(),rowImgBorderRadiusBottomRight:T.number().optional(),rowImgBorderRadiusBottomLeft:T.number().optional(),rowImageBoxWidth:T.number().optional()}).passthrough(),zo=b({addonImgBorderWidth:T.number().optional(),addonImageWidth:T.number().optional(),addonImageMarginTop:T.number().optional(),addonImageMarginBottom:T.number().optional(),addonImgBorderRadiusTopLeft:T.number().optional(),addonImgBorderRadiusTopRight:T.number().optional(),addonImgBorderRadiusBottomRight:T.number().optional(),addonImgBorderRadiusBottomLeft:T.number().optional(),addonImageBoxWidth:T.number().optional()}).passthrough(),Go=b({objectMargin:T.number().optional(),objectTextPadding:T.number().optional(),objectBorderWidth:T.number().optional(),objectDropShadowH:T.number().optional(),objectDropShadowV:T.number().optional(),objectDropShadowBlur:T.number().optional(),objectDropShadowSpread:T.number().optional(),objectBorderRadiusTopLeft:T.number().optional(),objectBorderRadiusTopRight:T.number().optional(),objectBorderRadiusBottomRight:T.number().optional(),objectBorderRadiusBottomLeft:T.number().optional(),objectBorderImageWidth:T.number().optional(),objectBorderImageSliceTop:T.number().optional(),objectBorderImageSliceBottom:T.number().optional(),objectBorderImageSliceLeft:T.number().optional(),objectBorderImageSliceRight:T.number().optional()}).passthrough(),_o=b({rowMargin:T.number().optional(),rowBodyMarginSides:T.number().optional(),rowBodyMarginTop:T.number().optional(),rowBodyMarginBottom:T.number().optional(),rowTextPaddingY:T.number().optional(),rowTextPaddingX:T.number().optional(),rowDropShadowH:T.number().optional(),rowDropShadowV:T.number().optional(),rowDropShadowBlur:T.number().optional(),rowDropShadowSpread:T.number().optional(),rowButtonXPadding:T.number().optional(),rowButtonYPadding:T.number().optional(),rowBorderRadiusTopLeft:T.number().optional(),rowBorderRadiusTopRight:T.number().optional(),rowBorderRadiusBottomRight:T.number().optional(),rowBorderRadiusBottomLeft:T.number().optional(),rowBorderWidth:T.number().optional(),rowBorderImageWidth:T.number().optional(),rowBorderImageSliceTop:T.number().optional(),rowBorderImageSliceBottom:T.number().optional(),rowBorderImageSliceLeft:T.number().optional(),rowBorderImageSliceRight:T.number().optional()}).passthrough(),Ho=b({addonMargin:T.number().optional(),addonTextPadding:T.number().optional(),addonBorderWidth:T.number().optional(),addonDropShadowH:T.number().optional(),addonDropShadowV:T.number().optional(),addonDropShadowBlur:T.number().optional(),addonDropShadowSpread:T.number().optional(),addonBorderRadiusTopLeft:T.number().optional(),addonBorderRadiusTopRight:T.number().optional(),addonBorderRadiusBottomRight:T.number().optional(),addonBorderRadiusBottomLeft:T.number().optional(),addonBorderImageWidth:T.number().optional(),addonBorderImageSliceTop:T.number().optional(),addonBorderImageSliceBottom:T.number().optional(),addonBorderImageSliceLeft:T.number().optional(),addonBorderImageSliceRight:T.number().optional()}).passthrough(),Yo=b({multiChoiceCounterPosition:T.number().optional(),multiChoiceCounterSize:T.number().optional(),multiChoiceTextSize:T.number().optional()}).passthrough(),Jo=b({barTextPadding:T.number().optional(),barTextMargin:T.number().optional(),barPadding:T.number().optional(),barMargin:T.number().optional(),barTextSize:T.number().optional()}).passthrough(),Zo=b({backPackWidth:T.number().optional()}).passthrough(),Xo=I(function(e){return""===e?{}:e},Wo.merge(Eo).merge(Uo).merge(Lo).merge(zo).merge(Go).merge(_o).merge(Ho).merge(Yo).merge(Jo).merge(Zo).passthrough()),Ko=b({template:T.number().optional()}).passthrough(),Qo=b({value:T.number().optional(),minValue:T.number().optional(),maxValue:T.number().optional(),discountScore:T.number().optional(),discountScoreCal:T.number().optional(),tmpDisScore:T.number().optional()}).passthrough(),en=b({index:T.number().optional(),template:T.number().optional(),multipleUseVariable:T.number().optional(),initMultipleTimesMinus:T.number().optional(),selectedThisManyTimesProp:T.number().optional(),addons:S(Ko).optional(),scores:S(Qo).optional(),styling:Xo.optional(),numMultipleTimesMinus:T.number().optional(),numMultipleTimesPluss:T.number().optional(),numActivateRandom:T.number().optional(),discountLowLimit:T.number().optional(),discountValue:T.number().optional(),numbAddToAllowChoice:T.number().optional(),bgmFadeInSec:T.number().optional(),bgmFadeOutSec:T.number().optional(),fadeTransitionTime:T.number().optional(),divideWithThis:T.number().optional(),activatedFrom:T.number().optional()}).passthrough(),tn=b({index:T.number().optional(),template:T.number().optional(),buttonRandomNumber:T.number().optional(),defaultAspectWidth:T.number().optional(),defaultAspectHeight:T.number().optional(),allowedChoices:T.number().optional(),currentChoices:T.number().optional(),objects:S(en).optional(),styling:Xo.optional(),objectImgObjectFillHeight:T.number().optional(),randomMin:T.number().optional(),randomMax:T.number().optional()}).passthrough(),on=b({startingSum:T.number().optional(),initValue:T.number().optional(),iconWidth:T.number().optional(),iconHeight:T.number().optional(),negativeIconWidth:T.number().optional(),negativeIconHeight:T.number().optional()}).passthrough(),nn=b({styling:Xo.optional()}).passthrough(),rn=b({styling:Xo.optional()}).passthrough(),an=b({curVolume:T.number().optional(),fadeTransitionTime:T.number().optional(),hideBackpackBtn:T.number().optional(),btnBackpackIsOn:T.number().optional(),rowIdLength:T.number().optional(),objectIdLength:T.number().optional(),rowDesignGroups:S(nn).optional(),objectDesignGroups:S(rn).optional(),rows:S(tn).optional(),pointTypes:S(on).optional(),backpack:S(tn).optional(),styling:Xo.optional()}).passthrough(),cn=["autoSaveInterval","bgmFadeInterval","bgmFadeTimer","bgmIsPlaying","bgmObjectId","bgmPlayInterval","bgmTitle","bgmTitleInterval","cancelForcedActivated","comp","compG","compODG","compR","compRDG","curBgmTime","curBgmLength","isSeeking","isFadingOut","lastFadeTime","objectMap","pointTypeMap","wordMap"];function ln(e){if(Array.isArray(e))return e.map(ln).filter(function(e){return null!==e&&!("object"===u(e)&&0===Object.keys(e).length)});if(e&&"object"===u(e)){for(var t={},i=Object.keys(e),o=0;o<i.length;o++){var n=i[o],r=ln(e[n]);null!==r&&(t[n]=r)}return Object.keys(t).length>0?t:null}return e}function sn(e){e.isPrivateStyling&&e.privateFilterIsOn&&void 0!==e.styling&&(void 0===e.styling.unselFilterBlurIsOn&&(e.styling.unselFilterBlurIsOn=!1),void 0===e.styling.unselFilterBlur&&(e.styling.unselFilterBlur=0),void 0===e.styling.unselFilterBrightIsOn&&(e.styling.unselFilterBrightIsOn=!1),void 0===e.styling.unselFilterBright&&(e.styling.unselFilterBright=100),void 0===e.styling.unselFilterCont&&(e.styling.unselFilterCont=100),void 0===e.styling.unselFilterGrayIsOn&&(e.styling.unselFilterGrayIsOn=!1),void 0===e.styling.unselFilterGray&&(e.styling.unselFilterGray=0),void 0===e.styling.unselFilterHueIsOn&&(e.styling.unselFilterHueIsOn=!1),void 0===e.styling.unselFilterHue&&(e.styling.unselFilterHue=0),void 0===e.styling.unselFilterInvertIsOn&&(e.styling.unselFilterInvertIsOn=!1),void 0===e.styling.unselFilterInvert&&(e.styling.unselFilterInvert=0),void 0===e.styling.unselFilterOpacIsOn&&(e.styling.unselFilterOpacIsOn=!1),void 0===e.styling.unselFilterOpac&&(e.styling.unselFilterOpac=100),void 0===e.styling.unselFilterSaturIsOn&&(e.styling.unselFilterSaturIsOn=!1),void 0===e.styling.unselFilterSatur&&(e.styling.unselFilterSatur=0),void 0===e.styling.unselFilterSepiaIsOn&&(e.styling.unselFilterSepiaIsOn=!1),void 0===e.styling.unselFilterSepia&&(e.styling.unselFilterSepia=0))}function un(e,t){if(e.isPrivateStyling&&void 0===e.privateFilterIsOn&&void 0!==e.styling)for(var i=Object.keys(At),o=0;o<i.length;o++){var n=i[o];if(e.styling.hasOwnProperty(n)){e.privateFilterIsOn=!0;break}e.privateFilterIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateTextIsOn&&void 0!==e.styling)for(var r=Object.keys(kt),a=0;a<r.length;a++){var c=r[a];if(e.styling.hasOwnProperty(c)){e.privateTextIsOn=!0;break}e.privateTextIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateObjectImageIsOn&&void 0!==e.styling)for(var l=Object.keys(Bt),s=0;s<l.length;s++){var u=l[s];if(e.styling.hasOwnProperty(u)){e.privateObjectImageIsOn=!0;break}e.privateObjectImageIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateObjectIsOn&&void 0!==e.styling)for(var d=Object.keys(Rt),f=0;f<d.length;f++){var v=d[f];if(e.styling.hasOwnProperty(v)){e.privateObjectIsOn=!0;break}e.privateObjectIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateAddonImageIsOn&&void 0!==e.styling)for(var g=Object.keys(Dt),p=0;p<g.length;p++){var m=g[p];if(e.styling.hasOwnProperty(m)){e.privateAddonImageIsOn=!0;break}e.privateAddonImageIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateAddonIsOn&&void 0!==e.styling)for(var h=Object.keys(qt),b=0;b<h.length;b++){var w=h[b];if(e.styling.hasOwnProperty(w)){e.privateAddonIsOn=!0;break}e.privateAddonIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateBackgroundIsOn&&void 0!==e.styling)for(var T=Object.keys(Ft),I=0;I<T.length;I++){var S=T[I];if(e.styling.hasOwnProperty(S)){e.privateBackgroundIsOn=!0;break}e.privateBackgroundIsOn=!1}if(t){if(e.isPrivateStyling&&void 0===e.privateRowImageIsOn&&void 0!==e.styling)for(var y=Object.keys(Mt),x=0;x<y.length;x++){var C=y[x];if(e.styling.hasOwnProperty(C)){e.privateRowImageIsOn=!0;break}e.privateRowImageIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateRowIsOn&&void 0!==e.styling)for(var O=Object.keys(jt),A=0;A<O.length;A++){var k=O[A];if(e.styling.hasOwnProperty(k)){e.privateRowIsOn=!0;break}e.privateRowIsOn=!1}}sn(e),e.isPrivateStyling||void 0===e.styling||(void 0!==e.styling.objectImgObjectFillHeight&&(e.objectImgObjectFillHeight=e.styling.objectImgObjectFillHeight),delete e.styling)}function dn(e){for(var t=Object.keys(e),i=0;i<t.length;i++){var o=t[i];if(-1!==cn.indexOf(o))delete e[o];else if(Array.isArray(e[o])){if("rows"===o||"backpack"===o)for(var n=0;n<e[o].length;n++){var r=e[o][n];if(r.index=n,"backpack"===o&&(r.isBackpack=!0),un(r,!0),void 0!==r.styling&&uo(r.styling,void 0===e.version||"2.0.0-beta"===e.version),void 0!==r.rowDesignGroups)for(var a=0;a<r.rowDesignGroups.length;a++)"object"===u(r.rowDesignGroups[a])&&(r.rowDesignGroups[a]=r.rowDesignGroups[a].id);if("string"==typeof r.width&&(r.width=!1),"boolean"==typeof r.defaultWidth&&delete r.defaultWidth,u(r.image)&&(Vo(r.image)?gi.value||(gi.value=No(r.image)):vi.add(r.image)),void 0!==r.requireds)for(var c=0;c<r.requireds.length;c++){var l=r.requireds[c];if("or"===l.type&&l.orRequired&&void 0===l.orRequireds){l.orRequireds=[];for(var s=0;s<l.orRequired.length;s++)l.orRequireds.push({required:l.required,requireds:[],orRequired:[],orRequireds:[],id:"",type:"id",reqId:l.orRequired[s].req||"",reqId1:"",reqId2:"",reqId3:"",reqPoints:0,showRequired:l.showRequired,operator:l.operator,afterText:l.afterText,beforeText:l.beforeText,orNum:l.orNum,selNum:l.selNum,selFromOperators:"1",more:[]})}if(void 0!==l.requireds)for(var d=0;d<l.requireds.length;d++){var f=l.requireds[d];if("or"===f.type&&f.orRequired&&void 0===f.orRequireds){f.orRequireds=[];for(var v=0;v<f.orRequired.length;v++)f.orRequireds.push({required:f.required,requireds:[],orRequired:[],orRequireds:[],id:"",type:"id",reqId:f.orRequired[v].req||"",reqId1:"",reqId2:"",reqId3:"",reqPoints:0,showRequired:f.showRequired,operator:f.operator,afterText:f.afterText,beforeText:f.beforeText,orNum:f.orNum,selNum:f.selNum,selFromOperators:"1",more:[]})}}}if(void 0!==r.objects)for(var g=0;g<r.objects.length;g++){var p=r.objects[g];if(p.index=g,un(p,!1),void 0!==p.styling&&uo(p.styling,void 0===e.version||"2.0.0-beta"===e.version),p.multiplyPointtypeIsOn&&("string"==typeof p.pointTypeToMultiply&&(p.pointTypeToMultiply=[p.pointTypeToMultiply]),"number"==typeof p.startingSumAtMultiply&&(p.startingSumAtMultiply=[p.startingSumAtMultiply])),p.dividePointtypeIsOn&&("string"==typeof p.pointTypeToDivide&&(p.pointTypeToDivide=[p.pointTypeToDivide]),"number"==typeof p.startingSumAtDivide&&(p.startingSumAtDivide=[p.startingSumAtDivide])),p.fadeTransitionIsOn&&void 0!==p.fadeTransitionTime&&(p.fadeInTransitionTime=p.fadeTransitionTime,p.fadeOutTransitionTime=p.fadeTransitionTime,delete p.fadeTransitionTime),p.addToAllowChoice&&"string"==typeof p.idOfAllowChoice&&(p.idOfAllowChoice=[p.idOfAllowChoice]),void 0!==p.groups)for(var m=0;m<p.groups.length;m++)"object"===u(p.groups[m])&&(p.groups[m]=p.groups[m].id);if(void 0!==p.objectDesignGroups)for(var h=0;h<p.objectDesignGroups.length;h++)"object"===u(p.objectDesignGroups[h])&&(p.objectDesignGroups[h]=p.objectDesignGroups[h].id);if(p.isSelectableMultiple&&void 0!==p.numMultipleTimesMinus&&void 0===p.initMultipleTimesMinus&&(p.initMultipleTimesMinus=p.forcedActivated?0:p.numMultipleTimesMinus),"string"==typeof p.width&&delete p.width,"boolean"==typeof p.defaultWidth&&delete p.defaultWidth,u(p.image)&&(Vo(p.image)?gi.value||(gi.value=No(p.image)):vi.add(p.image)),void 0!==p.scores)for(var b=0;b<p.scores.length;b++){var w=p.scores[b];if(void 0!==w.requireds)for(var T=0;T<w.requireds.length;T++){var I=w.requireds[T];if("or"===I.type&&I.orRequired&&void 0===I.orRequireds){I.orRequireds=[];for(var S=0;S<I.orRequired.length;S++)I.orRequireds.push({required:I.required,requireds:[],orRequired:[],orRequireds:[],id:"",type:"id",reqId:I.orRequired[S].req||"",reqId1:"",reqId2:"",reqId3:"",reqPoints:0,showRequired:I.showRequired,operator:I.operator,afterText:I.afterText,beforeText:I.beforeText,orNum:I.orNum,selNum:I.selNum,selFromOperators:"1",more:[]})}if(void 0!==I.requireds)for(var y=0;y<I.requireds.length;y++){var x=I.requireds[y];if("or"===x.type&&x.orRequired&&void 0===x.orRequireds){x.orRequireds=[];for(var C=0;C<x.orRequired.length;C++)x.orRequireds.push({required:x.required,requireds:[],orRequired:[],orRequireds:[],id:"",type:"id",reqId:x.orRequired[C].req||"",reqId1:"",reqId2:"",reqId3:"",reqPoints:0,showRequired:x.showRequired,operator:x.operator,afterText:x.afterText,beforeText:x.beforeText,orNum:x.orNum,selNum:x.selNum,selFromOperators:"1",more:[]})}}}}if(void 0!==p.requireds)for(var O=0;O<p.requireds.length;O++){var A=p.requireds[O];if("or"===A.type&&A.orRequired&&void 0===A.orRequireds){A.orRequireds=[];for(var k=0;k<A.orRequired.length;k++)A.orRequireds.push({required:A.required,requireds:[],orRequired:[],orRequireds:[],id:"",type:"id",reqId:A.orRequired[k].req||"",reqId1:"",reqId2:"",reqId3:"",reqPoints:0,showRequired:A.showRequired,operator:A.operator,afterText:A.afterText,beforeText:A.beforeText,orNum:A.orNum,selNum:A.selNum,selFromOperators:"1",more:[]})}if(void 0!==A.requireds)for(var B=0;B<A.requireds.length;B++){var M=A.requireds[B];if("or"===M.type&&M.orRequired&&void 0===M.orRequireds){M.orRequireds=[];for(var D=0;D<M.orRequired.length;D++)M.orRequireds.push({required:M.required,requireds:[],orRequired:[],orRequireds:[],id:"",type:"id",reqId:M.orRequired[D].req||"",reqId1:"",reqId2:"",reqId3:"",reqPoints:0,showRequired:M.showRequired,operator:M.operator,afterText:M.afterText,beforeText:M.beforeText,orNum:M.orNum,selNum:M.selNum,selFromOperators:"1",more:[]})}}}for(var F=0;F<p.addons.length;F++){var R=p.addons[F];if(void 0!==R.template&&0!==R.template||(R.template=1),R.parentId=p.id,u(R.image)&&(Vo(R.image)?gi.value||(gi.value=No(R.image)):vi.add(R.image)),void 0!==R.requireds)for(var j=0;j<R.requireds.length;j++){var q=R.requireds[j];if("or"===q.type&&q.orRequired&&void 0===q.orRequireds){q.orRequireds=[];for(var P=0;P<q.orRequired.length;P++)q.orRequireds.push({required:q.required,requireds:[],orRequired:[],orRequireds:[],id:"",type:"id",reqId:q.orRequired[P].req||"",reqId1:"",reqId2:"",reqId3:"",reqPoints:0,showRequired:q.showRequired,operator:q.operator,afterText:q.afterText,beforeText:q.beforeText,orNum:q.orNum,selNum:q.selNum,selFromOperators:"1",more:[]})}if(void 0!==q.requireds)for(var $=0;$<q.requireds.length;$++){var V=q.requireds[$];if("or"===V.type&&V.orRequired&&void 0===V.orRequireds){V.orRequireds=[];for(var N=0;N<V.orRequired.length;N++)V.orRequireds.push({required:V.required,requireds:[],orRequired:[],orRequireds:[],id:"",type:"id",reqId:V.orRequired[N].req||"",reqId1:"",reqId2:"",reqId3:"",reqPoints:0,showRequired:V.showRequired,operator:V.operator,afterText:V.afterText,beforeText:V.beforeText,orNum:V.orNum,selNum:V.selNum,selFromOperators:"1",more:[]})}}}}}}else if("objectDesignGroups"===o||"rowDesignGroups"===o)for(var W=0;W<e[o].length;W++){var E=e[o][W];void 0===E.activatedId&&(E.activatedId=""),void 0===E.elements&&(E.elements=[]),void 0===E.backpackElements&&(E.backpackElements=[]),void 0===E.groupElements&&(E.groupElements=[]);for(var U=0;U<E.elements.length;U++)"object"===u(E.elements[U])&&(E.elements[U]=E.elements[U].id);for(var L=0;L<E.backpackElements.length;L++)"object"===u(E.backpackElements[L])&&(E.backpackElements[L]=E.backpackElements[L].id);sn(E),uo(E.styling,void 0===e.version||"2.0.0-beta"===e.version)}else if("pointTypes"===o)for(var z=0;z<e[o].length;z++){var G=e[o][z];void 0===G.initValue&&(G.initValue=G.startingSum),"object"===u(G.positiveColor)&&void 0!==G.positiveColor.hexa&&(G.positiveColor=G.positiveColor.hexa),"object"===u(G.negativeColor)&&void 0!==G.negativeColor.hexa&&(G.negativeColor=G.negativeColor.hexa),"object"===u(G.privateColor)&&void 0!==G.privateColor.hexa&&(G.privateColor=G.privateColor.hexa),"object"===u(G.privateNegativeColor)&&void 0!==G.privateNegativeColor.hexa&&(G.privateNegativeColor=G.privateNegativeColor.hexa)}else if("groups"===o)for(var _=0;_<e[o].length;_++){var H=e[o][_];void 0===H.elements&&(H.elements=[]),void 0===H.rowElements&&(H.rowElements=[]);for(var Y=0;Y<H.elements.length;Y++)"object"===u(H.elements[Y])&&(H.elements[Y]=H.elements[Y].id);for(var J=0;J<H.rowElements.length;J++)"object"===u(H.rowElements[J])&&(H.rowElements[J]=H.rowElements[J].id)}else if("globalRequirements"===o)for(var Z=0;Z<e[o].length;Z++){var X=e[o][Z];if(void 0!==X.requireds)for(var K=0;K<X.requireds.length;K++){var Q=X.requireds[K];if("or"===Q.type&&Q.orRequired&&void 0===Q.orRequireds){Q.orRequireds=[];for(var ee=0;ee<Q.orRequired.length;ee++)Q.orRequireds.push({required:Q.required,requireds:[],orRequired:[],orRequireds:[],id:"",type:"id",reqId:Q.orRequired[ee].req||"",reqId1:"",reqId2:"",reqId3:"",reqPoints:0,showRequired:Q.showRequired,operator:Q.operator,afterText:Q.afterText,beforeText:Q.beforeText,orNum:Q.orNum,selNum:Q.selNum,selFromOperators:"1",more:[]})}if(void 0!==Q.requireds)for(var te=0;te<Q.requireds.length;te++){var ie=Q.requireds[te];if("or"===ie.type&&ie.orRequired&&void 0===ie.orRequireds){ie.orRequireds=[];for(var oe=0;oe<ie.orRequired.length;oe++)ie.orRequireds.push({required:ie.required,requireds:[],orRequired:[],orRequireds:[],id:"",type:"id",reqId:ie.orRequired[oe].req||"",reqId1:"",reqId2:"",reqId3:"",reqPoints:0,showRequired:ie.showRequired,operator:ie.operator,afterText:ie.afterText,beforeText:ie.beforeText,orNum:ie.orNum,selNum:ie.selNum,selFromOperators:"1",more:[]})}}}}}else"object"===u(e[o])&&"styling"===o&&uo(e[o],void 0===e.version||"2.0.0-beta"===e.version,!0)}Wt.clear(),Ut.clear(),Lt.clear(),zt.clear(),Gt.clear(),_t.clear(),Ht.clear(),Yt.clear(),Jt.clear(),Zt.clear(),Kt.splice(0),Xt.clear();for(var ne=Object.keys(Nt),re=0;re<ne.length;re++){var ae=ne[re];Nt.hasOwnProperty(ae)?app[ae]=Nt[ae]:delete app[ae]}for(var ce=Object.keys(e),le=0;le<ce.length;le++){var se=ce[le];app[se]=e[se]}for(var ue=0;ue<app.googleFonts.length;ue++){var de=app.googleFonts[ue].replace(/ /g,"+"),fe="https://fonts.googleapis.com/css2?family=".concat(de,"&display=swap"),ve=document.createElement("link");ve.id=de,ve.rel="stylesheet",ve.href=fe,ve.crossOrigin="anonymous",document.head.appendChild(ve)}for(var ge=0;ge<app.customFonts.length;ge++){var pe=app.customFonts[ge],me=document.createElement("link");me.id=pe,me.rel="stylesheet",me.href=pe,me.crossOrigin="anonymous",document.head.appendChild(me)}for(var he=0;he<app.pointTypes.length;he++){var be=app.pointTypes[he];void 0!==be.id&&""!==be.id||(be.id=Ui(0,4)),be.id=Xi(be.id,Ut),void 0===be.initValue&&(be.initValue=be.startingSum),void 0===be.isNotShownObjects&&""!==be.activatedId&&(be.isNotShownObjects=!0),void 0===be.isNotShownPointBar&&""!==be.activatedId&&(be.isNotShownPointBar=!0),Ut.set(be.id,be)}for(var we=0;we<app.rows.length;we++){var Te=app.rows[we];void 0!==Te.id&&""!==Te.id||(Te.id=$i(0,4)),Te.id=Xi(Te.id,Lt),Lt.set(Te.id,Te);for(var Ie=0;Ie<Te.objects.length;Ie++){var Se=Te.objects[Ie];void 0!==Se.id&&""!==Se.id||(Se.id=Ni(0,4)),Se.id=Xi(Se.id,zt),zt.set(Se.id,{choice:Se,row:Te});for(var ye=0;ye<Se.scores.length;ye++){var xe=Se.scores[ye];void 0!==xe.idx&&""!==xe.idx||(xe.idx=zi(0,5)),xe.idx=Xi(xe.idx,Xt),Xt.add(xe.idx)}if(Se.addons&&Se.addons.length>0)for(var Ce=0;Ce<Se.addons.length;Ce++){var Oe=Se.addons[Ce];if(Oe.isSelectable&&(Oe.id=Xi(Oe.id,zt),zt.set(Oe.id,{choice:Oe,row:Te}),Oe.scores&&Oe.scores.length>0))for(var Ae=0;Ae<Oe.scores.length;Ae++){var ke=Oe.scores[Ae];void 0!==ke.idx&&""!==ke.idx||(ke.idx=zi(0,5)),ke.idx=Xi(ke.idx,Xt),Xt.add(ke.idx)}}}}for(var Be=0;Be<app.backpack.length;Be++){var Me=app.backpack[Be];void 0!==Me.id&&""!==Me.id||(Me.id=$i(0,4)),Me.id=Xi(Me.id,Lt),Lt.set(Me.id,Me);for(var De=0;De<Me.objects.length;De++){var Fe=Me.objects[De];void 0!==Fe.id&&""!==Fe.id||(Fe.id=Ni(0,4)),Fe.id=Xi(Fe.id,zt),zt.set(Fe.id,{choice:Fe,row:Me});for(var Re=0;Re<Fe.scores.length;Re++){var je=Fe.scores[Re];void 0!==je.idx&&""!==je.idx||(je.idx=zi(0,5)),je.idx=Xi(je.idx,Xt),Xt.add(je.idx)}if(Fe.addons&&Fe.addons.length>0)for(var qe=0;qe<Fe.addons.length;qe++){var Pe=Fe.addons[qe];if(Pe.isSelectable&&(Pe.id=Xi(Pe.id,zt),zt.set(Pe.id,{choice:Pe,row:Me}),Pe.scores&&Pe.scores.length>0))for(var $e=0;$e<Pe.scores.length;$e++){var Ve=Pe.scores[$e];void 0!==Ve.idx&&""!==Ve.idx||(Ve.idx=zi(0,5)),Ve.idx=Xi(Ve.idx,Xt),Xt.add(Ve.idx)}}}}for(var Ne=0;Ne<app.groups.length;Ne++){var We=app.groups[Ne];void 0!==We.id&&""!==We.id||(We.id=Ei(0,4)),We.id=Xi(We.id,Gt),Gt.set(We.id,app.groups[Ne]);for(var Ee=We.elements.length-1;Ee>=0;Ee--)zt.has(We.elements[Ee])||We.elements.splice(Ee,1);for(var Ue=We.rowElements.length-1;Ue>=0;Ue--)Lt.has(We.rowElements[Ue])||We.rowElements.splice(Ue,1)}for(var Le=0;Le<app.rows.length;Le++){var ze=app.rows[Le];if(void 0!==ze.groups)for(var Ge=ze.groups.length-1;Ge>=0;Ge--)Gt.has(ze.groups[Ge])||ze.groups.splice(Ge,1);for(var _e=0;_e<ze.objects.length;_e++){var He=ze.objects[_e];if(void 0!==He.groups)for(var Ye=He.groups.length-1;Ye>=0;Ye--)Gt.has(He.groups[Ye])||He.groups.splice(Ye,1)}}for(var Je=0;Je<app.backpack.length;Je++){var Ze=app.backpack[Je];if(void 0!==Ze.groups)for(var Xe=Ze.groups.length-1;Xe>=0;Xe--)Gt.has(Ze.groups[Xe])||Ze.groups.splice(Xe,1);for(var Ke=0;Ke<Ze.objects.length;Ke++){var Qe=Ze.objects[Ke];if(void 0!==Qe.groups)for(var et=Qe.groups.length-1;et>=0;et--)Gt.has(Qe.groups[et])||Qe.groups.splice(et,1)}}for(var tt=0;tt<app.words.length;tt++){var it=app.words[tt];void 0!==it.id&&""!==it.id||(it.id=Vi(0,4)),it.id=Xi(it.id,Ht),Ht.set(it.id,app.words[tt])}for(var ot=0;ot<app.variables.length;ot++){var nt=app.variables[ot];void 0!==nt.id&&""!==nt.id||(nt.id=Li(0,4)),nt.id=Xi(nt.id,Yt),Yt.set(nt.id,app.variables[ot])}if(void 0!==app.rowDesignGroups)for(var rt=0;rt<app.rowDesignGroups.length;rt++){var at=app.rowDesignGroups[rt];void 0!==at.id&&""!==at.id||(at.id=Wi(0,4)),at.id=Xi(at.id,Jt);for(var ct=at.elements.length-1;ct>=0;ct--)Lt.has(at.elements[ct])||at.elements.splice(ct,1);for(var lt=at.backpackElements.length-1;lt>=0;lt--)Lt.has(at.backpackElements[lt])||at.backpackElements.splice(lt,1);if(void 0!==at.groupElements)for(var st=at.groupElements.length-1;st>=0;st--)Gt.has(at.groupElements[st])||at.groupElements.splice(st,1);Jt.set(at.id,at)}if(void 0!==app.objectDesignGroups)for(var ut=0;ut<app.objectDesignGroups.length;ut++){var dt=app.objectDesignGroups[ut];void 0!==dt.id&&""!==dt.id||(dt.id=Wi(0,4)),dt.id=Xi(dt.id,Zt);for(var ft=dt.elements.length-1;ft>=0;ft--)zt.has(dt.elements[ft])||dt.elements.splice(ft,1);for(var vt=dt.backpackElements.length-1;vt>=0;vt--)zt.has(dt.backpackElements[vt])||dt.backpackElements.splice(vt,1);if(void 0!==dt.groupElements)for(var gt=dt.groupElements.length-1;gt>=0;gt--)Gt.has(dt.groupElements[gt])||dt.groupElements.splice(gt,1);Zt.set(app.objectDesignGroups[ut].id,app.objectDesignGroups[ut])}for(var pt=0;pt<app.groups.length;pt++){var mt=app.groups[pt];if(void 0!==mt.designGroups)for(var ht=mt.designGroups.length-1;ht>=0;ht--)Jt.has(mt.designGroups[ht])||Zt.has(mt.designGroups[ht])||mt.designGroups.splice(ht,1)}if(void 0!==app.globalRequirements)for(var bt=0;bt<app.globalRequirements.length;bt++){var wt=app.globalRequirements[bt];_t.set(wt.id,wt)}app.activated.length>0&&Po(app.activated.join(",")),void 0!==app.customCSS&&function(e){var t=document.getElementById("customCSS");t?""===e?(t.remove(),delete app.customCSS):(t.textContent=e,app.customCSS=e):((t=document.createElement("style")).id="customCSS",t.textContent=e,app.customCSS=e,document.head.appendChild(t))}(app.customCSS),app.buildAutoSaveIsOn&&(yi&&yi.abort(),Ci()),"boolean"!=typeof app.isMute&&(app.curVolume=100,app.isMute=!1)}function fn(e){return vn.apply(this,arguments)}function vn(){return(vn=f(l().m(function e(t){var i,o;return l().w(function(e){for(;;)if(0===e.n)return i=t.querySelectorAll("img"),o=Array.from(i).map(function(e){return e.complete?Promise.resolve():new Promise(function(t){e.onload=t,e.onerror=t})}),e.a(2,Promise.all(o).then(function(){}))},e)}))).apply(this,arguments)}function gn(e){e.querySelectorAll("img").forEach(function(e){"lazy"===e.loading&&(e.loading="eager")})}function pn(e){return mn.apply(this,arguments)}function mn(){return(mn=f(l().m(function e(t){var i,o,n;return l().w(function(e){for(;;)switch(e.n){case 0:return i=t.querySelectorAll("*"),o=[],i.forEach(function(e){var t=getComputedStyle(e).borderImageSource.match(/url\(["']?(.*?)["']?\)/);t&&t[1]&&o.push(t[1])}),n=o.map(function(e){return new Promise(function(t){var i=new Image;i.src=e,i.onload=t,i.onerror=t})}),e.n=1,Promise.all(n);case 1:return e.a(2)}},e)}))).apply(this,arguments)}function hn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return new Promise(function(t){var i=0;requestAnimationFrame(function o(){if(++i>=e)return t();requestAnimationFrame(o)})})}function bn(){return(bn=f(l().m(function e(i){var o,n,r,a,c,s,u,d,f,v,g,p,m,h,b,w;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!i){e.n=14;break}return o=[],e.p=1,li.labelText="Downloading image...",li.isOpen=!0,gn(i),e.n=2,fn(i);case 2:return e.n=3,Ct({usePromise:!0});case 3:if(n=e.v,r=n.height,a=i.offsetHeight,c=i.offsetWidth,si.isSingleFile||!(a>r)){e.n=7;break}s=0,u=1,d=Math.ceil(a/r),f=l().m(function e(){var t,o,n,f,v,g,p;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=Math.min(r,a-s),o=document.createElement("div"),li.labelText="Splitting large image...(".concat(u," / ").concat(d,")"),li.isOpen=!0,app.styling.useBackpackDesign?(app.styling.backpackBgImage&&(o.style.backgroundImage=app.styling.backpackBgImage),app.styling.backpackBgColor&&(o.style.backgroundColor=xn(app.styling.backpackBgColor)),app.styling.isBackpackBgRepeat?o.style.backgroundRepeat="repeat":app.styling.isBackpackBgFitIn?o.style.backgroundSize="100% 100%":o.style.backgroundSize="cover"):(app.styling.backgroundImage&&(o.style.backgroundImage=app.styling.backgroundImage),app.styling.backgroundColor&&(o.style.backgroundColor=xn(app.styling.backgroundColor)),app.styling.isBackgroundRepeat?o.style.backgroundRepeat="repeat":app.styling.isBackgroundFitIn?o.style.backgroundSize="100% 100%":o.style.backgroundSize="cover"),i.parentElement&&i.parentElement.classList.contains("mdc-dialog__content")&&o.classList.add("backpack-wrapper"),o.style.width="".concat(c,"px"),o.style.height="".concat(t,"px"),o.style.overflow="hidden",o.style.position="absolute",o.style.display="block",o.style.top="0",o.style.left="0",o.style.zIndex="-9999",o.style.pointerEvents="none",gn(n=i.cloneNode(!0)),n.style.position="relative",n.style.top="-".concat(s,"px"),o.appendChild(n),document.body.appendChild(o),e.n=1,fn(o);case 1:return e.n=2,pn(o);case 2:return e.n=3,hn(5);case 3:return e.p=3,e.n=4,k(o,{filter:function(e){var t,i;return!(null!==(t=e.classList)&&void 0!==t&&t.contains("mdc-top-app-bar")||null!==(i=e.classList)&&void 0!==i&&i.contains("hidden")||e.nodeType===Node.COMMENT_NODE)}});case 4:if(f=e.v){e.n=5;break}throw new Error("blob creation failed");case 5:v=URL.createObjectURL(f),(g=document.createElement("a")).href=v,g.download="Build_".concat(Ri(),"_part").concat(u++,".png"),g.target="_blank",g.click(),setTimeout(function(){URL.revokeObjectURL(v)},1e3),e.n=7;break;case 6:e.p=6,p=e.v,li.labelText="Download failed: Restricted content detected.",li.isOpen=!0,console.error(p);case 7:return e.p=7,document.body.removeChild(o),e.f(7);case 8:s+=r;case 9:return e.a(2)}},e,null,[[3,6,7,8]])});case 4:if(!(s<a)){e.n=6;break}return e.d(t(f()),5);case 5:e.n=4;break;case 6:li.labelText="Image downloads complete.",li.isOpen=!0,e.n=10;break;case 7:return e.n=8,k(i,{filter:function(e){var t,i;return!(null!==(t=e.classList)&&void 0!==t&&t.contains("mdc-top-app-bar")||null!==(i=e.classList)&&void 0!==i&&i.contains("hidden")||e.nodeType===Node.COMMENT_NODE)}});case 8:if(v=e.v){e.n=9;break}throw new Error("blob creation failed");case 9:g=URL.createObjectURL(v),(p=document.createElement("a")).href=g,p.download="Build_".concat(Ri(),".png"),p.target="_blank",p.click(),setTimeout(function(){URL.revokeObjectURL(g)},1e3),li.labelText="Image download complete.",li.isOpen=!0;case 10:e.n=12;break;case 11:e.p=11,w=e.v,li.labelText="Download failed: Restricted content detected.",li.isOpen=!0,console.error(w);case 12:for(e.p=12,m=0;m<o.length;m++)(b=o[m]).style.removeProperty("height"),""===(null===(h=b.getAttribute("style"))||void 0===h?void 0:h.trim())&&b.removeAttribute("style");return e.f(12);case 13:e.n=15;break;case 14:li.labelText="Download failed: Cannot find window.",li.isOpen=!0;case 15:return e.a(2)}},e,null,[[1,11,12,13]])}))).apply(this,arguments)}function wn(e,t,i){void 0===e.templateStack&&(e.templateStack=[],e.defaultTemplate=void 0!==e.template?e.template:1),e.templateStack.push({id:t,data:i}),e.template=i}function Tn(e,t){if(void 0!==e.templateStack){var i=e.templateStack.findIndex(function(e){return e.id===t});-1!==i&&e.templateStack.splice(i,1);var o=e.templateStack.length;o>0?e.template=e.templateStack[o-1].data:(e.template=void 0!==e.defaultTemplate?e.defaultTemplate:1,delete e.templateStack)}}function In(e,t,i){void 0===e.widthStack&&(e.widthStack=[],e.defaultWidth=void 0!==e.objectWidth?e.objectWidth:"col-md-3"),e.widthStack.push({id:t,data:i}),e.objectWidth=i}function Sn(e,t){if(void 0!==e.widthStack){var i=e.widthStack.findIndex(function(e){return e.id===t});-1!==i&&e.widthStack.splice(i,1);var o=e.widthStack.length;o>0?e.objectWidth=e.widthStack[o-1].data:(e.objectWidth=void 0!==e.defaultWidth?e.defaultWidth:"col-md-3",delete e.widthStack)}}var yn=CSS.supports("color","#00000080");function xn(e){if(void 0===e)return"";if(yn||!/^#([\da-f]{8})$/i.test(e))return e;var t=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16),n=parseInt(e.slice(7,9),16)/255;return"rgba(".concat(t,", ").concat(i,", ").concat(o,", ").concat(n.toFixed(3),")")}function Cn(e,t,i){for(var o=e,n=!1;o;){var r,a=w(o.classList);try{for(a.s();!(r=a.n()).done;){var c=r.value;if(c.startsWith(t))return!0;c.startsWith(i)&&(n=!0)}}catch(l){a.e(l)}finally{a.f()}if(n)return!1;o=o.parentElement}return!1}var On=s({anchor:null,text:"",isVisible:!0}),An=0;function kn(e,t){var i="string"==typeof t?t:t.text;function o(){var o="string"==typeof t?void 0!==app.tooltipDelay?app.tooltipDelay:1e3:t.delay;0!==An&&(clearTimeout(An),An=0),o>0?An=window.setTimeout(function(){On.anchor=e,On.text=i,On.isVisible=!0},o):(On.anchor=e,On.text=i,On.isVisible=!0)}function n(){0!==An&&(clearTimeout(An),An=0),On.isVisible=!1}return e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",n),e.addEventListener("focusin",o),e.addEventListener("focusout",n),{destroy:function(){On.isVisible=!1,On.anchor=null,e.removeEventListener("mouseenter",o),e.removeEventListener("mouseleave",n),e.removeEventListener("focusin",o),e.removeEventListener("focusout",n)}}}var Bn=R('<div class="mdc-tooltip" role="tooltip" style="z-index: 9999;"><div class="mdc-tooltip__surface"><!></div></div>');var Mn=R("<div><!></div>");var Dn=function(e,t){var i=_(t,"text",3,""),o=_(t,"innerClass",3,""),n=Mn(),r=z(n);H(r,function(){var e;return null!==(e=t.children)&&void 0!==e?e:Y}),J(n,function(e,t){return null==kn?void 0:kn(e,t)},function(){return{text:i(),delay:0}}),Z(function(){return X(n,1,K(o()))}),P(e,n)};var Fn=R("<input/>");function Rn(e,t){V(t,!0);var i,o=_(t,"use",19,function(){return[]}),n=_(t,"class",3,""),r=_(t,"type",3,"text"),a=_(t,"placeholder",3," "),c=_(t,"value",15),l=_(t,"files",15,null),u=_(t,"dirty",15,!1),d=_(t,"invalid",15,!1),f=_(t,"updateInvalid",3,!0),v=_(t,"initialInvalid",3,!1),g=_(t,"emptyValueNull",19,function(){return null===c()}),p=_(t,"emptyValueUndefined",19,function(){return void 0===c()}),b=_(t,"step",3,"any"),w=te(t,["$$slots","$$events","$$legacy","use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","initialInvalid","emptyValueNull","emptyValueUndefined","step"]),T=s({}),I=s({});function S(e){return""===e?Number.NaN:+e}function y(e){if("file"!==r())if(""===e.currentTarget.value&&g())c(null);else if(""===e.currentTarget.value&&p())c(void 0);else switch(r()){case"number":/^-?0\d+/.test(e.currentTarget.value)&&(e.currentTarget.value=e.currentTarget.value.replace(/^(-?)0+(\d+)/,"$1$2")),"number"!=typeof c()&&"-0"!==e.currentTarget.value&&(c(S(e.currentTarget.value)),isNaN(c())&&(c(0),e.currentTarget.value="0")),function(e){return"inputType"in e&&"data"in e}(e)&&(""!==e.currentTarget.value&&"0"!==e.currentTarget.value||("-"===e.data?(c("-0"),e.currentTarget.value="-0"):"deleteContentBackward"===e.inputType?""===e.currentTarget.value&&("number"==typeof c()&&c()<0?(c("-0"),e.currentTarget.value="-0"):(c(0),e.currentTarget.value="0")):"insertFromPaste"===e.inputType&&e.data&&!isNaN(parseInt(e.data))?(c(parseFloat(e.data)),e.currentTarget.value=parseFloat(e.data).toString()):"."!==e.data&&(c(0),e.currentTarget.value="0")));break;case"range":c(S(e.currentTarget.value));break;default:c(e.currentTarget.value)}else l(e.currentTarget.files)}function x(){return i}D(function(){"file"===r()?delete I.value:I.value=null==c()?"":c()}),ie(function(){f()&&v()&&d(x().matches(":invalid"))});var C={getAttr:function(e){return e in T?void 0!==T[e]?T[e]:null:x().getAttribute(e)},addAttr:function(e,t){T[e]!==t&&(T[e]=t)},removeAttr:function(e){e in T&&null==T[e]||(T[e]=void 0)},focus:function(){x().focus()},blur:function(){x().blur()},getElement:x},O=Fn(),A=function(e){var i;"file"!==r()&&y(e),null===(i=t.oninput)||void 0===i||i.call(t,e)},k=function(e){var i;!function(e){"file"!==r()&&"range"!==r()||y(e),"number"===r()&&c(parseFloat(e.currentTarget.value)),u(!0),f()&&d(x().matches(":invalid"))}(e),null===(i=t.onchange)||void 0===i||i.call(t,e)};return oe(O,function(e){return m(m(m(m({class:e,type:r(),placeholder:a()},I),T),{},{step:b()},w),{},{oninput:A,onchange:k})},[function(){return ne(h({"mdc-text-field__input":!0},n(),!0))}],void 0,void 0,!0),q(O,function(e){return i=e},function(){return i}),J(O,function(e,t){var i;return null===(i=re)||void 0===i?void 0:i(e,t)},o),P(e,O),$(C)}var jn=R("<textarea></textarea>");function qn(e,t){V(t,!0);var i,o=_(t,"use",19,function(){return[]}),n=_(t,"class",3,""),r=_(t,"style",3,""),a=_(t,"value",15,""),c=_(t,"dirty",15,!1),l=_(t,"invalid",15,!1),u=_(t,"updateInvalid",3,!0),d=_(t,"initialInvalid",3,!1),f=_(t,"resizable",3,!0),v=te(t,["$$slots","$$events","$$legacy","use","class","style","value","dirty","invalid","updateInvalid","initialInvalid","resizable"]),g=s({});function p(){return i}ie(function(){u()&&d()&&l(p().matches(":invalid"))});var b={getAttr:function(e){return e in g?void 0!==g[e]?g[e]:null:p().getAttribute(e)},addAttr:function(e,t){g[e]!==t&&(g[e]=t)},removeAttr:function(e){e in g&&null==g[e]||(g[e]=void 0)},focus:function(){p().focus()},blur:function(){p().blur()},getElement:p},w=jn(),T=function(e){var i;c(!0),u()&&l(p().matches(":invalid")),null===(i=t.onchange)||void 0===i||i.call(t,e)};return oe(w,function(e){return m(m(m({class:e,style:"".concat(f()?"":"resize: none; ").concat(r())},g),v),{},{onchange:T})},[function(){return ne(h({"mdc-text-field__input":!0},n(),!0))}]),q(w,function(e){return i=e},function(){return i}),J(w,function(e,t){var i;return null===(i=re)||void 0===i?void 0:i(e,t)},o),ae(function(){return ce(w,a)}),P(e,w),$(b)}var Pn=R('<span class="mdc-text-field__ripple"></span>'),$n=R("<!> <!>",1),Vn=R("<span><!> <!></span>"),Nn=R("<!> <!> <!>",1),Wn=R("<label><!> <!> <!> <!> <!> <!> <!></label>"),En=R("<div><!> <!> <!> <!> <!></div>"),Un=R("<!> <!>",1);function Ln(e,t){V(t,!0);var i=fe.applyPassive,o=function(){};function n(e){return e===o}var r=_(t,"use",19,function(){return[]}),a=_(t,"class",3,""),c=_(t,"style",3,""),l=_(t,"ripple",3,!0),u=_(t,"disabled",3,!1),d=_(t,"required",3,!1),f=_(t,"textarea",3,!1),v=_(t,"variant",19,function(){return f()?"outlined":"standard"}),p=_(t,"noLabel",3,!1),b=_(t,"type",3,"text"),w=_(t,"value",15),T=_(t,"files",15,o),I=_(t,"invalid",15,o),S=_(t,"updateInvalid",19,function(){return n(I())}),y=_(t,"initialInvalid",3,!1),x=_(t,"dirty",15,!1),C=_(t,"validateOnValueChange",19,S),A=_(t,"useNativeValidation",19,S),k=_(t,"withLeadingIcon",3,o),R=_(t,"withTrailingIcon",3,o),j=_(t,"input",7),W=_(t,"floatingLabel",7),L=_(t,"lineRipple",7),ae=_(t,"notchedOutline",7),ce=_(t,"alwaysFloat",3,!1),Ce=te(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","initialInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","children","leadingIcon","trailingIcon","internalCounter","line","helper","alwaysFloat"]),Oe=void 0!==w()||void 0===w()&&t.input$emptyValueUndefined||!n(T());n(T())&&T(null),n(I())&&I(!1);var Ae,ke,Be=N(s(document.createElement("div"))),Me=N(void 0),De=new de,Fe=s({}),Re=s({}),je=N(void 0),qe=N(!1),Pe=N(s(y())),$e=le("SMUI:addLayoutListener"),Ve=new Promise(function(e){return ke=e}),Ne=void 0,We=void 0,Ee=void 0,Ue=void 0,Le=M(function(){return j()&&j().getElement()});D(function(){(x()||B(Pe)||!S())&&B(Me)&&B(Me).isValid()!==!I()&&(S()?I(!B(Me).isValid()):B(Me).setValid(!I()))}),D(function(){B(Me)&&B(Me).getValidateOnValueChange()!==C()&&B(Me).setValidateOnValueChange(!n(C())&&C())}),D(function(){B(Me)&&B(Me).setUseNativeValidation(!!n(A())||A())}),D(function(){B(Me)&&B(Me).setDisabled(u())});var ze=w();function Ge(e){return e in Fe?void 0!==Fe[e]&&Fe[e]:Ze().classList.contains(e)}function _e(e){Fe[e]||(Fe[e]=!0)}function He(e){e in Fe&&!Fe[e]||(Fe[e]=!1)}function Ye(e,t){Re[e]!=t&&(""===t||null==t?delete Re[e]:Re[e]=t)}function Je(){if(B(Me)){var e=B(Me).shouldFloat;B(Me).notchOutline(e)}}function Ze(){return B(Be)}D(function(){if(B(Me)&&Oe&&ze!==w()){ze=w();var e="".concat(null==w()?"":w());B(Me).getValue()!==e&&B(Me).setValue(e)}}),$e&&(Ae=$e(Je)),se("SMUI:textfield:leading-icon:mount",function(e){Ne=e}),se("SMUI:textfield:leading-icon:unmount",function(){Ne=void 0}),se("SMUI:textfield:trailing-icon:mount",function(e){We=e}),se("SMUI:textfield:trailing-icon:unmount",function(){We=void 0}),se("SMUI:textfield:helper-text:id",function(e){G(je,e,!0)}),se("SMUI:textfield:helper-text:mount",function(e){Ee=e}),se("SMUI:textfield:helper-text:unmount",function(){G(je,void 0),Ee=void 0}),se("SMUI:textfield:character-counter:mount",function(e){Ue=e}),se("SMUI:textfield:character-counter:unmount",function(){Ue=void 0}),ie(function(){if(G(Me,new ue({addClass:_e,removeClass:He,hasClass:Ge,registerTextFieldInteractionHandler:function(e,t){return De.on(Ze(),e,t)},deregisterTextFieldInteractionHandler:function(e,t){return De.off(Ze(),e,t)},registerValidationAttributeChangeHandler:function(e){var t=new MutationObserver(function(t){A()&&e(function(e){return e.map(function(e){return e.attributeName}).filter(function(e){return e})}(t))});return j()&&t.observe(j().getElement(),{attributes:!0}),t},deregisterValidationAttributeChangeHandler:function(e){e.disconnect()},getNativeInput:function(){var e;return void 0!==(null===(e=j())||void 0===e?void 0:e.getElement())?j().getElement():null},setInputAttr:function(e,t){var i;null===(i=j())||void 0===i||i.addAttr(e,t)},removeInputAttr:function(e){var t;null===(t=j())||void 0===t||t.removeAttr(e)},isFocused:function(){var e;return document.activeElement===(null===(e=j())||void 0===e?void 0:e.getElement())},registerInputInteractionHandler:function(e,t){var o,n=null===(o=j())||void 0===o?void 0:o.getElement();if(n){var r=i();De.on(n,e,t,"boolean"==typeof r?{capture:r}:r)}},deregisterInputInteractionHandler:function(e,t){var i,o=null===(i=j())||void 0===i?void 0:i.getElement();o&&De.off(o,e,t)},floatLabel:function(e){return W()&&W().float(e||ce())},getLabelWidth:function(){return W()?W().getWidth():0},hasLabel:function(){return!!W()},shakeLabel:function(e){return W()&&W().shake(e)},setLabelRequired:function(e){return W()&&W().setRequired(e)},activateLineRipple:function(){return L()&&L().activate()},deactivateLineRipple:function(){return L()&&L().deactivate()},setLineRippleTransformOrigin:function(e){return L()&&L().setRippleCenter(e)},closeOutline:function(){return ae()&&ae().closeNotch()},hasOutline:function(){return!!ae()},notchOutline:function(e){return ae()&&ae().notch(e)}},{get helperText(){return Ee},get characterCounter(){return Ue},get leadingIcon(){return Ne},get trailingIcon(){return We}}),!0),Oe){var e;if(null==j())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null===(e=B(Me))||void 0===e||e.init()}else O().then(function(){var e;if(null==j())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null===(e=B(Me))||void 0===e||e.init()});return ke(),function(){var e;null===(e=B(Me))||void 0===e||e.destroy(),De.clear()}}),F(function(){Ae&&Ae()});var Xe={focus:function(){var e;null===(e=j())||void 0===e||e.focus()},blur:function(){var e;null===(e=j())||void 0===e||e.blur()},layout:Je,getElement:Ze},Ke=Un(),Qe=U(Ke),et=function(e){var i=Wn();oe(i,function(e,t,i){return m({class:e,style:t,for:void 0},i)},[function(){return ne(m(m({"mdc-text-field":!0,"mdc-text-field--disabled":u(),"mdc-text-field--textarea":f(),"mdc-text-field--filled":"filled"===v(),"mdc-text-field--outlined":"outlined"===v(),"smui-text-field--standard":"standard"===v()&&!f(),"mdc-text-field--no-label":p()||null==t.label,"mdc-text-field--label-floating":B(qe)||null!=w()&&""!==w(),"mdc-text-field--with-leading-icon":n(k())?t.leadingIcon:k(),"mdc-text-field--with-trailing-icon":n(R())?t.trailingIcon:R(),"mdc-text-field--with-internal-counter":f()&&t.internalCounter,"mdc-text-field--invalid":I()},Fe),{},h({},a(),!0)))},function(){return Object.entries(Re).map(function(e){var t=g(e,2),i=t[0],o=t[1];return"".concat(i,": ").concat(o,";")}).concat([c()]).join(" ")},function(){return pe(Ce,["input$","label$","ripple$","outline$","helperLine$"])}]);var o=z(i),s=function(e){var i=$n(),o=U(i),n=function(e){var t=Pn();P(e,t)};ve(o,function(e){"filled"===v()&&e(n)});var r=ge(o,2),a=function(e){var i=M(function(){return B(qe)||ce()||null!=w()&&""!==w()&&("number"!=typeof w()||!isNaN(w()))}),o=M(function(){return be(Ce,"label$")});q(Te(e,ee({get floatAbove(){return B(i)},get required(){return d()},wrapped:!0},function(){return B(o)},{children:function(e,i){var o=E(),n=U(o),r=function(e){},a=function(e){var i=E(),o=U(i),n=function(e){var i=Ie();Z(function(){return Se(i,t.label)}),P(e,i)},r=function(e){var i=E(),o=U(i);H(o,function(){return t.label}),P(e,i)};ve(o,function(e){"string"==typeof t.label?e(n):e(r,!1)},!0),P(e,i)};ve(n,function(e){null==t.label?e(r):e(a,!1)}),P(e,o)},$$slots:{default:!0}})),function(e){return W(e)},function(){return W()})};ve(r,function(e){p()||null==t.label||e(a)}),P(e,i)};ve(o,function(e){"outlined"!==v()&&e(s)});var y=ge(o,2),C=function(e){var i=M(function(){return p()||null==t.label}),o=M(function(){return be(Ce,"outline$")});q(we(e,ee({get noLabel(){return B(i)}},function(){return B(o)},{children:function(e,i){var o=E(),n=U(o),r=function(e){var i=M(function(){return B(qe)||ce()||null!=w()&&""!==w()&&("number"!=typeof w()||!isNaN(w()))}),o=M(function(){return be(Ce,"label$")});q(Te(e,ee({get floatAbove(){return B(i)},get required(){return d()},wrapped:!0},function(){return B(o)},{children:function(e,i){var o=E(),n=U(o),r=function(e){},a=function(e){var i=E(),o=U(i),n=function(e){var i=Ie();Z(function(){return Se(i,t.label)}),P(e,i)},r=function(e){var i=E(),o=U(i);H(o,function(){return t.label}),P(e,i)};ve(o,function(e){"string"==typeof t.label?e(n):e(r,!1)},!0),P(e,i)};ve(n,function(e){null==t.label?e(r):e(a,!1)}),P(e,o)},$$slots:{default:!0}})),function(e){return W(e)},function(){return W()})};ve(n,function(e){p()||null==t.label||e(r)}),P(e,o)},$$slots:{default:!0}})),function(e){return ae(e)},function(){return ae()})};ve(y,function(e){"outlined"===v()&&e(C)});var O=ge(y,2);me(O,{key:"SMUI:textfield:icon:leading",value:!0,children:function(e,i){var o=E(),n=U(o);H(n,function(){var e;return null!==(e=t.leadingIcon)&&void 0!==e?e:Y}),P(e,o)},$$slots:{default:!0}});var A=ge(O,2);H(A,function(){var e;return null!==(e=t.children)&&void 0!==e?e:Y});var D=ge(A,2),F=function(e){var i=Vn(),o=z(i),n=M(function(){return be(Ce,"input$")});q(qn(o,ee({get disabled(){return u()},get required(){return d()},get updateInvalid(){return S()},get initialInvalid(){return B(Pe)},get"aria-controls"(){return B(je)},get"aria-describedby"(){return B(je)}},function(){return B(n)},{onblur:function(e){var i;G(qe,!1),G(Pe,!0),ye(Ze(),"blur",e),null===(i=t.input$onblur)||void 0===i||i.call(t,e)},onfocus:function(e){var i;G(qe,!0),ye(Ze(),"focus",e),null===(i=t.input$onfocus)||void 0===i||i.call(t,e)},get value(){return w()},set value(e){w(e)},get dirty(){return x()},set dirty(e){x(e)},get invalid(){return I()},set invalid(e){I(e)}})),function(e){return j(e)},function(){return j()});var r=ge(o,2);H(r,function(){var e;return null!==(e=t.internalCounter)&&void 0!==e?e:Y}),Z(function(e){return X(i,1,e)},[function(){return K(ne({"mdc-text-field__resizer":!("input$resizable"in Ce)||t.input$resizable}))}]),P(e,i)},N=function(e){var i=Nn(),o=U(i),n=function(e){var i=E(),o=U(i),n=function(e){!function(e,t){V(t,!0);var i,o=te(t,["$$slots","$$events","$$legacy","children"]),n={getElement:function(){return i.getElement()}};q(Q(e,ee({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--prefix",tag:"span"},function(){return o},{children:function(e,i){var o=E(),n=U(o);H(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:Y}),P(e,o)},$$slots:{default:!0}})),function(e){return i=e},function(){return i}),$(n)}(e,{children:function(e,i){var o=Ie();Z(function(){return Se(o,t.prefix)}),P(e,o)},$$slots:{default:!0}})},r=function(e){var i=E(),o=U(i);H(o,function(){var e;return null!==(e=t.prefix)&&void 0!==e?e:Y}),P(e,i)};ve(o,function(e){"string"==typeof t.prefix?e(n):e(r,!1)}),P(e,i)};ve(o,function(e){null!=t.prefix&&e(n)});var r=ge(o,2),a=M(function(){return be(Ce,"input$")});q(Rn(r,ee({get type(){return b()},get disabled(){return u()},get required(){return d()},get updateInvalid(){return S()},get initialInvalid(){return B(Pe)},get"aria-controls"(){return B(je)},get"aria-describedby"(){return B(je)}},function(){return p()&&null!=t.label&&"string"==typeof t.label?{placeholder:t.label}:{}},function(){return B(a)},{onblur:function(e){var i;G(qe,!1),G(Pe,!0),ye(Ze(),"blur",e),null===(i=t.input$onblur)||void 0===i||i.call(t,e)},onfocus:function(e){var i;G(qe,!0),ye(Ze(),"focus",e),null===(i=t.input$onfocus)||void 0===i||i.call(t,e)},get value(){return w()},set value(e){w(e)},get files(){return T()},set files(e){T(e)},get dirty(){return x()},set dirty(e){x(e)},get invalid(){return I()},set invalid(e){I(e)}})),function(e){return j(e)},function(){return j()});var c=ge(r,2),l=function(e){var i=E(),o=U(i),n=function(e){!function(e,t){V(t,!0);var i,o=te(t,["$$slots","$$events","$$legacy","children"]),n={getElement:function(){return i.getElement()}};q(Q(e,ee({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--suffix",tag:"span"},function(){return o},{children:function(e,i){var o=E(),n=U(o);H(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:Y}),P(e,o)},$$slots:{default:!0}})),function(e){return i=e},function(){return i}),$(n)}(e,{children:function(e,i){var o=Ie();Z(function(){return Se(o,t.suffix)}),P(e,o)},$$slots:{default:!0}})},r=function(e){var i=E(),o=U(i);H(o,function(){var e;return null!==(e=t.suffix)&&void 0!==e?e:Y}),P(e,i)};ve(o,function(e){"string"==typeof t.suffix?e(n):e(r,!1)}),P(e,i)};ve(c,function(e){null!=t.suffix&&e(l)}),P(e,i)};ve(D,function(e){f()&&"string"==typeof w()?e(F):e(N,!1)});var _=ge(D,2);me(_,{key:"SMUI:textfield:icon:leading",value:!1,children:function(e,i){var o=E(),n=U(o);H(n,function(){var e;return null!==(e=t.trailingIcon)&&void 0!==e?e:Y}),P(e,o)},$$slots:{default:!0}});var ie=ge(_,2),le=function(e){var t=M(function(){return be(Ce,"ripple$")});q(xe(e,ee(function(){return B(t)})),function(e){return L(e)},function(){return L()})};ve(ie,function(e){"outlined"!==v()&&l()&&e(le)}),q(i,function(e){return G(Be,e)},function(){return B(Be)}),J(i,function(e,t){var i;return null===(i=he)||void 0===i?void 0:i(e,t)},function(){return{ripple:"filled"===v(),unbounded:!1,addClass:_e,removeClass:He,addStyle:Ye,eventTarget:B(Le),activeTarget:B(Le),initPromise:Ve}}),J(i,function(e,t){var i;return null===(i=re)||void 0===i?void 0:i(e,t)},r),P(e,i)},tt=function(e){var i=En();oe(i,function(e,t,i){return m({class:e,style:t},i)},[function(){return ne(m(m({"mdc-text-field":!0,"mdc-text-field--disabled":u(),"mdc-text-field--textarea":f(),"mdc-text-field--filled":"filled"===v(),"mdc-text-field--outlined":"outlined"===v(),"smui-text-field--standard":"standard"===v()&&!f(),"mdc-text-field--no-label":p()||null==t.label,"mdc-text-field--with-leading-icon":t.leadingIcon,"mdc-text-field--with-trailing-icon":t.trailingIcon,"mdc-text-field--invalid":I()},Fe),{},h({},a(),!0)))},function(){return Object.entries(Re).map(function(e){var t=g(e,2),i=t[0],o=t[1];return"".concat(i,": ").concat(o,";")}).concat([c()]).join(" ")},function(){return pe(Ce,["input$","label$","ripple$","outline$","helperLine$"])}]);var o=z(i),n=function(e){var i=E(),o=U(i);H(o,function(){var e;return null!==(e=t.label)&&void 0!==e?e:Y}),P(e,i)};ve(o,function(e){"string"!=typeof t.label&&e(n)});var s=ge(o,2);me(s,{key:"SMUI:textfield:icon:leading",value:!0,children:function(e,i){var o=E(),n=U(o);H(n,function(){var e;return null!==(e=t.leadingIcon)&&void 0!==e?e:Y}),P(e,o)},$$slots:{default:!0}});var d=ge(s,2);H(d,function(){var e;return null!==(e=t.children)&&void 0!==e?e:Y});var b=ge(d,2);me(b,{key:"SMUI:textfield:icon:leading",value:!1,children:function(e,i){var o=E(),n=U(o);H(n,function(){var e;return null!==(e=t.trailingIcon)&&void 0!==e?e:Y}),P(e,o)},$$slots:{default:!0}});var w=ge(b,2);H(w,function(){var e;return null!==(e=t.line)&&void 0!==e?e:Y}),q(i,function(e){return G(Be,e)},function(){return B(Be)}),J(i,function(e,t){var i;return null===(i=he)||void 0===i?void 0:i(e,t)},function(){return{ripple:l(),unbounded:!1,addClass:_e,removeClass:He,addStyle:Ye}}),J(i,function(e,t){var i;return null===(i=re)||void 0===i?void 0:i(e,t)},r),P(e,i)};ve(Qe,function(e){Oe?e(et):e(tt,!1)});var it=ge(Qe,2),ot=function(e){var i=M(function(){return be(Ce,"helperLine$")});!function(e,t){V(t,!0);var i,o=te(t,["$$slots","$$events","$$legacy","children"]),n={getElement:function(){return i.getElement()}};q(Q(e,ee({_smuiClass:"mdc-text-field-helper-line",tag:"div"},function(){return o},{children:function(e,i){var o=E(),n=U(o);H(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:Y}),P(e,o)},$$slots:{default:!0}})),function(e){return i=e},function(){return i}),$(n)}(e,ee(function(){return B(i)},{children:function(e,i){var o=E(),n=U(o);H(n,function(){var e;return null!==(e=t.helper)&&void 0!==e?e:Y}),P(e,o)},$$slots:{default:!0}}))};return ve(it,function(e){t.helper&&e(ot)}),P(e,Ke),$(Xe)}var zn=R('<div class="row"><div class="col-12 mt-4 mb-2"><!></div> <div class="col-sm-6 col-12 mb-4"><!></div> <div class="col-sm-6 col-12 mb-4"><!></div> <div class="col-12"><!> <!></div></div>'),Gn=R("<!> <!> <!>",1);function _n(e,t){V(t,!0);var i=_(t,"open",7),o=N(""),n=N(!1);function r(){var e=[],t=Array.from(Wt.keys()),i="";if(t.sort(function(e,t){var i=zt.get(e),o=zt.get(t);return void 0!==i&&void 0!==o?i.row.index!==o.row.index?i.row.index-o.row.index:i.choice.index-o.choice.index:0}),B(n)){for(var o="",r=0;r<t.length;r++){var a=zt.get(t[r]);if(void 0!==a){var c=a.row,l=a.choice;""!==l.title&&(c.id!==o?(""!==o&&e.push("\n"),e.push("**".concat(""!==c.title?c.title:c.debugTitle||"","**\n")),l.isSelectableMultiple?e.push("".concat(l.title,"(x").concat(l.multipleUseVariable,")")):e.push("".concat(l.title)),o=c.id):l.isSelectableMultiple?e.push(", ".concat(l.title,"(x").concat(l.multipleUseVariable,")")):e.push(", ".concat(l.title)))}}i=e.join("")}else{for(var s=0;s<t.length;s++){var u=zt.get(t[s]);if(void 0!==u){var d=u.choice;""!==d.title&&(d.isSelectableMultiple?e.push("".concat(d.title,"(x").concat(d.multipleUseVariable,")")):e.push("".concat(d.title)))}}i=e.join(", ")}var f=document.createElement("div");return f.innerHTML=i,f.textContent}Ce(e,{surface$style:"width: 1920px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return i()},set open(e){i(e)},children:function(e,t){var i=Gn(),a=U(i);Oe(a,{class:"px-3 pb-0 toolbar toolbar__dialog",tabindex:0,autofocus:!0,children:function(e,t){var i=Ie("Build Form");P(e,i)},$$slots:{default:!0}});var c=ge(a,2);Ae(c,{children:function(e,t){var i=zn(),a=z(i),c=z(a);ke(c,{label:function(e){var t=Ie("Separate Choice Titles by Row");P(e,t)},children:function(e,t){Be(e,{color:"secondary",class:"switch-scale",get checked(){return B(n)},set checked(e){G(n,e,!0)}})},$$slots:{label:!0,default:!0}});var l=ge(a,2),s=z(l),u=M(r);Ln(s,{textarea:!0,get value(){return B(u)},label:"Current Activated Choices Titles",variant:"filled",input$rows:5});var d=ge(l,2),f=z(d),v=M(Fi);Ln(f,{textarea:!0,get value(){return B(v)},label:"Current Activated Choices ID's",variant:"filled",input$rows:5});var g=ge(d,2),p=z(g);Ln(p,{textarea:!0,label:"Area To Import Activated Choices With Lists Of Id's",variant:"filled",input$rows:5,get value(){return B(o)},set value(e){G(o,e,!0)}});var m=ge(p,2);Me(m,{onclickcapture:function(){return Po(B(o))},variant:"raised",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Import Choices/Clean if empty");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}});var l=ge(c,2);Fe(l,{children:function(e,t){Me(e,{action:"close",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Cancel");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}}),$()}var Hn=0,Yn=R("<div><!></div>");var Jn=0,Zn=R("<input/>"),Xn=R('<span class="mdc-select__ripple"></span>'),Kn=R('<div><!> <div><!> <!> <!> <!> <span><span> </span></span> <span><svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5" focusable="false"><polygon class="mdc-select__dropdown-icon-inactive" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"></polygon><polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"></polygon></svg></span> <!></div> <!></div> <!>',1);function Qn(e,t){V(t,!0);var i=function(){return Ne(it,"$selectedTextStore",n)},o=g(We(),2),n=o[0],r=o[1],a=function(){};function c(e){return e===a}var l,u=_(t,"use",19,function(){return[]}),d=_(t,"class",3,""),f=_(t,"style",3,""),v=_(t,"ripple",3,!0),p=_(t,"disabled",3,!1),b=_(t,"variant",3,"standard"),w=_(t,"noLabel",3,!1),T=_(t,"label",3,void 0),I=_(t,"value",15),S=_(t,"key",3,function(e){return e}),x=_(t,"dirty",15,!1),C=_(t,"invalid",15,a),O=_(t,"updateInvalid",19,function(){return c(C())}),A=_(t,"required",3,!1),k=_(t,"inputId",19,function(){return"SMUI-select-"+Jn++}),R=_(t,"hiddenInput",3,!1),j=_(t,"withLeadingIcon",3,a),W=_(t,"anchor$use",19,function(){return[]}),L=_(t,"anchor$class",3,""),X=_(t,"selectedTextContainer$use",19,function(){return[]}),K=_(t,"selectedTextContainer$class",3,""),Q=_(t,"selectedText$use",19,function(){return[]}),ae=_(t,"selectedText$class",3,""),ce=_(t,"dropdownIcon$use",19,function(){return[]}),ue=_(t,"dropdownIcon$class",3,""),de=_(t,"menu$class",3,""),fe=_(t,"alwaysFloat",3,!1),me=te(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","children","leadingIcon","helperText","alwaysFloat"]),Ce=c(C());c(C())&&C(!1);var Oe,Ae,ke,Be=N(void 0),Me=s({}),De=s({}),Fe=s({}),Ee=N(-1),Ue=M(function(){return void 0!==me.menu$id?me.menu$id:k()+"-menu"}),Le=N(void 0),ze=le("SMUI:addLayoutListener"),Ge=N(!1),_e=s({}),He=N(void 0),Ye=N(void 0),Je=N(!1),Ze=le("SMUI:select:context"),Xe=void 0,Ke=void 0,Qe=N(void 0),et=N(void 0),tt=N(void 0);se("SMUI:list:role",""),se("SMUI:list:nav",!1);var it=y("");se("SMUI:select:selectedText",it);var ot=y(I());D(function(){je(ot,I())}),se("SMUI:select:value",ot),D(function(){B(Be)&&B(Be).getValue()!==S()(I())&&B(Be).setValue(S()(I()))});var nt=B(Ee);function rt(e){return e in Me?Me[e]:ht().classList.contains(e)}function at(e){Me[e]||(Me[e]=!0)}function ct(e){e in Me&&!Me[e]||(Me[e]=!1)}function lt(e,t){De[e]!=t&&(""===t||null==t?delete De[e]:De[e]=t)}function st(e){_e[e]||(_e[e]=!0)}function ut(e){e in _e&&!_e[e]||(_e[e]=!1)}function dt(e){return e in Fe?void 0!==Fe[e]?Fe[e]:null:ht().getAttribute(e)}function ft(e,t){Fe[e]!==t&&(Fe[e]=t)}function vt(e){e in Fe&&null==Fe[e]||(Fe[e]=void 0)}function gt(){return ke.getOrderedList().map(function(e){return e.getValue()})}function pt(e){var t;null===(t=B(Be))||void 0===t||t.setUseDefaultValidation(e)}function mt(){var e;null===(e=B(Be))||void 0===e||e.layout()}function ht(){return l}D(function(){if(nt!==B(Ee))if(nt=B(Ee),B(Be))B(Be).setSelectedIndex(B(Ee),!1,!0);else{var e=gt();I()!==e[B(Ee)]&&I(e[B(Ee)])}}),D(function(){B(Be)&&B(Be).getDisabled()!==p()&&B(Be).setDisabled(p())}),D(function(){B(Be)&&x()&&B(Be).isValid()!==!C()&&(O()?C(!B(Be).isValid()):B(Be).setValid(!C()))}),D(function(){B(Be)&&B(Be).getRequired()!==A()&&B(Be).setRequired(A())}),ze&&(Ae=ze(mt)),se("SMUI:select:leading-icon:mount",function(e){Xe=e}),se("SMUI:select:leading-icon:unmount",function(){Xe=void 0}),se("SMUI:list:mount",function(e){ke=e}),se("SMUI:select:helper-text:id",function(e){G(Le,e,!0)}),se("SMUI:select:helper-text:mount",function(e){Ke=e}),se("SMUI:select:helper-text:unmount",function(){G(Le,void 0),Ke=void 0}),ie(function(){return G(Be,new qe({setSelectedText:function(e){je(it,e)},isSelectAnchorFocused:function(){return document.activeElement===Oe},getSelectAnchorAttr:dt,setSelectAnchorAttr:ft,removeSelectAnchorAttr:vt,addMenuClass:st,removeMenuClass:ut,openMenu:function(){G(Ge,!0)},closeMenu:function(){G(Ge,!1)},getAnchorElement:function(){return Oe},setMenuAnchorElement:function(e){G(He,e,!0)},setMenuAnchorCorner:function(e){G(Ye,e,!0)},setMenuWrapFocus:function(e){G(Je,e,!0)},getSelectedIndex:function(){return B(Ee)},setSelectedIndex:function(e){nt=e,G(Ee,e,!0),I(gt()[B(Ee)])},focusMenuItemAtIndex:function(e){ke.focusItemAtIndex(e)},getMenuItemCount:function(){return ke.items.length},getMenuItemValues:function(){return gt().map(S())},getMenuItemTextAtIndex:function(e){return ke.getPrimaryTextAtIndex(e)},isTypeaheadInProgress:function(){return ke.typeaheadInProgress},typeaheadMatchItem:function(e,t){return ke.typeaheadMatchItem(e,t)},addClass:at,removeClass:ct,hasClass:rt,setRippleCenter:function(e){return B(et)&&B(et).setRippleCenter(e)},activateBottomLine:function(){return B(et)&&B(et).activate()},deactivateBottomLine:function(){return B(et)&&B(et).deactivate()},notifyChange:function(e){var t;(x(!0),O())&&C(!(null!==(t=B(Be))&&void 0!==t&&t.isValid()));ye(ht(),"SMUISelectChange",{value:I(),index:B(Ee)})},hasOutline:function(){return!!B(tt)},notchOutline:function(e){return B(tt)&&B(tt).notch(e)},closeOutline:function(){return B(tt)&&B(tt).closeNotch()},hasLabel:function(){return!!B(Qe)},floatLabel:function(e){return B(Qe)&&B(Qe).float(e||fe())},getLabelWidth:function(){return B(Qe)?B(Qe).getWidth():0},setLabelRequired:function(e){return B(Qe)&&B(Qe).setRequired(e)}},{get helperText(){return Ke},get leadingIcon(){return Xe}}),!0),G(Ee,gt().indexOf(I()),!0),B(Be).init(),pt(Ce),function(){var e;null===(e=B(Be))||void 0===e||e.destroy()}}),F(function(){Ae&&Ae()});var bt={getUseDefaultValidation:function(){if(null==B(Be))throw new Error("Instance is undefined.");return B(Be).getUseDefaultValidation()},setUseDefaultValidation:pt,focus:function(){Oe.focus()},layout:mt,getElement:ht},wt=Kn(),Tt=U(wt);oe(Tt,function(e,t,i){return m({class:e,style:t},i)},[function(){return ne(m(m({"mdc-select":!0,"mdc-select--required":A(),"mdc-select--disabled":p(),"mdc-select--filled":"filled"===b(),"mdc-select--outlined":"outlined"===b(),"smui-select--standard":"standard"===b(),"mdc-select--with-leading-icon":c(j())?t.leadingIcon:j(),"mdc-select--no-label":w()||null==T(),"mdc-select--invalid":C(),"mdc-select--activated":B(Ge),"mdc-data-table__pagination-rows-per-page-select":"data-table:pagination"===Ze},Me),{},h({},d(),!0)))},function(){return Object.entries(De).map(function(e){var t=g(e,2),i=t[0],o=t[1];return"".concat(i,": ").concat(o,";")}).concat([f()]).join(" ")},function(){return pe(me,["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])}]);var It=z(Tt),St=function(e){var t=Zn();oe(t,function(e){return m({type:"hidden",required:A(),disabled:p(),value:I()},e)},[function(){return be(me,"input$")}],void 0,void 0,!0),P(e,t)};ve(It,function(e){R()&&e(St)});var yt=ge(It,2),xt=function(e){var i,o,n;Oe.focus(),B(Be)&&B(Be).handleClick((n=(o=e).currentTarget.getBoundingClientRect(),(function(e){return"touches"in e}(o)?o.touches[0].clientX:o.clientX)-n.left)),null===(i=t.anchor$onclick)||void 0===i||i.call(t,e)},Ct=function(e){var i;B(Be)&&B(Be).handleKeydown(e),null===(i=t.onkeydown)||void 0===i||i.call(t,e)},Ot=function(e){var i;B(Be)&&B(Be).handleBlur(),ye(ht(),"blur",e),null===(i=t.anchor$onblur)||void 0===i||i.call(t,e)},At=function(e){var i;B(Be)&&B(Be).handleFocus(),ye(ht(),"focus",e),null===(i=t.anchor$onfocus)||void 0===i||i.call(t,e)};oe(yt,function(e,t){return m(m(m({class:e,"aria-required":A()?"true":void 0,"aria-disabled":p()?"true":void 0,"aria-controls":B(Ue),"aria-expanded":B(Ge)?"true":"false","aria-describedby":B(Le),role:"combobox",tabindex:"0"},Fe),t),{},{onclick:xt,onkeydown:Ct,onblur:Ot,onfocus:At})},[function(){return ne(h(h({},L(),!0),"mdc-select__anchor",!0))},function(){return be(me,"anchor$")}]);var kt=z(yt),Bt=function(e){var t=Xn();P(e,t)};ve(kt,function(e){"filled"===b()&&e(Bt)});var Mt=ge(kt,2),Dt=function(e){var t=M(function(){return k()+"-smui-label"}),o=M(function(){return""!==i()||fe()}),n=M(function(){return be(me,"label$")});q(Te(e,ee({get id(){return B(t)},get floatAbove(){return B(o)},get required(){return A()}},function(){return B(n)},{children:function(e,t){var i=E(),o=U(i),n=function(e){},r=function(e){var t=E(),i=U(t),o=function(e){var t=Ie();Z(function(){return Se(t,T())}),P(e,t)},n=function(e){var t=E(),i=U(t);H(i,T),P(e,t)};ve(i,function(e){"string"==typeof T()?e(o):e(n,!1)},!0),P(e,t)};ve(o,function(e){null==T()?e(n):e(r,!1)}),P(e,i)},$$slots:{default:!0}})),function(e){return G(Qe,e,!0)},function(){return B(Qe)})};ve(Mt,function(e){"outlined"===b()||w()||null==T()||e(Dt)});var Ft=ge(Mt,2),Rt=function(e){var t=M(function(){return w()||null==T()}),o=M(function(){return be(me,"outline$")});q(we(e,ee({get noLabel(){return B(t)}},function(){return B(o)},{children:function(e,t){var o=E(),n=U(o),r=function(e){var t=M(function(){return k()+"-smui-label"}),o=M(function(){return""!==i()||fe()}),n=M(function(){return be(me,"label$")});q(Te(e,ee({get id(){return B(t)},get floatAbove(){return B(o)},get required(){return A()}},function(){return B(n)},{children:function(e,t){var i=E(),o=U(i),n=function(e){},r=function(e){var t=E(),i=U(t),o=function(e){var t=Ie();Z(function(){return Se(t,T())}),P(e,t)},n=function(e){var t=E(),i=U(t);H(i,T),P(e,t)};ve(i,function(e){"string"==typeof T()?e(o):e(n,!1)},!0),P(e,t)};ve(o,function(e){null==T()?e(n):e(r,!1)}),P(e,i)},$$slots:{default:!0}})),function(e){return G(Qe,e,!0)},function(){return B(Qe)})};ve(n,function(e){w()||null==T()||e(r)}),P(e,o)},$$slots:{default:!0}})),function(e){return G(tt,e,!0)},function(){return B(tt)})};ve(Ft,function(e){"outlined"===b()&&e(Rt)});var jt=ge(Ft,2);H(jt,function(){var e;return null!==(e=t.leadingIcon)&&void 0!==e?e:Y});var qt=ge(jt,2);oe(qt,function(e,t){return m({class:e},t)},[function(){return ne(h(h({},K(),!0),"mdc-select__selected-text-container",!0))},function(){return be(me,"selectedTextContainer$")}]);var Pt=z(qt);oe(Pt,function(e,t){return m({id:k()+"-smui-selected-text",class:e,role:"button","aria-haspopup":"listbox","aria-labelledby":k()+"-smui-label"},t)},[function(){return ne(h(h({},ae(),!0),"mdc-select__selected-text",!0))},function(){return be(me,"selectedText$")}]);var $t=z(Pt);J(Pt,function(e,t){var i;return null===(i=re)||void 0===i?void 0:i(e,t)},Q),J(qt,function(e,t){var i;return null===(i=re)||void 0===i?void 0:i(e,t)},X);var Vt=ge(qt,2);oe(Vt,function(e,t){return m({class:e},t)},[function(){return ne(h(h({},ue(),!0),"mdc-select__dropdown-icon",!0))},function(){return be(me,"dropdownIcon$")}]),J(Vt,function(e,t){var i;return null===(i=re)||void 0===i?void 0:i(e,t)},ce);var Nt=ge(Vt,2),Wt=function(e){var t=M(function(){return be(me,"ripple$")});q(xe(e,ee(function(){return B(t)})),function(e){return G(et,e,!0)},function(){return B(et)})};ve(Nt,function(e){"outlined"!==b()&&v()&&e(Wt)}),q(yt,function(e){return Oe=e},function(){return Oe}),J(yt,function(e,t){var i;return null===(i=re)||void 0===i?void 0:i(e,t)},W);var Et=ge(yt,2),Ut=M(function(){return ne(m(h(h({},de(),!0),"mdc-select__menu",!0),_e))}),Lt=M(function(){return be(me,"menu$")});Pe(Et,ee({get class(){return B(Ut)},get id(){return B(Ue)},fullWidth:!0,anchor:!1,get anchorElement(){return B(He)},get anchorCorner(){return B(Ye)}},function(){return B(Lt)},{onSMUIMenuSelected:function(e){var i;B(Be)&&B(Be).handleMenuItemAction(e.detail.index),null===(i=t.onSMUIMenuSelected)||void 0===i||i.call(t,e)},onSMUIMenuSurfaceClosing:function(e){var i;B(Be)&&B(Be).handleMenuClosing(),null===(i=t.onSMUIMenuSurfaceClosing)||void 0===i||i.call(t,e)},onSMUIMenuSurfaceClosed:function(e){var i;B(Be)&&B(Be).handleMenuClosed(),null===(i=t.onSMUIMenuSurfaceClosed)||void 0===i||i.call(t,e)},onSMUIMenuSurfaceOpened:function(e){var i;B(Be)&&B(Be).handleMenuOpened(),null===(i=t.onSMUIMenuSurfaceOpened)||void 0===i||i.call(t,e)},get open(){return B(Ge)},set open(e){G(Ge,e,!0)},children:function(e,i){var o=M(function(){return be(me,"list$")});$e(e,ee({role:"listbox",get wrapFocus(){return B(Je)}},function(){return B(o)},{style:"max-height: 296px",get selectedIndex(){return B(Ee)},set selectedIndex(e){G(Ee,e,!0)},children:function(e,i){var o=E(),n=U(o);H(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:Y}),P(e,o)},$$slots:{default:!0}}))},$$slots:{default:!0}})),q(Tt,function(e){return l=e},function(){return l}),J(Tt,function(e,t){var i;return null===(i=he)||void 0===i?void 0:i(e,t)},function(){return{ripple:"filled"===b(),unbounded:!1,addClass:at,removeClass:ct,addStyle:lt}}),J(Tt,function(e,t){var i;return null===(i=Ve)||void 0===i?void 0:i(e,t)},function(){return{addClass:at,removeClass:ct}}),J(Tt,function(e,t){var i;return null===(i=re)||void 0===i?void 0:i(e,t)},u);var zt=ge(Tt,2),Gt=function(e){var i=M(function(){return be(me,"helperText$")});!function(e,t){V(t,!0);var i,o=_(t,"use",19,function(){return[]}),n=_(t,"class",3,""),r=_(t,"id",19,function(){return"SMUI-select-helper-text-"+Hn++}),a=_(t,"persistent",3,!1),c=_(t,"validationMsg",3,!1),l=te(t,["$$slots","$$events","$$legacy","use","class","id","persistent","validationMsg","children"]),u=N(void 0),d=s({}),f=s({}),v=N(void 0),g=le("SMUI:select:helper-text:id"),p=le("SMUI:select:helper-text:mount"),b=le("SMUI:select:helper-text:unmount");function w(e){return e in d?d[e]:C().classList.contains(e)}function T(e){d[e]||(d[e]=!0)}function I(e){e in d&&!d[e]||(d[e]=!1)}function S(e){return e in f?void 0!==f[e]?f[e]:null:C().getAttribute(e)}function y(e,t){f[e]!==t&&(f[e]=t)}function x(e){e in f&&null==f[e]||(f[e]=void 0)}function C(){return i}ie(function(){return G(u,new Re({addClass:T,removeClass:I,hasClass:w,getAttr:S,setAttr:y,removeAttr:x,setContent:function(e){G(v,e,!0)}}),!0),g&&g(r()),p&&p(B(u)),B(u).init(),function(){var e;b&&B(u)&&b(B(u)),null===(e=B(u))||void 0===e||e.destroy()}});var O={getElement:C},A=Yn();oe(A,function(e){return m(m({class:e,"aria-hidden":a()?void 0:"true",id:r()},f),l)},[function(){return ne(m(m({"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":c(),"mdc-select-helper-text--validation-msg-persistent":a()},d),{},h({},n(),!0)))}]);var k=z(A),M=function(e){var i=E(),o=U(i);H(o,function(){var e;return null!==(e=t.children)&&void 0!==e?e:Y}),P(e,i)},D=function(e){var t=Ie();Z(function(){return Se(t,B(v))}),P(e,t)};ve(k,function(e){null==B(v)?e(M):e(D,!1)}),q(A,function(e){return i=e},function(){return i}),J(A,function(e,t){var i;return null===(i=re)||void 0===i?void 0:i(e,t)},o),P(e,A),$(O)}(e,ee(function(){return B(i)},{children:function(e,i){var o=E(),n=U(o);H(n,function(){var e;return null!==(e=t.helperText)&&void 0!==e?e:Y}),P(e,o)},$$slots:{default:!0}}))};ve(zt,function(e){t.helperText&&e(Gt)}),Z(function(){return Se($t,i())}),P(e,wt);var _t=$(bt);return r(),_t}function er(e,t){V(t,!0);var i=g(We(),2),o=i[0],n=i[1],r=_(t,"use",19,function(){return[]});_(t,"class",3,"");var a,c=_(t,"value",3,""),l=te(t,["$$slots","$$events","$$legacy","use","class","value","children"]),s=le("SMUI:select:selectedText"),u=le("SMUI:select:value");se("SMUI:list:item:role","option");var d=M(function(){return null!=c()&&""!==c()&&Ne(u,"$selectedValue",o)===c()});function f(){B(d)&&a&&je(s,a.getPrimaryText())}ie(f),F(f);var v={getElement:function(){return a.getElement()}};q(Ee(e,ee({get use(){return r()},get"data-value"(){return c()},get value(){return c()},get selected(){return B(d)}},function(){return l},{children:function(e,i){var o=E(),n=U(o);H(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:Y}),P(e,o)},$$slots:{default:!0}})),function(e){return a=e},function(){return a});var p=$(v);return n(),p}var tr=R('<div class="col-12 px-3 mt-0"><!></div>'),ir=R('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12"><!></div> <div class="col-12"><!></div> <!> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div></div></div>'),or=R("<b>Interactive CYOA Creator Plus</b>"),nr=R('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12 text-right"> <br/></div></div></div>'),rr=R("<!> <!>",1),ar=R("<!> <!>",1),cr=R("<!> <!> <!>",1);function lr(e,t){V(t,!0);var i=_(t,"open",7),o=[{text:"2 per row",value:"col-6"},{text:"3 per row",value:"col-4"},{text:"4 per row",value:"col-3"}],n=[{text:"top-left",value:0},{text:"top-center",value:1},{text:"top-right",value:2},{text:"middle-left",value:3},{text:"center",value:4},{text:"middle-right",value:5},{text:"bottom-left",value:6},{text:"bottom-center",value:7},{text:"bottom-right",value:8}],r=N("General");function a(){yi&&yi.abort(),Ci()}function c(){for(var e=si.allowDeselect,t=0;t<app.backpack.length;t++){var i=app.backpack[t];i.isResultRow&&(i.isInfoRow=!e)}}Ce(e,{surface$style:"width: 600px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return i()},set open(e){i(e)},children:function(e,t){var i=cr(),l=U(i);Oe(l,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:function(e,t){var i=Ie("Settings");P(e,i)},$$slots:{default:!0}});var s=ge(l,2);Ae(s,{children:function(e,t){var i=ar(),l=U(i);Ue(l,{tabs:["General","About"],get active(){return B(r)},set active(e){G(r,e,!0)},tab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y;Le(e,{get tab(){return t()},children:function(e,i){De(e,{children:function(e,i){var o=Ie();Z(function(){return Se(o,t())}),P(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{tab:!0}});var s=ge(l,2),u=function(e){ze(e,{role:"tabpanel",variant:"unelevated",children:function(e,t){Ge(e,{children:function(e,t){var i=ir(),r=z(i),l=z(r);Qn(z(l),{label:"Choices per row",variant:"standard",alwaysFloat:!0,get value(){return app.objectsPerRow},set value(e){app.objectsPerRow=e},helperText:function(e){var t=Ie("Maximum Number of Choices per Row for Screens Between 720px and 1280px.");P(e,t)},children:function(e,t){var i=E(),n=U(i);_e(n,17,function(){return o},function(e){return e.text},function(e,t){er(e,{get value(){return B(t).value},children:function(e,i){var o=Ie();Z(function(){return Se(o,B(t).text)}),P(e,o)},$$slots:{default:!0}})}),P(e,i)},$$slots:{helperText:!0,default:!0}});var s=ge(l,2),u=z(s);ke(u,{label:function(e){var t=Ie("Enable Auto Save");P(e,t)},children:function(e,t){Be(e,{get checked(){return app.buildAutoSaveIsOn||!1},set checked(e){!function(e){app.buildAutoSaveIsOn=e}(e)},onSMUISwitchChange:function(){app.buildAutoSaveIsOn&&a()},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var d=ge(s,2),f=function(e){var t=tr(),i=z(t);Ln(i,{get value(){return app.buildAutoSaveInterval||10},set value(e){!function(e){app.buildAutoSaveInterval=e}(e)},label:"Auto Save Interval",type:"number",suffix:"min",variant:"standard",style:"max-width: 200px",input$class:"text-right",input$min:"1",onchange:function(){app.buildAutoSaveInterval<1&&(app.buildAutoSaveInterval=1),a()}}),P(e,t)};ve(d,function(e){app.buildAutoSaveIsOn&&e(f)});var v=ge(d,2),g=z(v);ke(g,{label:function(e){var t=Ie("Preload Images in Backpack");P(e,t)},children:function(e,t){Be(e,{get checked(){return app.preloadImages||!1},set checked(e){!function(e){app.preloadImages=e}(e)},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var p=ge(v,2),m=z(p);ke(m,{label:function(e){var t=Ie("Allow Deselecting Choices in Backpack");P(e,t)},children:function(e,t){Be(e,{onSMUISwitchChange:c,color:"secondary",class:"switch-scale",get checked(){return si.allowDeselect},set checked(e){si.allowDeselect=e}})},$$slots:{label:!0,default:!0}});var h=ge(p,2),b=z(h);Dn(b,{text:"Enabling this option may cause image downloads to fail or reduce the image resolution.",children:function(e,t){ke(e,{label:function(e){var t=Ie("Download Images as Single File");P(e,t)},children:function(e,t){Be(e,{color:"secondary",class:"switch-scale",get checked(){return si.isSingleFile},set checked(e){si.isSingleFile=e}})},$$slots:{label:!0,default:!0}})},$$slots:{default:!0}});var w=ge(h,2),T=z(w);ke(T,{label:function(e){var t=Ie("Show Background Music Player");P(e,t)},children:function(e,t){Be(e,{get checked(){return app.showMusicPlayer||!1},set checked(e){!function(e){app.showMusicPlayer=e}(e)},color:"secondary",class:"switch-scale",onchange:function(){if(app.showMusicPlayer){var e=x(ii);if(e){var t=0,i=0;0!==ni.bgmTitleInterval&&(clearInterval(ni.bgmTitleInterval),ni.bgmTitleInterval=0),ni.bgmTitleInterval=window.setInterval(function(){if(""!==ni.bgmObjectId){var t=zt.get(ni.bgmObjectId);if(void 0!==t){var i=t.choice;e.getId()===i.bgmId&&""!==e.getTitle()&&(ni.bgmTitle=e.getTitle(),ni.curBgmLength=e.getDuration(),clearInterval(ni.bgmTitleInterval),ni.bgmTitleInterval=0)}}},1e3),0!==ni.bgmPlayInterval&&(clearInterval(ni.bgmPlayInterval),ni.bgmPlayInterval=0),ni.bgmPlayInterval=window.setInterval(function(){if(!ni.isSeeking&&e.isPlaying()){var o=Math.floor(e.getCurrentTime());o!==ni.curBgmTime?t!==o?ni.curBgmTime=o:(++i>ni.curBgmLength&&(i=1),ni.curBgmTime=i):(t=o,i=o+1,ni.curBgmTime=i)}},1e3)}}else ni.bgmIsPlaying&&(0!==ni.bgmTitleInterval&&(clearInterval(ni.bgmTitleInterval),ni.bgmTitleInterval=0),0!==ni.bgmPlayInterval&&(clearInterval(ni.bgmPlayInterval),ni.bgmPlayInterval=0))}})},$$slots:{label:!0,default:!0}});var I=ge(w,2);Qn(z(I),{label:"Image Cropper Position",variant:"standard",alwaysFloat:!0,get value(){return app.cropperPosition},set value(e){app.cropperPosition=e},helperText:function(e){var t=Ie("Default position of the image cropper");P(e,t)},children:function(e,t){var i=E(),o=U(i);_e(o,17,function(){return n},function(e){return e.text},function(e,t){er(e,{get value(){return B(t).value},children:function(e,i){var o=Ie();Z(function(){return Se(o,B(t).text)}),P(e,o)},$$slots:{default:!0}})}),P(e,i)},$$slots:{helperText:!0,default:!0}});var S=ge(I,2),y=z(S);Ln(y,{get value(){return app.styling.backPackWidth||1200},set value(e){!function(e){app.styling.backPackWidth=e}(e)},label:"Backpack Width",type:"number",suffix:"px",variant:"standard",input$min:"0",onchange:function(){void 0!==app.styling.backPackWidth&&app.styling.backPackWidth<0&&(app.styling.backPackWidth=0)}}),P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},d=function(e){var t=E(),i=U(t),o=function(e){ze(e,{role:"tabpanel",variant:"unelevated",children:function(e,t){var i=rr(),o=U(i);He(o,{class:"text-center",children:function(e,t){var i=or();P(e,i)},$$slots:{default:!0}});var n=ge(o,2);Ge(n,{children:function(e,t){var i=nr(),o=z(i),n=z(o),r=z(n);Z(function(){return Se(r,"v".concat(Ot))}),P(e,i)},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}})};ve(i,function(e){"About"===B(r)&&e(o)},!0),P(e,t)};ve(s,function(e){"General"===B(r)?e(u):e(d,!1)}),P(e,i)},$$slots:{default:!0}});var u=ge(s,2);Fe(u,{children:function(e,t){Me(e,{action:"close",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Close");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}}),$()}var sr=R('<div><span class="d-flex text-prewrap align-items-center"><!> <!> <span translate="no"> </span> <!> <!></span></div>');var ur=R('<div class="col-12"><!></div>'),dr=R('<div class="row pt-4"><div class="col-12"><!></div> <!></div>'),fr=R('<div class="col-12"><!></div>'),vr=R('<div class="container-fluid"><div class="row"><!> <div class="col-6"><!></div> <div class="col-6"><!></div></div></div>'),gr=R("<!> <!> <!>",1);function pr(e,t){V(t,!0);var i=_(t,"open",7),o=_(t,"title",3,""),n=_(t,"defaultRow",3,5),r=_(t,"textLabel",3,""),a=N(s(t.isWord&&t.prevText?t.prevText:""));var c=M(function(){return t.isForced?"":"close"}),l=M(function(){return t.isForced?"":"close"});Ce(e,{surface$style:"width: 400px; max-width: calc(100vw - 32px);",onSMUIDialogClosed:function(e){t.isWord?t.closeHandler(e,B(a)):t.closeHandler(e),t.onclose()},get scrimClickAction(){return B(c)},get escapeKeyAction(){return B(l)},get open(){return i()},set open(e){i(e)},children:function(e,i){var c=gr(),l=U(c);Oe(l,{class:"px-3 pb-0 toolbar toolbar__dialog",children:function(e,t){var i=E(),n=U(i);L(n,o),P(e,i)},$$slots:{default:!0}});var s=ge(l,2);Ae(s,{children:function(e,i){var o=dr(),c=z(o),l=z(c);L(l,function(){return t.context});var s=ge(c,2),u=function(e){var t=ur(),i=z(t),o=function(e){Ln(e,{get label(){return r()},variant:"filled",get value(){return B(a)},set value(e){G(a,e,!0)}})},c=function(e){Ln(e,{textarea:!0,get label(){return r()},variant:"filled",get input$rows(){return n()},get value(){return B(a)},set value(e){G(a,e,!0)}})};ve(i,function(e){1===n()?e(o):e(c,!1)}),P(e,t)};ve(s,function(e){t.isWord&&e(u)}),P(e,o)},$$slots:{default:!0}});var u=ge(s,2);Fe(u,{children:function(e,i){var o=vr(),n=z(o),r=z(n),a=function(e){var t=fr(),i=z(t);Me(i,{action:"deselect",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Deselect");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),P(e,t)};ve(r,function(e){t.isDeselect&&e(a)});var c=ge(r,2),l=z(c);Me(l,{action:"close",get disabled(){return t.isForced},children:function(e,t){De(e,{children:function(e,t){var i=Ie("Cancel");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var s=ge(c,2),u=z(s);Me(u,{action:"accept",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("OK");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),P(e,o)},$$slots:{default:!0}}),P(e,c)},$$slots:{default:!0}}),$()}var mr=R('<i class="mdi mdi-play"></i>'),hr=R('<i class="mdi mdi-clipboard-outline"></i>'),br=R('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-10 col-8"><div class="col-12 pt-1"><div> </div> <div> </div></div></div> <div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div></div>'),wr=R('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-12" style="height: 48px">Empty</div></div>'),Tr=R('<i class="mdi mdi-alpha-a-box-outline"></i>'),Ir=R('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12 pt-1"><div> </div> <div> </div></div></div></div>'),Sr=R('<i class="mdi mdi-play"></i>'),yr=R('<i class="mdi mdi-trash-can"></i>'),xr=R('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-10 col-8"><div class="col-12 pt-1"><div> </div> <div> </div></div></div> <div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div></div>'),Cr=R('<i class="mdi mdi-content-save"></i>'),Or=R('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12"><!></div></div></div>'),Ar=R("<!> <!>",1),kr=R('<i class="mdi mdi-menu-left"></i>'),Br=R('<i class="mdi mdi-menu-right"></i>'),Mr=R('<div class="container-fluid pb-2 mb-2" style="border: 1px solid"><!></div> <div class="row gy-2"><div class="col pb-2"><!></div> <div class="col pb-2"><div class="d-row align-items-center justify-end"><!> <span class="list-text px-2"> </span> <!></div></div></div> <div class="row gy-2"><div class="col-12"><!></div></div>',1),Dr=R("<!> <!> <!>",1),Fr=R("<!> <!>",1);function Rr(e,t){V(t,!0);var i=_(t,"open",7),o={action:function(){},title:"Warning",context:""},n=N("none"),r=N(1),a=M(function(){return 9*(B(r)-1)}),c=M(function(){return Math.min(B(a)+9-1,99)}),s=M(function(){return Array.from({length:B(c)-B(a)+1},function(e,t){return di[B(a)+t]})}),u=M(function(){return Array.from({length:B(c)-B(a)+1},function(e,t){return fi[B(a)+t]})}),d=N(!1),v=M(function(){return 9*(B(r)-1)});function g(){return g=f(l().m(function e(t){var i;return l().w(function(e){for(;;)switch(e.n){case 0:return i="".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(t),e.n=1,Bi(i,"buildStore");case 1:Po(e.v.app);case 2:return e.a(2)}},e)})),g.apply(this,arguments)}function p(){return p=f(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return t="".concat(location.pathname.replace(/\/index\.html$/,"/"),"autoSave"),e.n=1,Bi(t,"buildStore");case 1:Po(e.v.app);case 2:return e.a(2)}},e)})),p.apply(this,arguments)}function m(){return m=f(l().m(function e(t){var i,o;return l().w(function(e){for(;;)switch(e.n){case 0:return i=B(u)[t].name,e.n=1,Bi(i,"buildStore",!0);case 1:o=e.v,Po(Array.isArray(o.value)?o.value.join(","):o.value);case 2:return e.a(2)}},e)})),m.apply(this,arguments)}function h(){return h=f(l().m(function e(t){var i,o,n;return l().w(function(e){for(;;)switch(e.n){case 0:return i=B(u)[t].name,e.n=1,Bi(i,"buildStore",!0);case 1:o=e.v,n=Array.isArray(o.value)?o.value.join(","):o.value,navigator.clipboard.writeText(n).then(function(){li.labelText="Build code copied to clipboard.",li.isOpen=!0}).catch(function(e){li.labelText="Failed to copy build code to clipboard.",li.isOpen=!0,console.error(e)});case 2:return e.a(2)}},e)})),h.apply(this,arguments)}function b(e){var t="".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(e),i=navigator.language,o=new Date,n=new Intl.DateTimeFormat(i,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(o);!function(e,t,i,o,n){Ai.apply(this,arguments)}({stored:!0,name:di[e].name,time:n,app:Fi()},t,e,"buildStore",!0)}function w(e){!function(e,t,i,o){ki.apply(this,arguments)}("".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(e),e,"buildStore",!0)}var T=Fr(),I=U(T);Ce(I,{surface$style:"width: 700px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},id:"dialog",get open(){return i()},set open(e){i(e)},children:function(e,t){var i=Dr(),a=U(i);Oe(a,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:function(e,t){var i=Ie("Save/Load Build");P(e,i)},$$slots:{default:!0}});var c=ge(a,2);Ae(c,{class:"pt-3",children:function(e,t){var i=Mr(),a=U(i),c=z(a),l=function(e){var t=E(),i=U(t);_e(i,17,function(){return B(u)},Ze,function(e,t,i){var r=E(),a=U(r),c=function(e){var r=br(),a=z(r),c=z(a);Je(c,{onclickcapture:function(){o.action=function(){return function(e){return m.apply(this,arguments)}(B(v)+i)},o.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",G(n,"dlgCommon")},children:function(e,t){var i=mr();P(e,i)},$$slots:{default:!0}});var l=ge(a,2),s=z(l),u=z(s),d=z(u),f=ge(u,2),g=z(f),p=ge(l,2),b=z(p);Je(b,{onclickcapture:function(){return function(e){return h.apply(this,arguments)}(B(v)+i)},children:function(e,t){var i=hr();P(e,i)},$$slots:{default:!0}}),Z(function(){Se(d,B(t).name),Se(g,B(t).time)}),P(e,r)},l=function(e){var t=wr();P(e,t)};ve(a,function(e){B(t).stored?e(c):e(l,!1)}),P(e,r)}),P(e,t)},f=function(e){var t=Ar(),i=U(t),r=function(e){var t=Ir(),i=z(t),r=z(i);Je(r,{onclickcapture:function(){o.action=function(){return function(){return p.apply(this,arguments)}()},o.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",G(n,"dlgCommon")},children:function(e,t){var i=Tr();P(e,i)},$$slots:{default:!0}});var a=ge(i,2),c=z(a),l=z(c),s=z(l),u=ge(l,2),d=z(u);Z(function(){Se(s,ui.name),Se(d,ui.time)}),P(e,t)};ve(i,function(e){ui.stored&&e(r)});var a=ge(i,2);_e(a,17,function(){return B(s)},Ze,function(e,t,i){var r=E(),a=U(r),c=function(e){var r=xr(),a=z(r),c=z(a);Je(c,{onclickcapture:function(){o.action=function(){return function(e){return g.apply(this,arguments)}(B(v)+i)},o.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",G(n,"dlgCommon")},children:function(e,t){var i=Sr();P(e,i)},$$slots:{default:!0}});var l=ge(a,2),s=z(l),u=z(s),d=z(u),f=ge(u,2),p=z(f),m=ge(l,2),h=z(m);Je(h,{onclickcapture:function(){o.action=function(){return w(B(v)+i)},o.context="Are you sure you want to delete this build?<br>This action cannot be undone.",G(n,"dlgCommon")},children:function(e,t){var i=yr();P(e,i)},$$slots:{default:!0}}),Z(function(){Se(d,B(t).name),Se(p,B(t).time)}),P(e,r)},l=function(e){var o=Or(),n=z(o),r=z(n);Je(r,{onclickcapture:function(){return b(B(v)+i)},children:function(e,t){var i=Cr();P(e,i)},$$slots:{default:!0}});var a=ge(n,2),c=z(a);Ln(z(c),{onclickcapture:function(){return B(t).name=""},onblur:function(){""===B(t).name&&(B(t).name="Slot ".concat(B(v)+i+1))},input$onkeydown:function(e){"Enter"===e.key&&b(B(v)+i)},class:"textbox-mini",variant:"standard",get value(){return B(t).name},set value(e){B(t).name=e}}),P(e,o)};ve(a,function(e){B(t).stored?e(c):e(l,!1)}),P(e,r)}),P(e,t)};ve(c,function(e){B(d)?e(l):e(f,!1)});var T=ge(a,2),I=z(T),S=z(I);ke(S,{style:"height: 48px",label:function(e){var t=Ie("Load from Legacy Version");P(e,t)},children:function(e,t){Be(e,{onSMUISwitchChange:function(){return G(r,1)},color:"secondary",class:"switch-scale",get checked(){return B(d)},set checked(e){G(d,e,!0)}})},$$slots:{label:!0,default:!0}});var y=ge(I,2),x=z(y),C=z(x);Je(C,{onclickcapture:function(){return B(r)>1?G(r,B(r)-1):G(r,11)},children:function(e,t){var i=kr();P(e,i)},$$slots:{default:!0}});var O=ge(C,2),A=z(O),k=ge(O,2);Je(k,{onclickcapture:function(){return B(r)<11?G(r,B(r)+1):G(r,1)},children:function(e,t){var i=Br();P(e,i)},$$slots:{default:!0}});var M=ge(T,2),D=z(M),F=z(D);Me(F,{onclickcapture:function(){return G(n,"appBuildForm")},variant:"raised",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Open Build Form");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),Z(function(){var e;return Se(A,"Page ".concat(null!==(e=B(r))&&void 0!==e?e:""))}),P(e,i)},$$slots:{default:!0}});var l=ge(c,2);Fe(l,{children:function(e,t){Me(e,{action:"close",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Close");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}});var S=ge(I,2),y=function(e){var t=M(function(){return"dlgCommon"===B(n)});pr(e,{get open(){return B(t)},onclose:function(){return G(n,"none")},get title(){return o.title},get context(){return o.context},closeHandler:function(e){"accept"===e.detail.action&&o.action()}})},x=function(e){var t=E(),i=U(t),o=function(e){var t=M(function(){return"appBuildForm"===B(n)});_n(e,{get open(){return B(t)},onclose:function(){return G(n,"none")}})};ve(i,function(e){"appBuildForm"===B(n)&&e(o)},!0),P(e,t)};ve(S,function(e){"dlgCommon"===B(n)?e(y):e(x,!1)}),P(e,T),$()}var jr=R("<i><!></i>");var qr=0,Pr=function(e,t,i){t()||G(i,!0)},$r=function(e,t){G(t,-1)},Vr=R("<i></i>"),Nr=R("<!> <!>",1),Wr=R("<!> <!>",1),Er=R('<div style="max-height: 288px; overflow-y: auto;"><!></div>'),Ur=R('<div><div role="combobox" tabindex="0"><!></div> <!></div>');function Lr(e,t){var i;V(t,!0);var o,n,r=_(t,"use",19,function(){return[]}),a=_(t,"class",3,""),c=_(t,"options",19,function(){return[]}),u=_(t,"value",15),d=_(t,"getOptionDisabled",3,function(){return!1}),v=_(t,"getOptionLabel",3,function(e){return null==e?"":"".concat(e)}),p=_(t,"text",31,function(){return s(v()(u()))}),b=_(t,"disabled",3,!1),w=_(t,"toggle",3,!1),T=_(t,"combobox",3,!1),I=_(t,"clearOnBlur",19,function(){return!T()}),S=_(t,"selectOnExactMatch",3,!0),y=_(t,"showMenuWithNoInput",3,!0),x=_(t,"noMatchesActionDisabled",3,!0),C=_(t,"search",3,function(){var e=f(l().m(function e(t){var i,o,n,r;return l().w(function(e){for(;;)switch(e.n){case 0:if(i=t.toLowerCase(),"function"!=typeof c()){e.n=2;break}return e.n=1,c()();case 1:r=e.v,e.n=3;break;case 2:r=c()||[];case 3:if(o=r,""!==i){e.n=4;break}return e.a(2,o);case 4:return(n=o.filter(function(e){return v()(e).toLowerCase().includes(i)})).sort(function(e,t){var o=v()(e).toLowerCase(),n=v()(t).toLowerCase();return o.startsWith(i)&&!n.startsWith(i)?-1:n.startsWith(i)&&!o.startsWith(i)?1:0}),e.a(2,n)}},e)}));return function(t){return e.apply(this,arguments)}}()),A=_(t,"menu$class",3,""),k=_(t,"menu$anchor",3,!1),F=_(t,"menu$anchorCorner",3,"BOTTOM_START"),R=_(t,"multiple",3,!1),j=_(t,"isSearch",3,!1),W=te(t,["$$slots","$$events","$$legacy","use","class","options","value","getOptionDisabled","getOptionLabel","text","label","disabled","toggle","combobox","clearOnBlur","selectOnExactMatch","showMenuWithNoInput","noMatchesActionDisabled","search","menu$class","menu$anchor","menu$anchorCorner","children","loading","error","match","noMatches","multiple","multipleValue","parentElement","onfocuslost","isSearch"]),L=N(s(document.createElement("div"))),Q=N(0),ae=N(!1),ce=N(!1),ue=N(s([])),fe=N(-1),me=N(void 0),he=null!==(i=W.menu$id)&&void 0!==i?i:"SMUI-autocomplete-"+qr+++"-menu",we=N(!1),Te=N(24),xe=N(!1),Ce=N(s([])),Oe=M(function(){return B(ce)&&(""!==p()||y())&&(B(Q)>0||!T()&&!(1===B(ue).length&&B(ue)[0]===u())||w()||T()&&!!B(ue).length&&!(1===B(ue).length&&B(ue)[0]===u()))}),Ae=p();D(function(){Ae!==p()&&B(ce)&&(De(),Ae=p())});var ke=!1;D(function(){c()&&!ke&&(ke=!0,De().then(function(){ke=!1}))});var Be=u();D(function(){Be!==u()?(p(v()(u())),Be=u()):T()&&u()!==p()&&(u(p()),Be=u())});var Me=void 0;function De(){return Fe.apply(this,arguments)}function Fe(){return(Fe=f(l().m(function e(){var t,i;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return B(ce)&&!ze()&&Ge(),G(Q,B(Q)+1),G(ae,!1),e.p=1,e.n=2,C()(p());case 2:!1!==(t=e.v)&&(G(ue,t,!0),S()&&null!=(i=B(ue).find(function(e){return v()(e)===p()}))&&v()(u())!==p()&&Re(i)),e.n=4;break;case 3:e.p=3,e.v,G(ae,!0);case 4:G(Q,B(Q)-1);case 5:return e.a(2)}},e,null,[[1,3]])}))).apply(this,arguments)}function Re(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!ye(Ye(),"SMUIAutocompleteSelected",e,{bubbles:!0,cancelable:!0}).defaultPrevented)return j()?(p(v()(e)),De(),void O().then(function(){G(Ce,B(ue),!0),He()})):void(R()&&t.multipleValue?(t.multipleValue.push(e),i&&p("")):(i&&p(v()(e)),u(e),i||(Be=e),O().then(function(){return He()})))}function je(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!ye(Ye(),"SMUIAutocompleteDeselected",e,{bubbles:!0,cancelable:!0}).defaultPrevented)if(R()&&t.multipleValue){var o=t.multipleValue.indexOf(e);t.multipleValue.splice(o,1)}else i&&p(""),u(void 0),i||(Be=void 0),G(Te,24)}function qe(){return n?n.getOrderedList().filter(function(e){return!e.disabled}):[]}function Ue(e){return Le.apply(this,arguments)}function Le(){return Le=f(l().m(function e(i){var o;return l().w(function(e){for(;;)switch(e.n){case 0:if(document.hasFocus()){e.n=1;break}return ot(window,"focus",function(){var e;null!==(e=Ye())&&void 0!==e&&e.contains(document.activeElement)||Ue(i)},{once:!0}),e.a(2);case 1:if(null===(o=i.currentTarget)||void 0===o||!o.contains(i.relatedTarget)){e.n=2;break}return e.a(2);case 2:B(ce)&&t.onfocuslost&&t.onfocuslost(),G(fe,-1),G(ce,!1),I()&&(null==u()?p(""):""==p()&&je(u()));case 3:return e.a(2)}},e)})),Le.apply(this,arguments)}function ze(){if(o)return document.activeElement===o.querySelector("input.mdc-text-field__input")}function Ge(){if(o){var e=o.querySelector("input.mdc-text-field__input");e&&e.focus()}}function He(){if(o){var e=o.querySelector("input.mdc-text-field__input");e&&e.blur(),B(we)&&G(we,!1)}}function Ye(){return B(L)}function Je(){function e(){for(var e=0;e<B(ue).length;e++){var i=B(ue)[e];B(xe)?t.multipleValue&&t.multipleValue.includes(i)&&je(i):t.multipleValue&&!t.multipleValue.includes(i)&&Re(i)}G(xe,!B(xe))}app.checkSelectAll?(ri.currentDialog="dlgCommon",ri.context="Are you sure you want to ".concat(B(xe)?"deselect":"select"," all items?"),ri.title="",ri.cFunc=function(t){"accept"===t.detail.action&&e()}):e()}function Ke(e){var t=e.target;t.scrollTop+t.clientHeight>=t.scrollHeight-48&&G(Te,Math.min(B(Te)+12,B(ue).length),!0)}D(function(){if(Me!==B(fe)){var e=qe();-1===B(fe)?G(me,void 0):(G(me,e[B(fe)],!0),B(me)&&(B(me).activated=!0,t=B(me).element,(i=t.getBoundingClientRect()).top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)||B(me).element.scrollIntoView({block:"end",inline:"nearest"}))),e.forEach(function(e,t){t!==B(fe)&&(e.activated=!1)}),n&&n.getOrderedList().forEach(function(e){e.tabindex=-1}),Me=B(fe)}var t,i}),se("SMUI:list:mount",function(e){n||(n=e)});var nt={get sResult(){return B(Ce)},set sResult(e){G(Ce,s(e))},focus:Ge,blur:He,getElement:Ye,isExpanded:function(){return B(Oe)}},rt=Ur(),at=function(e){var i;b()||Ue(e),null===(i=t.onfocusout)||void 0===i||i.call(t,e)};oe(rt,function(e,t){return m(m({class:e},t),{},{onfocusout:at})},[function(){return ne(h({"smui-autocomplete":!0},a(),!0))},function(){return pe(W,["menu$","textfield$","list$"])}]);var ct=z(rt);ct.__focusin=[Pr,b,ce],ct.__input=[$r,fe];var lt=z(ct),st=function(e){var i=E(),o=U(i);H(o,function(){var e;return null!==(e=t.children)&&void 0!==e?e:Y}),P(e,i)},ut=function(e){var i=E(),o=U(i),n=function(e){var i=M(function(){return be(W,"textfield$")});Ln(e,ee({get label(){return t.label},get disabled(){return b()}},function(){return B(i)},{onclick:function(e){var t=e.target;t&&t.classList.contains("mdc-text-field__input")&&G(we,!B(we))},input$enterkeyhint:"search",get value(){return p()},set value(e){p(e)},leadingIcon:function(e){!function(e,t){V(t,!0);var i,o=g(We(),2),n=o[0],r=o[1],a=_(t,"use",19,function(){return[]}),c=_(t,"class",3,""),l=_(t,"tabindex",19,function(){return"button"===t.role?0:-1}),u=_(t,"disabled",3,!1),d=te(t,["$$slots","$$events","$$legacy","use","class","role","tabindex","disabled","children"]),f=N(void 0),v=new de,p=s({}),b=le("SMUI:textfield:icon:leading"),w=Ne(b,"$leadingStore",n),T=N(void 0),I=M(function(){return{role:t.role,tabindex:l()}}),S=le("SMUI:textfield:leading-icon:mount"),y=le("SMUI:textfield:leading-icon:unmount"),x=le("SMUI:textfield:trailing-icon:mount"),C=le("SMUI:textfield:trailing-icon:unmount");function O(e){var t;return e in p?null!==(t=p[e])&&void 0!==t?t:null:D().getAttribute(e)}function A(e,t){p[e]!==t&&(p[e]=t)}function k(e){e in p&&null==p[e]||(p[e]=void 0)}function D(){return i}ie(function(){return G(f,new Xe({getAttr:O,setAttr:A,removeAttr:k,setContent:function(e){G(T,e,!0)},registerInteractionHandler:function(e,t){return v.on(D(),e,t)},deregisterInteractionHandler:function(e,t){return v.off(D(),e,t)},notifyIconAction:function(){return ye(D(),"SMUITextFieldIcon")}}),!0),w?S&&S(B(f)):x&&x(B(f)),B(f).init(),function(){var e;B(f)&&(w?y&&y(B(f)):C&&C(B(f))),null===(e=B(f))||void 0===e||e.destroy(),v.clear()}});var F={getElement:D},R=jr();oe(R,function(e){return m(m(m({class:e,"aria-hidden":-1===l()?"true":"false","aria-disabled":"button"===t.role?u()?"true":"false":void 0},B(I)),p),d)},[function(){return ne(h(h(h(h({},c(),!0),"mdc-text-field__icon",!0),"mdc-text-field__icon--leading",w),"mdc-text-field__icon--trailing",!w))}]);var j=z(R),W=function(e){var i=E(),o=U(i);H(o,function(){var e;return null!==(e=t.children)&&void 0!==e?e:Y}),P(e,i)},L=function(e){var t=Ie();Z(function(){return Se(t,B(T))}),P(e,t)};ve(j,function(e){null==B(T)?e(W):e(L,!1)}),q(R,function(e){return i=e},function(){return i}),J(R,function(e,t){var i;return null===(i=re)||void 0===i?void 0:i(e,t)},a),P(e,R);var X=$(F);r()}(e,{class:"mdi mdi-magnify"})},$$slots:{leadingIcon:!0}}))},r=function(e){var i=M(function(){return be(W,"textfield$")});Ln(e,ee({get label(){return t.label},get disabled(){return b()}},function(){return B(i)},{onclick:function(e){var t=e.target;t&&t.classList.contains("mdc-text-field__input")&&G(we,!B(we))},get value(){return p()},set value(e){p(e)}}))};ve(o,function(e){j()?e(n):e(r,!1)}),P(e,i)};ve(lt,function(e){t.children?e(st):e(ut,!1)}),q(ct,function(e){return o=e},function(){return o});var dt=ge(ct,2),ft=M(function(){return ne(h(h({},A(),!0),"smui-autocomplete__menu",!0))}),vt=M(function(){return be(W,"menu$")});return Pe(dt,ee({get class(){return B(ft)},get id(){return he},managed:!0,neverRestoreFocus:!0,get open(){return B(Oe)},get anchor(){return k()},get anchorCorner(){return F()}},function(){return B(vt)},{style:"overflow-y: hidden",get anchorElement(){return B(L)},set anchorElement(e){G(L,e,!0)},children:function(e,i){var o=Er(),n=z(o),r=M(function(){return be(W,"list$")});$e(n,ee(function(){return B(r)},{children:function(e,i){var o=E(),n=U(o),r=function(e){Ee(e,{disabled:!0,children:function(e,i){var o=E(),n=U(o),r=function(e){var i=E(),o=U(i);H(o,function(){return t.loading}),P(e,i)},a=function(e){Qe(e,{children:function(e,t){var i=Ie("Loading...");P(e,i)},$$slots:{default:!0}})};ve(n,function(e){t.loading?e(r):e(a,!1)}),P(e,o)},$$slots:{default:!0}})},a=function(e){var i=E(),o=U(i),n=function(e){Ee(e,{disabled:!0,children:function(e,i){var o=E(),n=U(o),r=function(e){var i=E(),o=U(i);H(o,function(){return t.error}),P(e,i)},a=function(e){Qe(e,{children:function(e,t){var i=Ie("Error while fetching suggestions.");P(e,i)},$$slots:{default:!0}})};ve(n,function(e){t.error?e(r):e(a,!1)}),P(e,o)},$$slots:{default:!0}})},r=function(e){var i=Wr(),o=U(i),n=function(e){Ee(e,{onSMUIAction:Je,onfocusin:function(e){e.preventDefault(),Ge()},class:"b-line",children:function(e,t){Qe(e,{children:function(e,t){var i=Ie();Z(function(){return Se(i,B(xe)?"Deselect All":"Select All")}),P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(o,function(e){R()&&B(ue).length>0&&e(n)});var r=ge(o,2);_e(r,17,function(){return B(ue).slice(0,B(Te))},Ze,function(e,i){var o=M(function(){return d()(B(i))}),n=M(function(){return B(i)===u()});Ee(e,{get disabled(){return B(o)},get selected(){return B(n)},onSMUIAction:function(){return w()?(e=B(i),void(R()?t.multipleValue&&t.multipleValue.includes(e)?je(e):Re(e):e===u()?je(e):Re(e))):Re(B(i));var e},onfocusin:function(e){e.preventDefault(),Ge()},children:function(e,o){var n=E(),r=U(n),a=function(e){var o=E(),n=U(o);H(n,function(){return t.match},function(){return B(i)}),P(e,o)},c=function(e){var o=Nr(),n=U(o),r=function(e){var o=Vr();Z(function(e){return X(o,1,e)},[function(){return K(t.multipleValue&&t.multipleValue.includes(B(i))?"mdi mdi-checkbox-outline button-icons":"mdi mdi-checkbox-blank-outline button-icons")}]),P(e,o)};ve(n,function(e){R()&&e(r)});var a=ge(n,2);Qe(a,{children:function(e,t){var o=Ie();Z(function(e){return Se(o,e)},[function(){return v()(B(i))}]),P(e,o)},$$slots:{default:!0}}),P(e,o)};ve(r,function(e){t.match?e(a):e(c,!1)}),P(e,n)},$$slots:{default:!0}})},function(e){Ee(e,{get disabled(){return x()},onSMUIAction:function(e){return ye(Ye(),"SMUIAutocompleteNoMatchesAction",e)},children:function(e,i){var o=E(),n=U(o),r=function(e){var i=E(),o=U(i);H(o,function(){return t.noMatches}),P(e,i)},a=function(e){Qe(e,{children:function(e,t){var i=Ie("No matches found.");P(e,i)},$$slots:{default:!0}})};ve(n,function(e){t.noMatches?e(r):e(a,!1)}),P(e,o)},$$slots:{default:!0}})}),P(e,i)};ve(o,function(e){B(ae)?e(n):e(r,!1)},!0),P(e,i)};ve(n,function(e){B(Q)?e(r):e(a,!1)}),P(e,o)},$$slots:{default:!0}})),et("scroll",o,Ke),P(e,o)},$$slots:{default:!0}})),q(rt,function(e){return G(L,e)},function(){return B(L)}),J(rt,function(e){var t;return null===(t=Ve)||void 0===t?void 0:t(e)}),J(rt,function(e,t){var i;return null===(i=re)||void 0===i?void 0:i(e,t)},r),Z(function(){tt(ct,"aria-controls",he),tt(ct,"aria-expanded",B(Oe)?"true":"false")}),et("keydown",ct,function(e){if(!T()||B(ue).length)if("ArrowDown"===e.key)e.preventDefault(),-1===B(fe)||B(fe)===qe().length-1?G(fe,0):it(fe);else if("ArrowUp"===e.key)e.preventDefault(),-1===B(fe)||0===B(fe)?G(fe,qe().length-1):it(fe,-1);else if("Enter"===e.key){e.preventDefault();var t=qe();B(me)?(t[B(fe)]&&t[B(fe)].action(e),G(fe,-1)):""!=p()&&(De(),j()&&O().then(function(){G(Ce,B(ue),!0),He()}))}else"Escape"===e.key&&(e.preventDefault(),He())},!0),P(e,rt),$(nt)}Ke(["focusin","input"]);var zr=R('<div class="col req text-prewrap"><!></div>'),Gr=R('<div class="col req text-prewrap"><!></div>');function _r(e,t){V(t,!0);var i=M(function(){var e=_t.get(t.required.reqId);return void 0!==e&&void 0!==app.globalRequirements?e.requireds:[]}),o=M(function(){var e=!1;return t.required.showRequired&&(e=!0,t.required.hideRequired2&&(e=io(t.required.requireds)),t.required.hideRequired&&(e=t.required.requireds.length>0?io(t.required.requireds)&&!to(t.required):!to(t.required))),e}),n=M(function(){return Ji(qi(t.required))}),r=E(),a=U(r),c=function(e){var o=E(),r=U(o),a=function(e){var o=E(),n=U(o);_e(n,17,function(){return B(i)},Ze,function(e,i){var o=E(),n=U(o),r=function(e){var o=E(),n=U(o);j(n,function(){return Ji(qi(B(i)))},function(e){var o=zr(),n=z(o);L(n,function(){return nt.sanitize(Ji(qi(B(i))),ti)}),Z(function(){return Ye(o,t.scoreText)}),P(e,o)}),P(e,o)};ve(n,function(e){B(i).showRequired&&e(r)}),P(e,o)}),P(e,o)},c=function(e){var i=E(),o=U(i);j(o,function(){return B(n)},function(e){var i=Gr(),o=z(i);L(o,function(){return nt.sanitize(B(n),ti)}),Z(function(){return Ye(i,t.scoreText)}),P(e,i)}),P(e,i)};ve(r,function(e){"gid"===t.required.type?e(a):e(c,!1)}),P(e,o)};ve(a,function(e){B(o)&&e(c)}),P(e,r),$()}var Hr=R('<img class="me-1" alt=""/>'),Yr=R('<img class="mx-1" alt=""/>'),Jr=R('<img class="mx-1" alt=""/>'),Zr=R('<img class="ms-1" alt=""/>'),Xr=R("<!> <!><!> <!><!> <!><!>",1),Kr=R('<p class="m-0 d-flex text-prewrap align-items-center"><!></p>'),Qr=R('<div class="row m-0"><div class="col-12 p-0 m-0 d-flex align-items-center justify-center"><!></div></div>');function ea(e,t){V(t,!0);var i=M(function(){return t.addon?t.addon:t.choice}),o=M(function(){return Zi("privateTextIsOn",t.row,t.choice)}),n=M(function(){return Zi("privateFilterIsOn",t.row,t.choice)}),r=M(function(){return Ut.get(t.score.id)}),a=M(function(){return io(B(i).requireds)}),l=M(function(){var e={isWithinCount:!1,isSimple:!1};if(!t.score.discountIsOn||!t.score.discountedFrom||0===t.score.discountedFrom.length)return e;for(var i=0;i<t.score.discountedFrom.length;i++){var o=zt.get(t.score.discountedFrom[i]);if(void 0!==o){var n=o.choice;if(!n.useDiscountCount||void 0===n.discountCount||!n.appliedDisChoices){e.isSimple=!0;break}if((n.isSelectableMultiple&&n.isMultipleUseVariable?n.discountCount*n.multipleUseVariable:n.discountCount)>n.appliedDisChoices.length){e.isWithinCount=!0;break}}}return e}),s=M(function(){var e=[];if(t.score.discountIsOn&&t.score.discountShow&&t.score.discountAfterText)if(t.score.appliedDiscount)t.score.replaceText||e.push("".concat(t.score.afterText)),e.push("".concat(t.score.discountAfterText));else if(B(l).isWithinCount)t.score.replaceText||e.push("".concat(t.score.afterText)),e.push("".concat(t.score.discountAfterText));else if(B(l).isSimple)t.score.replaceText||e.push("".concat(t.score.afterText)),e.push("".concat(t.score.discountAfterText));else if(void 0!==t.score.tmpDiscount){for(var i=t.score.value,o="",n=!1,r=0;r<t.score.tmpDiscount.length;r++)t.score.tmpDiscount[r].showDiscount&&i>t.score.tmpDiscount[r].discountedValue&&(i=t.score.tmpDiscount[r].discountedValue,o=t.score.tmpDiscount[r].beforeText||"",n=t.score.tmpDiscount[r].replaceText||!1);n||e.push("".concat(t.score.afterText)),e.push("".concat(o))}else e.push("".concat(t.score.afterText));else e.push("".concat(t.score.afterText));return e.join(" ")}),u=M(function(){var e=[];if(t.score.discountIsOn&&t.score.discountShow&&t.score.discountBeforeText)if(t.score.appliedDiscount)t.score.replaceText||e.push("".concat(t.score.beforeText)),e.push("".concat(t.score.discountBeforeText));else if(B(l).isWithinCount)t.score.replaceText||e.push("".concat(t.score.beforeText)),e.push("".concat(t.score.discountBeforeText));else if(B(l).isSimple)t.score.replaceText||e.push("".concat(t.score.beforeText)),e.push("".concat(t.score.discountBeforeText));else if(void 0!==t.score.tmpDiscount){for(var i=t.score.value,o="",n=!1,r=0;r<t.score.tmpDiscount.length;r++)t.score.tmpDiscount[r].showDiscount&&i>t.score.tmpDiscount[r].discountedValue&&(i=t.score.tmpDiscount[r].discountedValue,o=t.score.tmpDiscount[r].beforeText||"",n=t.score.tmpDiscount[r].replaceText||!1);n||e.push("".concat(t.score.beforeText)),e.push("".concat(o))}else e.push("".concat(t.score.beforeText));else e.push("".concat(t.score.beforeText));return e.join(" ")}),d=M(function(){var e=t.score.value;if(!t.score.hideValue){var o,n;if(t.score.isRandom&&!t.score.setValue)return B(f);if(!t.score.setValue&&t.score.useExpression&&t.score.expValue)if(void 0!==Ut.get(t.score.id))try{var a=t.score.expValue.replace(/\{([^{}]+)\}/g,function(e,t){var i=Ut.get(t);if(void 0!==i)return"".concat(i.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});e=C(a)}catch(c){console.error(c)}if(t.score.discountShow)if(t.score.appliedDiscount){if(t.score.replaceText&&t.score.hideDisValue)return"";void 0!==t.score.discountScore&&(e=t.score.discountScore)}else if(B(l).isWithinCount||B(l).isSimple){if(t.score.replaceText&&t.score.hideDisValue)return"";if(t.score.useExpression&&t.score.expValue){if(t.score.discountedFrom&&t.score.discountedFrom.length>0)for(var s=0;s<t.score.discountedFrom.length;s++){var u=zt.get(t.score.discountedFrom[s]);if(void 0!==u){var d=u.choice;e=fo(e,d.discountOperator,d.discountValue),d.discountLowLimitIsOn&&void 0!==d.discountLowLimit&&(e=Math.max(e,d.discountLowLimit))}}}else void 0!==t.score.discountScore&&(e=t.score.discountScore)}else if(void 0!==t.score.tmpDiscount){for(var g=!1,p=0;p<t.score.tmpDiscount.length;p++)t.score.tmpDiscount[p].showDiscount&&e>t.score.tmpDiscount[p].discountedValue&&(e=t.score.tmpDiscount[p].discountedValue,g=t.score.tmpDiscount[p].hideValue||!1);if(g)return""}if(e=Math.abs(e),e=null!==(o=B(r))&&void 0!==o&&o.allowFloat?e%1==0?e:parseFloat(e.toFixed(void 0!==B(r).decimalPlaces?B(r).decimalPlaces:2)):Math.floor(e),B(i).isSelectableMultiple&&B(i).isMultipleUseVariable&&t.score.multiplyByTimes&&t.score.displayMulScore&&(e*=B(i).multipleUseVariable+1),null!==(n=B(r))&&void 0!==n&&n.plussOrMinusAdded){var m=B(r).plussOrMinusInverted?B(v)?"-":"+":B(v)?"+":"-";return"".concat(m).concat(e)}return"".concat(e)}return""}),f=M(function(){var e,i,o=0,n=0,a=!1,l=!1;if(t.score.useExpression){if(t.score.expMaxValue)try{var s=t.score.expMaxValue.replace(/\{([^{}]+)\}/g,function(e,t){var i=Ut.get(t);if(void 0!==i)return"".concat(i.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});a=(o=C(s))<0}catch(c){console.error(c)}if(t.score.expMinValue)try{var u=t.score.expMinValue.replace(/\{([^{}]+)\}/g,function(e,t){var i=Ut.get(t);if(void 0!==i)return"".concat(i.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});l=(n=C(u))<0}catch(c){console.error(c)}}else void 0!==t.score.maxValue&&void 0!==t.score.minValue&&(a=t.score.maxValue<0,l=t.score.minValue<0,o=Math.abs(t.score.maxValue),n=Math.abs(t.score.minValue));if(null!==(e=B(r))&&void 0!==e&&e.allowFloat?(o=o%1==0?o:parseFloat(o.toFixed(void 0!==B(r).decimalPlaces?B(r).decimalPlaces:2)),n=n%1==0?n:parseFloat(n.toFixed(void 0!==B(r).decimalPlaces?B(r).decimalPlaces:2))):(o=Math.floor(o),n=Math.floor(n)),null!==(i=B(r))&&void 0!==i&&i.plussOrMinusAdded){var d=B(r).plussOrMinusInverted?a?"-":"+":a?"+":"-",f=B(r).plussOrMinusInverted?l?"-":"+":l?"+":"-";return a?"".concat(d).concat(o," ~ ").concat(f).concat(n):"".concat(f).concat(n," ~ ").concat(d).concat(o)}return a?"".concat(o," ~ ").concat(n):"".concat(n," ~ ").concat(o)}),v=M(function(){return t.score.discountShow?(void 0!==t.score.discountScore&&(t.score.appliedDiscount||B(l).isWithinCount||B(l).isSimple)?t.score.discountScore:t.score.value)<0:t.score.value<0}),g=M(function(){var e,t=[];return t.push("font-family: '".concat(B(o).scoreText,"'; font-size: ").concat(B(o).scoreTextSize,"%; text-align: ").concat(B(o).scoreTextAlign,";")),null!==(e=B(r))&&void 0!==e&&e.pointColorsIsOn?B(v)?t.push("color: ".concat(xn(B(r).positiveColor),";")):t.push("color: ".concat(xn(B(r).negativeColor),";")):t.push("color: ".concat(xn(B(o).scoreTextColor),";")),B(a)?B(i).isActive&&B(n).selScoreTextColorIsOn&&t.push("color: ".concat(xn(B(n).selFilterSTextColor))):B(n).reqScoreTextColorIsOn&&t.push("color: ".concat(xn(B(n).reqFilterSTextColor))),t.join(" ")}),p=M(function(){if(!B(r)||!B(r).iconIsOn)return!1;if(t.score.discountIsOn&&t.score.discountShow)if(t.score.appliedDiscount){if(t.score.replaceText&&t.score.hideDisIcon)return!1}else if(B(l).isWithinCount){if(t.score.replaceText&&t.score.hideDisIcon)return!1}else if(B(l).isSimple){if(t.score.hideDisIcon)return!1}else if(void 0!==t.score.tmpDiscount){for(var e=t.score.value,i=!1,o=0;o<t.score.tmpDiscount.length;o++)t.score.tmpDiscount[o].showDiscount&&e>t.score.tmpDiscount[o].discountedValue&&(e=t.score.tmpDiscount[o].discountedValue,i=t.score.tmpDiscount[o].hideIcon||!1);if(i)return!1}return!0}),m=M(function(){var e;return(null===(e=B(r))||void 0===e?void 0:e.negativeIconIsOn)&&B(v)}),h=M(function(){return!!B(r)&&(B(m)?B(r).useSeperatePosition?!!B(r).negativeImageSidePlacementInChoice:!!B(r).negativeImageSidePlacement:B(r).useSeperatePosition?!!B(r).imageSidePlacementInChoice:!!B(r).imageSidePlacement)}),b=M(function(){return!!B(r)&&(B(m)?B(r).useSeperatePosition?!!B(r).negativeImageOnSideInChoice:!!B(r).negativeImageOnSide:B(r).useSeperatePosition?!!B(r).imageOnSideInChoice:!!B(r).imageOnSide)}),w=M(function(){var e,t;return(B(m)?null===(e=B(r))||void 0===e?void 0:e.negativeImage:null===(t=B(r))||void 0===t?void 0:t.image)||""}),T=M(function(){var e,t;return(B(m)?null===(e=B(r))||void 0===e?void 0:e.negativeIconWidth:null===(t=B(r))||void 0===t?void 0:t.iconWidth)||0}),I=M(function(){var e,t;return(B(m)?null===(e=B(r))||void 0===e?void 0:e.negativeIconHeight:null===(t=B(r))||void 0===t?void 0:t.iconHeight)||0}),S=M(function(){return!B(h)&&!B(b)}),y=M(function(){return!B(h)&&B(b)}),x=M(function(){return B(h)&&!B(b)}),O=M(function(){return B(h)&&B(b)}),A=M(function(){return"".concat(B(u)," ").concat(B(d)," ").concat(B(s))});var k=E(),D=U(k),F=function(e){var t=Qr(),i=z(t),o=z(i);j(o,function(){return B(A)},function(e){var t=Kr(),i=z(t),o=function(e){var t=Xr(),i=U(t),o=function(e){var t=Hr();Z(function(){var e,i;tt(t,"src",B(w)),Ye(t,"width: ".concat(null!==(e=B(T))&&void 0!==e?e:"","px; height: ").concat(null!==(i=B(I))&&void 0!==i?i:"","px;"))}),P(e,t)};ve(i,function(e){B(S)&&e(o)});var n=ge(i,2);L(n,function(){return nt.sanitize(B(u),ti)});var r=ge(n),a=function(e){var t=Yr();Z(function(){var e,i;tt(t,"src",B(w)),Ye(t,"width: ".concat(null!==(e=B(T))&&void 0!==e?e:"","px; height: ").concat(null!==(i=B(I))&&void 0!==i?i:"","px;"))}),P(e,t)};ve(r,function(e){B(y)&&e(a)});var c=ge(r,2);L(c,function(){return nt.sanitize(B(d),ti)});var l=ge(c),f=function(e){var t=Jr();Z(function(){var e,i;tt(t,"src",B(w)),Ye(t,"width: ".concat(null!==(e=B(T))&&void 0!==e?e:"","px; height: ").concat(null!==(i=B(I))&&void 0!==i?i:"","px;"))}),P(e,t)};ve(l,function(e){B(x)&&e(f)});var v=ge(l,2);L(v,function(){return nt.sanitize(B(s),ti)});var g=ge(v),p=function(e){var t=Zr();Z(function(){var e,i;tt(t,"src",B(w)),Ye(t,"width: ".concat(null!==(e=B(T))&&void 0!==e?e:"","px; height: ").concat(null!==(i=B(I))&&void 0!==i?i:"","px;"))}),P(e,t)};ve(g,function(e){B(O)&&e(p)}),P(e,t)},n=function(e){var t=E(),i=U(t);L(i,function(){return nt.sanitize("".concat(B(u)," ").concat(B(d)," ").concat(B(s)),ti)}),P(e,t)};ve(i,function(e){B(p)?e(o):e(n,!1)}),P(e,t)}),Z(function(){return Ye(i,B(g))}),P(e,t)};ve(D,function(e){(function(){if(t.score.showScore){if(void 0!==B(r)&&B(r).isNotShownObjects){if(void 0!==B(r).activatedId&&""!==B(r).activatedId){var e=_t.get(B(r).activatedId),i=Yt.get(B(r).activatedId);return void 0!==e?io(e.requireds):void 0!==i?i.isTrue:Ki(B(r).activatedId)}return!1}return!0}return!1})()&&io(t.score.requireds)&&e(F)}),P(e,k),$()}var ta=R('<i class="mdi mdi-minus"></i>'),ia=R('<i class="mdi mdi-plus"></i>'),oa=R('<div class="px-5 w-100 multi-slider"><!></div>'),na=R('<div class="d-row justify-space-around w-100 multi-counter"><!> <div translate="no"> </div> <!></div> <!>',1);function ra(e,t){V(t,!0);var i=N(0),o=M(function(){return t.addon?t.addon:t.choice}),n=M(function(){if(B(o).isMultipleUseVariable)return B(o).multipleUseVariable;if(void 0!==B(o).multipleScoreId){var e=Ut.get(B(o).multipleScoreId);if(void 0!==e)return e.startingSum}return 0}),r=M(function(){return Zi("privateTextIsOn",t.row,t.choice)}),a=M(function(){return Zi("privateMultiChoiceIsOn",t.row,t.choice)}),c=M(function(){return"font-family: '".concat(B(a).multiChoiceTextFont,"'; color: ").concat(xn(B(r).scoreTextColor),"; font-size: ").concat(B(a).multiChoiceTextSize,"%; align-content: center;")}),l=M(function(){return"font-size: ".concat(B(a).multiChoiceCounterSize,"%; color: ").concat(xn(B(r).scoreTextColor),";")});function s(e){t.selectedOneMore()}function u(e){t.selectedOneLess()}function d(){for(var e=B(i)-B(n),o=0;o<Math.abs(e);o++)e>0?t.selectedOneMore():t.selectedOneLess();document.activeElement&&document.activeElement.blur()}function f(e){t.isEnabled&&(ri.currentDialog="selectDialog",ri.choice=t.choice,ri.func=v)}function v(e){for(var i=e-t.choice.multipleUseVariable,o=0;o<Math.abs(i);o++)i>0?t.selectedOneMore():t.selectedOneLess()}D(function(){t.choice.useSlider&&G(i,B(n),!0)});var g=E(),p=U(g),m=function(e){var r=na(),a=U(r),v=z(a),g=function(e){var i=M(function(){return!t.isEnabled});Je(e,{class:"counter-icons",get disabled(){return B(i)},onclickcapture:u,children:function(e,t){var i=ta();Z(function(){return Ye(i,B(l))}),P(e,i)},$$slots:{default:!0}})};ve(v,function(e){B(o).hideCounter||e(g)});var p=ge(v,2),m=z(p),h=ge(p,2),b=function(e){var i=M(function(){return!t.isEnabled});Je(e,{class:"counter-icons",get disabled(){return B(i)},onclickcapture:s,children:function(e,t){var i=ia();Z(function(){return Ye(i,B(l))}),P(e,i)},$$slots:{default:!0}})};ve(h,function(e){B(o).hideCounter||e(b)});var w=ge(a,2),T=function(e){var n=oa(),r=z(n),a=M(function(){return!t.isEnabled});rt(r,{get min(){return B(o).numMultipleTimesMinus},get max(){return B(o).numMultipleTimesPluss},step:1,class:"mx-2",onpointerup:d,get disabled(){return B(a)},discrete:!0,get value(){return B(i)},set value(e){G(i,e,!0)}}),P(e,n)};ve(w,function(e){B(o).useSlider&&e(T)}),Z(function(){Ye(p,B(c)),Se(m,B(n))}),et("click",p,f,!0),P(e,r)};ve(p,function(e){B(o).hideCounterUntilSelect&&0===B(o).multipleUseVariable||e(m)}),P(e,g),$()}var aa=R('<img alt=""/>'),ca=R('<img alt=""/>'),la=R('<h3 class="m-0"><!></h3>'),sa=R("<!> <!>",1),ua=R("<!> <!>",1),da=R('<img alt=""/>'),fa=R('<img alt=""/>'),va=R('<p class="mb-0"><!></p>'),ga=R('<img alt=""/>'),pa=R('<img alt=""/>'),ma=R("<div><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div>"),ha=R('<img alt=""/>'),ba=R('<img alt=""/>'),wa=R('<h2 class="mb-0"><!></h2>'),Ta=R("<!> <!>",1),Ia=R("<!> <!>",1),Sa=R('<p class="mb-0"><!></p>'),ya=R('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!></div>',1),xa=R('<h2 class="mb-0"><!></h2>'),Ca=R("<!> <!>",1),Oa=R("<!> <!>",1),Aa=R('<p class="mb-0"><!></p>'),ka=R('<img alt=""/>'),Ba=R('<img alt=""/>'),Ma=R('<div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!></div> <div class="col p-0 text-center"><!></div>',1),Da=R('<div class="row m-0 p-0 w-100"><!></div>'),Fa=R("<div><!></div>");function Ra(e,t){V(t,!0);var i=function(){return Ne(pi,"$winWidth",n)},o=g(We(),2),n=o[0],r=o[1],a=_(t,"windowWidth",3,0),c=_(t,"preloadImages",3,!1),l=_(t,"isBackpack",3,!1),s={linkedObjects:[],mainDiv:t.mainDiv,bCreatorMode:!1,isBackpack:l(),isOverDlg:!1,isOverImg:!1},u=M(function(){return void 0!==t.choice&&t.choice.isActive}),d=M(function(){return Zi("privateAddonImageIsOn",t.row,t.choice)}),f=M(function(){return Zi("privateAddonIsOn",t.row,t.choice)}),v=M(function(){return Zi("privateFilterIsOn",t.row,t.choice)}),p=M(function(){return Zi("privateObjectImageIsOn",t.row,t.choice)}),m=M(function(){return Zi("privateObjectIsOn",t.row,t.choice)}),h=M(function(){return Zi("privateTextIsOn",t.row,t.choice)}),b=M(function(){return Zi("privateMultiChoiceIsOn",t.row,t.choice)}),w=M(function(){return io(t.addon.requireds)}),T=M(function(){return Ji(t.addon.title)}),I=M(function(){return Ji(t.addon.text)}),S=M(function(){return void 0!==B(d).addonImageBoxWidth?B(d).addonImageBoxWidth:50}),y=M(function(){return!t.addon.hideMultipleCounter||t.isEnabled}),x=M(function(){var e=B(f).useAddonDesign,i=(e?B(f).addonBorderRadiusIsPixels:B(m).objectBorderRadiusIsPixels)?"px":"%",o={},n={};return e&&(B(f).addonBorderImage&&(o.borderImage="border-image: url('".concat(B(f).addonBorderImage,"') ").concat(B(f).addonBorderImageSliceTop," ").concat(B(f).addonBorderImageSliceRight," ").concat(B(f).addonBorderImageSliceBottom," ").concat(B(f).addonBorderImageSliceLeft," / ").concat(B(f).addonBorderImageWidth,"px ").concat(B(f).addonBorderImageRepeat,"; border-style: solid; padding: ").concat(B(f).addonBorderImageWidth,"px;")),B(f).useAddonBackgroundImage&&B(f).addonBackgroundImage&&(o.bgImage="background-image: url('".concat(B(f).addonBackgroundImage,"'); ").concat(B(f).isObjectBackgroundRepeat?"background-repeat: repeat;":B(f).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),B(f).addonBgColorIsOn&&(o.bgColor="background-color: ".concat(xn(B(f).addonBgColor),";")),o.margin="margin: ".concat(B(f).addonMargin,"px;"),o.borderRadius="border-radius: ".concat(B(f).addonBorderRadiusTopLeft).concat(i," ").concat(B(f).addonBorderRadiusTopRight).concat(i," ").concat(B(f).addonBorderRadiusBottomRight).concat(i," ").concat(B(f).addonBorderRadiusBottomLeft).concat(i,";"),B(f).addonOverflowIsOn&&(o.overflow="overflow: hidden;"),B(f).addonBorderIsOn&&(o.border="border: ".concat(B(f).addonBorderWidth,"px ").concat(B(f).addonBorderStyle," ").concat(xn(B(f).addonBorderColor),";")),B(f).addonGradientIsOn&&(o.bgImage="background-image: linear-gradient(".concat(B(f).addonGradient,");")),B(f).addonDropShadowIsOn&&(B(f).addonUseBoxShadowIsOn?o.boxShadow="box-shadow: ".concat(B(f).addonDropShadowH,"px ").concat(B(f).addonDropShadowV,"px ").concat(B(f).addonDropShadowBlur,"px ").concat(B(f).addonDropShadowSpread,"px ").concat(xn(B(f).addonDropShadowColor),";"):n.dropShadow=" drop-shadow(".concat(B(f).addonDropShadowH,"px ").concat(B(f).addonDropShadowV,"px ").concat(B(f).addonDropShadowBlur,"px ").concat(xn(B(f).addonDropShadowColor),")"))),t.isEnabled&&(B(w)?t.addon.isActive||B(u)&&!t.addon.isSelectable?(e?(B(v).selBorderColorIsOn&&(o.border="border: ".concat(B(f).addonBorderWidth,"px ").concat(B(f).addonBorderStyle," ").concat(xn(B(v).selFilterBorderColor),";")),B(f).addonGradientIsOn&&(o.bgImage="background-image: linear-gradient(".concat(B(f).addonGradientOnSelect,");"))):t.addon.isSelectable&&(B(v).selBorderColorIsOn&&(o.border="border: ".concat(B(m).objectBorderWidth,"px ").concat(B(m).objectBorderStyle," ").concat(xn(B(v).selFilterBorderColor),";")),B(m).objectGradientIsOn&&(o.bgImage="background-image: linear-gradient(".concat(B(m).objectGradientOnSelect,");"))),B(v).selBgColorIsOn&&(o.bgColor="background-color: ".concat(xn(B(v).selFilterBgColor),";")),B(v).selFilterBlurIsOn&&(n.blur=" blur(".concat(B(v).selFilterBlur,"px)")),B(v).selFilterBrightIsOn&&(n.brightness=" brightness(".concat(B(v).selFilterBright,"%)")),B(v).selFilterContIsOn&&(n.contrast=" contrast(".concat(B(v).selFilterCont,"%)")),B(v).selFilterGrayIsOn&&(n.grayscale=" grayscale(".concat(B(v).selFilterGray,"%)")),B(v).selFilterHueIsOn&&(n.hueRotate=" hue-rotate(".concat(B(v).selFilterHue,"deg)")),B(v).selFilterInvertIsOn&&(n.invert=" invert(".concat(B(v).selFilterInvert,"%)")),B(v).selFilterOpacIsOn&&(n.opacity=" opacity(".concat(B(v).selFilterOpac,"%)")),B(v).selFilterSaturIsOn&&(n.saturate=" saturate(".concat(B(v).selFilterSatur,")")),B(v).selFilterSepiaIsOn&&(n.sepia=" sepia(".concat(B(v).selFilterGray,"%)"))):(B(m).objectGradientIsOn&&t.addon.isSelectable&&(o.bgImage="background-image: linear-gradient(".concat(B(m).objectGradient,");")),B(v).unselFilterBlurIsOn&&(n.blur=" blur(".concat(B(v).unselFilterBlur,"px)")),B(v).unselFilterBrightIsOn&&(n.brightness=" brightness(".concat(B(v).unselFilterBright,"%)")),B(v).unselFilterContIsOn&&(n.contrast=" contrast(".concat(B(v).unselFilterCont,"%)")),B(v).unselFilterGrayIsOn&&(n.grayscale=" grayscale(".concat(B(v).unselFilterGray,"%)")),B(v).unselFilterHueIsOn&&(n.hueRotate=" hue-rotate(".concat(B(v).unselFilterHue,"deg)")),B(v).unselFilterInvertIsOn&&(n.invert=" invert(".concat(B(v).unselFilterInvert,"%)")),B(v).unselFilterOpacIsOn&&(n.opacity=" opacity(".concat(B(v).unselFilterOpac,"%)")),B(v).unselFilterSaturIsOn&&(n.saturate=" saturate(".concat(B(v).unselFilterSatur,")")),B(v).unselFilterSepiaIsOn&&(n.sepia=" sepia(".concat(B(v).unselFilterGray,"%)"))):(e?(B(v).reqBorderColorIsOn&&(o.border="border: ".concat(B(f).addonBorderWidth,"px ").concat(B(f).addonBorderStyle," ").concat(xn(B(v).reqFilterBorderColor),";")),B(f).addonGradientIsOn&&(o.bgImage="background-image: linear-gradient(".concat(B(f).addonGradientOnReq,");"))):t.addon.isSelectable&&(B(v).reqBorderColorIsOn&&(o.border="border: ".concat(B(m).objectBorderWidth,"px ").concat(B(m).objectBorderStyle," ").concat(xn(B(v).reqFilterBorderColor),";")),B(m).objectGradientIsOn&&(o.bgImage="background-image: linear-gradient(".concat(B(m).objectGradientOnReq,");"))),B(v).reqFilterBlurIsOn&&(n.blur=" blur(".concat(B(v).reqFilterBlur,"px)")),B(v).reqFilterBrightIsOn&&(n.brightness=" brightness(".concat(B(v).reqFilterBright,"%)")),B(v).reqFilterContIsOn&&(n.contrast=" contrast(".concat(B(v).reqFilterCont,"%)")),B(v).reqFilterGrayIsOn&&(n.grayscale=" grayscale(".concat(B(v).reqFilterGray,"%)")),B(v).reqFilterHueIsOn&&(n.hueRotate=" hue-rotate(".concat(B(v).reqFilterHue,"deg)")),B(v).reqFilterInvertIsOn&&(n.invert=" invert(".concat(B(v).reqFilterInvert,"%)")),B(v).reqFilterOpacIsOn&&(n.opacity=" opacity(".concat(B(v).reqFilterOpac,"%)")),B(v).reqFilterSaturIsOn&&(n.saturate=" saturate(".concat(B(v).reqFilterSatur,")")),B(v).reqFilterSepiaIsOn&&(n.sepia=" sepia(".concat(B(v).reqFilterGray,"%)")))),Object.keys(n).length>0&&(o.filter="filter:".concat(Object.values(n).join(""),";")),Object.values(o).join(" ")}),C=M(function(){var e=[];return e.push("white-space: pre-line; font-family: '".concat(B(h).addonTitle,"'; font-size: ").concat(B(h).addonTitleTextSize,"%; text-align: ").concat(B(h).addonTitleAlign,";")),!t.isEnabled&&B(v).reqATitleColorIsOn?e.push("color: ".concat(xn(B(v).reqFilterATitleColor),";")):B(u)&&B(v).selATitleColorIsOn?e.push("color: ".concat(xn(B(v).selFilterATitleColor),";")):e.push("color: ".concat(xn(B(h).addonTitleColor),";")),B(f).useAddonDesign?B(f).titlePaddingIsOn&&e.push("padding: ".concat(B(f).addonTextPadding,"px;")):B(m).titlePaddingIsOn&&e.push("padding: ".concat(B(m).objectTextPadding,"px;")),e.join(" ")}),O=M(function(){var e=[];return e.push("white-space: pre-wrap; font-family: '".concat(B(h).addonText,"'; text-align: ").concat(B(h).addonTextAlign,"; font-size: ").concat(B(h).addonTextTextSize,"%;")),!t.isEnabled&&B(v).reqATextColorIsOn?e.push("color: ".concat(xn(B(v).reqFilterATextColor),";")):B(u)&&B(v).selATextColorIsOn?e.push("color: ".concat(xn(B(v).selFilterATextColor),";")):e.push("color: ".concat(xn(B(h).addonTextColor),";")),B(f).useAddonDesign?e.push("padding: ".concat(B(f).addonTextPadding,"px;")):e.push("padding: ".concat(B(m).objectTextPadding,"px;")),e.join(" ")}),A=M(function(){var e=[],i=B(d).useAddonImage,o=(i?B(d).addonImgBorderRadiusIsPixels:B(p).objectImgBorderRadiusIsPixels)?"px":"%";if(i){if(e.push("width: ".concat(B(d).addonImageWidth,"%; margin-top: ").concat(B(d).addonImageMarginTop,"%; margin-bottom: ").concat(B(d).addonImageMarginBottom,"%;")),B(d).addonImgObjectFillIsOn){e.push("object-fit: ".concat(B(d).addonImgObjectFillStyle,";"));var n=t.choice.addonImgObjectFillHeight||B(p).addonImgObjectFillHeight;n&&e.push("height: ".concat(n,"px"))}if(e.push("border-radius: ".concat(B(d).addonImgBorderRadiusTopLeft).concat(o," ").concat(B(d).addonImgBorderRadiusTopRight).concat(o," ").concat(B(d).addonImgBorderRadiusBottomRight).concat(o," ").concat(B(d).addonImgBorderRadiusBottomLeft).concat(o,";")),B(d).addonImgOverflowIsOn&&e.push("overflow: hidden;"),B(d).addonImgBorderIsOn){var r=t.isEnabled?B(u)&&B(v).selImgBorderColorIsOn&&B(v).selFilterImgBorderColor||B(d).addonImgBorderColor:B(v).reqImgBorderColorIsOn&&B(v).reqFilterImgBorderColor||B(d).addonImgBorderColor;e.push("border: ".concat(B(d).addonImgBorderWidth,"px ").concat(B(d).addonImgBorderStyle," ").concat(xn(r),";"))}}else{if(e.push("width: ".concat(B(p).objectImageWidth,"%; margin-top: ").concat(B(p).objectImageMarginTop,"%; margin-bottom: ").concat(B(p).objectImageMarginBottom,"%;")),B(p).objectImgObjectFillIsOn){var a;e.push("object-fit: ".concat(B(p).objectImgObjectFillStyle,";"));var c=(null===(a=t.row)||void 0===a?void 0:a.objectImgObjectFillHeight)||B(p).objectImgObjectFillHeight;c&&e.push("height: ".concat(c,"px;"))}if(e.push("border-radius: ".concat(B(p).objectImgBorderRadiusTopLeft).concat(o," ").concat(B(p).objectImgBorderRadiusTopRight).concat(o," ").concat(B(p).objectImgBorderRadiusBottomRight).concat(o," ").concat(B(p).objectImgBorderRadiusBottomLeft).concat(o,";")),B(p).objectImgOverflowIsOn&&e.push("overflow: hidden;"),B(p).objectImgBorderIsOn){var l=t.isEnabled?B(u)&&B(v).selImgBorderColorIsOn&&B(v).selFilterImgBorderColor||B(p).objectImgBorderColor:B(v).reqImgBorderColorIsOn&&B(v).reqFilterImgBorderColor||B(p).objectImgBorderColor;e.push("border: ".concat(B(p).objectImgBorderWidth,"px ").concat(B(p).objectImgBorderStyle," ").concat(xn(l),";"))}}return e.join(" ")}),k=M(function(){return"font-family: '".concat(B(h).scoreText,"'; font-size: ").concat(B(h).scoreTextSize,"%; text-align: ").concat(B(h).scoreTextAlign,"; color: ").concat(xn(B(h).scoreTextColor),";")});function D(e){navigator.clipboard.writeText(t.addon.imageSourceTooltip).then(function(){li.labelText="Tooltip copied to clipboard.",li.isOpen=!0}).catch(function(){console.log(t.addon.imageSourceTooltip),li.labelText="Tooltip text logged to developer console.",li.isOpen=!0})}var F=Fa(),R=z(F),q=function(e){var i=ma(),o=z(i),n=function(e){var i=E(),o=U(i),n=function(e){var i=aa();i.__contextmenu=D,J(i,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.addon.imageSourceTooltip}),Z(function(){tt(i,"src",t.addon.image),Ye(i,B(A)),tt(i,"loading",c()?"eager":"lazy")}),P(e,i)},r=function(e){var i=ca();Z(function(){tt(i,"src",t.addon.image),Ye(i,B(A)),tt(i,"loading",c()?"eager":"lazy")}),P(e,i)};ve(o,function(e){t.addon.imageSourceTooltip?e(n):e(r,!1)}),P(e,i)};ve(o,function(e){(1===t.addon.template||a()<=1280)&&t.addon.image&&!t.row.addonImageRemoved&&e(n)});var r=ge(o,2),l=function(e){var t=E(),i=U(t);j(i,function(){return B(T)},function(e){var t=la(),i=z(t);L(i,function(){return nt.sanitize(B(T),ti)}),Z(function(){return Ye(t,B(C))}),P(e,t)}),P(e,t)};ve(r,function(e){""===t.addon.title||t.row.addonTitleRemoved||e(l)});var u=ge(r,2),d=function(e){var i=M(function(){return!!t.isEnabled&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon},selectedOneMore:function(){return Mo(t.addon,t.row,s)},selectedOneLess:function(){return Do(t.addon,t.row,s)}})};ve(u,function(e){t.addon.isSelectableMultiple&&B(y)&&0===B(b).multiChoiceCounterPosition&&e(d)});var f=ge(u,2),v=function(e){var i=sa(),o=U(i),n=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.choice.scores},Ze,function(e,i){ea(e,{get score(){return B(i)},get row(){return t.row},get choice(){return t.choice}})}),P(e,i)};ve(o,function(e){t.choice.showScoreInAddon&&t.isFirst&&e(n)});var r=ge(o,2),a=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.addon.scores},Ze,function(e,i){ea(e,{get score(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon}})}),P(e,i)};ve(r,function(e){t.addon.scores&&e(a)}),P(e,i)};ve(f,function(e){t.row.objectScoreRemoved||e(v)});var g=ge(f,2),p=function(e){var i=M(function(){return!!t.isEnabled&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon},selectedOneMore:function(){return Mo(t.addon,t.row,s)},selectedOneLess:function(){return Do(t.addon,t.row,s)}})};ve(g,function(e){t.addon.isSelectableMultiple&&B(y)&&1===B(b).multiChoiceCounterPosition&&e(p)});var m=ge(g,2),h=function(e){var i=ua(),o=U(i),n=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.choice.requireds},Ze,function(e,t){_r(e,{get required(){return B(t)},get scoreText(){return B(k)}})}),P(e,i)};ve(o,function(e){t.choice.showReqInAddon&&t.isFirst&&e(n)});var r=ge(o,2);_e(r,17,function(){return t.addon.requireds},Ze,function(e,t){_r(e,{get required(){return B(t)},get scoreText(){return B(k)}})}),P(e,i)};ve(m,function(e){t.row.objectRequirementRemoved||e(h)});var w=ge(m,2),S=function(e){var i=M(function(){return!!t.isEnabled&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon},selectedOneMore:function(){return Mo(t.addon,t.row,s)},selectedOneLess:function(){return Do(t.addon,t.row,s)}})};ve(w,function(e){t.addon.isSelectableMultiple&&B(y)&&2===B(b).multiChoiceCounterPosition&&e(S)});var x=ge(w,2),F=function(e){var i=E(),o=U(i),n=function(e){var i=da();i.__contextmenu=D,J(i,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.addon.imageSourceTooltip}),Z(function(){tt(i,"src",t.addon.image),Ye(i,B(A)),tt(i,"loading",c()?"eager":"lazy")}),P(e,i)},r=function(e){var i=fa();Z(function(){tt(i,"src",t.addon.image),Ye(i,B(A)),tt(i,"loading",c()?"eager":"lazy")}),P(e,i)};ve(o,function(e){t.addon.imageSourceTooltip?e(n):e(r,!1)}),P(e,i)};ve(x,function(e){5===t.addon.template&&a()>1280&&t.addon.image&&!t.row.addonImageRemoved&&e(F)});var R=ge(x,2),q=function(e){var t=E(),i=U(t);j(i,function(){return B(I)},function(e){var t=va(),i=z(t);L(i,function(){return nt.sanitize(B(I),ti)}),Z(function(){return Ye(t,B(O))}),P(e,t)}),P(e,t)};ve(R,function(e){""===t.addon.text||t.row.addonTextRemoved||e(q)});var $=ge(R,2),V=function(e){var i=M(function(){return!!t.isEnabled&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon},selectedOneMore:function(){return Mo(t.addon,t.row,s)},selectedOneLess:function(){return Do(t.addon,t.row,s)}})};ve($,function(e){t.addon.isSelectableMultiple&&B(y)&&3===B(b).multiChoiceCounterPosition&&e(V)});var N=ge($,2),W=function(e){var i=E(),o=U(i),n=function(e){var i=ga();i.__contextmenu=D,J(i,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.addon.imageSourceTooltip}),Z(function(){tt(i,"src",t.addon.image),Ye(i,B(A)),tt(i,"loading",c()?"eager":"lazy")}),P(e,i)},r=function(e){var i=pa();Z(function(){tt(i,"src",t.addon.image),Ye(i,B(A)),tt(i,"loading",c()?"eager":"lazy")}),P(e,i)};ve(o,function(e){t.addon.imageSourceTooltip?e(n):e(r,!1)}),P(e,i)};ve(N,function(e){4===t.addon.template&&a()>1280&&t.addon.image&&!t.row.addonImageRemoved&&e(W)});var G=ge(N,2),_=function(e){var i=M(function(){return!!t.isEnabled&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon},selectedOneMore:function(){return Mo(t.addon,t.row,s)},selectedOneLess:function(){return Do(t.addon,t.row,s)}})};ve(G,function(e){t.addon.isSelectableMultiple&&B(y)&&4===B(b).multiChoiceCounterPosition&&e(_)}),P(e,i)},N=function(e){var i=Da(),o=z(i),n=function(e){var i=ya(),o=U(i),n=z(o),r=function(e){var i=E(),o=U(i),n=function(e){var i=ha();i.__contextmenu=D,J(i,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.addon.imageSourceTooltip}),Z(function(){tt(i,"src",t.addon.image),Ye(i,B(A)),tt(i,"loading",c()?"eager":"lazy")}),P(e,i)},r=function(e){var i=ba();Z(function(){tt(i,"src",t.addon.image),Ye(i,B(A)),tt(i,"loading",c()?"eager":"lazy")}),P(e,i)};ve(o,function(e){t.addon.imageSourceTooltip?e(n):e(r,!1)}),P(e,i)};ve(n,function(e){t.addon.image&&!t.row.addonImageRemoved&&e(r)});var a=ge(o,2),l=z(a),u=function(e){var t=E(),i=U(t);j(i,function(){return B(T)},function(e){var t=wa(),i=z(t);L(i,function(){return nt.sanitize(B(T),ti)}),Z(function(){return Ye(t,B(C))}),P(e,t)}),P(e,t)};ve(l,function(e){""===t.addon.title||t.row.addonTitleRemoved||e(u)});var d=ge(l,2),f=function(e){var i=M(function(){return!!t.isEnabled&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon},selectedOneMore:function(){return Mo(t.addon,t.row,s)},selectedOneLess:function(){return Do(t.addon,t.row,s)}})};ve(d,function(e){t.addon.isSelectableMultiple&&B(y)&&0===B(b).multiChoiceCounterPosition&&e(f)});var v=ge(d,2),g=function(e){var i=Ta(),o=U(i),n=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.choice.scores},Ze,function(e,i){ea(e,{get score(){return B(i)},get row(){return t.row},get choice(){return t.choice}})}),P(e,i)};ve(o,function(e){t.choice.showScoreInAddon&&t.isFirst&&e(n)});var r=ge(o,2),a=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.addon.scores},Ze,function(e,i){ea(e,{get score(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon}})}),P(e,i)};ve(r,function(e){t.addon.scores&&e(a)}),P(e,i)};ve(v,function(e){t.row.objectScoreRemoved||e(g)});var p=ge(v,2),m=function(e){var i=M(function(){return!!t.isEnabled&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon},selectedOneMore:function(){return Mo(t.addon,t.row,s)},selectedOneLess:function(){return Do(t.addon,t.row,s)}})};ve(p,function(e){t.addon.isSelectableMultiple&&B(y)&&1===B(b).multiChoiceCounterPosition&&e(m)});var h=ge(p,2),w=function(e){var i=Ia(),o=U(i),n=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.choice.requireds},Ze,function(e,t){_r(e,{get required(){return B(t)},get scoreText(){return B(k)}})}),P(e,i)};ve(o,function(e){t.choice.showReqInAddon&&t.isFirst&&e(n)});var r=ge(o,2);_e(r,17,function(){return t.addon.requireds},Ze,function(e,t){_r(e,{get required(){return B(t)},get scoreText(){return B(k)}})}),P(e,i)};ve(h,function(e){t.row.objectRequirementRemoved||e(w)});var x=ge(h,2),F=function(e){var i=M(function(){return!!t.isEnabled&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon},selectedOneMore:function(){return Mo(t.addon,t.row,s)},selectedOneLess:function(){return Do(t.addon,t.row,s)}})};ve(x,function(e){t.addon.isSelectableMultiple&&B(y)&&2===B(b).multiChoiceCounterPosition&&e(F)});var R=ge(x,2),q=function(e){var t=E(),i=U(t);j(i,function(){return B(I)},function(e){var t=Sa(),i=z(t);L(i,function(){return nt.sanitize(B(I),ti)}),Z(function(){return Ye(t,B(O))}),P(e,t)}),P(e,t)};ve(R,function(e){""===t.addon.text||t.row.addonTextRemoved||e(q)});var $=ge(R,2),V=function(e){var i=M(function(){return!!t.isEnabled&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon},selectedOneMore:function(){return Mo(t.addon,t.row,s)},selectedOneLess:function(){return Do(t.addon,t.row,s)}})};ve($,function(e){t.addon.isSelectableMultiple&&B(y)&&(3===B(b).multiChoiceCounterPosition||4===B(b).multiChoiceCounterPosition)&&e(V)}),Z(function(){var e;Ye(o,"max-width: ".concat(null!==(e=B(S))&&void 0!==e?e:"","%")),Ye(a,"max-width: ".concat(100-B(S),"%"))}),P(e,i)},r=function(e){var i=E(),o=U(i),n=function(e){var i=Ma(),o=U(i),n=z(o),r=function(e){var t=E(),i=U(t);j(i,function(){return B(T)},function(e){var t=xa(),i=z(t);L(i,function(){return nt.sanitize(B(T),ti)}),Z(function(){return Ye(t,B(C))}),P(e,t)}),P(e,t)};ve(n,function(e){""===t.addon.title||t.row.addonTitleRemoved||e(r)});var a=ge(n,2),l=function(e){var i=M(function(){return!!t.isEnabled&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon},selectedOneMore:function(){return Mo(t.addon,t.row,s)},selectedOneLess:function(){return Do(t.addon,t.row,s)}})};ve(a,function(e){t.addon.isSelectableMultiple&&B(y)&&0===B(b).multiChoiceCounterPosition&&e(l)});var u=ge(a,2),d=function(e){var i=Ca(),o=U(i),n=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.choice.scores},Ze,function(e,i){ea(e,{get score(){return B(i)},get row(){return t.row},get choice(){return t.choice}})}),P(e,i)};ve(o,function(e){t.choice.showScoreInAddon&&t.isFirst&&e(n)});var r=ge(o,2),a=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.addon.scores},Ze,function(e,i){ea(e,{get score(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon}})}),P(e,i)};ve(r,function(e){t.addon.scores&&e(a)}),P(e,i)};ve(u,function(e){t.row.objectScoreRemoved||e(d)});var f=ge(u,2),v=function(e){var i=M(function(){return!!t.isEnabled&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon},selectedOneMore:function(){return Mo(t.addon,t.row,s)},selectedOneLess:function(){return Do(t.addon,t.row,s)}})};ve(f,function(e){t.addon.isSelectableMultiple&&B(y)&&1===B(b).multiChoiceCounterPosition&&e(v)});var g=ge(f,2),p=function(e){var i=Oa(),o=U(i),n=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.choice.requireds},Ze,function(e,t){_r(e,{get required(){return B(t)},get scoreText(){return B(k)}})}),P(e,i)};ve(o,function(e){t.choice.showReqInAddon&&t.isFirst&&e(n)});var r=ge(o,2);_e(r,17,function(){return t.addon.requireds},Ze,function(e,t){_r(e,{get required(){return B(t)},get scoreText(){return B(k)}})}),P(e,i)};ve(g,function(e){t.row.objectRequirementRemoved||e(p)});var m=ge(g,2),h=function(e){var i=M(function(){return!!t.isEnabled&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon},selectedOneMore:function(){return Mo(t.addon,t.row,s)},selectedOneLess:function(){return Do(t.addon,t.row,s)}})};ve(m,function(e){t.addon.isSelectableMultiple&&B(y)&&2===B(b).multiChoiceCounterPosition&&e(h)});var w=ge(m,2),x=function(e){var t=E(),i=U(t);j(i,function(){return B(I)},function(e){var t=Aa(),i=z(t);L(i,function(){return nt.sanitize(B(I),ti)}),Z(function(){return Ye(t,B(O))}),P(e,t)}),P(e,t)};ve(w,function(e){""===t.addon.text||t.row.addonTextRemoved||e(x)});var F=ge(w,2),R=function(e){var i=M(function(){return!!t.isEnabled&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},get addon(){return t.addon},selectedOneMore:function(){return Mo(t.addon,t.row,s)},selectedOneLess:function(){return Do(t.addon,t.row,s)}})};ve(F,function(e){t.addon.isSelectableMultiple&&B(y)&&(3===B(b).multiChoiceCounterPosition||4===B(b).multiChoiceCounterPosition)&&e(R)});var q=ge(o,2),$=z(q),V=function(e){var i=E(),o=U(i),n=function(e){var i=ka();i.__contextmenu=D,J(i,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.addon.imageSourceTooltip}),Z(function(){tt(i,"src",t.addon.image),Ye(i,B(A)),tt(i,"loading",c()?"eager":"lazy")}),P(e,i)},r=function(e){var i=Ba();Z(function(){tt(i,"src",t.addon.image),Ye(i,B(A)),tt(i,"loading",c()?"eager":"lazy")}),P(e,i)};ve(o,function(e){t.addon.imageSourceTooltip?e(n):e(r,!1)}),P(e,i)};ve($,function(e){t.addon.image&&!t.row.addonImageRemoved&&e(V)}),Z(function(){var e;Ye(o,"max-width: ".concat(100-B(S),"%")),Ye(q,"max-width: ".concat(null!==(e=B(S))&&void 0!==e?e:"","%"))}),P(e,i)};ve(o,function(e){3===t.addon.template&&e(n)},!0),P(e,i)};ve(o,function(e){2===t.addon.template?e(n):e(r,!1)}),P(e,i)};ve(R,function(e){t.addon.template>=4||1===t.addon.template||a()<=1280?e(q):e(N,!1)}),Z(function(e){var i,o;X(F,1,"text-center row-".concat(null!==(i=t.row.id)&&void 0!==i?i:""," choice-").concat(null!==(o=t.choice.id)&&void 0!==o?o:""," addon").concat(t.addon.isSelectable?" addon-".concat(t.addon.id):""," ").concat(null!=e?e:"")),Ye(F,B(x))},[function(){var e=t.addon.addonWidth||"col-12",o=Gi(e),n="col-6"===app.objectsPerRow?2:"col-4"===app.objectsPerRow?3:4;if(i()>1280)return e;if(!(i()>720))return i()>480?1===o?"col-12":"col-6":"col-12";switch(o){case 1:return"col-12";case 2:return"col-6";case 3:return n>2?"col-4":app.objectsPerRow;case 4:return n>3?"col-3":app.objectsPerRow;default:return app.objectsPerRow}}]),et("click",F,function(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];null===(e=t.addon.isSelectable?function(e){return function(e,i,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=o&&o.target?o.target:null,a=i;if(s.isOverDlg=!1,s.isOverImg=!1,i.isResultRow||i.isGroupRow){var c=zt.get(e.id);void 0!==c&&(a=c.row)}if(e.isSelectableMultiple){if(e.id===t.addon.id&&e.allowSelectByClick&&0===e.multipleUseVariable){if(r&&Cn(r,"multi-","addon-"))return;Mo(e,a,s)}}else!io(e.requireds)||i.isInfoRow||n&&e.isNotSelectable||e.forcedActivated||(e.isActive?e.selectOnce||ko(e,a,s):Bo(e,a,s))}(t.addon,t.row,e,!0)}:void 0)||void 0===e||e.apply(this,o)},!0),P(e,F),$(),r()}Ke(["contextmenu"]);var ja=R('<div class="col-12"><!></div>'),qa=R('<img alt=""/>'),Pa=R('<img alt=""/>'),$a=R('<h3 class="m-0"><!></h3>'),Va=R('<img alt=""/>'),Na=R('<img alt=""/>'),Wa=R('<p class="mb-0"><!></p>'),Ea=R('<img alt=""/>'),Ua=R('<img alt=""/>'),La=R("<div></div>"),za=R("<div></div>"),Ga=R('<div class="d-column w-100 p-0 align-items-center"><!> <!> <div class="w-100"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!> <!></div> <!>',1),_a=R('<img alt=""/>'),Ha=R('<img alt=""/>'),Ya=R('<h2 class="mb-0"><!></h2>'),Ja=R('<p class="mb-0"><!></p>'),Za=R("<div></div>"),Xa=R("<!> <!>",1),Ka=R("<div></div>"),Qa=R('<div class="col-12 text-center"><!> <!></div>'),ec=R("<div></div>"),tc=R('<div class="row g-0"><div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!></div> <!>',1),ic=R('<h2 class="mb-0"><!></h2>'),oc=R('<p class="mb-0"><!></p>'),nc=R("<div></div>"),rc=R("<!> <!>",1),ac=R('<img alt=""/>'),cc=R('<img alt=""/>'),lc=R("<div></div>"),sc=R('<div class="col-12 text-center"><!> <!></div>'),uc=R("<div></div>"),dc=R('<div class="row g-0"><div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="col p-0 text-center"><!></div> <!></div> <!>',1),fc=R("<div><div><div><!></div></div></div>");function vc(e,t){V(t,!0);var i=function(){return Ne(pi,"$winWidth",n)},o=g(We(),2),n=o[0],r=o[1],a=_(t,"preloadImages",3,!1),c=_(t,"isSearch",3,!1),l={linkedObjects:[],mainDiv:t.mainDiv,bCreatorMode:!1,isBackpack:t.isBackpack,isOverDlg:!1,isOverImg:!1},s=M(function(){if(t.choice.addons&&t.choice.addons.length>0){var e=t.choice.addons.filter(function(e){return!0!==e.isSelectable});if(e.length>0)return e}return null}),u=M(function(){if(t.choice.addons&&t.choice.addons.length>0){var e=t.choice.addons.filter(function(e){return!0===e.isSelectable});if(e.length>0)return e}return null}),d=M(function(){if(B(s))for(var e=0;e<B(s).length;e++){var i=B(s)[e];if(app.showAllAddons>0||!i.skipIndex&&(!i.hideAddon||t.choice.isActive)&&(i.showAddon||io(i.requireds)))return e}if(B(u))for(var o=0;o<B(u).length;o++){var n=B(u)[o];if(app.showAllAddons>0||!n.skipIndex&&(!n.hideAddon||t.choice.isActive)&&(n.showAddon||io(n.requireds)))return o}return-1}),f=M(function(){return Zi("privateBackgroundIsOn",t.row,t.choice)}),v=M(function(){return Zi("privateFilterIsOn",t.row,t.choice)}),p=M(function(){return Zi("privateMultiChoiceIsOn",t.row,t.choice)}),m=M(function(){return Zi("privateObjectImageIsOn",t.row,t.choice)}),h=M(function(){return Zi("privateObjectIsOn",t.row,t.choice)}),b=M(function(){return Zi("privateTextIsOn",t.row,t.choice)}),w=M(function(){return void 0!==B(m).objectImageBoxWidth?B(m).objectImageBoxWidth:50}),T=M(function(){return io(t.choice.requireds)}),I=M(function(){return!!c()||(t.choice.isActive?!B(v).selFilterVisibleIsOn:B(T)?!B(v).unselFilterVisibleIsOn:!B(v).reqFilterVisibleIsOn)}),S=M(function(){return t.choice.addonJustify?" justify-".concat(t.choice.addonJustify):""}),y=M(function(){return t.choice.isActive}),x=M(function(){return B(h).objectHeight&&!c()}),C=M(function(){if(t.row.isResultRow){var e=zt.get(t.choice.id);if(void 0!==e)return e.row}return t.row}),O=M(function(){var e=[];return e.push("white-space: pre-line; font-family: '".concat(B(b).objectTitle,"'; font-size: ").concat(B(b).objectTitleTextSize,"%; text-align: ").concat(B(b).objectTitleAlign,";")),!B(T)&&B(v).reqCTitleColorIsOn?e.push("color: ".concat(xn(B(v).reqFilterCTitleColor),";")):B(y)&&B(v).selCTitleColorIsOn?e.push("color: ".concat(xn(B(v).selFilterCTitleColor),";")):e.push("color: ".concat(xn(B(b).objectTitleColor),";")),B(h).titlePaddingIsOn&&e.push("padding: ".concat(B(h).objectTextPadding,"px;")),e.join(" ")}),A=M(function(){return Ji(""!==B(C).title?B(C).title:B(C).debugTitle||"")}),k=M(function(){return Ji(t.choice.title)}),F=M(function(){return Ji(t.choice.text)}),R=M(function(){return!t.choice.hideMultipleCounter||B(T)}),q=M(function(){var e=[];return e.push("white-space: pre-wrap; font-family: '".concat(B(b).objectText,"'; text-align: ").concat(B(b).objectTextAlign,"; font-size: ").concat(B(b).objectTextTextSize,"%;")),!B(T)&&B(v).reqCTextColorIsOn?e.push("color: ".concat(xn(B(v).reqFilterCTextColor),";")):B(y)&&B(v).selCTextColorIsOn?e.push("color: ".concat(xn(B(v).selFilterCTextColor),";")):e.push("color: ".concat(xn(B(b).objectTextColor),";")),e.push("padding: ".concat(B(h).objectTextPadding,"px;")),e.join(" ")}),N=M(function(){var e=B(h).objectBorderRadiusIsPixels?"px":"%",t={},i={};if(B(h).objectBorderImage&&(t.borderImage="border-image: url('".concat(B(h).objectBorderImage,"') ").concat(B(h).objectBorderImageSliceTop," ").concat(B(h).objectBorderImageSliceRight," ").concat(B(h).objectBorderImageSliceBottom," ").concat(B(h).objectBorderImageSliceLeft," / ").concat(B(h).objectBorderImageWidth,"px ").concat(B(h).objectBorderImageRepeat,"; border-style: solid; padding: ").concat(B(h).objectBorderImageWidth,"px;")),B(f).objectBackgroundImage&&(t.bgImage="background-image: url('".concat(B(f).objectBackgroundImage,"'); ").concat(B(f).isObjectBackgroundRepeat?"background-repeat: repeat;":B(f).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),B(f).objectBgColorIsOn&&(t.bgColor="background-color: ".concat(xn(B(f).objectBgColor),";")),t.margin="margin: ".concat(B(h).objectMargin,"px;"),t.borderRadius="border-radius: ".concat(B(h).objectBorderRadiusTopLeft).concat(e," ").concat(B(h).objectBorderRadiusTopRight).concat(e," ").concat(B(h).objectBorderRadiusBottomRight).concat(e," ").concat(B(h).objectBorderRadiusBottomLeft).concat(e,";"),B(h).objectOverflowIsOn&&(t.overflow="overflow: hidden;"),B(h).objectBorderIsOn||B(y)&&B(v).selBorderColorIsOn||!B(T)&&B(v).reqBorderColorIsOn){var o=B(h).objectBorderColor;!B(T)&&B(v).reqBorderColorIsOn?o=B(v).reqFilterBorderColor:B(y)&&B(v).selBorderColorIsOn&&(o=B(v).selFilterBorderColor),t.border="border: ".concat(B(h).objectBorderWidth,"px ").concat(B(h).objectBorderStyle," ").concat(xn(o),";")}return B(h).objectDropShadowIsOn&&(B(h).objectUseBoxShadowIsOn?t.boxShadow="box-shadow: ".concat(B(h).objectDropShadowH,"px ").concat(B(h).objectDropShadowV,"px ").concat(B(h).objectDropShadowBlur,"px ").concat(B(h).objectDropShadowSpread,"px ").concat(xn(B(h).objectDropShadowColor),";"):B(u)?t.filter="filter: drop-shadow(".concat(B(h).objectDropShadowH,"px ").concat(B(h).objectDropShadowV,"px ").concat(B(h).objectDropShadowBlur,"px ").concat(xn(B(h).objectDropShadowColor),")"):i.dropShadow=" drop-shadow(".concat(B(h).objectDropShadowH,"px ").concat(B(h).objectDropShadowV,"px ").concat(B(h).objectDropShadowBlur,"px ").concat(xn(B(h).objectDropShadowColor),")")),B(u)||Y(t,i),Object.keys(i).length>0&&(t.filter="filter:".concat(Object.values(i).join(""),";")),Object.values(t).join(" ")}),W=M(function(){var e={},t={};return Y(e,t),Object.keys(t).length>0&&(e.filter="filter:".concat(Object.values(t).join(""),";")),Object.values(e).join(" ")}),G=M(function(){var e=[],i=B(m).objectImgBorderRadiusIsPixels?"px":"%";if(e.push("width: ".concat(B(m).objectImageWidth,"%; margin-top: ").concat(B(m).objectImageMarginTop,"%; margin-bottom: ").concat(B(m).objectImageMarginBottom,"%;")),B(m).objectImgObjectFillIsOn){e.push("object-fit: ".concat(B(m).objectImgObjectFillStyle,";"));var o=t.row.objectImgObjectFillHeight||B(m).objectImgObjectFillHeight;o&&e.push("height: ".concat(o,"px;"))}if(e.push("border-radius: ".concat(B(m).objectImgBorderRadiusTopLeft).concat(i," ").concat(B(m).objectImgBorderRadiusTopRight).concat(i," ").concat(B(m).objectImgBorderRadiusBottomRight).concat(i," ").concat(B(m).objectImgBorderRadiusBottomLeft).concat(i,";")),B(m).objectImgOverflowIsOn&&e.push("overflow: hidden;"),B(m).objectImgBorderIsOn){var n=B(T)?B(y)&&B(v).selImgBorderColorIsOn&&B(v).selFilterImgBorderColor||B(m).objectImgBorderColor:B(v).reqImgBorderColorIsOn&&B(v).reqFilterImgBorderColor||B(m).objectImgBorderColor;e.push("border: ".concat(B(m).objectImgBorderWidth,"px ").concat(B(m).objectImgBorderStyle," ").concat(xn(n),";"))}return e.join(" ")}),H=M(function(){var e=[];return e.push("font-family: '".concat(B(b).scoreText,"'; font-size: ").concat(B(b).scoreTextSize,"%; text-align: ").concat(B(b).scoreTextAlign,";")),e.push("color: ".concat(xn(B(b).scoreTextColor),";")),B(T)?t.choice.isActive&&B(v).selScoreTextColorIsOn&&e.push("color: ".concat(xn(B(v).selFilterSTextColor))):B(v).reqScoreTextColorIsOn&&e.push("color: ".concat(xn(B(v).reqFilterSTextColor))),e.join(" ")});function Y(e,i){B(T)?(B(y)?(B(v).selFilterBlurIsOn&&(i.blur=" blur(".concat(B(v).selFilterBlur,"px)")),B(v).selFilterBrightIsOn&&(i.brightness=" brightness(".concat(B(v).selFilterBright,"%)")),B(v).selFilterContIsOn&&(i.contrast=" contrast(".concat(B(v).selFilterCont,"%)")),B(v).selFilterGrayIsOn&&(i.grayscale=" grayscale(".concat(B(v).selFilterGray,"%)")),B(v).selFilterHueIsOn&&(i.hueRotate=" hue-rotate(".concat(B(v).selFilterHue,"deg)")),B(v).selFilterInvertIsOn&&(i.invert=" invert(".concat(B(v).selFilterInvert,"%)")),B(v).selFilterOpacIsOn&&(i.opacity=" opacity(".concat(B(v).selFilterOpac,"%)")),B(v).selFilterSaturIsOn&&(i.saturate=" saturate(".concat(B(v).selFilterSatur,")")),B(v).selFilterSepiaIsOn&&(i.sepia=" sepia(".concat(B(v).selFilterGray,"%)")),B(v).selBgColorIsOn&&(e.bgColor="background-color: ".concat(xn(B(v).selFilterBgColor),";")),B(h).objectGradientIsOn&&(e.bgImage="background-image: linear-gradient(".concat(B(h).objectGradientOnSelect,");"))):(B(v).unselFilterBlurIsOn&&(i.blur=" blur(".concat(B(v).unselFilterBlur,"px)")),B(v).unselFilterBrightIsOn&&(i.brightness=" brightness(".concat(B(v).unselFilterBright,"%)")),B(v).unselFilterContIsOn&&(i.contrast=" contrast(".concat(B(v).unselFilterCont,"%)")),B(v).unselFilterGrayIsOn&&(i.grayscale=" grayscale(".concat(B(v).unselFilterGray,"%)")),B(v).unselFilterHueIsOn&&(i.hueRotate=" hue-rotate(".concat(B(v).unselFilterHue,"deg)")),B(v).unselFilterInvertIsOn&&(i.invert=" invert(".concat(B(v).unselFilterInvert,"%)")),B(v).unselFilterOpacIsOn&&(i.opacity=" opacity(".concat(B(v).unselFilterOpac,"%)")),B(v).unselFilterSaturIsOn&&(i.saturate=" saturate(".concat(B(v).unselFilterSatur,")")),B(v).unselFilterSepiaIsOn&&(i.sepia=" sepia(".concat(B(v).unselFilterGray,"%)")),B(h).objectGradientIsOn&&(e.bgImage="background-image: linear-gradient(".concat(B(h).objectGradient,");"))),app.isPointerCursor&&!t.choice.isNotSelectable&&(!t.choice.isSelectableMultiple||t.choice.allowSelectByClick&&0===t.choice.multipleUseVariable)&&(e.cursor="cursor: pointer;")):(B(v).reqFilterBlurIsOn&&(i.blur=" blur(".concat(B(v).reqFilterBlur,"px)")),B(v).reqFilterBrightIsOn&&(i.brightness=" brightness(".concat(B(v).reqFilterBright,"%)")),B(v).reqFilterContIsOn&&(i.contrast=" contrast(".concat(B(v).reqFilterCont,"%)")),B(v).reqFilterGrayIsOn&&(i.grayscale=" grayscale(".concat(B(v).reqFilterGray,"%)")),B(v).reqFilterHueIsOn&&(i.hueRotate=" hue-rotate(".concat(B(v).reqFilterHue,"deg)")),B(v).reqFilterInvertIsOn&&(i.invert=" invert(".concat(B(v).reqFilterInvert,"%)")),B(v).reqFilterOpacIsOn&&(i.opacity=" opacity(".concat(B(v).reqFilterOpac,"%)")),B(v).reqFilterSaturIsOn&&(i.saturate=" saturate(".concat(B(v).reqFilterSatur,")")),B(v).reqFilterSepiaIsOn&&(i.sepia=" sepia(".concat(B(v).reqFilterGray,"%)")),B(v).reqBgColorIsOn&&(e.bgColor="background-color: ".concat(xn(B(v).reqFilterBgColor),";")),B(h).objectGradientIsOn&&(e.bgImage="background-image: linear-gradient(".concat(B(h).objectGradientOnReq,");")))}function Q(e,i,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=o&&o.target?o.target:null,a=i;if(l.isOverDlg=!1,l.isOverImg=!1,!(r&&e.isActive&&e.addons&&e.addons.length>0&&Cn(r,"addon-","addon"))){if(i.isResultRow||i.isGroupRow){var c=zt.get(e.id);void 0!==c&&(a=c.row)}if(e.isSelectableMultiple){if(e.id===t.choice.id&&e.allowSelectByClick&&0===e.multipleUseVariable){if(r&&Cn(r,"multi-","choice-"))return;Mo(e,a,l)}}else!io(e.requireds)||i.isInfoRow||n&&e.isNotSelectable||e.forcedActivated||(e.isActive?e.selectOnce||ko(e,a,l):Bo(e,a,l))}}function ee(e){navigator.clipboard.writeText(t.choice.imageSourceTooltip).then(function(){li.labelText="Tooltip copied to clipboard.",li.isOpen=!0}).catch(function(){console.log(t.choice.imageSourceTooltip),li.labelText="Tooltip text logged to developer console.",li.isOpen=!0})}D(function(){t.mainDiv&&(l.mainDiv=t.mainDiv),t.isBackpack&&(l.isBackpack=t.isBackpack)});var te={activateObject:Q,options:l},ie=E(),oe=U(ie),ne=function(e){var o,n=fc(),r=z(n),f=z(r),g=z(f),m=function(e){var i=Ga(),o=U(i),n=z(o),r=function(e){var t=E(),i=U(t);j(i,function(){return B(A)},function(e){var t=ja(),i=z(t);L(i,function(){return nt.sanitize(B(A),ti)}),Z(function(){return Ye(t,B(H))}),P(e,t)}),P(e,t)};ve(n,function(e){t.row.resultShowRowTitle&&e(r)});var c=ge(n,2),f=function(e){var i=E(),o=U(i),n=function(e){var i=qa();i.__contextmenu=ee,J(i,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.choice.imageSourceTooltip}),Z(function(){tt(i,"src",t.choice.image),Ye(i,B(G)),tt(i,"loading",a()?"eager":"lazy")}),P(e,i)},r=function(e){var i=Pa();Z(function(){tt(i,"src",t.choice.image),Ye(i,B(G)),tt(i,"loading",a()?"eager":"lazy")}),P(e,i)};ve(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),P(e,i)};ve(c,function(e){(1===t.choice.template||t.windowWidth<=1280||t.row.choicesShareTemplate)&&t.choice.image&&!t.row.objectImageRemoved&&e(f)});var v=ge(c,2),g=z(v),m=function(e){var t=E(),i=U(t);j(i,function(){return B(k)},function(e){var t=$a(),i=z(t);L(i,function(){return nt.sanitize(B(k),ti)}),Z(function(){return Ye(t,B(O))}),P(e,t)}),P(e,t)};ve(g,function(e){""===t.choice.title||t.row.objectTitleRemoved||e(m)});var h=ge(g,2),b=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(h,function(e){t.choice.isSelectableMultiple&&B(R)&&0===B(p).multiChoiceCounterPosition&&e(b)});var w=ge(h,2),I=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.choice.scores},Ze,function(e,i){ea(e,{get score(){return B(i)},get row(){return t.row},get choice(){return t.choice}})}),P(e,i)};ve(w,function(e){t.row.objectScoreRemoved||t.choice.showScoreInAddon||e(I)});var y=ge(w,2),x=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(y,function(e){t.choice.isSelectableMultiple&&B(R)&&1===B(p).multiChoiceCounterPosition&&e(x)});var C=ge(y,2),D=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.choice.requireds},Ze,function(e,t){_r(e,{get required(){return B(t)},get scoreText(){return B(H)}})}),P(e,i)};ve(C,function(e){t.row.objectRequirementRemoved||t.choice.showReqInAddon||e(D)});var $=ge(C,2),V=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve($,function(e){t.choice.isSelectableMultiple&&B(R)&&2===B(p).multiChoiceCounterPosition&&e(V)});var N=ge($,2),_=function(e){var i=E(),o=U(i),n=function(e){var i=Va();i.__contextmenu=ee,J(i,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.choice.imageSourceTooltip}),Z(function(){tt(i,"src",t.choice.image),Ye(i,B(G)),tt(i,"loading",a()?"eager":"lazy")}),P(e,i)},r=function(e){var i=Na();Z(function(){tt(i,"src",t.choice.image),Ye(i,B(G)),tt(i,"loading",a()?"eager":"lazy")}),P(e,i)};ve(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),P(e,i)};ve(N,function(e){5===t.choice.template&&t.windowWidth>1280&&t.choice.image&&!t.row.objectImageRemoved&&e(_)});var Y=ge(N,2),K=function(e){var t=E(),i=U(t);j(i,function(){return B(F)},function(e){var t=Wa(),i=z(t);L(i,function(){return nt.sanitize(B(F),ti)}),Z(function(){return Ye(t,B(q))}),P(e,t)}),P(e,t)};ve(Y,function(e){""===t.choice.text||t.row.objectTextRemoved||e(K)});var Q=ge(Y,2),te=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(Q,function(e){t.choice.isSelectableMultiple&&B(R)&&3===B(p).multiChoiceCounterPosition&&e(te)});var ie=ge(Q,2),oe=function(e){var i=E(),o=U(i),n=function(e){var i=Ea();i.__contextmenu=ee,J(i,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.choice.imageSourceTooltip}),Z(function(){tt(i,"src",t.choice.image),Ye(i,B(G)),tt(i,"loading",a()?"eager":"lazy")}),P(e,i)},r=function(e){var i=Ua();Z(function(){tt(i,"src",t.choice.image),Ye(i,B(G)),tt(i,"loading",a()?"eager":"lazy")}),P(e,i)};ve(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),P(e,i)};ve(ie,function(e){4===t.choice.template&&t.windowWidth>1280&&t.choice.image&&!t.row.objectImageRemoved&&e(oe)});var ne=ge(v,2),re=function(e){var i=La();_e(i,21,function(){return B(s)},Ze,function(e,i,o){var n=E(),r=U(n),c=function(e){var n=M(function(){return B(d)===o});Ra(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return B(i)},get isEnabled(){return B(T)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return B(n)},get isBackpack(){return t.isBackpack},get mainDiv(){return t.mainDiv}})};ve(r,function(e){(app.showAllAddons>0||(!B(i).hideAddon||t.choice.isActive)&&(B(i).showAddon||io(B(i).requireds)))&&e(c)}),P(e,n)}),Z(function(){var e;return X(i,1,"row g-0 p-0 w-100".concat(null!==(e=B(S))&&void 0!==e?e:""))}),P(e,i)};ve(ne,function(e){B(s)&&e(re)});var ae=ge(ne,2),ce=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(ae,function(e){t.choice.isSelectableMultiple&&B(R)&&4===B(p).multiChoiceCounterPosition&&e(ce)});var le=ge(o,2),se=function(e){var i=za();_e(i,21,function(){return B(u)},Ze,function(e,i,o){var n=E(),r=U(n),c=function(e){var n=M(function(){return B(d)===o});Ra(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return B(i)},get isEnabled(){return B(T)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return B(n)},get isBackpack(){return t.isBackpack},get mainDiv(){return t.mainDiv}})};ve(r,function(e){(app.showAllAddons>0||(!B(i).hideAddon||t.choice.isActive)&&(B(i).showAddon||io(B(i).requireds)))&&e(c)}),P(e,n)}),Z(function(){var e;return X(i,1,"row g-0 p-0 w-100".concat(null!==(e=B(S))&&void 0!==e?e:""))}),P(e,i)};ve(le,function(e){B(u)&&e(se)}),Z(function(){return Ye(o,B(u)?B(W):void 0)}),P(e,i)},h=function(e){var i=E(),o=U(i),n=function(e){var i=tc(),o=U(i),n=z(o),r=z(n),c=function(e){var i=E(),o=U(i),n=function(e){var i=_a();i.__contextmenu=ee,J(i,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.choice.imageSourceTooltip}),Z(function(){tt(i,"src",t.choice.image),Ye(i,B(G)),tt(i,"loading",a()?"eager":"lazy")}),P(e,i)},r=function(e){var i=Ha();Z(function(){tt(i,"src",t.choice.image),Ye(i,B(G)),tt(i,"loading",a()?"eager":"lazy")}),P(e,i)};ve(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),P(e,i)};ve(r,function(e){t.choice.image&&!t.row.objectImageRemoved&&e(c)});var f=ge(n,2),v=z(f),g=function(e){var t=E(),i=U(t);j(i,function(){return B(k)},function(e){var t=Ya(),i=z(t);L(i,function(){return nt.sanitize(B(k),ti)}),Z(function(){return Ye(t,B(O))}),P(e,t)}),P(e,t)};ve(v,function(e){""===t.choice.title||t.row.objectTitleRemoved||e(g)});var m=ge(v,2),h=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(m,function(e){t.choice.isSelectableMultiple&&B(R)&&0===B(p).multiChoiceCounterPosition&&e(h)});var b=ge(m,2),I=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.choice.scores},Ze,function(e,i){ea(e,{get score(){return B(i)},get row(){return t.row},get choice(){return t.choice}})}),P(e,i)};ve(b,function(e){t.row.objectScoreRemoved||t.choice.showScoreInAddon||e(I)});var y=ge(b,2),x=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(y,function(e){t.choice.isSelectableMultiple&&B(R)&&1===B(p).multiChoiceCounterPosition&&e(x)});var C=ge(y,2),A=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.choice.requireds},Ze,function(e,t){_r(e,{get required(){return B(t)},get scoreText(){return B(H)}})}),P(e,i)};ve(C,function(e){t.row.objectRequirementRemoved||t.choice.showReqInAddon||e(A)});var D=ge(C,2),$=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(D,function(e){t.choice.isSelectableMultiple&&B(R)&&2===B(p).multiChoiceCounterPosition&&e($)});var V=ge(D,2),N=function(e){var i=E(),o=U(i);j(o,function(){return B(F)},function(e){var i=Ja(),o=z(i);L(o,function(){return nt.sanitize(Ji(t.choice.text),ti)}),Z(function(){return Ye(i,B(q))}),P(e,i)}),P(e,i)};ve(V,function(e){""===t.choice.text||t.row.objectTextRemoved||e(N)});var _=ge(V,2),Y=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(_,function(e){t.choice.isSelectableMultiple&&B(R)&&3===B(p).multiChoiceCounterPosition&&e(Y)});var K=ge(_,2),Q=function(e){var i=Xa(),o=U(i),n=function(e){var i=Za();_e(i,21,function(){return B(s)},Ze,function(e,i,o){var n=E(),r=U(n),c=function(e){var n=M(function(){return B(d)===o});Ra(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return B(i)},get isEnabled(){return B(T)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return B(n)},get isBackpack(){return t.isBackpack},get mainDiv(){return t.mainDiv}})};ve(r,function(e){(app.showAllAddons>0||(!B(i).hideAddon||t.choice.isActive)&&(B(i).showAddon||io(B(i).requireds)))&&e(c)}),P(e,n)}),Z(function(){var e;return X(i,1,"row g-0 p-0 col w-100".concat(null!==(e=B(S))&&void 0!==e?e:""))}),P(e,i)};ve(o,function(e){B(s)&&e(n)});var r=ge(o,2),c=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(r,function(e){t.choice.isSelectableMultiple&&B(R)&&4===B(p).multiChoiceCounterPosition&&e(c)}),P(e,i)};ve(K,function(e){t.choice.useSeperateAddon||e(Q)});var te=ge(f,2),ie=function(e){var i=Qa(),o=z(i),n=function(e){var i=Ka();_e(i,21,function(){return B(s)},Ze,function(e,i,o){var n=E(),r=U(n),c=function(e){var n=M(function(){return B(d)===o});Ra(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return B(i)},get isEnabled(){return B(T)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return B(n)},get isBackpack(){return t.isBackpack},get mainDiv(){return t.mainDiv}})};ve(r,function(e){(app.showAllAddons>0||(!B(i).hideAddon||t.choice.isActive)&&(B(i).showAddon||io(B(i).requireds)))&&e(c)}),P(e,n)}),Z(function(){var e;return X(i,1,"row g-0 p-0 col w-100".concat(null!==(e=B(S))&&void 0!==e?e:""))}),P(e,i)};ve(o,function(e){B(s)&&e(n)});var r=ge(o,2),c=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(r,function(e){t.choice.isSelectableMultiple&&B(R)&&4===B(p).multiChoiceCounterPosition&&e(c)}),P(e,i)};ve(te,function(e){t.choice.useSeperateAddon&&e(ie)});var oe=ge(o,2),ne=function(e){var i=ec();_e(i,21,function(){return B(u)},Ze,function(e,i,o){var n=E(),r=U(n),c=function(e){var n=M(function(){return B(d)===o});Ra(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return B(i)},get isEnabled(){return B(T)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return B(n)},get isBackpack(){return t.isBackpack},get mainDiv(){return t.mainDiv}})};ve(r,function(e){(app.showAllAddons>0||(!B(i).hideAddon||t.choice.isActive)&&(B(i).showAddon||io(B(i).requireds)))&&e(c)}),P(e,n)}),Z(function(){var e;return X(i,1,"row g-0 p-0 col w-100".concat(null!==(e=B(S))&&void 0!==e?e:""))}),P(e,i)};ve(oe,function(e){B(u)&&e(ne)}),Z(function(){var e;Ye(o,B(u)?B(W):void 0),Ye(n,"max-width: ".concat(null!==(e=B(w))&&void 0!==e?e:"","%")),Ye(f,"max-width: ".concat(100-B(w),"%"))}),P(e,i)},r=function(e){var i=E(),o=U(i),n=function(e){var i=dc(),o=U(i),n=z(o),r=z(n),c=function(e){var t=E(),i=U(t);j(i,function(){return B(k)},function(e){var t=ic(),i=z(t);L(i,function(){return nt.sanitize(B(k),ti)}),Z(function(){return Ye(t,B(O))}),P(e,t)}),P(e,t)};ve(r,function(e){""===t.choice.title||t.row.objectTitleRemoved||e(c)});var f=ge(r,2),v=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(f,function(e){t.choice.isSelectableMultiple&&B(R)&&0===B(p).multiChoiceCounterPosition&&e(v)});var g=ge(f,2),m=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.choice.scores},Ze,function(e,i){ea(e,{get score(){return B(i)},get row(){return t.row},get choice(){return t.choice}})}),P(e,i)};ve(g,function(e){t.row.objectScoreRemoved||t.choice.showScoreInAddon||e(m)});var h=ge(g,2),b=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(h,function(e){t.choice.isSelectableMultiple&&B(R)&&1===B(p).multiChoiceCounterPosition&&e(b)});var I=ge(h,2),y=function(e){var i=E(),o=U(i);_e(o,17,function(){return t.choice.requireds},Ze,function(e,t){_r(e,{get required(){return B(t)},get scoreText(){return B(H)}})}),P(e,i)};ve(I,function(e){t.row.objectRequirementRemoved||t.choice.showReqInAddon||e(y)});var x=ge(I,2),C=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(x,function(e){t.choice.isSelectableMultiple&&B(R)&&2===B(p).multiChoiceCounterPosition&&e(C)});var A=ge(x,2),D=function(e){var t=E(),i=U(t);j(i,function(){return B(F)},function(e){var t=oc(),i=z(t);L(i,function(){return nt.sanitize(B(F),ti)}),Z(function(){return Ye(t,B(q))}),P(e,t)}),P(e,t)};ve(A,function(e){""===t.choice.text||t.row.objectTextRemoved||e(D)});var $=ge(A,2),V=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve($,function(e){t.choice.isSelectableMultiple&&B(R)&&3===B(p).multiChoiceCounterPosition&&e(V)});var N=ge($,2),_=function(e){var i=rc(),o=U(i),n=function(e){var i=nc();_e(i,21,function(){return B(s)},Ze,function(e,i,o){var n=E(),r=U(n),c=function(e){var n=M(function(){return B(d)===o});Ra(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return B(i)},get isEnabled(){return B(T)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return B(n)},get isBackpack(){return t.isBackpack},get mainDiv(){return t.mainDiv}})};ve(r,function(e){(app.showAllAddons>0||(!B(i).hideAddon||t.choice.isActive)&&(B(i).showAddon||io(B(i).requireds)))&&e(c)}),P(e,n)}),Z(function(){var e;return X(i,1,"row g-0 p-0 col w-100".concat(null!==(e=B(S))&&void 0!==e?e:""))}),P(e,i)};ve(o,function(e){B(s)&&e(n)});var r=ge(o,2),c=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(r,function(e){t.choice.isSelectableMultiple&&B(R)&&4===B(p).multiChoiceCounterPosition&&e(c)}),P(e,i)};ve(N,function(e){t.choice.useSeperateAddon||e(_)});var Y=ge(n,2),K=z(Y),Q=function(e){var i=E(),o=U(i),n=function(e){var i=ac();i.__contextmenu=ee,J(i,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.choice.imageSourceTooltip}),Z(function(){tt(i,"src",t.choice.image),Ye(i,B(G)),tt(i,"loading",a()?"eager":"lazy")}),P(e,i)},r=function(e){var i=cc();Z(function(){tt(i,"src",t.choice.image),Ye(i,B(G)),tt(i,"loading",a()?"eager":"lazy")}),P(e,i)};ve(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),P(e,i)};ve(K,function(e){t.choice.image&&!t.row.objectImageRemoved&&e(Q)});var te=ge(Y,2),ie=function(e){var i=sc(),o=z(i),n=function(e){var i=lc();_e(i,21,function(){return B(s)},Ze,function(e,i,o){var n=E(),r=U(n),c=function(e){var n=M(function(){return B(d)===o});Ra(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return B(i)},get isEnabled(){return B(T)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return B(n)},get isBackpack(){return t.isBackpack},get mainDiv(){return t.mainDiv}})};ve(r,function(e){(app.showAllAddons>0||(!B(i).hideAddon||t.choice.isActive)&&(B(i).showAddon||io(B(i).requireds)))&&e(c)}),P(e,n)}),Z(function(){var e;return X(i,1,"row g-0 p-0 col w-100".concat(null!==(e=B(S))&&void 0!==e?e:""))}),P(e,i)};ve(o,function(e){B(s)&&e(n)});var r=ge(o,2),c=function(e){var i=M(function(){return B(T)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});ra(e,{get isEnabled(){return B(i)},get row(){return t.row},get choice(){return t.choice},selectedOneMore:function(){return Mo(t.choice,t.row,l)},selectedOneLess:function(){return Do(t.choice,t.row,l)}})};ve(r,function(e){t.choice.isSelectableMultiple&&B(R)&&4===B(p).multiChoiceCounterPosition&&e(c)}),P(e,i)};ve(te,function(e){t.choice.useSeperateAddon&&e(ie)});var oe=ge(o,2),ne=function(e){var i=uc();_e(i,21,function(){return B(u)},Ze,function(e,i,o){var n=E(),r=U(n),c=function(e){var n=M(function(){return B(d)===o});Ra(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return B(i)},get isEnabled(){return B(T)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return B(n)},get isBackpack(){return t.isBackpack},get mainDiv(){return t.mainDiv}})};ve(r,function(e){(app.showAllAddons>0||(!B(i).hideAddon||t.choice.isActive)&&(B(i).showAddon||io(B(i).requireds)))&&e(c)}),P(e,n)}),Z(function(){var e;return X(i,1,"row g-0 p-0 col w-100".concat(null!==(e=B(S))&&void 0!==e?e:""))}),P(e,i)};ve(oe,function(e){B(u)&&e(ne)}),Z(function(){var e;Ye(o,B(u)?B(W):void 0),Ye(n,"max-width: ".concat(100-B(w),"%")),Ye(Y,"max-width: ".concat(null!==(e=B(w))&&void 0!==e?e:"","%"))}),P(e,i)};ve(o,function(e){3===t.choice.template&&e(n)},!0),P(e,i)};ve(o,function(e){2===t.choice.template?e(n):e(r,!1)}),P(e,i)};ve(g,function(e){t.choice.template>=4||1===t.choice.template||t.windowWidth<=1280||t.row.choicesShareTemplate?e(m):e(h,!1)}),Z(function(e,i){var a,c;X(n,1,e),o=X(r,1,"d-flex",null,o,i),X(f,1,"row row-".concat(null!==(a=t.row.id)&&void 0!==a?a:""," choice-").concat(null!==(c=t.choice.id)&&void 0!==c?c:""," ").concat(B(y)?"choice-selected":"choice-unselected"," ").concat(B(T)?"choice-enabled":"choice-disabled"," ").concat(B(y)&&B(v).selOverlayOnImage||!B(T)&&B(v).reqOverlayOnImage?"bg-overlay ":"","w-100")),Ye(f,B(N))},[function(){return K(function(){if(c())return"col-sm-6 col-12";var e=t.choice.objectWidth||t.row.objectWidth,o=Gi(e),n="col-6"===app.objectsPerRow?2:"col-4"===app.objectsPerRow?3:4;if(i()>1280)return e;if(!(i()>720))return i()>480?1===o?"col-12":"col-6":"col-12";switch(o){case 1:return"col-12";case 2:return"col-6";case 3:return n>2?"col-4":app.objectsPerRow;case 4:return n>3?"col-3":app.objectsPerRow;default:return app.objectsPerRow}}())},function(){return{fullHeight:B(x)}}]),et("click",f,function(e){return Q(t.choice,t.row,e,!0)},!0),P(e,n)};ve(oe,function(e){B(I)&&e(ne)}),P(e,ie);var re=$(te);return r(),re}Ke(["contextmenu"]);var gc=R('<div class="d-flex mb-2 justify-center"><!></div>'),pc=R('<div class="row g-0"></div>'),mc=R("<!> <!> <!> <!>",1);var hc=R('<img alt=""/>'),bc=R('<img alt=""/>'),wc=R('<h2 class="mb-0"><!></h2>'),Tc=R('<img alt=""/>'),Ic=R('<img alt=""/>'),Sc=R('<p class="mb-0"><!></p>'),yc=R('<img alt=""/>'),xc=R('<img alt=""/>'),Cc=R('<div class="col-12 m-0 p-0"><!> <!> <!> <!> <!></div>'),Oc=R('<h2 class="mb-0"><!></h2>'),Ac=R('<p class="mb-0"><!></p>'),kc=R('<img alt=""/>'),Bc=R('<img alt=""/>'),Mc=R('<div class="col p-0 text-center"><!> <!></div> <div class="col p-0 text-center"><!></div>',1),Dc=R('<img alt=""/>'),Fc=R('<img alt=""/>'),Rc=R('<h2 class="mb-0"><!></h2>'),jc=R('<p class="mb-0"><!></p>'),qc=R('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!></div>',1),Pc=R("<div><!></div>"),$c=R("<div><!></div>"),Vc=R("<div><!> <!></div>");function Nc(e,t){V(t,!0);var i=_(t,"preloadImages",3,!1),o=_(t,"isBackpack",3,!1),n={linkedObjects:[]},r=N(void 0),a=M(function(){return Zi("privateBackgroundIsOn",t.row)}),c=M(function(){return Zi("privateRowImageIsOn",t.row)}),l=M(function(){return Zi("privateRowIsOn",t.row)}),s=M(function(){return Zi("privateTextIsOn",t.row)}),u=N(0),f=M(function(){return void 0!==B(c).rowImageBoxWidth?B(c).rowImageBoxWidth:50}),v=M(function(){return io(t.row.requireds)}),p=M(function(){return t.row.onlyIfNoChoices&&0!==t.row.currentChoices}),h=M(function(){return t.row.rowJustify?"justify-".concat(t.row.rowJustify):""}),b=M(function(){return Ji(t.row.title)}),T=M(function(){return Ji(t.row.titleText)}),I=M(function(){var e=[];if(void 0!==t.row.resultGroupId&&""!==t.row.resultGroupId&&t.row.resultGroupId){var i,o=w(Wt);try{for(o.s();!(i=o.n()).done;){var n=g(i.value,1)[0],r=zt.get(n);if(void 0!==r){var a=r.choice,c=r.row;if(!a.isNotResult)if(t.row.resultGroupId===c.resultGroupId)e.push({choice:a,row:c});else if(void 0!==a.groups)for(var l=0;l<a.groups.length;l++)if(a.groups[l]===t.row.resultGroupId){e.push({choice:a,row:c});break}}}}catch(m){o.e(m)}finally{o.f()}}else{var s,u=w(Wt);try{for(u.s();!(s=u.n()).done;){var d=g(s.value,1)[0],f=zt.get(d);if(void 0!==f){var v=f.choice,p=f.row;v.isNotResult||e.push({choice:v,row:p})}}}catch(m){u.e(m)}finally{u.f()}}return e.sort(function(e,t){return e.row.index!==t.row.index?e.row.index-t.row.index:e.choice.index-t.choice.index}),e}),S=M(function(){var e=[];if(void 0!==t.row.resultGroupId){var i=Gt.get(t.row.resultGroupId);if(void 0!==i)for(var o=0;o<i.elements.length;o++){var n=zt.get(i.elements[o]);void 0!==n&&e.push({choice:n.choice,row:n.row})}}return e.sort(function(e,t){return e.row.index!==t.row.index?e.row.index-t.row.index:e.choice.index-t.choice.index}),e}),y=M(function(){if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.backgroundImage)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(var e=0;e<t.row.rowDesignGroups.length;e++){var i=Jt.get(t.row.rowDesignGroups[e]);if(void 0!==i&&i.privateBackgroundIsOn&&i.styling.backgroundImage){var o=i.activatedId,n=_t.get(o);if(""===o||Ki(i.activatedId))return i.styling;if(void 0!==app.globalRequirements&&void 0!==n&&io(n.requireds))return i.styling}}return!1}),x=M(function(){if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.bgColorIsOn&&t.row.styling.backgroundColor)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(var e=0;e<t.row.rowDesignGroups.length;e++){var i=Jt.get(t.row.rowDesignGroups[e]);if(void 0!==i&&i.privateBackgroundIsOn&&i.styling.bgColorIsOn&&i.styling.backgroundColor){var o=i.activatedId,n=_t.get(o);if(""===o||Ki(i.activatedId))return i.styling;if(void 0!==app.globalRequirements&&void 0!==n&&io(n.requireds))return i.styling}}return!1}),C=M(function(){var e=[];return e.push("margin: ".concat(B(l).rowBodyMarginTop,"px ").concat(B(l).rowBodyMarginSides,"% ").concat(B(l).rowBodyMarginBottom,"px ").concat(B(l).rowBodyMarginSides,"%;")),B(y)&&e.push("background-image: url('".concat(B(y).backgroundImage,"'); ").concat(B(y).isBackgroundRepeat?"background-repeat: repeat;":B(y).isBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),B(x)&&e.push("background-color: ".concat(xn(B(x).backgroundColor),";")),e.join(" ")}),O=M(function(){var e=B(l).rowBorderRadiusIsPixels?"px":"%",t=[];return B(l).rowBorderImage&&t.push("border-image: url('".concat(B(l).rowBorderImage,"') ").concat(B(l).rowBorderImageSliceTop," ").concat(B(l).rowBorderImageSliceRight," ").concat(B(l).rowBorderImageSliceBottom," ").concat(B(l).rowBorderImageSliceLeft," / ").concat(B(l).rowBorderImageWidth,"px ").concat(B(l).rowBorderImageRepeat,"; border-style: solid; padding: ").concat(B(l).rowBorderImageWidth,"px;")),B(a).rowBackgroundImage&&t.push("background-image: url('".concat(B(a).rowBackgroundImage,"'); ").concat(B(a).isRowBackgroundRepeat?"background-repeat: repeat;":B(a).isRowBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),B(a).rowBgColorIsOn&&t.push("background-color: ".concat(xn(B(a).rowBgColor),";")),t.push("margin-left: ".concat(B(l).rowMargin,"%; margin-right: ").concat(B(l).rowMargin,"%;")),B(l).rowGradientIsOn&&t.push("background-image: linear-gradient(".concat(B(l).rowGradient,");")),t.push("border-radius: ".concat(B(l).rowBorderRadiusTopLeft).concat(e," ").concat(B(l).rowBorderRadiusTopRight).concat(e," ").concat(B(l).rowBorderRadiusBottomRight).concat(e," ").concat(B(l).rowBorderRadiusBottomLeft).concat(e,";")),B(l).rowOverflowIsOn&&t.push("overflow: hidden;"),B(l).rowBorderIsOn&&t.push("border: ".concat(B(l).rowBorderWidth,"px ").concat(B(l).rowBorderStyle," ").concat(xn(B(l).rowBorderColor),";")),B(l).rowDropShadowIsOn&&(B(l).rowUseBoxShadowIsOn?t.push("box-shadow: ".concat(B(l).rowDropShadowH,"px ").concat(B(l).rowDropShadowV,"px ").concat(B(l).rowDropShadowBlur,"px ").concat(B(l).rowDropShadowSpread,"px ").concat(xn(B(l).rowDropShadowColor),";")):t.push("filter: drop-shadow(".concat(B(l).rowDropShadowH,"px ").concat(B(l).rowDropShadowV,"px ").concat(B(l).rowDropShadowBlur,"px ").concat(xn(B(l).rowDropShadowColor),");"))),t.join(" ")}),A=M(function(){return"white-space: pre-line; font-family: '".concat(B(s).rowTitle,"'; font-size: ").concat(B(s).rowTitleTextSize,"%; text-align: ").concat(B(s).rowTitleAlign,"; color: ").concat(xn(B(s).rowTitleColor))}),k=M(function(){return"white-space: pre-wrap; font-family: '".concat(B(s).rowText,"'; font-size: ").concat(B(s).rowTextTextSize,"%; text-align: ").concat(B(s).rowTextAlign,"; color: ").concat(xn(B(s).rowTextColor),"; padding: ").concat(B(l).rowTextPaddingX,"px ").concat(B(l).rowTextPaddingY,"% ").concat(B(l).rowTextPaddingX,"px ").concat(B(l).rowTextPaddingY,"%;")}),F=M(function(){var e=B(c).rowImgBorderRadiusIsPixels?"px":"%",t=[];if(t.push("width: ".concat(B(c).rowImageWidth,"%; margin-top: ").concat(B(c).rowImageMarginTop,"%; margin-bottom: ").concat(B(c).rowImageMarginBottom,"%;")),B(c).rowImgObjectFillIsOn){t.push("object-fit: ".concat(B(c).rowImgObjectFillStyle,";"));var i=B(c).rowImgObjectFillHeight;i&&t.push("height: ".concat(i,"px;"))}return t.push("border-radius: ".concat(B(c).rowImgBorderRadiusTopLeft).concat(e," ").concat(B(c).rowImgBorderRadiusTopRight).concat(e," ").concat(B(c).rowImgBorderRadiusBottomRight).concat(e," ").concat(B(c).rowImgBorderRadiusBottomLeft).concat(e,";")),B(c).rowImgOverflowIsOn&&t.push("overflow: hidden;"),B(c).rowImgBorderIsOn&&t.push("border: ".concat(B(c).rowImgBorderWidth,"px ").concat(B(c).rowImgBorderStyle," ").concat(xn(B(c).rowImgBorderColor),";")),t.join(" ")}),R=M(function(){return"padding-left: ".concat(B(l).rowButtonYPadding,"px; padding-right: ").concat(B(l).rowButtonYPadding,"px; padding-top: ").concat(B(l).rowButtonXPadding,"px; padding-bottom: ").concat(B(l).rowButtonXPadding,"px;")});function W(){if(t.row.btnPointAddon&&"sumaddon"===t.row.buttonTypeRadio&&void 0!==t.row.pointTypeRandom){var e=t.row.randomMax||0,i=t.row.randomMin||0,o=Math.floor(Math.random()*(e-i)+i),a=new d,c=Ut.get(t.row.pointTypeRandom);if(void 0!==c){if(c.belowZeroNotAllowed&&c.startingSum+o<0)return;var l=Wt.get(t.row.id),s=0;c.startingSum+=o,void 0!==l&&l.pointNum&&(s=l.pointNum),Array.from(Wt.entries()).forEach(function(e){var t=g(e,2),i=t[0],o=t[1],r=zt.get(i);if(void 0!==r){var a=r.row,c=r.choice;if(!io(c.requireds))if(c.forcedActivated&&(delete c.forcedActivated,c.isAllowDeselect||Et.set(c.id,{multiple:o.multiple})),0===o.multiple){if(c.isActive){var l=m({},n);l.isOverDlg=!0,l.isOverImg=!0,ko(c,a,l)}}else if(o.multiple>0)for(var s=0;s<o.multiple;s++)if(c.isActive){var u=m({},n);u.isOverDlg=!0,u.isOverImg=!0,Do(c,a,u)}}}),Wt.set(t.row.id,{multiple:0,isRowButton:!0,rndPoint:t.row.pointTypeRandom,pointNum:s+o}),a.set(c.id,o),Oo(null,a,0,void 0,void 0,n),Ao(n)}}else if(t.row.buttonRandom){var u=[],f=t.row.objects.filter(function(e){return io(e.requireds)&&(!e.isNotSelectable||t.row.allowActivateUnselectable)});if(t.row.isWeightedRandom){for(var v=0,p=0;p<f.length;p++){v+=f[p].randomWeight||100}if(void 0!==t.row.buttonRandomNumber)for(var h=0;h<t.row.buttonRandomNumber;h++)for(var b=Math.floor(Math.random()*v),w=0,T=0;T<f.length;T++){var I=f[T];if(b<(w+=I.randomWeight||100)){I.isSelectableMultiple&&I.isMultipleUseVariable&&I.numMultipleTimesPluss?I.numMultipleTimesPluss>I.multipleUseVariable?Mo(I,t.row,B(r).options):Do(I,t.row,B(r).options):B(r).activateObject(I,t.row);break}}}else if(void 0!==t.row.buttonRandomNumber)for(var S=0;S<t.row.buttonRandomNumber;S++){var y=0,x=void 0,C=void 0;do{x=f[C=Math.floor(Math.random()*f.length)],y++}while(t.row.onlyUnselectedChoices&&(-1!==u.indexOf(C)||Wt.has(x.id))&&y<100);x&&-1===u.indexOf(C)&&(u.push(C),x.isSelectableMultiple&&x.isMultipleUseVariable&&x.numMultipleTimesPluss?x.numMultipleTimesPluss>x.multipleUseVariable?Mo(x,t.row,B(r).options):Do(x,t.row,B(r).options):B(r).activateObject(x,t.row))}}else if(void 0!==t.row.buttonId){var O=Yt.get(t.row.buttonId);void 0!==O&&(Wt.has(O.id)?t.row.buttonType&&(O.isTrue=!1,Wt.delete(O.id)):(O.isTrue=!0,Wt.set(O.id,{multiple:0,isVariable:!0})))}}function H(e){navigator.clipboard.writeText(t.row.imageSourceTooltip).then(function(){li.labelText="Tooltip copied to clipboard.",li.isOpen=!0}).catch(function(){console.log(t.row.imageSourceTooltip),li.labelText="Tooltip text logged to developer console.",li.isOpen=!0})}D(function(){if(t.row.deselectChoices&&!B(v))for(var e=0;e<t.row.objects.length;e++){var i=t.row.objects[e];if(i.isActive)if(i.isSelectableMultiple){if(i.isMultipleUseVariable){var o=i.multipleUseVariable;if(o>0)for(var n=0;n<o;n++)Do(i,t.row,B(r).options);else if(o<0)for(var a=o;a<0;a++)Mo(i,t.row,B(r).options)}}else B(r).activateObject(i,t.row)}});var Y=Vc(),K=z(Y),Q=function(e){var o=Pc(),n=z(o),r=function(e){var o=Cc(),n=z(o),r=function(e){var o=E(),n=U(o),r=function(e){var i=M(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Wt.has(t.row.buttonId)||B(p)});Me(e,{class:"row-button",onclickcapture:W,get disabled(){return B(i)},get style(){return B(R)},variant:"raised",children:function(e,i){De(e,{children:function(e,i){var o=E(),n=U(o);L(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),P(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e){var o=E(),n=U(o),r=function(e){var o=E(),n=U(o),r=function(e){var o=hc();o.__contextmenu=H,J(o,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.row.imageSourceTooltip}),Z(function(){tt(o,"src",t.row.image),Ye(o,B(F)),tt(o,"loading",i()?"eager":"lazy")}),P(e,o)},a=function(e){var o=bc();Z(function(){tt(o,"src",t.row.image),Ye(o,B(F)),tt(o,"loading",i()?"eager":"lazy")}),P(e,o)};ve(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),P(e,o)};ve(n,function(e){t.row.image&&e(r)},!0),P(e,o)};ve(n,function(e){t.row.isButtonRow?e(r):e(a,!1)}),P(e,o)};ve(n,function(e){(1===t.row.template||t.windowWidth<=1280)&&e(r)});var a=ge(n,2),c=function(e){var t=E(),i=U(t);j(i,function(){return B(b)},function(e){var t=wc(),i=z(t);L(i,function(){return nt.sanitize(B(b),ti)}),Z(function(){return Ye(t,B(A))}),P(e,t)}),P(e,t)};ve(a,function(e){""!==t.row.title&&e(c)});var l=ge(a,2),s=function(e){var o=E(),n=U(o),r=function(e){var i=M(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Wt.has(t.row.buttonId)||B(p)});Me(e,{class:"row-button",onclickcapture:W,get disabled(){return B(i)},get style(){return B(R)},variant:"raised",children:function(e,i){De(e,{children:function(e,i){var o=E(),n=U(o);L(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),P(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e){var o=E(),n=U(o),r=function(e){var o=E(),n=U(o),r=function(e){var o=Tc();o.__contextmenu=H,J(o,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.row.imageSourceTooltip}),Z(function(){tt(o,"src",t.row.image),Ye(o,B(F)),tt(o,"loading",i()?"eager":"lazy")}),P(e,o)},a=function(e){var o=Ic();Z(function(){tt(o,"src",t.row.image),Ye(o,B(F)),tt(o,"loading",i()?"eager":"lazy")}),P(e,o)};ve(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),P(e,o)};ve(n,function(e){t.row.image&&e(r)},!0),P(e,o)};ve(n,function(e){t.row.isButtonRow?e(r):e(a,!1)}),P(e,o)};ve(l,function(e){5===t.row.template&&t.windowWidth>1280&&e(s)});var u=ge(l,2),d=function(e){var t=E(),i=U(t);j(i,function(){return B(T)},function(e){var t=Sc(),i=z(t);L(i,function(){return nt.sanitize(B(T),ti)}),Z(function(){return Ye(t,B(k))}),P(e,t)}),P(e,t)};ve(u,function(e){""!==t.row.titleText&&e(d)});var f=ge(u,2),v=function(e){var o=E(),n=U(o),r=function(e){var i=M(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Wt.has(t.row.buttonId)||B(p)});Me(e,{class:"row-button",onclickcapture:W,get disabled(){return B(i)},get style(){return B(R)},variant:"raised",children:function(e,i){De(e,{children:function(e,i){var o=E(),n=U(o);L(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),P(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e){var o=E(),n=U(o),r=function(e){var o=E(),n=U(o),r=function(e){var o=yc();o.__contextmenu=H,J(o,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.row.imageSourceTooltip}),Z(function(){tt(o,"src",t.row.image),Ye(o,B(F)),tt(o,"loading",i()?"eager":"lazy")}),P(e,o)},a=function(e){var o=xc();Z(function(){tt(o,"src",t.row.image),Ye(o,B(F)),tt(o,"loading",i()?"eager":"lazy")}),P(e,o)};ve(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),P(e,o)};ve(n,function(e){t.row.image&&e(r)},!0),P(e,o)};ve(n,function(e){t.row.isButtonRow?e(r):e(a,!1)}),P(e,o)};ve(f,function(e){4===t.row.template&&t.windowWidth>1280&&e(v)}),P(e,o)},a=function(e){var o=E(),n=U(o),r=function(e){var o=Mc(),n=U(o),r=z(n),a=function(e){var t=E(),i=U(t);j(i,function(){return B(b)},function(e){var t=Oc(),i=z(t);L(i,function(){return nt.sanitize(B(b),ti)}),Z(function(){return Ye(t,B(A))}),P(e,t)}),P(e,t)};ve(r,function(e){""!==t.row.title&&e(a)});var c=ge(r,2),l=function(e){var t=E(),i=U(t);j(i,function(){return B(T)},function(e){var t=Ac(),i=z(t);L(i,function(){return nt.sanitize(B(T),ti)}),Z(function(){return Ye(t,B(k))}),P(e,t)}),P(e,t)};ve(c,function(e){""!==t.row.titleText&&e(l)});var s=ge(n,2),u=z(s),d=function(e){var i=M(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Wt.has(t.row.buttonId)||B(p)});Me(e,{class:"row-button",onclickcapture:W,get disabled(){return B(i)},get style(){return B(R)},variant:"raised",children:function(e,i){De(e,{children:function(e,i){var o=E(),n=U(o);L(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),P(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},v=function(e){var o=E(),n=U(o),r=function(e){var o=E(),n=U(o),r=function(e){var o=kc();o.__contextmenu=H,J(o,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.row.imageSourceTooltip}),Z(function(){tt(o,"src",t.row.image),Ye(o,B(F)),tt(o,"loading",i()?"eager":"lazy")}),P(e,o)},a=function(e){var o=Bc();Z(function(){tt(o,"src",t.row.image),Ye(o,B(F)),tt(o,"loading",i()?"eager":"lazy")}),P(e,o)};ve(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),P(e,o)};ve(n,function(e){t.row.image&&e(r)},!0),P(e,o)};ve(u,function(e){t.row.isButtonRow?e(d):e(v,!1)}),Z(function(){var e;Ye(n,"max-width: ".concat(100-B(f),"%")),Ye(s,"max-width: ".concat(null!==(e=B(f))&&void 0!==e?e:"","%"))}),P(e,o)},a=function(e){var o=E(),n=U(o),r=function(e){var o=qc(),n=U(o),r=z(n),a=function(e){var i=M(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Wt.has(t.row.buttonId)||B(p)});Me(e,{class:"row-button",onclickcapture:W,get disabled(){return B(i)},get style(){return B(R)},variant:"raised",children:function(e,i){De(e,{children:function(e,i){var o=E(),n=U(o);L(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),P(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},c=function(e){var o=E(),n=U(o),r=function(e){var o=E(),n=U(o),r=function(e){var o=Dc();o.__contextmenu=H,J(o,function(e,t){return null==kn?void 0:kn(e,t)},function(){return t.row.imageSourceTooltip}),Z(function(){tt(o,"src",t.row.image),Ye(o,B(F)),tt(o,"loading",i()?"eager":"lazy")}),P(e,o)},a=function(e){var o=Fc();Z(function(){tt(o,"src",t.row.image),Ye(o,B(F)),tt(o,"loading",i()?"eager":"lazy")}),P(e,o)};ve(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),P(e,o)};ve(n,function(e){t.row.image&&e(r)},!0),P(e,o)};ve(r,function(e){t.row.isButtonRow?e(a):e(c,!1)});var l=ge(n,2),s=z(l),u=function(e){var t=E(),i=U(t);j(i,function(){return B(b)},function(e){var t=Rc(),i=z(t);L(i,function(){return nt.sanitize(B(b),ti)}),Z(function(){return Ye(t,B(A))}),P(e,t)}),P(e,t)};ve(s,function(e){""!==t.row.title&&e(u)});var d=ge(s,2),v=function(e){var t=E(),i=U(t);j(i,function(){return B(T)},function(e){var t=jc(),i=z(t);L(i,function(){return nt.sanitize(B(T),ti)}),Z(function(){return Ye(t,B(k))}),P(e,t)}),P(e,t)};ve(d,function(e){""!==t.row.titleText&&e(v)}),Z(function(){var e;Ye(n,"max-width: ".concat(null!==(e=B(f))&&void 0!==e?e:"","%")),Ye(l,"max-width: ".concat(100-B(f),"%"))}),P(e,o)};ve(n,function(e){3===t.row.template&&e(r)},!0),P(e,o)};ve(n,function(e){2===t.row.template?e(r):e(a,!1)}),P(e,o)};ve(n,function(e){t.row.template>=4||1===t.row.template||t.windowWidth<=1280?e(r):e(a,!1)}),Z(function(){var e,i;X(o,1,"row gx-0 row-".concat(null!==(e=t.row.id)&&void 0!==e?e:""," row-").concat(null!==(i=t.row.id)&&void 0!==i?i:"","-header")),Ye(o,""!==t.row.title?B(O):"")}),P(e,o)};ve(K,function(e){B(v)&&e(Q)});var ee=ge(K,2),te=function(e){var n=$c(),a=z(n),c=function(e){var o=E(),n=U(o);_e(n,17,function(){return B(I)},Ze,function(e,o,n){q(vc(e,{get row(){return t.row},get choice(){return B(o).choice},index:n,get windowWidth(){return t.windowWidth},get preloadImages(){return i()}}),function(e){return G(r,e,!0)},function(){return B(r)})}),P(e,o)},l=function(e){var n=E(),a=U(n),c=function(e){var n=E(),a=U(n);_e(a,17,function(){return B(S)},Ze,function(e,n,a){q(vc(e,{get row(){return t.row},get choice(){return B(n).choice},index:a,get windowWidth(){return t.windowWidth},get preloadImages(){return i()},get isBackpack(){return o()},get mainDiv(){return t.mainDiv}}),function(e){return G(r,e,!0)},function(){return B(r)})}),P(e,n)},l=function(e){var n=E(),a=U(n);_e(a,17,function(){return t.row.objects},Ze,function(e,n,a){q(vc(e,{get row(){return t.row},get choice(){return B(n)},index:a,get windowWidth(){return t.windowWidth},get preloadImages(){return i()},get isBackpack(){return o()},get mainDiv(){return t.mainDiv}}),function(e){return G(r,e,!0)},function(){return B(r)})}),P(e,n)};ve(a,function(e){t.row.isGroupRow?e(c):e(l,!1)},!0),P(e,n)};ve(a,function(e){t.row.isResultRow?e(c):e(l,!1)}),Z(function(){var e;return X(n,1,"row gx-0 m-0 p-0 ".concat(null!==(e=B(h))&&void 0!==e?e:""))}),P(e,n)};ve(ee,function(e){B(v)&&e(te)}),Z(function(){var e;X(Y,1,"row-".concat(null!==(e=t.row.id)&&void 0!==e?e:"","-bg text-center").concat(B(v)?"":" hidden")),Ye(Y,B(C))}),at(Y,"clientWidth",function(e){return G(u,e)}),P(e,Y),$()}Ke(["contextmenu"]);var Wc=R("<!> <!>",1),Ec=R('<div class="p-0 col-12"><!></div>'),Uc=R("<div><!></div>"),Lc=R('<div class="container-fluid p-0 h-100"><div class="row gx-0"></div></div>'),zc=R("<!> <!> <!>",1);function Gc(e,t){V(t,!0);var i=_(t,"open",7),o=N(0),n=N(void 0),r=N(void 0),a=M(function(){var e=[];return e.push("overflow-wrap: break-word;"),e.push("white-space: normal;"),app.styling.useBackpackDesign?(app.styling.backpackBgImage&&e.push("background-image: url('".concat(app.styling.backpackBgImage,"');")),e.push("background-color: ".concat(xn(app.styling.backpackBgColor),";")),app.styling.isBackpackBgRepeat?e.push("background-repeat: repeat;"):app.styling.isBackpackBgFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")):(app.styling.backgroundImage&&e.push("background-image: url('".concat(app.styling.backgroundImage,"');")),e.push("background-color: ".concat(xn(app.styling.backgroundColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")),e.join(" ")}),c=M(function(){return"dlgBackpack"!==ri.currentDialog?"close":""}),l=M(function(){return"dlgBackpack"!==ri.currentDialog?"close":""}),s=M(function(){return void 0!==app.styling.backPackWidth?app.styling.backPackWidth:1200});Ce(e,{get escapeKeyAction(){return B(c)},get scrimClickAction(){return B(l)},get surface$style(){var e;return"width: ".concat(null!==(e=B(s))&&void 0!==e?e:"","px; max-width: 100vw;")},get onSMUIDialogClosed(){return t.onclose},get open(){return i()},set open(e){i(e)},children:function(e,t){var i=zc(),c=U(i);Oe(c,{class:"p-0 m-0 row",tabindex:0,autofocus:!0,children:function(e,t){var i=Ec(),o=z(i);Me(o,{onclickcapture:function(){return function(e){return bn.apply(this,arguments)}(B(n))},class:"h-100",children:function(e,t){var i=Wc(),o=U(i);ct(o,{class:"mdi mdi-file-image"});var n=ge(o,2);De(n,{children:function(e,t){var i=Ie("Download Image");P(e,i)},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}});var l=ge(c,2);Ae(l,{id:"backpackDialog",class:"p-0",children:function(e,t){var i=Lc(),c=z(i);_e(c,21,function(){return app.backpack},Ze,function(e,t){var i=Uc();Nc(z(i),{get row(){return B(t)},get windowWidth(){return B(o)},get preloadImages(){return app.preloadImages},isBackpack:!0}),Z(function(){return X(i,1,K(B(t).width?"col-6":"col-12"))}),P(e,i)}),q(c,function(e){return G(r,e)},function(){return B(r)}),q(i,function(e){return G(n,e)},function(){return B(n)}),Z(function(){return Ye(i,B(a))}),at(i,"clientWidth",function(e){return G(o,e)}),P(e,i)},$$slots:{default:!0}});var s=ge(l,2);Fe(s,{class:"p-0",style:"min-height: 36px",children:function(e,t){Me(e,{action:"close",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Close");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}}),$()}var _c=R("<div><!></div>"),Hc=function(e,t){e.preventDefault(),t()},Yc=R('<span class="picture-inner-text"><!></span>'),Jc=R('<span class="picture-inner-text"><!></span>'),Zc=R('<div class="picture-inner"><!></div>'),Xc=R('<div class="preview-container"><canvas tabindex="0"></canvas> <!></div> <!> <!> <!>',1),Kc=R("<div><!></div> <!> <!>",1),Qc=R("<div><!></div>"),el=R('<div id="picture-input" class="picture-input"><!> <input type="file"/></div>');function tl(e,t){V(t,!0);var r,d,v=_(t,"width",19,function(){return Number.MAX_SAFE_INTEGER}),g=_(t,"height",19,function(){return Number.MAX_SAFE_INTEGER}),p=_(t,"margin",3,0),m=_(t,"accept",3,"image/*, image/avif"),b=_(t,"capture",3,null),w=_(t,"size",19,function(){return Number.MAX_SAFE_INTEGER}),T=_(t,"name",3,null),I=_(t,"id",3,null),S=_(t,"buttonClass",3,""),y=_(t,"removeButtonClass",3,""),x=_(t,"aspectButtonClass",3,""),C=_(t,"prefill",11,""),A=_(t,"prefillOptions",19,function(){return{}}),k=_(t,"crop",3,!0),R=_(t,"radius",3,0),j=_(t,"removable",3,!1),W=_(t,"hideChangeButton",3,!1),H=_(t,"autoToggleAspectRatio",3,!1),Y=_(t,"toggleAspectRatio",3,!1),J=_(t,"changeOnClick",3,!0),K=_(t,"plain",3,!1),Q=_(t,"zIndex",3,1e4),ee=_(t,"alertOnError",3,!0),te=_(t,"customStrings",19,function(){return{}}),oe=N(!1),ne=N(0),re=N(0),ae=N(!1),ce=N(0),le=N(0),se=N(1),ue=N(0),de=N(""),fe=N(null),pe=N(null),me=N(""),he=N(0),be=N(0),we=N(""),Te=N(!1),ye=N(0),xe=N(0),Ce=N(0),Oe=N(null),Ae=N(s([])),ke={upload:"<p>Your device does not support file uploading.</p>",drag:"Drag an image or <br>click here to select a file",tap:"Tap here to select a photo <br>from your gallery",change:"Change Photo",aspect:"Landscape/Portrait",remove:"Remove Photo",select:"Select a Photo",selected:"<p>Photo successfully selected!</p>",fileSize:"The file size exceeds the limit",fileType:"This file type is not supported."},Be=N(void 0),Fe=M(function(){if(navigator.userAgent.match(/(Android (1\.0|1\.1|1\.5|1\.6|2\.0|2\.1))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.0|2\.5|3\.0))/))return!1;var e=document.createElement("input");return e.type="file",!e.disabled}),Re=M(function(){return!(!window.FileReader||!window.CanvasRenderingContext2D)}),je=M(function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&!("ontouchstart"in window||navigator.maxTouchPoints)}),qe=M(function(){return B(ae)?"dragging-over":""}),Pe=M(function(){return"".concat(Math.min(.04*B(re),21),"px")});function $e(){if(te())for(var e in te())e in ke&&"string"==typeof te()[e]&&(ke[e]=te()[e])}function Ve(){B(oe)&&!J()||ze(),t.onclick&&t.onclick()}function Ne(){He()&&B(fe)&&Le(B(fe))}function We(){B(je)&&G(ae,!1)}function Ee(e){var i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.target,r="drop"===e.type?null===(i=e.dataTransfer)||void 0===i?void 0:i.files:n.files;if(r&&0!==r.length){if(r[0].size<=0||r[0].size>1024*Number(w())*1024)return t.onerror&&t.onerror({type:"fileSize",fileSize:r[0].size,fileType:r[0].type,fileName:r[0].name,message:"".concat(ke.fileSize," (").concat(w(),"MB)")}),void(ee()&&alert("".concat(ke.fileSize," (").concat(w(),"MB)")));if(r[0].name!==B(me)||r[0].size!==B(he)||B(be)!==r[0].lastModified){if(G(pe,r[0],!0),G(me,r[0].name,!0),G(he,r[0].size,!0),G(be,r[0].lastModified,!0),G(we,r[0].type.split(";")[0],!0),"image/*, image/avif"===m()){if(!B(we).startsWith("image/"))return}else if(-1===B(Ae).indexOf(B(we)))return t.onerror&&t.onerror({type:"fileType",fileSize:B(he),fileType:B(we),fileName:B(me),message:ke.fileType}),void(ee()&&alert(ke.fileType));G(oe,!0),G(de,""),B(Re)&&B(pe)?Ue(B(pe),o):o?t.onprefill&&t.onprefill():t.onchange&&t.onchange(B(de))}}}function Ue(e,i){!function(e,t){var i=new FileReader;i.onload=function(e){var i=new DataView(e.target.result);if(65496!==i.getUint16(0,!1))return t(-2);for(var o=i.byteLength,n=2;n<o;){var r=i.getUint16(n,!1);if(n+=2,65505===r){if(1165519206!==i.getUint32(n+=2,!1))return t(-1);var a=18761===i.getUint16(n+=6,!1);n+=i.getUint32(n+4,a);var c=i.getUint16(n,a);n+=2;for(var l=0;l<c;l++)if(274===i.getUint16(n+12*l,a))return t(i.getUint16(n+12*l+8,a))}else{if(65280&~r)break;n+=i.getUint16(n,!1)}}return t(-1)},i.readAsArrayBuffer(e.slice(0,65536))}(e,function(o){!function(e){G(Te,!1),8===e?G(Te,-Math.PI/2):6===e?G(Te,Math.PI/2):3===e&&G(Te,-Math.PI)}(o);var n=new FileReader;n.onload=function(e){G(de,e.target.result,!0),G(fe,new Image,!0),B(fe).onload=function(){H()&&(Je(B(ce),B(le))!==Je(B(fe).width,B(fe).height)&&Ze());Le(B(fe))},B(fe).src=B(de),!i&&t.onchange&&t.onchange(B(de))},n.readAsDataURL(e)})}function Le(e){G(ye,e.width,!0),G(xe,e.height,!0),G(Ce,e.width/e.height);var t=0,i=0,o=B(re),n=B(ne),r=B(re)/B(ne);k()?B(Ce)>=r?(o=n*B(Ce),t=(B(re)-o)/2):(n=o/B(Ce),i=(B(ne)-n)/2):B(Ce)>=r?(n=o/B(Ce),i=(B(ne)-n)/2):(o=n*B(Ce),t=(B(re)-o)/2),B(Be)&&(B(Be).style.background="none",B(Be).width=B(re)*B(se),B(Be).height=B(ne)*B(se),B(Oe)&&(B(Oe).setTransform(1,0,0,1,0,0),B(Oe).clearRect(0,0,B(Be).width,B(Be).height),B(Te)&&void 0===e.style.imageOrientation&&(B(Oe).translate(t*B(se),i*B(se)),B(Oe).translate(o/2*B(se),n/2*B(se)),B(Oe).rotate(B(Te)),t=-o/2,i=-n/2),B(Oe).drawImage(e,t*B(se),i*B(se),o*B(se),n*B(se))))}function ze(){d.click()}function Ge(){d.value="",d.type="",d.type="file",G(me,""),G(we,""),G(he,0),G(be,0),G(oe,!1),G(de,""),G(pe,null),G(fe,null),B(Be)&&(B(Be).style.backgroundColor="rgba(200,200,200,.25)",B(Be).width=B(re)*B(se)),t.onremove&&t.onremove()}function _e(){Ze(),B(fe)&&Le(B(fe));var e=Je(B(ce),B(le));t.onaspectratiochange&&t.onaspectratiochange(e)}function He(){var e=B(ce)/B(le),t=r.clientWidth;return!!t&&(!(!Y()&&!H()&&t===B(ue))&&(G(ue,t,!0),G(re,Math.min(B(ue)-2*Number(p()),B(ce)),!0),G(ne,B(re)/e),!0))}function Je(e,t){return e>t?"landscape":e<t?"portrait":"square"}function Ze(){var e;e=B(ce),G(ce,B(le),!0),G(le,e,!0),He()}function Xe(e,r){var l=window.File;try{new l([],"")}catch(c){l=function(e){function t(e,i){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(n=o(this,t,[e,r]),"lastModifiedDate",new Date),h(n,"lastModified",+n.lastModifiedDate),h(n,"name",void 0),n.name=i,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e),function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(n(Blob))}if(r=Object.assign({},r),"object"===u(e))return G(oe,!0),G(de,""),void(B(Re)?Ue(e,!0):t.onprefill&&t.onprefill());-1===e.indexOf("data:")&&(e+=-1!==e.indexOf("?")?"&_="+(new Date).getTime():"?_="+(new Date).getTime());var s=new Headers;s.append("Accept","image/*, image/avif"),fetch(e,{method:"GET",mode:"cors",headers:s}).then(function(e){return e.blob()}).then(function(t){var i={target:{files:[]}},o=r.fileName||e.split("/").slice(-1)[0],n=r.mediaType||t.type||"image/"+(r.fileType||o.split("?")[0].split(".").slice(-1)[0]);"image/svg"===(n=n.replace("jpg","jpeg").replace("image/svg","image/svg+xml"))&&(n="image/svg+xml"),i.target.files[0]=new l([t],o,{type:n}),Ee(i,!0)}).catch(function(e){t.onerror&&t.onerror({type:"failedPrefill",message:"Failed loading prefill image: "+e}),ee()&&alert("Failed loading prefill image: "+e)})}D(function(){C()&&Xe(C(),A())}),ie(f(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,O();case 1:$e(),C()&&Xe(C(),A()),window.addEventListener("resize",Ne),Ne(),B(Re)&&B(Be)&&(G(se,Math.round(window.devicePixelRatio||1),!0),B(Be).getContext&&(G(Oe,B(Be).getContext("2d"),!0),B(Oe)&&B(Oe).scale(B(se),B(se)))),"image/*, image/avif"!==m()&&G(Ae,m().split(",").map(function(e){return e.trim()}),!0),G(ce,v()!=Number.MAX_SAFE_INTEGER?Number(v()):r.clientWidth,!0),G(le,g()!=Number.MAX_SAFE_INTEGER?Number(g()):B(ce),!0),G(re,B(ce),!0),G(ne,B(le),!0);case 2:return e.a(2)}},e)}))),F(function(){window.removeEventListener("resize",Ne)});var Ke=el(),Qe=z(Ke),it=function(e){var t=_c(),i=z(t);L(i,function(){return ke.upload}),P(e,t)},ot=function(e){var t=E(),i=U(t),o=function(e){var t=Xc(),i=U(t),o=z(i);o.__click=[Hc,Ve],q(o,function(e){return G(Be,e)},function(){return B(Be)});var n=ge(o,2),r=function(e){var t=Zc(),i=z(t),o=function(e){var t=Yc(),i=z(t);L(i,function(){return ke.drag}),P(e,t)},n=function(e){var t=Jc(),i=z(t);L(i,function(){return ke.tap}),P(e,t)};ve(i,function(e){B(je)?e(o):e(n,!1)}),Z(function(e){var i,o,n,r;return Ye(t,"top: -".concat(null!==(i=B(ne))&&void 0!==i?i:"","px; margin-bottom: -").concat(null!==(o=B(ne))&&void 0!==o?o:"","px; font-size: ").concat(null!==(n=B(Pe))&&void 0!==n?n:"","; border-radius: ").concat(null!==(r=R())&&void 0!==r?r:"","%; z-index: ").concat(null!=e?e:"",";"))},[function(){return parseInt(Q()+"")+2}]),P(e,t)};ve(n,function(e){B(oe)||K()||e(r)});var a=ge(i,2),c=function(e){Me(e,{variant:"raised",onclick:ze,get class(){return S()},children:function(e,t){De(e,{children:function(e,t){var i=Ie();Z(function(){return Se(i,ke.change)}),P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(a,function(e){B(oe)&&!W()&&e(c)});var l=ge(a,2),s=function(e){Me(e,{variant:"raised",onclick:Ge,get class(){return y()},children:function(e,t){De(e,{children:function(e,t){var i=Ie();Z(function(){return Se(i,ke.remove)}),P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(l,function(e){B(oe)&&j()&&e(s)});var u=ge(l,2),d=function(e){Me(e,{variant:"raised",onclick:_e,get class(){return x()},children:function(e,t){De(e,{children:function(e,t){var i=Ie();Z(function(){return Se(i,ke.aspect)}),P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(u,function(e){B(oe)&&Y()&&v()!==g()&&e(d)}),Z(function(e){var t,n,r,a,c;Ye(i,"max-width: ".concat(null!==(t=B(re))&&void 0!==t?t:"","px; height: ").concat(null!==(n=B(ne))&&void 0!==n?n:"","px; border-radius: ").concat(null!==(r=R())&&void 0!==r?r:"","%;")),X(o,1,"picture-preview ".concat(null!==(a=B(qe))&&void 0!==a?a:"")),Ye(o,"height: ".concat(null!==(c=B(ne))&&void 0!==c?c:"","px; z-index: ").concat(null!=e?e:"",";"))},[function(){return parseInt(Q()+"")+1}]),et("drag",o,function(e){e.stopPropagation(),e.preventDefault()}),et("dragover",o,function(e){e.stopPropagation(),e.preventDefault()}),et("dragstart",o,function(e){e.stopPropagation(),e.preventDefault()}),et("dragend",o,function(e){e.stopPropagation(),e.preventDefault()}),et("dragenter",o,function(e){e.stopPropagation(),e.preventDefault(),B(je)&&G(ae,!0)}),et("dragleave",o,function(e){e.stopPropagation(),e.preventDefault(),We()}),et("drop",o,function(e){e.stopPropagation(),e.preventDefault(),function(e){We(),Ee(e)}(e)}),P(e,t)},n=function(e){var t=Qc(),i=z(t),o=function(e){Me(e,{variant:"raised",onclick:ze,get class(){return S()},children:function(e,t){De(e,{children:function(e,t){var i=Ie();Z(function(){return Se(i,ke.select)}),P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},n=function(e){var t=Kc(),i=U(t),o=z(i);L(o,function(){return ke.selected});var n=ge(i,2),r=function(e){Me(e,{variant:"raised",onclick:ze,get class(){return S()},children:function(e,t){De(e,{children:function(e,t){var i=Ie();Z(function(){return Se(i,ke.change)}),P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(n,function(e){W()||e(r)});var a=ge(n,2),c=function(e){Me(e,{variant:"raised",onclick:Ge,get class(){return y()},children:function(e,t){De(e,{children:function(e,t){var i=Ie();Z(function(){return Se(i,ke.remove)}),P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(a,function(e){j()&&e(c)}),P(e,t)};ve(i,function(e){B(oe)?e(n,!1):e(o)}),P(e,t)};ve(i,function(e){B(Re)?e(o):e(n,!1)},!0),P(e,t)};ve(Qe,function(e){B(Fe)?e(ot,!1):e(it)});var nt=ge(Qe,2);nt.__change=Ee,q(nt,function(e){return d=e},function(){return d}),q(Ke,function(e){return r=e},function(){return r}),Z(function(){tt(nt,"name",T()),tt(nt,"id",I()),tt(nt,"accept",m()),tt(nt,"capture",b())}),P(e,Ke),$()}Ke(["click","change"]);var il=R('<div class="mb-4 text-left"><!></div>'),ol=R('<img class="d-block w-100" alt="Converted" loading="lazy"/> <!> <!>',1),nl=R('<div class="col col-lg-4"><!> <!></div> <div class="col col-lg-8"><!></div>',1),rl=R('<div><img alt="Cropper" loading="lazy" class="cropper-image"/></div>'),al=R('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div></div> <div class="mt-2"><!></div> <!>',1),cl=R('<div class="pt-3 col col-12"><img class="d-block w-100" alt="Compress" loading="lazy"/></div>'),ll=R('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div> <!></div>'),sl=R('<div class="col col-lg-4"><div><!></div> <div><b>Before:</b> <b>After:</b> </div> <!></div> <div class="col-lg-8"><!> <!> <!></div>',1),ul=R('<div class="container"><!> <div class="row"><!></div></div>'),dl=R('<div class="col-sm-6 col-12"><!></div> <div class="col-sm-6 col-12"><!></div>',1),fl=R("<!> <!> <!>",1);function vl(e,t){V(t,!0);var i,o=_(t,"open",7),n=_(t,"imgObject",7),r=_(t,"canHaveURL",3,!0),a=_(t,"isDeselect",3,!1),c=_(t,"closeHandler",3,function(e){}),l=N("Cropper"),s=N(100),u=N(90),d=!1,f=N(1),v=N(1),g=N(void 0),p=N(void 0),m=N(void 0),h=N(!1),b=[],w=!1,T=M(function(){if(B(p)){var e=(t=B(p),(i=t.match(/^data:.+;base64,(.+)$/))?i[1]:t).length*(3/4)-2;return Math.round(e/1024)}var t,i;return 0}),I=M(function(){if(B(m)){var e=B(m).split(",")[1].length*(3/4)-2;return Math.round(e/1024)}return 0});function S(e,t){var i=e.getImageData(),o=e.getData(),n=0,r=0;switch(t){case 0:n=0,r=0;break;case 1:n=(i.naturalWidth-o.width)/2,r=0;break;case 2:n=i.naturalWidth-o.width,r=0;break;case 3:n=0,r=(i.naturalHeight-o.height)/2;break;case 4:n=(i.naturalWidth-o.width)/2,r=(i.naturalHeight-o.height)/2;break;case 5:n=i.naturalWidth-o.width,r=(i.naturalHeight-o.height)/2;break;case 6:n=0,r=i.naturalHeight-o.height;break;case 7:n=(i.naturalWidth-o.width)/2,r=i.naturalHeight-o.height;break;case 8:n=i.naturalWidth-o.width,r=i.naturalHeight-o.height}e.setData({x:n,y:r})}function y(){var e=R(n(),t.imgProp);e&&A(e)}function x(){B(m)&&F(n(),t.imgProp,B(m))}function C(){i&&(i.setAspectRatio(B(v)/B(f)),S(i,app.cropperPosition))}function O(){if(i&&B(g)){var e=i.getCroppedCanvas().toDataURL("image/webp");B(g).src=e,F(n(),t.imgProp,e)}}function A(e){b.push(e),w||k()}function k(){var e=b.shift();if(e){w=!0;var t=document.createElement("canvas"),i=t.getContext("2d"),o=new Image;o.crossOrigin="anonymous",o.onload=function(){var e=B(s)/100,n=o.width*e,r=o.height*e;t.setAttribute("width",n.toString()),t.setAttribute("height",r.toString()),null==i||i.drawImage(o,0,0,n,r),G(m,t.toDataURL("image/webp",B(u)/100),!0),d&&(d=!1,x()),k()},o.src=e}else w=!1}function F(e,t,o){e&&(e[t]=o,G(p,o,!0),i&&i.replace(o),A(o))}function R(e,t){return e&&e[t]?e[t]:""}function j(){if(n().parentId){var e=zt.get(n().parentId);if(void 0!==e)return void(e.row.defaultAspectWidth=B(v))}if(n().id){var t=Lt.get(n().id);if(void 0!==t)return void(t.defaultAspectWidth=B(v));var i=zt.get(n().id);if(void 0!==i)return void(i.row.defaultAspectWidth=B(v))}}function W(){if(n().parentId){var e=zt.get(n().parentId);if(void 0!==e)return void(e.row.defaultAspectHeight=B(f))}if(n().id){var t=Lt.get(n().id);if(void 0!==t)return void(t.defaultAspectHeight=B(f));var i=zt.get(n().id);if(void 0!==i)return void(i.row.defaultAspectHeight=B(f))}}D(function(){return B(g)&&(i=new lt(B(g),{viewMode:3,dragMode:"move",ready:function(){S(i,app.cropperPosition)}})),function(){i&&i.destroy()}}),ie(function(){!function(){if(n().parentId){var e=zt.get(n().parentId);return void(void 0!==e&&(void 0!==e.row.defaultAspectHeight&&G(f,e.row.defaultAspectHeight,!0),void 0!==e.row.defaultAspectWidth&&G(v,e.row.defaultAspectWidth,!0)))}if(n().id){var t=Lt.get(n().id);if(void 0!==t)return void 0!==t.defaultAspectHeight&&G(f,t.defaultAspectHeight,!0),void(void 0!==t.defaultAspectWidth&&G(v,t.defaultAspectWidth,!0));var i=zt.get(n().id);if(void 0!==i)void 0!==i.row.defaultAspectHeight&&G(f,i.row.defaultAspectHeight,!0),void 0!==i.row.defaultAspectWidth&&G(v,i.row.defaultAspectWidth,!0)}}();var e=R(n(),t.imgProp);if(e){G(p,e,!0);var i=document.createElement("canvas"),o=i.getContext("2d"),r=new Image;r.crossOrigin="anonymous",r.onload=function(){var e=B(s)/100,t=r.width*e,n=r.height*e;i.setAttribute("width",t.toString()),i.setAttribute("height",n.toString()),null==o||o.drawImage(r,0,0,t,n),G(m,i.toDataURL("image/webp",B(u)/100),!0)},r.src=B(p)}}),Ce(e,{surface$style:"width: 1200px; max-width: calc(100vw - 32px);",style:"text-align: center",onSMUIDialogClosed:function(e){c()(e),t.onclose()},get open(){return o()},set open(e){o(e)},children:function(e,i){var c=fl(),p=U(c);Oe(p,{tabindex:0,autofocus:!0,children:function(e,t){var i=Ie("Image");P(e,i)},$$slots:{default:!0}});var m=ge(p,2);Ae(m,{children:function(e,i){var a=ul(),c=z(a),p=function(e){var t=il(),i=z(t);ke(i,{label:function(e){var t=Ie("Uploaded Image or External URL.");P(e,t)},children:function(e,t){Be(e,{color:"secondary",class:"switch-scale",get checked(){return B(h)},set checked(e){G(h,e,!0)}})},$$slots:{label:!0,default:!0}}),P(e,t)};ve(c,function(e){r()&&e(p)});var m=ge(c,2),b=z(m),w=function(e){var i=nl(),o=U(i),r=z(o);Ln(r,{get value(){return(null===(e=n())||void 0===e?void 0:e.imageLink)||"";var e},set value(e){!function(e){n().imageLink=e}(e)},label:"External Image URL",variant:"filled"});var a=ge(r,2);Me(a,{onclick:function(){F(n(),t.imgProp,n().imageLink)},variant:"raised",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Convert URL to Image");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var c=ge(o,2),l=z(c),s=function(e){var i=ol(),o=U(i),r=ge(o,2);Me(r,{onclick:function(){F(n(),t.imgProp,""),delete n().imageLink},variant:"raised",class:"my-3",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Remove Photo");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var a=ge(r,2);Ln(a,{get value(){return(null===(e=n())||void 0===e?void 0:e.imageSourceTooltip)||"";var e},set value(e){!function(e){n().imageSourceTooltip=e}(e)},label:"Tooltip That Shows When Hovering over it",variant:"filled"}),Z(function(e){return tt(o,"src",e)},[function(){return R(n(),t.imgProp)}]),P(e,i)};ve(l,function(e){void 0!==R(n(),t.imgProp)&&""!==R(n(),t.imgProp)&&e(s)}),P(e,i)},S=function(e){var i=sl(),r=U(i),a=z(r),c=z(a),p=function(e){var i=M(function(){return Vo(R(n(),t.imgProp))?R(n(),t.imgProp):""});tl(e,{hideChangeButton:!0,removable:!0,crop:!1,get prefill(){return B(i)},onchange:function(e){F(n(),t.imgProp,e)},onclick:function(){return d=app.compressImageAuto},onremove:function(){return F(n(),t.imgProp,"")}})};ve(c,function(e){o()&&e(p)});var m,h=ge(a,2),b=ge(z(h)),w=ge(b,2),S=ge(h,2);Ln(S,{get value(){return(null===(e=n())||void 0===e?void 0:e.imageSourceTooltip)||"";var e},set value(e){!function(e){n().imageSourceTooltip=e}(e)},label:"Tooltip That Shows When Hovering over it",variant:"filled"});var A=ge(r,2),k=z(A);Ue(k,{tabs:["Cropper","Compress"],get active(){return B(l)},set active(e){G(l,e,!0)},tab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y;Le(e,{get tab(){return t()},children:function(e,i){De(e,{children:function(e,i){var o=Ie();Z(function(){return Se(o,t())}),P(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{tab:!0}});var D=ge(k,2),$=M(function(){return"Cropper"!==B(l)?"display: none;":""});ze(D,{role:"tabpanel",variant:"unelevated",get style(){return B($)},children:function(e,i){Ge(e,{children:function(e,i){var o=al(),r=U(o),a=z(r);Ln(z(a),{onchange:j,label:"Width Aspect",type:"number",variant:"filled",get value(){return B(v)},set value(e){G(v,e,!0)}});var c=ge(a,2);Ln(z(c),{onchange:W,label:"Height Aspect",type:"number",variant:"filled",get value(){return B(f)},set value(e){G(f,e,!0)}});var l=ge(c,2),s=z(l);Me(s,{onclick:C,variant:"raised",style:"height: 100%;",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Change Aspect");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var u=ge(r,2),d=z(u);Me(d,{onclick:O,variant:"raised",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Crop Image");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var p=ge(u,2),m=function(e){var i=rl(),o=z(i);q(o,function(e){return G(g,e)},function(){return B(g)}),Z(function(e){return tt(o,"src",e)},[function(){return R(n(),t.imgProp)}]),P(e,i)};ve(p,function(e){Vo(R(n(),t.imgProp))&&e(m)}),P(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var V=ge(D,2),N=M(function(){return"Compress"!==B(l)?"display: none;":""});ze(V,{role:"tabpanel",variant:"unelevated",get style(){return B(N)},children:function(e,i){Ge(e,{children:function(e,i){var o=ll(),r=z(o);Ln(z(r),{onchange:y,label:"Image Scale",type:"number",variant:"filled",get value(){return B(s)},set value(e){G(s,e,!0)}});var a=ge(r,2);Ln(z(a),{onchange:y,label:"Image Quality",type:"number",variant:"filled",get value(){return B(u)},set value(e){G(u,e,!0)}});var c=ge(a,2),l=z(c);Me(l,{onclick:x,variant:"raised",style:"height: 100%;",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Compress Image");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var d=ge(c,2),f=function(e){var i=cl(),o=z(i);Z(function(e){return tt(o,"src",e)},[function(){return R(n(),t.imgProp)}]),P(e,i)};ve(d,function(e){Vo(R(n(),t.imgProp))&&e(f)}),P(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),Z(function(e){var t,i;m=X(h,1,"p-2",null,m,e),Se(b,"".concat(null!==(t=B(T))&&void 0!==t?t:""," kB|")),Se(w,"".concat(null!==(i=B(I))&&void 0!==i?i:""," kB"))},[function(){return{hidden:!R(n(),t.imgProp)}}]),P(e,i)};ve(b,function(e){B(h)?e(w):e(S,!1)}),P(e,a)},$$slots:{default:!0}});var b=ge(m,2);Fe(b,{children:function(e,t){var i=E(),o=U(i),n=function(e){var t=dl(),i=U(t),o=z(i);Me(o,{action:"deselect",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Deselect Choice");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var n=ge(i,2),r=z(n);Me(r,{action:"close",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Close");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),P(e,t)},r=function(e){Me(e,{action:"close",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Close");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(o,function(e){a()?e(n):e(r,!1)}),P(e,i)},$$slots:{default:!0}}),P(e,c)},$$slots:{default:!0}}),$()}var gl=R('<div class="row pt-4"><div class="col-12"><!></div></div>'),pl=R('<div class="container-fluid"><div class="row"><div class="col-6"><!></div> <div class="col-6"><!></div></div></div>'),ml=R("<!> <!> <!>",1);function hl(e,t){V(t,!0);var i=_(t,"changeNum",7),o=_(t,"minVal",3,0),n=_(t,"maxVal",3,0);Ce(e,{get open(){return t.open},set open(e){!function(e){!e&&t.onclose()}(e)},surface$style:"width: 400px; max-width: calc(100vw - 32px);",children:function(e,r){var a=ml(),c=U(a);Oe(c,{class:"px-3 pb-0 toolbar toolbar__dialog",children:function(e,t){var i=Ie("Counter");P(e,i)},$$slots:{default:!0}});var l=ge(c,2);Ae(l,{children:function(e,t){var r=gl(),a=z(r);Ln(z(a),{label:"Number of Count",variant:"filled",type:"number",onchange:function(){i(Math.min(Math.max(i(),o()),n()))},get input$min(){return o()},get input$max(){return n()},get value(){return i()},set value(e){i(e)}}),P(e,r)},$$slots:{default:!0}});var s=ge(l,2);Fe(s,{children:function(e,r){var a=pl(),c=z(a),l=z(c),s=z(l);Me(s,{children:function(e,t){De(e,{children:function(e,t){var i=Ie("Cancel");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var u=ge(l,2),d=z(u);Me(d,{defaultAction:!0,onclickcapture:function(){return t.submit(Math.min(Math.max(i(),o()),n()))},children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("OK");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),P(e,a)},$$slots:{default:!0}}),P(e,a)},$$slots:{default:!0}}),$()}var bl=R("<!> <!>",1),wl=R("<!> <!>",1),Tl=R("<!> <!>",1),Il=R("<!> <!>",1),Sl=R("<!> <!>",1),yl=R("<!> <!>",1),xl=R("<!> <!>",1),Cl=R("<!> <!>",1),Ol=R("<!> <!>",1),Al=R("<!> <!> <!> <!> <!> <!> <!> <!>",1),kl=R("<i></i>"),Bl=R('<i class="mdi mdi-stop"></i>'),Ml=R("<i></i>"),Dl=R('<!> <!> <!> <div class="px-1 music-player--volume" style="max-width: 104px; width: 100%"><!></div> <div class="ps-1" style="max-width:150px; overflow: hidden;"><span class="scrolling-text"> </span></div> <div class="px-1 col music-player--progress-bar"><!></div> <div class="text-center" style="width: 180px"> </div>',1),Fl=R('<i class="mdi mdi-format-list-checks"></i>'),Rl=R('<i class="mdi mdi-format-list-checks"></i>'),jl=R('<div class="py-0 justify-center"><!></div>'),ql=R('<i class="mdi mdi-checkbox-marked-circle-outline"></i>'),Pl=R("<!> <!> <!>",1),$l=R("<div><!></div>"),Vl=R('<div class="ab-0"><div class="fadeOverlay"></div> <!> <!> <div class="s-main"><!> <!> <div class="container-fluid p-0"><div class="row gx-0"></div></div></div></div> <!> <!> <!> <!> <!>',1);function Nl(e,t){V(t,!0);var i={action:function(){},title:"Warning",context:""},o=N(!1),n=N(!1),r=N("none"),a=M(function(){return B(n)?app.showMusicPlayer?"top: 32px;":"top: 0;":"bottom: 0;"}),c=M(function(){return"opacity: ".concat(app.fadeTransitionIsOn?1:0,"; transition: opacity ").concat(app.fadeTransitionTime,"s ease-out; background-color: ").concat(xn(app.fadeTransitionColor),"; pointer-events: ").concat(app.fadeTransitionIsOn?"auto":"none","; cursor: ").concat(app.fadeTransitionIsOn?"none":"auto",";")}),l=N(0),s=N(void 0),u=M(function(){return app.pointTypes.length>0||app.backpack.length>0||app.importedChoicesIsOpen}),d=M(function(){return"background-color: ".concat(xn(app.styling.barBackgroundColor),"; margin:").concat(app.styling.barMargin,"px; padding:").concat(app.styling.barPadding,"px; ").concat(B(a))}),f=M(function(){return"color: ".concat(xn(app.styling.barTextColor),"; margin: ").concat(app.styling.barTextMargin,"px; padding: ").concat(app.styling.barTextPadding,"px; font-family: '").concat(app.styling.barTextFont,"'; font-size: ").concat(app.styling.barTextSize,"px;")}),v=M(function(){return"color: ".concat(xn(app.styling.barIconColor),";")}),g=M(function(){var e=[];return app.styling.backgroundImage&&e.push("background-image: url('".concat(app.styling.backgroundImage,"');")),e.push("background-color: ".concat(xn(app.styling.backgroundColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;"),B(u)&&e.push("padding-bottom: 56px;"),app.useVW&&e.push("font-size: 0.835vw;"),e.join(" ")}),p=M(function(){var e=[];return app.showMusicPlayer&&e.push("padding-top: 32px;"),e.join(" ")}),m=M(function(){return"".concat(I(ni.curBgmTime)," | ").concat(I(ni.curBgmLength))}),h=N(0),b=N(100),w=N(!1);function T(e){var t=e.currentTarget;e.preventDefault(),t.blur(),G(r,"appBuildForm")}function I(e){var t=Math.floor(e/3600),i=Math.floor(e%3600/60),o=Math.floor(e%60),n=String(i).padStart(2,"0"),r=String(o).padStart(2,"0");return t>0?"".concat(t,":").concat(n,":").concat(r):"".concat(n,":").concat(r)}function S(){var e=localStorage.getItem("theme");ei.value="dark"===e?"light":"dark";var t=document.head.querySelector("#theme-dark"),i=document.head.querySelector("#theme-light");"dark"===ei.value?(t&&(t.media="screen and (prefers-color-scheme: light)"),i&&(i.media="screen and (prefers-color-scheme: dark)")):(t&&(t.media="screen and (prefers-color-scheme: dark)"),i&&(i.media="screen and (prefers-color-scheme: light)")),localStorage.setItem("theme",ei.value)}function y(){var e=x(ii);if(e)if(ni.bgmIsPlaying)e.pause(),ni.bgmIsPlaying=!1,0!==ni.bgmPlayInterval&&(clearInterval(ni.bgmPlayInterval),ni.bgmPlayInterval=0);else{var t=0,i=0;0!==ni.bgmPlayInterval&&(clearInterval(ni.bgmPlayInterval),ni.bgmPlayInterval=0),e.play(),ni.bgmIsPlaying=!0,ni.bgmPlayInterval=window.setInterval(function(){if(!ni.isSeeking&&e.isPlaying()){var o=Math.floor(e.getCurrentTime());o!==ni.curBgmTime?t!==o?ni.curBgmTime=o:(++i>ni.curBgmLength&&(i=1),ni.curBgmTime=i):(t=o,i=o+1,ni.curBgmTime=i)}},1e3)}}function C(){var e=x(ii);e&&ni.bgmIsPlaying&&(e.stop(),ni.bgmIsPlaying=!1,ni.curBgmTime=0,0!==ni.bgmPlayInterval&&(clearInterval(ni.bgmPlayInterval),ni.bgmPlayInterval=0))}function O(){var e=x(ii);app.isMute=!app.isMute,e&&(app.isMute?e.mute():e.unMute())}function A(){x(ii)&&ni.bgmIsPlaying&&(ni.isSeeking=!0)}function k(){var e;if(ni.bgmIsPlaying){var t,i=x(ii);i&&null!==(t=i.seekTo)&&void 0!==t&&t.call(i,B(h))&&(ni.curBgmTime=B(h)),ni.isSeeking=!1}null===(e=document.activeElement)||void 0===e||e.blur()}function R(){G(w,!0)}function H(){var e,t=x(ii);app.curVolume=B(b),t&&t.setVolume(B(b)),G(w,!1),null===(e=document.activeElement)||void 0===e||e.blur()}D(function(){ni.isSeeking||G(h,ni.curBgmTime,!0)}),D(function(){B(w)||G(b,app.curVolume,!0)});var Y=Vl(),J=U(Y),Q=z(J),ee=ge(Q,2);st(ee,{style:"top: 0;",variant:"modal",get open(){return B(o)},set open(e){G(o,e,!0)},children:function(e,t){dt(e,{class:"navigation-drawer",children:function(e,t){$e(e,{children:function(e,t){var a=Al(),c=U(a);Ee(c,{onSMUIAction:function(){return G(o,!1)},class:"my-0",children:function(e,t){var i=bl(),o=U(i);ft(o,{class:"mdi mdi-chevron-left"});var n=ge(o,2);Qe(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Close Menu");P(e,i)},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}});var l=ge(c,2);vt(l,{class:"my-3"});var s=ge(l,2);Ee(s,{onSMUIAction:S,class:"my-0",children:function(e,t){var i=wl(),o=U(i);ft(o,{class:"mdi mdi-theme-light-dark"});var n=ge(o,2);Qe(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Toogle Dark/Light Theme");P(e,i)},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}});var u=ge(s,2);Ee(u,{onSMUIAction:function(){return G(n,!B(n))},class:"my-0",children:function(e,t){var i=Tl(),o=U(i);ft(o,{class:"mdi mdi-swap-vertical"});var n=ge(o,2);Qe(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Top/Bottom Point Bar");P(e,i)},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}});var d=ge(u,2);Ee(d,{onSMUIAction:function(){i.action=function(){return To()},i.context="Are you sure you want to clear selected choices?<br>This action cannot be undone.",G(r,"dlgCommon"),G(o,!1)},class:"my-0",children:function(e,t){var i=Il(),o=U(i);ft(o,{class:"mdi mdi-select-off"});var n=ge(o,2);Qe(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Clear Selected Choices");P(e,i)},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}});var f=ge(d,2),v=function(e){Ee(e,{onSMUIAction:function(){G(r,"appSearchForm"),G(o,!1)},class:"my-0",children:function(e,t){var i=Sl(),o=U(i);ft(o,{class:"mdi mdi-magnify"});var n=ge(o,2);Qe(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Search Choice");P(e,i)},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}})};ve(f,function(e){app.enableSearch&&e(v)});var g=ge(f,2),p=function(e){var t=Cl(),i=U(t);Ee(i,{onSMUIAction:function(){G(r,"appBuildForm"),G(o,!1)},class:"my-0",children:function(e,t){var i=yl(),o=U(i);ft(o,{class:"mdi mdi-format-list-checks"});var n=ge(o,2);Qe(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Open Build Form");P(e,i)},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}});var n=ge(i,2);Ee(n,{onSMUIAction:function(){G(r,"appSaveLoad"),G(o,!1)},class:"my-0",children:function(e,t){var i=xl(),o=U(i);ft(o,{class:"mdi mdi-content-save"});var n=ge(o,2);Qe(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Save/Load Build");P(e,i)},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}}),P(e,t)};ve(g,function(e){app.importedChoicesIsOpen&&e(p)});var m=ge(g,2);Ee(m,{onSMUIAction:function(){G(r,"appGlobalSettings"),G(o,!1)},class:"my-0",children:function(e,t){var i=Ol(),o=U(i);ft(o,{class:"mdi mdi-cog"});var n=ge(o,2);Qe(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Settings");P(e,i)},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}}),P(e,a)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var te=ge(ee,2);ut(te,{});var ie=ge(te,2),oe=z(ie),ne=function(e){gt(e,{class:"music-player",variant:"fixed",children:function(e,t){pt(e,{class:"music-player--row",children:function(e,t){mt(e,{class:"px-2 justify-left",children:function(e,t){var i=Dl(),o=U(i);Je(o,{class:"music-player--button",onclickcapture:y,size:"button","aria-label":"Play",children:function(e,t){var i=kl();Z(function(){return X(i,1,K(ni.bgmIsPlaying?"mdi mdi-pause":"mdi mdi-play"))}),P(e,i)},$$slots:{default:!0}});var n=ge(o,2);Je(n,{class:"music-player--button",onclickcapture:C,size:"button","aria-label":"Stop",children:function(e,t){var i=Bl();P(e,i)},$$slots:{default:!0}});var r=ge(n,2);Je(r,{class:"music-player--button",onclickcapture:O,size:"button","aria-label":"Mute",children:function(e,t){var i=Ml();Z(function(){return X(i,1,K(app.isMute?"mdi mdi-volume-off":"mdi mdi-volume-high"))}),P(e,i)},$$slots:{default:!0}});var a=ge(r,2),c=z(a);rt(c,{min:0,max:100,step:1,class:"mx-2",onpointerdown:R,onpointerup:H,get disabled(){return app.isMute},get value(){return B(b)},set value(e){G(b,e,!0)}});var l=ge(a,2),s=z(l),u=z(s),d=ge(l,2),f=z(d),v=M(function(){return ni.curBgmLength||1});rt(f,{min:0,get max(){return B(v)},step:1,class:"mx-2",onpointerdown:A,onpointerup:k,get value(){return B(h)},set value(e){G(h,e,!0)}});var g=ge(d,2),p=z(g);Z(function(){Se(u,ni.bgmTitle),Se(p,B(m))}),P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(oe,function(e){app.showMusicPlayer&&e(ne)});var re=ge(oe,2),ae=function(e){gt(e,{class:"pointBar",get style(){return B(d)},variant:"fixed",color:"secondary",children:function(e,t){pt(e,{class:"justify-space-around",children:function(e,t){var i=Pl(),n=U(i);mt(n,{class:"py-0 justify-center",children:function(e,t){var i=E(),n=U(i),r=function(e){Dn(e,{text:"L-Click: Open Side Menu<br>R-Click: Open Build Form",children:function(e,t){Je(e,{class:"pointbar-icons",onclickcapture:function(){return G(o,!0)},oncontextmenu:T,"aria-label":"Open Import Window",get style(){return B(v)},children:function(e,t){var i=Fl();P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e){Je(e,{class:"pointbar-icons",onclickcapture:function(){return G(o,!0)},"aria-label":"Open Import Window",get style(){return B(v)},children:function(e,t){var i=Rl();P(e,i)},$$slots:{default:!0}})};ve(n,function(e){app.importedChoicesIsOpen?e(r):e(a,!1)}),P(e,i)},$$slots:{default:!0}});var a=ge(n,2);mt(a,{class:"pointbar-center--viewer",children:function(e,t){var i=E(),o=U(i);_e(o,17,function(){return app.pointTypes},Ze,function(e,t){var i=E(),o=U(i),n=function(e){var i=jl();!function(e,t){V(t,!0);var i=M(function(){return"color: ".concat(xn(app.styling.barTextColor),"; margin: ").concat(app.styling.barTextMargin,"px; padding: ").concat(app.styling.barTextPadding,"px; font-family: '").concat(app.styling.barTextFont,"'; font-size: ").concat(app.styling.barTextSize,"px;")}),o=M(function(){if(t.point.startingSum>=0){if(void 0!==app.styling.barPointPos)return"color: ".concat(xn(app.styling.barPointPos),";")}else if(void 0!==app.styling.barPointNeg)return"color: ".concat(xn(app.styling.barPointNeg),";");return""});function n(e,t){var i=t?e.negativeImage:e.image,o=t?e.negativeIconWidth:e.iconWidth,n=t?e.negativeIconHeight:e.iconHeight;return i?'<img src="'.concat(i,'" class="mx-1" style="width: ').concat(o,"px; height: ").concat(n,'px;" alt="">'):""}var r=sr(),a=z(r),c=z(a),l=function(e){var i=E(),o=U(i),r=function(e){var i=E(),o=U(i),r=function(e){var i=E(),o=U(i);L(o,function(){return n(t.point,!0)}),P(e,i)};ve(o,function(e){t.point.negativeImageOnSide||t.point.negativeImageSidePlacement||e(r)}),P(e,i)},a=function(e){var i=E(),o=U(i),r=function(e){var i=E(),o=U(i);L(o,function(){return n(t.point,!1)}),P(e,i)};ve(o,function(e){t.point.imageOnSide||t.point.imageSidePlacement||e(r)}),P(e,i)};ve(o,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),P(e,i)};ve(c,function(e){t.point.iconIsOn&&e(l)});var s=ge(c),u=ge(s),d=function(e){var i=E(),o=U(i),r=function(e){var i=E(),o=U(i),r=function(e){var i=E(),o=U(i);L(o,function(){return n(t.point,!0)}),P(e,i)};ve(o,function(e){t.point.negativeImageOnSide&&!t.point.negativeImageSidePlacement&&e(r)}),P(e,i)},a=function(e){var i=E(),o=U(i),r=function(e){var i=E(),o=U(i);L(o,function(){return n(t.point,!1)}),P(e,i)};ve(o,function(e){t.point.imageOnSide&&!t.point.imageSidePlacement&&e(r)}),P(e,i)};ve(o,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),P(e,i)};ve(u,function(e){t.point.iconIsOn&&e(d)});var f=ge(u,2),v=z(f),g=ge(f,2),p=function(e){var i=E(),o=U(i),r=function(e){var i=E(),o=U(i),r=function(e){var i=E(),o=U(i);L(o,function(){return n(t.point,!0)}),P(e,i)};ve(o,function(e){!t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(r)}),P(e,i)},a=function(e){var i=E(),o=U(i),r=function(e){var i=E(),o=U(i);L(o,function(){return n(t.point,!1)}),P(e,i)};ve(o,function(e){!t.point.imageOnSide&&t.point.imageSidePlacement&&e(r)}),P(e,i)};ve(o,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),P(e,i)};ve(g,function(e){t.point.iconIsOn&&e(p)});var m=ge(g),h=ge(m),b=function(e){var i=E(),o=U(i),r=function(e){var i=E(),o=U(i),r=function(e){var i=E(),o=U(i);L(o,function(){return n(t.point,!0)}),P(e,i)};ve(o,function(e){t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(r)}),P(e,i)},a=function(e){var i=E(),o=U(i),r=function(e){var i=E(),o=U(i);L(o,function(){return n(t.point,!1)}),P(e,i)};ve(o,function(e){t.point.imageOnSide&&t.point.imageSidePlacement&&e(r)}),P(e,i)};ve(o,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),P(e,i)};ve(h,function(e){t.point.iconIsOn&&e(b)}),Z(function(e,n){var c,l;Ye(r,B(i)),Ye(a,e),Se(s," ".concat(null!==(c=t.point.beforeText)&&void 0!==c?c:""," ")),Ye(f,B(o)),Se(v,n),Se(m," ".concat(null!==(l=t.point.afterText)&&void 0!==l?l:""," "))},[function(){return t.point.pointPrivateColorIsOn?"color: ".concat(t.point.startingSum>=0?xn(t.point.privateColor):xn(t.point.privateNegativeColor)):""},function(){return t.point.startingSum%1==0?t.point.startingSum:parseFloat(t.point.startingSum.toFixed(void 0!==t.point.decimalPlaces?t.point.decimalPlaces:2))}]),P(e,r),$()}(z(i),{get point(){return B(t)}}),Z(function(){return Ye(i,B(f))}),P(e,i)};ve(o,function(e){(function(e){if(e.isNotShownPointBar){if(void 0!==e.activatedId&&""!==e.activatedId){var t=_t.get(e.activatedId),i=Yt.get(e.activatedId);return void 0!==t?io(t.requireds):void 0!==i?i.isTrue:Ki(e.activatedId)}return!1}return!0})(B(t))&&e(n)}),P(e,i)}),P(e,i)},$$slots:{default:!0}});var c=ge(a,2);mt(c,{class:"py-0 justify-center",children:function(e,t){var i=E(),o=U(i),n=function(e){Je(e,{class:"pointbar-icons",onclickcapture:function(){return G(r,"dlgBackpack")},"aria-label":"Open Backpack Window",get style(){return B(v)},children:function(e,t){var i=ql();P(e,i)},$$slots:{default:!0}})};ve(o,function(e){app.backpack.length>0&&(void 0===app.hideBackpackBtn||0===app.hideBackpackBtn||app.hideBackpackBtn>0&&app.hideBackpackBtn===app.btnBackpackIsOn)&&e(n)}),P(e,i)},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(re,function(e){B(u)&&e(ae)});var ce=ge(re,2),le=z(ce);_e(le,21,function(){return app.rows},Ze,function(e,t){var i=$l();Nc(z(i),{get row(){return B(t)},get windowWidth(){return B(l)},get mainDiv(){return B(s)}}),Z(function(){return X(i,1,K(B(t).width?"col-6":"col-12"))}),P(e,i)}),q(le,function(e){return G(s,e)},function(){return B(s)});var se=ge(J,2),ue=function(e){var t=M(function(){return"appSaveLoad"===B(r)});Rr(e,{get open(){return B(t)},onclose:function(){return G(r,"none")}})},de=function(e){var t=E(),o=U(t),n=function(e){var t=M(function(){return"dlgBackpack"===B(r)});Gc(e,{get open(){return B(t)},onclose:function(){return G(r,"none")}})},a=function(e){var t=E(),o=U(t),n=function(e){var t=M(function(){return"appGlobalSettings"===B(r)});lr(e,{get open(){return B(t)},onclose:function(){return G(r,"none")}})},a=function(e){var t=E(),o=U(t),n=function(e){var t=M(function(){return"appBuildForm"===B(r)});_n(e,{get open(){return B(t)},onclose:function(){return G(r,"none")}})},a=function(e){var t=E(),o=U(t),n=function(e){var t=M(function(){return"dlgCommon"===B(r)});pr(e,{get open(){return B(t)},onclose:function(){return G(r,"none")},get title(){return i.title},get context(){return i.context},closeHandler:function(e){"accept"===e.detail.action&&i.action()}})},a=function(e){var t=E(),i=U(t),o=function(e){var t=M(function(){return"appSearchForm"===B(r)});!function(e,t){V(t,!0);var i=_(t,"open",7),o=N(""),n=N(void 0),r=N(0),a=M(function(){var e=[];if(B(n)&&B(n).sResult)for(var t=0;t<B(n).sResult.length;t++){var i=zt.get(B(n).sResult[t]);if(void 0!==i){var r=i.choice;if(void 0!==r.parentId){var a=zt.get(r.parentId);void 0!==a&&e.push(a)}else e.push(i)}}else{var c=zt.get(B(o));if(void 0!==c){var l=c.choice;if(void 0!==l.parentId){var s=zt.get(l.parentId);void 0!==s&&e.push(s)}else e.push(c)}}return e}),c=M(function(){var e=[];return e.push("min-height: 451px;"),app.styling.backgroundImage&&e.push("background-image: url('".concat(app.styling.backgroundImage,"');")),e.push("background-color: ".concat(xn(app.styling.backgroundColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;"),app.useVW&&e.push("font-size: 0.835vw;"),e.join(" ")});function l(e){var t=zt.get(e);if(void 0!==t){var i=t.choice,o=document.createElement("div");return o.innerHTML=i.title,o.textContent}return""}Ce(e,{surface$style:"width: 800px; max-width: calc(100vw - 32px); min-height: 600px;",get onSMUIDialogClosed(){return t.onclose},get open(){return i()},set open(e){i(e)},children:function(e,t){var i=mc(),s=U(i);Oe(s,{class:"px-3 pb-0 toolbar toolbar__dialog",tabindex:0,autofocus:!0,children:function(e,t){var i=Ie("Search");P(e,i)},$$slots:{default:!0}});var u=ge(s,2),d=M(hi);q(Lr(u,{get options(){return B(d)},getOptionLabel:l,showMenuWithNoInput:!1,textfield$variant:"outlined",class:"w-100 p-0",isSearch:!0,selectOnExactMatch:!1,get value(){return B(o)},set value(e){G(o,e,!0)}}),function(e){return G(n,e,!0)},function(){return B(n)});var f=ge(u,2);Ae(f,{class:"p-0",children:function(e,t){var i=pc();_e(i,21,function(){return B(a)},Ze,function(e,t,i){var o=gc();vc(z(o),{get row(){return B(t).row},get choice(){return B(t).choice},index:i,get windowWidth(){return B(r)},isSearch:!0}),P(e,o)}),Z(function(){return Ye(i,B(c))}),at(i,"clientWidth",function(e){return G(r,e)}),P(e,i)},$$slots:{default:!0}});var v=ge(f,2);Fe(v,{children:function(e,t){Me(e,{action:"close",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Cancel");P(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),P(e,i)},$$slots:{default:!0}}),$()}(e,{get open(){return B(t)},onclose:function(){return G(r,"none")}})};ve(i,function(e){"appSearchForm"===B(r)&&e(o)},!0),P(e,t)};ve(o,function(e){"dlgCommon"===B(r)?e(n):e(a,!1)},!0),P(e,t)};ve(o,function(e){"appBuildForm"===B(r)?e(n):e(a,!1)},!0),P(e,t)};ve(o,function(e){"appGlobalSettings"===B(r)?e(n):e(a,!1)},!0),P(e,t)};ve(o,function(e){"dlgBackpack"===B(r)?e(n):e(a,!1)},!0),P(e,t)};ve(se,function(e){"appSaveLoad"===B(r)?e(ue):e(de,!1)});var fe=ge(se,2),pe=function(e){var t=M(function(){return"dlgCommon"===ai.currentDialog});pr(e,{get open(){return B(t)},onclose:function(){return ai.currentDialog="none"},get closeHandler(){return ai.cFunc},get title(){return ai.title},get context(){return ai.context},get isWord(){return ai.isWord},get prevText(){return ai.prevText},get isDeselect(){return ai.isDeselect},get isForced(){return ai.isForced}})};ve(fe,function(e){"dlgCommon"===ai.currentDialog&&void 0!==ai.cFunc&&void 0!==ai.context&&e(pe)});var me=ge(fe,2),he=function(e){var t=M(function(){return"appImageUpload"===ci.currentDialog});vl(e,{get open(){return B(t)},onclose:function(){return ci.currentDialog="none"},get imgObject(){return ci.data},get imgProp(){return ci.imgProp},get isDeselect(){return ri.isDeselect},get closeHandler(){return ci.cFunc}})};ve(me,function(e){"appImageUpload"===ci.currentDialog&&void 0!==ci.data&&void 0!==ci.imgProp&&e(he)});var be=ge(me,2),we=function(e){var t=M(function(){return"dlgCommon"===ri.currentDialog});pr(e,{get open(){return B(t)},onclose:function(){return ri.currentDialog="none"},get closeHandler(){return ri.cFunc},get title(){return ri.title},get context(){return ri.context},get isWord(){return ri.isWord}})},Te=function(e){var t=E(),i=U(t),o=function(e){var t=M(function(){return"selectDialog"===ri.currentDialog});hl(e,{get open(){return B(t)},onclose:function(){return ri.currentDialog="none"},get submit(){return ri.func},get changeNum(){return ri.choice.multipleUseVariable},get minVal(){return ri.choice.numMultipleTimesMinus},get maxVal(){return ri.choice.numMultipleTimesPluss}})};ve(i,function(e){"selectDialog"===ri.currentDialog&&void 0!==ri.choice&&void 0!==ri.func&&e(o)},!0),P(e,t)};ve(be,function(e){"dlgCommon"===ri.currentDialog&&void 0!==ri.cFunc&&void 0!==ri.context?e(we):e(Te,!1)}),function(e,t){V(t,!0);var i=N(void 0),o=null;D(function(){var e;B(i)&&""!==On.text&&(On.isVisible&&On.anchor&&On.anchor.isConnected?(null===(e=o)||void 0===e||e.destroy(),o=W(On.anchor,B(i),{placement:"top",modifiers:[{name:"offset",options:{offset:[0,6]}},{name:"preventOverflow",options:{boundary:"viewport"}},{name:"flip",options:{fallbackPlacements:["top","bottom"]}}]}),B(i).classList.add("mdc-tooltip--shown")):o&&(o.destroy(),o=null,B(i).classList.remove("mdc-tooltip--shown")))}),F(function(){var e;null===(e=o)||void 0===e||e.destroy()});var n=Bn(),r=z(n),a=z(r);j(a,function(){return On.text},function(e){var t=E(),i=U(t);L(i,function(){return On.text}),P(e,t)}),q(n,function(e){return G(i,e)},function(){return B(i)}),P(e,n),$()}(ge(be,2),{}),Z(function(){Ye(J,B(g)),Ye(Q,B(c)),Ye(ie,B(p))}),at(J,"clientWidth",function(e){return G(l,e)}),P(e,Y),$()}var Wl=R('<div id="bgm-player" style="display:none"></div> <!> <!>',1);void 0===window.ResizeObserver&&(window.ResizeObserver=bt);var El=function(e){e.preventDefault(),e.returnValue=""};window.addEventListener?window.addEventListener("beforeunload",El):window.onbeforeunload=El,wt(function(e,i){var o,n,r;V(i,!0);var a,s="<div>Loading</div>";function u(){var e=localStorage.getItem("theme"),t=document.head.querySelector("#theme-dark"),i=document.head.querySelector("#theme-light"),o=function(){if(!window.matchMedia)return!1;try{return"not all"!==window.matchMedia("(prefers-color-scheme: dark)").media}catch(c){return!1}}();"dark"===e?o?(t&&(t.media="screen and (prefers-color-scheme: light)"),i&&(i.media="screen and (prefers-color-scheme: dark)"),ei.value="dark"):(t&&(t.media="all"),i&&(i.media="not all")):o||(i&&(i.media="all"),t&&(t.media="not all"))}function d(e){return v.apply(this,arguments)}function v(){return(v=f(l().m(function e(i){var o,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:o=Array.from(i),r=l().m(function e(){var t,i;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=o[a],e.p=1,e.n=2,new Promise(function(e,i){var o=new Image;o.onload=e,o.onerror=i,o.src=t});case 2:e.n=4;break;case 3:e.p=3,i=e.v,console.error(i);case 4:return e.p=4,n&&(n.innerHTML="<div>Images</div><div>".concat(a," / ").concat(o.length,"</div>")),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}),a=0;case 1:if(!(a<o.length)){e.n=3;break}return e.d(t(r()),2);case 2:a++,e.n=1;break;case 3:return e.a(2)}},e)}))).apply(this,arguments)}function g(){return p.apply(this,arguments)}function p(){return(p=f(l().m(function e(){var t,i;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!gi.value){e.n=4;break}return t="Your browser does not support the .avif format.\n Avif images may not be displayed.",e.p=1,e.n=2,new Promise(function(e,t){var i=new Image;i.onload=e,i.onerror=t,i.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="});case 2:e.n=4;break;case 3:e.p=3,i=e.v,console.error(i),li.labelText=t,li.isOpen=!0;case 4:return e.a(2)}},e,null,[[1,3]])}))).apply(this,arguments)}function m(){return m=f(l().m(function e(){var t,i,a,c,u,v,p,m,h,b,w,T,I,S,y;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=document.getElementById("lm"),r=document.getElementById("projectSize"),n=document.getElementById("indicator"),t=r?parseInt(r.innerHTML):0,i=n?n.className:"",n&&(s=n.innerHTML),o&&(o.style.pointerEvents="none",o.style.overflow="hidden"),"function"!=typeof window.fetch){e.n=14;break}return e.p=1,e.n=2,fetch("project.json");case 2:if(!(a=e.v)||!a.body){e.n=10;break}c=a.body.getReader(),u=new TextDecoder,v=0,p="";case 3:return e.n=4,c.read();case 4:if(m=e.v,h=m.done,b=m.value,!h){e.n=5;break}return e.a(3,6);case 5:v+=b.length,p+=u.decode(b,{stream:!0}),n&&(n.innerHTML="ind2"===i&&t>0?"".concat(s,"<div>").concat((v/t*100).toFixed(1)," %</div>"):"ind3"===i&&t>0?"".concat(s,"<div>").concat((v/1e6).toFixed(1),"/").concat((t/1e6).toFixed(1)," MB</div>"):"".concat(s,"<div>").concat((v/1e6).toFixed(1)," MB</div>")),e.n=3;break;case 6:if(o&&(o.style.height="0"),w=JSON.parse(p),T=ln(w),!(I=an.safeParse(T)).success){e.n=9;break}if(dn(I.data),!(app.preloadExternalImages&&vi.size>0)){e.n=7;break}return e.n=7,d(vi);case 7:return setTimeout(function(){var e=document.createElement("style");document.head.appendChild(e),setTimeout(function(){o&&(o.style.height="",o.style.opacity="1",o.style.overflow="",o.style.pointerEvents=""),n&&n.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),e.n=8,g();case 8:e.n=10;break;case 9:li.labelText="Failed to load data.",li.isOpen=!0,console.error(I.error);case 10:e.n=13;break;case 11:if(e.p=11,y=e.v,console.error(y),o&&(o.style.height="0"),dn(JSON.parse(JSON.stringify(app))),!(app.preloadExternalImages&&vi.size>0)){e.n=12;break}return e.n=12,d(vi);case 12:return setTimeout(function(){var e=document.createElement("style");document.head.appendChild(e),setTimeout(function(){o&&(o.style.height="",o.style.opacity="1",o.style.overflow="",o.style.pointerEvents=""),n&&n.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),e.n=13,g();case 13:e.n=15;break;case 14:(S=new XMLHttpRequest).open("GET","project.json",!0),S.onprogress=function(e){n&&(n.innerHTML="ind2"===i&&t>0?"".concat(s,"<div>").concat((e.loaded/t*100).toFixed(1)," %</div>"):"ind3"===i&&t>0?"".concat(s,"<div>").concat((e.loaded/1e6).toFixed(1),"/").concat((t/1e6).toFixed(1)," MB</div>"):"".concat(s,"<div>").concat((e.loaded/1e6).toFixed(1)," MB</div>"))},S.onload=f(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:if(o&&(o.style.height="0"),200!==S.status){e.n=2;break}if(dn(JSON.parse(S.responseText)),!(app.preloadExternalImages&&app.externalImages.size>0)){e.n=1;break}return e.n=1,d(app.externalImages);case 1:e.n=3;break;case 2:dn(JSON.parse(JSON.stringify(app)));case 3:return setTimeout(function(){var e=document.createElement("style");document.head.appendChild(e),setTimeout(function(){o&&(o.style.height="",o.style.opacity="1",o.style.overflow="",o.style.pointerEvents=""),n&&n.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),e.n=4,g();case 4:return e.a(2)}},e)})),S.send();case 15:return e.a(2)}},e,null,[[1,11]])})),m.apply(this,arguments)}D(function(){li.isOpen&&(a.close(),a.open(),li.isOpen=!1)}),ie(function(){window.debugApp=app,u(),function(){Di.apply(this,arguments)}(),function(){m.apply(this,arguments)}(),F(function(){oi.update(function(e){return null==e||e.destroy(),null})})});var h=Wl(),b=ge(U(h),2);Nl(b,{});var w=ge(b,2);q(ht(w,{get labelText(){return li.labelText},get timeoutMs(){return li.timeoutMs},children:function(e,t){De(e,{class:"text-center"})},$$slots:{default:!0}}),function(e){return a=e},function(){return a}),P(e,h),$()},{target:document.getElementById("app")})}}})}();
