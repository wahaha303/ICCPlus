!function(){var e=["onError","onSuccess"];function t(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],i=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}}}throw new TypeError(u(e)+" is not iterable")}function i(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,b(o.key),o)}}function o(e,t,i){return t=c(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,r()?Reflect.construct(t,i||[],c(e).constructor):t.apply(e,i))}function n(e){var t="function"==typeof Map?new Map:void 0;return n=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return function(e,t,i){if(r())return Reflect.construct.apply(null,arguments);var o=[null];o.push.apply(o,t);var n=new(e.bind.apply(e,o));return i&&a(n,i.prototype),n}(e,arguments,c(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),a(i,e)},n(e)}function r(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(r=function(){return!!e})()}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",n=i.toStringTag||"@@toStringTag";function r(i,o,n,r){var l=o&&o.prototype instanceof c?o:c,u=Object.create(l.prototype);return s(u,"_invoke",function(i,o,n){var r,c,l,s=0,u=n||[],d=!1,v={p:0,n:0,v:e,a:f,f:f.bind(e,4),d:function(t,i){return r=t,c=0,l=e,v.n=i,a}};function f(i,o){for(c=i,l=o,t=0;!d&&s&&!n&&t<u.length;t++){var n,r=u[t],f=v.p,g=r[2];i>3?(n=g===o)&&(l=r[(c=r[4])?5:(c=3,3)],r[4]=r[5]=e):r[0]<=f&&((n=i<2&&f<r[1])?(c=0,v.v=o,v.n=r[1]):f<g&&(n=i<3||r[0]>o||o>g)&&(r[4]=i,r[5]=o,v.n=g,c=0))}if(n||i>1)return a;throw d=!0,o}return function(n,u,g){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&f(u,g),c=u,l=g;(t=c<2?e:l)||!d;){r||(c?c<3?(c>1&&(v.n=-1),f(c,l)):v.n=l:v.v=l);try{if(s=2,r){if(c||(n="next"),t=r[n]){if(!(t=t.call(r,l)))throw TypeError("iterator result is not an object");if(!t.done)return t;l=t.value,c<2&&(c=0)}else 1===c&&(t=r.return)&&t.call(r),c<2&&(l=TypeError("The iterator does not provide a '"+n+"' method"),c=1);r=e}else if((t=(d=v.n<0)?l:i.call(o,v))!==a)break}catch(t){r=e,c=1,l=t}finally{s=1}}return{value:t,done:d}}}(i,n,r),!0),u}var a={};function c(){}function u(){}function d(){}t=Object.getPrototypeOf;var v=[][o]?t(t([][o]())):(s(t={},o,function(){return this}),t),f=d.prototype=c.prototype=Object.create(v);function g(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,n,"GeneratorFunction")),e.prototype=Object.create(f),e}return u.prototype=d,s(f,"constructor",d),s(d,"constructor",u),u.displayName="GeneratorFunction",s(d,n,"GeneratorFunction"),s(f),s(f,n,"Generator"),s(f,o,function(){return this}),s(f,"toString",function(){return"[object Generator]"}),(l=function(){return{w:r,m:g}})()}function s(e,t,i,o){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}s=function(e,t,i,o){function r(t,i){s(e,t,function(e){return this._invoke(t,i,e)})}t?n?n(e,t,{value:i,enumerable:!o,configurable:!o,writable:!o}):e[t]=i:(r("next",0),r("throw",1),r("return",2))},s(e,t,i,o)}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function d(e,t,i,o,n,r,a){try{var c=e[r](a),l=c.value}catch(e){return void i(e)}c.done?t(l):Promise.resolve(l).then(o,n)}function v(e){return function(){var t=this,i=arguments;return new Promise(function(o,n){var r=e.apply(t,i);function a(e){d(r,o,n,a,c,"next",e)}function c(e){d(r,o,n,a,c,"throw",e)}a(void 0)})}}function f(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||T(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var o,n,r,a,c=[],l=!0,s=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(o=r.call(i)).done)&&(c.push(o.value),c.length!==t);l=!0);}catch(e){s=!0,n=e}finally{try{if(!l&&null!=i.return&&(a=i.return(),Object(a)!==a))return}finally{if(s)throw n}}return c}}(e,t)||T(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,o)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach(function(t){h(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function h(e,t,i){return(t=b(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function b(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,t||"default");if("object"!=u(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}function w(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=T(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==i.return||i.return()}finally{if(c)throw r}}}}function T(e,t){if(e){if("string"==typeof e)return I(e,t);var i={}.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=Array(t);i<t;i++)o[i]=e[i];return o}System.register(["./chunk-vendors-legacy.DiwgDA-a.js"],function(r,c){"use strict";var s,d,p,b,T,I,S,y,x,C,O,A,k,B,M,D,F,R,j,P,$,V,q,W,L,U,N,E,z,G,_,H,Y,Z,J,X,K,Q,ee,te,ie,oe,ne,re,ae,ce,le,se,ue,de,ve,fe,ge,pe,me,he,be,we,Te,Ie,Se,ye,xe,Ce,Oe,Ae,ke,Be,Me,De,Fe,Re,je,Pe,$e,Ve,qe,We,Le,Ue,Ne,Ee,ze,Ge,_e,He,Ye,Ze,Je,Xe,Ke,Qe,et,tt,it,ot,nt,rt,at,ct,lt,st,ut,dt,vt,ft,gt,pt,mt;return{setters:[function(e){s=e.p,d=e.S,p=e.a,b=e.o,T=e.c,I=e.b,S=e.d,y=e.w,x=e.g,C=e.N,O=e.r,A=e.t,k=e.e,B=e.u,M=e.f,D=e.h,F=e.k,R=e.i,j=e.j,P=e.l,$=e.m,V=e.n,q=e.s,W=e.q,L=e.v,U=e.x,N=e.y,E=e.z,z=e.A,G=e.B,_=e.C,H=e.D,Y=e.E,Z=e.F,J=e.G,X=e.H,K=e.I,Q=e.J,ee=e.K,te=e.L,ie=e.M,oe=e.O,ne=e.P,re=e.Q,ae=e.R,ce=e.T,le=e.U,se=e.V,ue=e.W,de=e.X,ve=e.Y,fe=e.Z,ge=e._,pe=e.$,me=e.a0,he=e.a1,be=e.a2,we=e.a3,Te=e.a4,Ie=e.a5,Se=e.a6,ye=e.a7,xe=e.a8,Ce=e.a9,Oe=e.aa,Ae=e.ab,ke=e.ac,Be=e.ad,Me=e.ae,De=e.af,Fe=e.ag,Re=e.ah,je=e.ai,Pe=e.aj,$e=e.ak,Ve=e.al,qe=e.am,We=e.an,Le=e.ao,Ue=e.ap,Ne=e.aq,Ee=e.ar,ze=e.as,Ge=e.at,_e=e.au,He=e.av,Ye=e.aw,Ze=e.ax,Je=e.ay,Xe=e.az,Ke=e.aA,Qe=e.aB,et=e.aC,tt=e.aD,it=e.aE,ot=e.aF,nt=e.aG,rt=e.aH,at=e.aI,ct=e.aJ,lt=e.aK,st=e.aL,ut=e.aM,dt=e.aN,vt=e.aO,ft=e.aP,gt=e.aQ,pt=e.aR,mt=e.aS}],execute:function(){var r=document.createElement("style");
/*!
			 * canvas-size
			 * v2.0.0
			 * https://github.com/jhildenbiddle/canvas-size
			 * (c) 2015-2024 John Hildenbiddle <http://hildenbiddle.com>
			 * MIT license
			 */
function c(e){var t,i,o=e.sizes.shift(),n=Math.max(Math.ceil(o[0]),1),r=Math.max(Math.ceil(o[1]),1),a=[n-1,r-1,1,1],l=performance.now(),s="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope;s?(t=new OffscreenCanvas(1,1),i=new OffscreenCanvas(n,r)):((t=document.createElement("canvas")).width=1,t.height=1,(i=document.createElement("canvas")).width=n,i.height=r);var u=t.getContext("2d"),d=i.getContext("2d");d&&(d.fillRect.apply(d,a),u.drawImage(i,n-1,r-1,1,1,0,0,1,1));var v=u&&0!==u.getImageData(0,0,1,1).data[3],f=parseInt(performance.now()-l);return[t,i].forEach(function(e){e.height=0,e.width=0}),s?(postMessage({width:n,height:r,testTime:f,isTestPass:v}),!v&&e.sizes.length&&setTimeout(function(){c(e)},0)):v?e.onSuccess({width:n,height:r,testTime:f}):(e.onError({width:n,height:r,testTime:f}),e.sizes.length&&setTimeout(function(){c(e)},0)),v}r.textContent="html,body{height:100%}p{margin-bottom:0}#app,#lm{height:100%}#backpackDialog{max-height:100%}img{padding-right:0!important;padding-left:0!important;width:100%}.fadeOverlay{position:fixed;top:0;left:0;width:100%;height:100%;opacity:0;pointer-events:none;z-index:10000}.ab-0{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;-webkit-backface-visibility:hidden;backface-visibility:hidden;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;min-height:100%;max-width:100%;position:relative;background-position:center;background-attachment:fixed}.s-main{height:100%}.m-half{margin:.125rem!important}.mt-half{margin-top:.125rem!important}.ml-half{margin-left:.125rem!important}.mr-half{margin-right:.125rem!important}.mb-half{margin-bottom:.125rem!important}.m-n1{margin:-.25rem!important}.m-n2{margin:-.5rem!important}.m-n3{margin:-1rem!important}.m-n4{margin:-1.5rem!important}.m-n5{margin:-3rem!important}.mt-n1{margin-top:-.25rem!important}.mt-n2{margin-top:-.5rem!important}.mt-n3{margin-top:-1rem!important}.mt-n4{margin-top:-1.5rem!important}.mt-n5{margin-top:-3rem!important}.ml-n1{margin-left:-.25rem!important}.ml-n2{margin-left:-.5rem!important}.ml-n3{margin-left:-1rem!important}.ml-n4{margin-left:-1.5rem!important}.ml-n5{margin-left:-3rem!important}.mr-n1{margin-right:-.25rem!important}.mr-n2{margin-right:-.5rem!important}.mr-n3{margin-right:-1rem!important}.mr-n4{margin-right:-1.5rem!important}.mr-n5{margin-right:-3rem!important}.mb-n1{margin-bottom:-.25rem!important}.mb-n2{margin-bottom:-.5rem!important}.mb-n3{margin-bottom:-1rem!important}.mb-n4{margin-bottom:-1.5rem!important}.mb-n5{margin-bottom:-3rem!important}.h-100{height:100%!important}.w-auto{width:auto!important}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.align-center{align-items:center}.list-text{font-size:.8125rem;font-weight:500;line-height:1rem}.dialog-title{font-size:1.5rem}.d-column{display:flex;flex-direction:column}.d-row{display:flex;flex-direction:row}.justify-start{justify-content:flex-start}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.justify-space-around{justify-content:space-around}.justify-space-between{justify-content:space-between}.dialog-actions--btn{color:#43a047}.mdc-dialog__title:focus{outline:none}.mdc-dialog__content{max-height:810px;font-size:.875rem;font-weight:400;line-height:1.375rem;letter-spacing:.0071428571em}.mdc-dialog__actions{padding:4px}.backpack-wrapper{font-size:.875rem;font-weight:400;line-height:1.375rem;letter-spacing:.0071428571em}.mdc-text-field,.mdc-button{width:100%}.mdc-floating-label{font-size:.9125rem}.mdc-select{width:100%}.mdc-snackbar{top:0;bottom:auto}.no-shadow{box-shadow:none}.mdc-form-field{font-size:1rem}.mdc-form-field>label{cursor:pointer}.mdc-tooltip{pointer-events:none}.smui-autocomplete__menu{max-width:100%}.toolbar{width:100%;font-size:24px;display:flex;flex-direction:row;align-items:center;overflow:auto}.toolbar__dialog{font-size:.875rem}.toolbar__title{font-family:Roboto,sans-serif;font-size:1.25rem;line-height:1.5}.toolbar__title p{display:inline}.toolbar__title p:not(:last-child){margin-right:4px}.req p{display:inline}.req p:not(:last-child){margin-right:4px}.point-slot{border-radius:4px}.disabled{pointer-events:none;opacity:.5}.hidden{display:none!important}.transparent{pointer-events:none;opacity:0}.preview-image{cursor:pointer}.mdc-deprecated-list-divider{border-bottom-color:currentColor}.btn--image-background{-webkit-appearance:none;-moz-appearance:none;appearance:none;border:none;background:none;font:inherit;color:inherit;width:100%}.btn--image{width:100%;height:auto;object-fit:contain;object-position:center}.pointBar{height:56px;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px rgba(0,0,0,.14),0 1px 10px rgba(0,0,0,.12)}.mdc-drawer--mini{position:fixed;width:56px;transition:width .2s}.mdc-drawer--mini:hover{width:256px}.navigation-drawer{display:flex;flex-direction:column;justify-content:space-between}.pointbar-icons{font-size:32px;padding:0}.pointbar-center--viewer{flex:1 0 auto!important;max-width:calc(90vw - 96px);overflow-x:auto;overflow-y:hidden;white-space:nowrap;padding:0;justify-content:space-around}.counter-icons{width:36px;height:36px;font-size:.875rem;overflow:hidden}.button-icons{font-size:24px!important}.mdc-chip--small{font-size:12px;border-radius:12px;height:24px}.mdi--small{font-size:12px!important}.mdi--normal{font-size:18px!important}.mdi--big{font-size:24px!important}.smui-chip-input__container{padding-top:20px!important;padding-left:12px!important;padding-right:12px!important}.mdi{font-family:Material Design Icons;line-height:1}.mdc-deprecated-list-item__graphic{font-size:24px}.switch-scale{--mdc-ripple-fg-scale: 1.45 !important;margin:8px}.check-scale{--mdc-checkbox-touch-target-size: 32px}.b-line{border-bottom:1px solid #e9ecef}.floating-button-container{position:relative;width:100%}.floating-button{position:absolute;z-index:1;top:50%;right:5px;transform:translateY(-50%)}.spacer{margin-left:auto}.hide-file-ui input[type=file]::file-selector-button{display:none}.hide-file-ui input[type=file]:not(.mdc-text-field--label-floating){color:transparent}.line-default{line-height:1}.row-cm{margin:0 1% 25px}.fullHeight{display:flex;height:100%;align-content:start}.w-20{-webkit-box-flex:0;-ms-flex:0 0 20%!important;flex:0 0 20%!important;max-width:20%}.w-14{-webkit-box-flex:0;-ms-flex:0 0 14.28%!important;flex:0 0 calc(100% / 7)!important;max-width:calc(100% / 7)}.w-12{-webkit-box-flex:0;-ms-flex:0 0 12.5%!important;flex:0 0 12.5%!important;max-width:12.5%}.w-11{-webkit-box-flex:0;-ms-flex:0 0 11.11%!important;flex:0 0 calc(100% / 9)!important;max-width:calc(100% / 9)}.w-10{-webkit-box-flex:0;-ms-flex:0 0 10%!important;flex:0 0 10%!important;max-width:10%}.w-9{-webkit-box-flex:0;-ms-flex:0 0 9.09%!important;flex:0 0 calc(100% / 11)!important;max-width:calc(100% / 11)}.bordered-panel{border-top-width:1px!important;margin:0!important}.mdc-form-field>label{width:100%}.bg-overlay{background-blend-mode:overlay}.on-top{z-index:99999!important}.create-box{display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;color:gray;border:2px grey dashed;border-radius:10px;height:100%}.save-slot{border:1px grey solid}.textbox-mini{height:40px}.textbox-mini:before{height:24px}.panel--active,.mdc-tab--active .mdc-tab__text-label{color:#1976d2}.mdc-tab-indicator--active .mdc-tab-indicator__content--underline{border-color:#1976d2}.slider{max-width:104px;width:100%;height:32px}.mdc-slider,.mdc-slider .mdc-slider__thumb{height:32px}.mdc-slider .mdc-slider__thumb-knob{border:none;width:12px;height:12px}.mdc-slider .mdc-slider__track,.mdc-slider .mdc-slider__track--inactive{height:2px}.mdc-slider .mdc-slider__track--active{top:0;height:2px}.music-player{top:0;box-shadow:0 2px 4px -1px rgba(0,0,0,.2),0 4px 5px rgba(0,0,0,.14),0 1px 10px rgba(0,0,0,.12);font-family:Roboto,sans-serif}.music-player--row{height:32px}.music-player--button{font-size:24px!important}.scrolling-text{display:inline-block;white-space:nowrap;min-width:150px;animation:scrollText 10s linear infinite}.viewer-menu{height:48px}.picture-input{width:100%;margin:0 auto;text-align:center}.preview-container{width:100%;box-sizing:border-box;margin:0 auto;cursor:pointer;overflow:hidden;transform:translateZ(0)}.picture-preview{width:100%;height:100%;position:relative;z-index:10001;box-sizing:border-box;background-color:rgba(200,200,200,.25)}.picture-preview.dragging-over{filter:brightness(.5)}.picture-inner{position:relative;z-index:10002;pointer-events:none;box-sizing:border-box;margin:1em auto;padding:.5em;border:.3em dashed rgba(66,66,66,.15);border-radius:8px;width:calc(100% - 2.5em);height:calc(100% - 2.5em);display:table}.picture-inner .picture-inner-text{display:table-cell;vertical-align:middle;text-align:center;font-size:2em;line-height:1.5}.picture-input input[type=file]{display:none}.text-prewrap{white-space:pre-wrap}@keyframes scrollText{0%{transform:translate(150px)}to{transform:translate(-100%)}}\n/*$vite$:1*/",document.head.appendChild(r);var ht=[16384,14188,11402,11180,10836,8192,4096,1],bt={max:null,min:1,sizes:[],step:1024,useWorker:!1,onError:Function.prototype,onSuccess:Function.prototype},wt={};function Tt(e){var t=e.width===e.height,i=1===e.height,o=1===e.width,n=[];if(e.width&&e.height)for(var r=e.min||bt.min,a=e.step||bt.step,c=Math.max(e.width,e.height);c>=r;){var l=t||i?c:1,s=t||o?c:1;n.push([l,s]),c-=a}else e.sizes.forEach(function(e){var r=t||i?e:1,a=t||o?e:1;n.push([r,a])});return n}function It(t){var i="undefined"!=typeof window,o=i&&"Promise"in window,n=i&&"HTMLCanvasElement"in window,r=i&&"OffscreenCanvas"in window,a=URL.createObjectURL(new Blob([])).slice(-36),l=performance.now(),s=t.onError,u=t.onSuccess,d=function(e,t){if(null==e)return{};var i,o,n=function(e,t){if(null==e)return{};var i={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(-1!==t.indexOf(o))continue;i[o]=e[o]}return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)i=r[o],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(t,e),v=function(){return parseInt(performance.now()-l)},f=null;if(!n)return!1;if(t.useWorker&&r){var p="\n            var canvasTest = ".concat(c.toString(),";\n            onmessage = function(e) {\n                canvasTest(e.data);\n            };\n        "),h=new Blob([p],{type:"application/javascript"}),b=URL.createObjectURL(h);f=new Worker(b),URL.revokeObjectURL(b),f.onmessage=function(e){var t=e.data,i=t.width,o=t.height,n=t.testTime,r=t.isTestPass,c={width:i,height:o,testTime:n,totalTime:v()};r?(wt[a].onSuccess(c),delete wt[a]):wt[a].onError(c)}}return o?new Promise(function(e){var i=m(m({},t),{},{onError:function(i){var o,n=i.width,r=i.height,a={width:n,height:r,testTime:i.testTime,totalTime:v()};if(0===t.sizes.length)o=!0;else{var c=g(t.sizes.slice(-1),1),l=g(c[0],2),u=l[0],d=l[1];o=n===u&&r===d}s(a),o&&e(m(m({},a),{},{success:!1}))},onSuccess:function(t){var i={width:t.width,height:t.height,testTime:t.testTime,totalTime:v()};u(i),e(m(m({},i),{},{success:!0}))}});if(f){var o=i.onError,n=i.onSuccess;wt[a]={onError:o,onSuccess:n},f.postMessage(d)}else c(i)}):f?(wt[a]={onError:s,onSuccess:u},void f.postMessage(d)):c(t)}var St=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Tt({width:e.max,height:e.max,min:e.min,step:e.step,sizes:f(ht)});return It(m(m(m({},bt),e),{},{sizes:t}))},yt="2.7.4",xt={selFilterBlurIsOn:!1,selFilterBlur:0,selFilterBrightIsOn:!1,selFilterBright:100,selFilterContIsOn:!1,selFilterCont:100,selFilterGrayIsOn:!1,selFilterGray:0,selFilterHueIsOn:!1,selFilterHue:0,selFilterInvertIsOn:!1,selFilterInvert:0,selFilterOpacIsOn:!1,selFilterOpac:100,selFilterSaturIsOn:!1,selFilterSatur:1,selFilterSepiaIsOn:!1,selFilterSepia:0,selBgColorIsOn:!0,selOverlayOnImage:!1,selFilterBgColor:"#70FF7EFF",selBorderColorIsOn:!1,selFilterBorderColor:"#000000FF",selImgBorderColorIsOn:!1,selFilterImgBorderColor:"#000000FF",selCTitleColorIsOn:!1,selFilterCTitleColor:"#000000FF",selCTextColorIsOn:!1,selFilterCTextColor:"#000000FF",selATitleColorIsOn:!1,selFilterATitleColor:"#000000FF",selATextColorIsOn:!1,selFilterATextColor:"#000000FF",selScoreTextColorIsOn:!1,selFilterSTextColor:"#000000FF",selFilterVisibleIsOn:!1,reqFilterBlurIsOn:!1,reqFilterBlur:0,reqFilterBrightIsOn:!1,reqFilterBright:100,reqFilterContIsOn:!1,reqFilterCont:100,reqFilterGrayIsOn:!1,reqFilterGray:0,reqFilterHueIsOn:!1,reqFilterHue:0,reqFilterInvertIsOn:!1,reqFilterInvert:0,reqFilterOpacIsOn:!0,reqFilterOpac:50,reqFilterSaturIsOn:!1,reqFilterSatur:1,reqFilterSepiaIsOn:!1,reqFilterSepia:0,reqBgColorIsOn:!1,reqOverlayOnImage:!1,reqFilterBgColor:"#FFFFFFFF",reqBorderColorIsOn:!1,reqFilterBorderColor:"#000000FF",reqImgBorderColorIsOn:!1,reqImgFilterBorderColor:"#000000FF",reqCTitleColorIsOn:!1,reqFilterCTitleColor:"#000000FF",reqCTextColorIsOn:!1,reqFilterCTextColor:"#000000FF",reqATitleColorIsOn:!1,reqFilterATitleColor:"#000000FF",reqATextColorIsOn:!1,reqFilterATextColor:"#000000FF",reqScoreTextColorIsOn:!1,reqFilterSTextColor:"#000000FF",reqFilterVisibleIsOn:!1,unselFilterBlurIsOn:!1,unselFilterBlur:0,unselFilterBrightIsOn:!1,unselFilterBright:100,unselFilterContIsOn:!1,unselFilterCont:100,unselFilterGrayIsOn:!1,unselFilterGray:0,unselFilterHueIsOn:!1,unselFilterHue:0,unselFilterInvertIsOn:!1,unselFilterInvert:0,unselFilterOpacIsOn:!1,unselFilterOpac:100,unselFilterSaturIsOn:!1,unselFilterSatur:1,unselFilterSepiaIsOn:!1,unselFilterSepia:0,unselFilterVisibleIsOn:!1},Ct={customRowTitle:!1,rowTitle:"Times New Roman",customRowText:!1,rowText:"Times New Roman",customObjectTitle:!1,objectTitle:"Times New Roman",customObjectText:!1,objectText:"Times New Roman",customAddonTitle:!1,addonTitle:"Times New Roman",customAddonText:!1,addonText:"Times New Roman",customScoreText:!1,scoreText:"Times New Roman",rowTitleTextSize:200,rowTextTextSize:100,objectTitleTextSize:200,objectTextTextSize:100,addonTitleTextSize:200,addonTextTextSize:100,scoreTextSize:75,rowTitleColor:"#000000",rowTextColor:"#000000",objectTitleColor:"#000000",objectTextColor:"#000000",addonTitleColor:"#000000",addonTextColor:"#000000",scoreTextColor:"#000000",rowTitleAlign:"center",rowTextAlign:"center",objectTitleAlign:"center",objectTextAlign:"center",addonTitleAlign:"center",addonTextAlign:"center",scoreTextAlign:"center"},Ot={objectImgBorderStyle:"solid",objectImgBorderWidth:2,objectImageWidth:100,objectImageMarginTop:0,objectImageMarginBottom:0,objectImgBorderRadiusTopLeft:0,objectImgBorderRadiusTopRight:0,objectImgBorderRadiusBottomRight:0,objectImgBorderRadiusBottomLeft:0,objectImgBorderRadiusIsPixels:!0,objectImgBorderIsOn:!1,objectImgOverflowIsOn:!1,objectImgBorderColor:"red",objectImgObjectFillStyle:"",objectImgObjectFillIsOn:!1,objectImgObjectFillHeight:0,objectImageBoxWidth:50},At={rowImgBorderStyle:"solid",rowImgBorderWidth:2,rowImageWidth:100,rowImageMarginTop:0,rowImageMarginBottom:0,rowImgBorderRadiusTopLeft:0,rowImgBorderRadiusTopRight:0,rowImgBorderRadiusBottomRight:0,rowImgBorderRadiusBottomLeft:0,rowImgBorderRadiusIsPixels:!0,rowImgBorderIsOn:!1,rowImgOverflowIsOn:!1,rowImgBorderColor:"red",rowImageBoxWidth:50,rowImgObjectFillStyle:"",rowImgObjectFillIsOn:!1,rowImgObjectFillHeight:0},kt={useAddonImage:!1,addonImgBorderStyle:"solid",addonImgBorderWidth:2,addonImageWidth:100,addonImageMarginTop:0,addonImageMarginBottom:0,addonImgBorderRadiusTopLeft:0,addonImgBorderRadiusTopRight:0,addonImgBorderRadiusBottomRight:0,addonImgBorderRadiusBottomLeft:0,addonImgBorderRadiusIsPixels:!0,addonImgBorderIsOn:!1,addonImgOverflowIsOn:!1,addonImgBorderColor:"red",addonImgObjectFillStyle:"",addonImgObjectFillIsOn:!1,addonImgObjectFillHeight:0,addonImageBoxWidth:50},Bt={bgColorIsOn:!1,backgroundColor:"#FFFFFFFF",rowBgColorIsOn:!1,rowBgColor:"#FFFFFFFF",objectBgColorIsOn:!1,objectBgColor:"#FFFFFFFF",isBackgroundRepeat:!1,isBackgroundFitIn:!1,backgroundImage:"",isRowBackgroundRepeat:!1,isRowBackgroundFitIn:!1,rowBackgroundImage:"",isObjectBackgroundRepeat:!1,isObjectBackgroundFitIn:!1,objectBackgroundImage:""},Mt={objectHeight:!0,objectDesignIsAdvanced:!1,objectMargin:10,objectTextPadding:10,objectBorderStyle:"solid",objectBorderWidth:2,objectBorderIsOn:!1,objectDropShadowH:0,objectDropShadowV:0,objectDropShadowBlur:0,objectDropShadowSpread:0,objectDropShadowIsOn:!1,objectUseBoxShadowIsOn:!1,objectBorderRadiusTopLeft:0,objectBorderRadiusTopRight:0,objectBorderRadiusBottomRight:0,objectBorderRadiusBottomLeft:0,objectBorderRadiusIsPixels:!0,objectOverflowIsOn:!0,objectDropShadowColor:"grey",objectGradientIsOn:!1,objectGradient:"",objectGradientOnSelect:"",objectGradientOnReq:"",objectBorderColor:"red",objectBorderImage:"",objectBorderImageRepeat:"stretch",objectBorderImageWidth:5,objectBorderImageSliceTop:5,objectBorderImageSliceBottom:5,objectBorderImageSliceLeft:5,objectBorderImageSliceRight:5,removeSpaceAddonIsOn:!1,titlePaddingIsOn:!1},Dt={rowDesignIsAdvanced:!1,rowMargin:10,rowBodyMarginSides:1,rowBodyMarginTop:25,rowBodyMarginBottom:25,rowTextPaddingY:5,rowTextPaddingX:10,rowOverflowIsOn:!0,rowDropShadowH:0,rowDropShadowV:0,rowDropShadowBlur:0,rowDropShadowSpread:0,rowDropShadowColor:"grey",rowButtonXPadding:0,rowButtonYPadding:0,rowDropShadowIsOn:!1,rowUseBoxShadowIsOn:!1,rowBorderRadiusTopLeft:0,rowBorderRadiusTopRight:0,rowBorderRadiusBottomRight:0,rowBorderRadiusBottomLeft:0,rowBorderRadiusIsPixels:!0,rowBorderStyle:"solid",rowBorderWidth:2,rowBorderIsOn:!1,rowBorderColor:"red",rowGradientIsOn:!1,rowGradient:"",rowBorderImage:"",rowBorderImageRepeat:"stretch",rowBorderImageWidth:5,rowBorderImageSliceTop:5,rowBorderImageSliceBottom:5,rowBorderImageSliceLeft:5,rowBorderImageSliceRight:5},Ft={useAddonDesign:!1,addonDesignIsAdvanced:!1,addonMargin:10,addonTextPadding:10,addonBorderStyle:"solid",addonBorderWidth:2,addonBorderIsOn:!1,addonDropShadowH:0,addonDropShadowV:0,addonDropShadowBlur:0,addonDropShadowSpread:0,addonDropShadowIsOn:!1,addonUseBoxShadowIsOn:!1,addonBorderRadiusTopLeft:0,addonBorderRadiusTopRight:0,addonBorderRadiusBottomRight:0,addonBorderRadiusBottomLeft:0,addonBorderRadiusIsPixels:!0,addonOverflowIsOn:!0,addonDropShadowColor:"grey",addonGradientIsOn:!1,addonGradient:"",addonGradientOnSelect:"",addonGradientOnReq:"",addonBorderColor:"red",addonBorderImage:"",addonBorderImageRepeat:"stretch",addonBorderImageWidth:5,addonBorderImageSliceTop:5,addonBorderImageSliceBottom:5,addonBorderImageSliceLeft:5,addonBorderImageSliceRight:5,useAddonBackgroundImage:!1,addonBackgroundImage:"",isAddonBackgroundFitIn:!1,isAddonBackgroundRepeat:!1,addonBgColorIsOn:!1,addonBgColor:"#FFFFFFFF",addonTitlePaddingIsOn:!1},Rt={customMultiTextFont:!1,multiChoiceCounterPosition:0,multiChoiceCounterSize:170,multiChoiceTextFont:"Times New Roman",multiChoiceTextSize:100},jt={barTextPadding:17,barTextMargin:0,customBarTextFont:!1,barTextFont:"Times New Roman",barPadding:0,barMargin:0,barTextSize:15,barTextColor:"#000000",barPointPos:"#FF0000FF",barPointNeg:"#FF0000FF",barIconColor:"#0000008A",barBackgroundColor:"#FFFFFFFF"},Pt={useBackpackDesign:!1,backpackBgColor:"#FFFFFF",isBackpackBgRepeat:!1,isBackpackBgFitIn:!1,backpackBgImage:"",backPackWidth:1400},app=s(

/*! Delete and replace this part with your project if you're pasting it in, leave it here if you have placed your project.json file under index.html. */
{version:yt,isEditModeOnAll:!0,isPointerCursor:!1,importedChoicesIsOpen:!0,curVolume:100,isMute:!1,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,showAllAddons:0,tmpRow:[],tmpChoice:[],tmpRequired:[],tmpScore:[],tmpAddon:[],tmpGroup:[],rowIdLength:4,objectIdLength:4,words:[],groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,useTextEditor:!0,useToolbarBtn:!1,useChoiceEditBtn:!0,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,addPrefix:!0,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],categories:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,tooltipDelay:1e3,checkDeleteRow:!0,checkDeleteObject:!1,checkSelectAll:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:m(m(m(m(m(m(m(m(m(m(m(m({},xt),Ct),Ot),At),kt),Bt),Mt),Dt),Ft),Rt),jt),Pt)}
/*! End */

),$t={version:yt,isEditModeOnAll:!0,isPointerCursor:!1,importedChoicesIsOpen:!0,curVolume:100,isMute:!1,showMusicPlayer:!1,fadeTransitionColor:"#000000FF",fadeTransitionTime:.25,fadeTransitionIsOn:!1,hideBackpackBtn:0,btnBackpackIsOn:0,showAllAddons:0,tmpRow:[],tmpChoice:[],tmpRequired:[],tmpScore:[],tmpAddon:[],tmpGroup:[],rowIdLength:4,objectIdLength:4,words:[],groups:[],rowDesignGroups:[],objectDesignGroups:[],objectsPerRow:"col-6",globalRequirements:[],googleFonts:[],customFonts:[],compressImageAuto:!1,useTextEditor:!0,useToolbarBtn:!1,useChoiceEditBtn:!0,hideScoresUpdated:!1,hideChoiceDT:!1,hideImages:!1,preloadImages:!1,preloadExternalImages:!1,useVW:!1,addPrefix:!0,activated:[],rows:[],pointTypes:[],variables:[],mdObjects:[],categories:[],printThis:!1,autoSaveIsOn:!1,autoSaveInterval:10,buildAutoSaveIsOn:!1,buildAutoSaveInterval:10,tooltipDelay:1e3,checkDeleteRow:!0,checkDeleteObject:!1,checkSelectAll:!1,defaultRowTitle:"Row",defaultRowText:"This is a row, and inside of it, you can place choices. On both rows and choices Requirements can be placed, which will block a row from being viewed, or make the player unable to select a choice, depending on either Point-types or the Ids of other choices. Point-types can be made in Features then Manage Points. Hovering over buttons will explain what they do. The Design of the project can be changed in 'Modify Design' at the side navigation bar, and private styling for each row can be turned on in the rows Settings. Default text like this can be turned off in Features -> Manage Defaults.",defaultChoiceTitle:"Choice",defaultChoiceText:"This is a Choice, and inside of it, you can place images and text. Scores can be added to it, and have Point-types attached. Addons can be added underneath the image and text. In the Functions at the bottom of the choice, there is an array of different things that can be done. Default text like this can be turned off in Features then Manage Defaults.",defaultBeforePoint:"Cost:",defaultAfterPoint:"points",defaultBeforeReq:"Required:",defaultAfterReq:"choice",defaultAddonTitle:"Addon",defaultAddonText:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.",enableShortcut:!0,orderOrReqText:"0",defaultOrReq:"of",orderSelReqText:"0",defaultSelReq:"choice from",backpack:[{index:0,id:"default_backpack_row",isBackpack:!0,title:"Result",debugTitle:"",titleText:"",objectWidth:"col-md-3",image:"",template:1,isButtonRow:!1,buttonType:!0,buttonId:"",buttonText:"Click",buttonRandom:!1,buttonRandomNumber:1,isResultRow:!0,resultGroupId:"",isInfoRow:!0,defaultAspectWidth:1,defaultAspectHeight:1,allowedChoices:0,currentChoices:0,requireds:[],isEditModeOn:!1,isRequirementOpen:!1,objects:[],rowDesignGroups:[]}],styling:m(m(m(m(m(m(m(m(m(m(m(m({},xt),Ct),Ot),At),kt),Bt),Mt),Dt),Ft),Rt),jt),Pt)},Vt=s(new d),qt=s(new d),Wt=s(new d),Lt=s(new d),Ut=s(new d),Nt=s(new d),Et=s(new d),zt=s(new d),Gt=s(new d),_t=s(new d),Ht=s(new d),Yt=s(new p),Zt=s([]),Jt=s({value:"appCyoaViewer"}),Xt=s({value:"light"}),Kt={ALLOWED_TAGS:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr","font","iframe","img"],ADD_ATTR:["href","target","style","class"]},Qt=y(null),ei=y(null),ti=s({isBgmInit:!1,bgmIsPlaying:!1,bgmPlayInterval:0,bgmTitleInterval:0,bgmFadeInterval:0,bgmFadeTimer:0,bgmTitle:"No Audio Title",curBgmTime:0,curBgmLength:0,isSeeking:!1,lastFadeTime:0,isFadingOut:!1,bgmObjectId:"",noCors:!1}),ii=s({currentDialog:"none"}),oi=s({currentDialog:"none"}),ni=s({labelText:"",timeoutMs:4e3,isOpen:!1}),ri=s({allowDeselect:!1,isSingleFile:!1}),ai=s({stored:!1,name:"Auto Save",time:"",app:""}),ci=s(Array.from({length:99},function(e,t){return{stored:!1,name:"Slot ".concat(t+1),time:"",app:""}})),li=s(Array.from({length:99},function(e,t){return{stored:!1,name:"Slot ".concat(t+1),time:"",app:""}}));s({backgroundColor:"",backgroundImage:"",barBgColor:""});var si=new Set,ui={value:!1},di=O(window.innerWidth,function(e){var t=function(){return e(window.innerWidth)};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),vi=null,fi=null;function gi(){return new Promise(function(e,t){var i=indexedDB.open("cyoaPlusDB");i.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("cyoaStore")||t.createObjectStore("cyoaStore"),t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore")},i.onsuccess=function(t){var i=t.target.result;e(i)},i.onerror=t})}function pi(){return new Promise(function(e,t){return fi?e(fi):t()})}function mi(){return new Promise(function(e,t){if(vi)return e(vi);var i=indexedDB.open("cyoaDB"),o=!1,n=[],r=[],a=[];i.onupgradeneeded=function(e){var t=e.target.result;t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore",{keyPath:"title"}),o=!0},i.onsuccess=function(i){var c=i.target.result;if(1===c.version)if(o)gi().then(function(t){e(vi=t)}).catch(t).finally(function(){c.close()});else if(c.objectStoreNames.contains("buildStore")){var l=c.transaction(["buildStore"],"readonly").objectStore("buildStore").getAll();l.onsuccess=function(){for(var i=l.result,o=0;o<i.length;o++){var n=l.result[o];li[o].stored=!0,li[o].name=n.title,li[o].time="Unknown"}gi().then(function(t){e(vi=t)}).catch(t).finally(function(){fi=c})},l.onerror=function(i){console.error(i),gi().then(function(t){e(vi=t)}).catch(t).finally(function(){c.close()})}}else gi().then(function(t){e(vi=t)}).catch(t).finally(function(){c.close()});else{var s=[new Promise(function(e,t){if(c.objectStoreNames.contains("cyoaStore")){var i=c.transaction("cyoaStore","readonly").objectStore("cyoaStore").openCursor();i.onsuccess=function(t){var i=t.target.result;i?(n.push({key:i.key,value:i.value}),i.continue()):e()},i.onerror=t}else e()}),new Promise(function(e,t){if(c.objectStoreNames.contains("buildStore")){var i=c.transaction("buildStore","readonly").objectStore("buildStore").openCursor();i.onsuccess=function(t){var i=t.target.result;i?(r.push({key:i.key,value:i.value}),i.continue()):e()},i.onerror=t}else e()})];Promise.all(s).then(function(){return c.close(),new Promise(function(e,t){var i=indexedDB.deleteDatabase("cyoaDB");i.onsuccess=function(){var i=indexedDB.open("cyoaDB",1);i.onupgradeneeded=function(e){e.target.result.createObjectStore("buildStore",{keyPath:"title"});var t=e.target.transaction;if(t)for(var i=t.objectStore("buildStore"),o=0,n=0;n<r.length;n++){var c=r[n];void 0!==c.value.title?(i.put(c.value),li[o].stored=!0,li[o].name=c.title,li[o].time="Unknown",o+=1):a.push(c)}},i.onsuccess=function(t){var i=t.target.result;fi=i,e()},i.onerror=function(e){t(e)}},i.onerror=function(e){t(e)}})}).catch(function(e){console.error(e),c.close()}).finally(function(){var i=indexedDB.open("cyoaPlusDB");i.onupgradeneeded=function(e){var t=e.target.result;!t.objectStoreNames.contains("cyoaStore")&&n.length>0&&t.createObjectStore("cyoaStore"),t.objectStoreNames.contains("buildStore")||t.createObjectStore("buildStore");var i=e.target.transaction;if(i){if(n.length>0)for(var o=i.objectStore("cyoaStore"),r=0;r<n.length;r++){var c=n[r];o.put(c.value,c.key)}if(a.length>0)for(var l=i.objectStore("buildStore"),s=0;s<a.length;s++){var u=a[s];l.put(u.value,u.key)}}},i.onsuccess=function(t){var i=t.target.result;e(vi=i)},i.onerror=function(e){t(e)}})}},i.onerror=function(e){t(e)}})}var hi=null;function bi(e,t){return new Promise(function(i,o){var n=setTimeout(function(){return i()},e);t&&t.addEventListener("abort",function(){clearTimeout(n),o(new DOMException("Aborted","AbortError"))})})}function wi(){return Ti.apply(this,arguments)}function Ti(){return Ti=v(l().m(function e(){var i,o,n;return l().w(function(e){for(;;)switch(e.n){case 0:i=new AbortController,hi=i,o="".concat(location.pathname.replace(/\/index\.html$/,"/"),"autoSave"),n=l().m(function e(){var t,n,r,a,c,s,u,d,v;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,bi(1e3*app.buildAutoSaveInterval*60,i.signal);case 1:e.n=3;break;case 2:return e.p=2,e.v,e.a(2,0);case 3:if(app.buildAutoSaveIsOn){e.n=4;break}return e.a(2,0);case 4:return e.n=5,mi();case 5:return t=e.v,n=t.transaction("buildStore","readwrite"),r=n.objectStore("buildStore"),a=navigator.language,c=new Date,s=new Intl.DateTimeFormat(a,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),u=s.format(c),d={stored:!0,name:"Auto Save",time:u,app:Oi()},e.p=6,e.n=7,new Promise(function(e,t){var i=r.put(d,o);i.onsuccess=function(){return e()},i.onerror=function(){return t(i.error)}});case 7:ai.stored=!0,ai.time=u,ni.labelText="Auto-save completed successfully.",ni.isOpen=!0,e.n=9;break;case 8:e.p=8,v=e.v,console.error(v);case 9:return e.a(2)}},e,null,[[6,8],[0,2]])});case 1:if(!app.buildAutoSaveIsOn){e.n=4;break}return e.d(t(n()),2);case 2:if(0!==e.v){e.n=3;break}return e.a(3,4);case 3:e.n=1;break;case 4:return e.a(2)}},e)})),Ti.apply(this,arguments)}function Ii(){return Ii=v(l().m(function e(t,i,o,n,r){var a,c,s,u;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,mi();case 1:return a=e.v,c=a.transaction(n,"readwrite"),s=c.objectStore(n),e.p=2,e.n=3,new Promise(function(e,o){var n=s.put(t,i);n.onsuccess=function(){return e()},n.onerror=function(){return o(n.error)}});case 3:r&&(ci[o].stored=!0,ci[o].time=t.time,ci[o].name=t.name),e.n=5;break;case 4:e.p=4,u=e.v,console.error(u);case 5:return e.a(2)}},e,null,[[2,4]])})),Ii.apply(this,arguments)}function Si(){return Si=v(l().m(function e(t,i,o,n){var r,a,c,s;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.n=1,mi();case 1:return r=e.v,a=r.transaction(o,"readwrite"),c=a.objectStore(o),e.p=2,e.n=3,new Promise(function(e,i){var o=c.delete(t);o.onsuccess=function(){return e()},o.onerror=function(){return i(o.error)}});case 3:n&&(ci[i].stored=!1,ci[i].name="Slot ".concat(i+1),ci[i].time=""),e.n=5;break;case 4:e.p=4,s=e.v,console.error(s);case 5:return e.a(2)}},e,null,[[2,4]])})),Si.apply(this,arguments)}function yi(e,t){return xi.apply(this,arguments)}function xi(){return xi=v(l().m(function e(t,i){var o,n,r=arguments;return l().w(function(e){for(;;)switch(e.n){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.n=2;break}return e.n=1,pi();case 1:n=e.v,e.n=4;break;case 2:return e.n=3,mi();case 3:n=e.v;case 4:return o=n,e.a(2,new Promise(function(e,n){var r=o.transaction(i,"readonly").objectStore(i).get(t);r.onsuccess=function(){return e(void 0!==r.result?r.result:null)},r.onerror=n}))}},e)})),xi.apply(this,arguments)}function Ci(){return Ci=v(l().m(function e(){var t,i,o,n;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,mi();case 1:return t=e.v,i=t.transaction("buildStore","readonly"),o=i.objectStore("buildStore"),n=location.pathname.replace(/\/index\.html$/,"/"),e.n=2,new Promise(function(e,t){var i=o.openCursor();i.onsuccess=function(t){var i=t.target.result;if(i){var o=i.key,r=i.value;if("string"==typeof o&&o.startsWith(n)){var a=o.slice(n.length);if("autoSave"===a)ai.stored=!0,ai.time=r.time;else{var c=a.match(/^slot-(\d+)$/),l=Number(null==c?void 0:c[1]);ci[l].stored=!0,ci[l].name=void 0!==r.name?r.name:"Slot ".concat(l+1),ci[l].time=r.time}}i.continue()}else e()},i.onerror=t});case 2:return e.a(2)}},e)})),Ci.apply(this,arguments)}function Oi(){var e=[];return Array.from(Vt.entries()).forEach(function(t){var i=g(t,2),o=i[0],n=i[1];if(n.isRowButton){if(void 0!==Lt.get(o)){var r="".concat(o,"/RP#").concat(n.rndPoint,"/NUM#").concat(n.pointNum);e.push(r)}}else if(n.isVariable){void 0!==Gt.get(o)&&e.push(o)}else{var a=Ut.get(o);if(void 0!==a){var c=a.choice,l=o,s=[];if(0===n.multiple){for(var u=0;u<c.scores.length;u++){var d=c.scores[u];d.isRandom&&d.setValue&&s.push("".concat(u,":").concat(d.value))}s.length>0&&(l+="/RS#".concat(s.join("/AND#"))),c.isActivateRandom&&c.activatedRandom&&(l+="/RND#".concat(c.activatedRandom.join("/AND#").replace(/\/ON#/g,"/RON#"))),c.textfieldIsOn&&c.customTextfieldIsOn&&void 0!==c.wordChangeSelect&&(l+="/WORD#".concat(c.wordChangeSelect.replace(/,/g,"/CHAR#"))),c.isImageUpload&&c.image!==c.defaultImage&&(l+="/IMG#".concat(c.image.replace(/,/g,"/CHAR#"))),e.push(l)}else{l+="/ON#".concat(n.multiple);for(var v=0;v<c.scores.length;v++){var f=c.scores[v];f.isRandom&&f.setValue&&s.push("".concat(v,":").concat(f.value))}s.length>0&&(l+="/RS#".concat(s.join("/AND#"))),c.isActivateRandom&&c.activatedRandomMul&&(l+="/RND#".concat(c.activatedRandomMul.flat(2).join("/AND#").replace(/\/ON#/g,"/RON#"))),e.push(l)}}}}),e.join(",")}function Ai(){var e=new Date,t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),n=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return"".concat(t,"-").concat(i,"-").concat(o,"_").concat(n,"-").concat(r,"-").concat(a)}function ki(e){if(e.customTextIsOn)return void 0!==e.customText?e.customText:"";switch(e.type){case"id":var t=e.reqId.split("/ON#"),i=Ut.get(t[0]);if(void 0!==i){var o=i.choice;return"".concat(e.beforeText).concat(t.length>1?" ".concat(t[1]):""," ").concat(o.title," ").concat(e.afterText)}break;case"points":var n=Wt.get(e.reqId);if(void 0!==n)return"".concat(e.beforeText," ").concat(e.reqPoints," ").concat(n.name," ").concat(e.afterText);break;case"or":for(var r=[],a=0;a<e.orRequired.length;a++){var c=e.orRequired[a].req;if(void 0!==c){var l=c.split("/ON#"),s=Ut.get(l[0]),u="";if(void 0!==s){var d=s.choice;u=l.length>1?"".concat(l[1]," "):"",r.push("".concat(u).concat(d.title))}}}return"1"===app.orderOrReqText?"".concat(e.beforeText," ").concat(r.join(", ")," ").concat(void 0!==e.orNum?"".concat(app.defaultOrReq," ").concat(e.orNum):"".concat(app.defaultOrReq," 1")," ").concat(e.afterText):"".concat(e.beforeText," ").concat(void 0!==e.orNum?"".concat(e.orNum," ").concat(app.defaultOrReq):"1 ".concat(app.defaultOrReq)," ").concat(r.join(", ")," ").concat(e.afterText);case"selFromGroups":if(void 0!==e.selGroups){for(var v=[],f=0;f<e.selGroups.length;f++){var g=e.selGroups[f],p=Nt.get(g);void 0!==p&&v.push(p.name)}return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(v.join(", ")," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(v.join(", ")," ").concat(e.afterText)}case"selFromRows":if(void 0!==e.selRows){for(var m=[],h=0;h<e.selRows.length;h++){var b=e.selRows[h],w=Lt.get(b);void 0!==w&&m.push(w.title)}return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(m.join(", ")," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(m.join(", ")," ").concat(e.afterText)}case"selFromWhole":return"1"===app.orderSelReqText?"".concat(e.beforeText," ").concat(app.defaultOrReq," ").concat(e.selNum," ").concat(e.afterText):"".concat(e.beforeText," ").concat(e.selNum," ").concat(app.defaultOrReq," ").concat(e.afterText)}return"".concat(e.beforeText," ").concat(e.afterText)}function Bi(e){return Lt.has(e)||Ut.has(e)||zt.has(e)||Wt.has(e)||_t.has(e)||Ht.has(e)||Nt.has(e)||Gt.has(e)}function Mi(e,t){for(var i=app.addPrefix?"row-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Bi(i)?e>2?Mi(0,++t):Mi(++e,t):i}function Di(e,t){for(var i=app.addPrefix?"word-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Bi(i)?e>2?Di(0,++t):Di(++e,t):i}function Fi(e,t){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=app.addPrefix&&!i?"choice-":"",n="abcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)o+=n.charAt(Math.floor(36*Math.random()));return Bi(o)?e>2?Fi(0,++t):Fi(++e,t):o}function Ri(e,t,i){for(var o=app.addPrefix?"design-":"",n="abcdefghijklmnopqrstuvwxyz0123456789",r=0;r<t;r++)o+=n.charAt(Math.floor(36*Math.random()));return Bi(o)?e>2?Ri(0,++t):Ri(++e,t):o}function ji(e,t){for(var i=app.addPrefix?"group-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Bi(i)?e>2?ji(0,++t):ji(++e,t):i}function Pi(e,t){for(var i=app.addPrefix?"point-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Bi(i)?e>2?Pi(0,++t):Pi(++e,t):i}function $i(e,t){for(var i=app.addPrefix?"variable-":"",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Bi(i)?e>2?$i(0,++t):$i(++e,t):i}function Vi(e,t){for(var i="s-",o="abcdefghijklmnopqrstuvwxyz0123456789",n=0;n<t;n++)i+=o.charAt(Math.floor(36*Math.random()));return Yt.has(i)?e>2?Vi(0,++t):Vi(++e,t):i}function qi(e){switch(e){case"col-sm-6":case"col-sm-5":return 2;case"col-md-4":return 3;case"col-md-3":return 4;case"w-20":return 5;case"col-lg-2":return 6;case"w-14":return 7;case"w-12":return 8;case"w-11":return 9;case"w-10":return 10;case"w-9":return 11;case"col-xl-1":return 12;default:return 1}}var Wi,Li=[];function Ui(){return function(){if(Li.length!==app.words.length)return!0;for(var e=0;e<Li.length;e++){if(Li[e].id!==app.words[e].id)return!0;if(Li[e].replaceText!==app.words[e].replaceText)return!0}return!1}()&&(Li=JSON.parse(JSON.stringify(app.words)),Wi=new RegExp(app.words.map(function(e){return e.id}).sort(function(e,t){return t.length-e.length}).map(function(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}).join("|"),"g")),Wi}function Ni(e){var t=e;return app.words&&(t=t.replace(Ui(),function(e){var t=Wt.get(e);if(void 0!==t)return(t.startingSum%1==0?t.startingSum:parseFloat(t.startingSum.toFixed(void 0!==t.decimalPlaces?t.decimalPlaces:2))).toString();var i=Ut.get(e);if(void 0!==i){var o=i.choice;if(o.isSelectableMultiple&&o.isMultipleUseVariable)return o.multipleUseVariable.toString()}else{var n=zt.get(e);if(void 0!==n)return n.replaceText}return e})),t}function Ei(e,t,i){if(void 0!==i){if(void 0!==i.styling&&i.isPrivateStyling&&i[e])return i.styling;if(void 0!==app.objectDesignGroups&&i.objectDesignGroups)for(var o=0;o<i.objectDesignGroups.length;o++){var n=Ht.get(i.objectDesignGroups[o]);if(void 0!==n&&n[e]){var r=n.activatedId,a=Et.get(r);if(""===r||Gi(n.activatedId))return n.styling;if(void 0!==app.globalRequirements&&void 0!==a&&Zi(a.requireds))return n.styling}}}if(void 0!==t){if(void 0!==t.styling&&t.isPrivateStyling&&t[e])return t.styling;if(void 0!==app.rowDesignGroups&&t.rowDesignGroups)for(var c=0;c<t.rowDesignGroups.length;c++){var l=_t.get(t.rowDesignGroups[c]);if(void 0!==l&&l[e]){var s=l.activatedId,u=Et.get(s);if(""===s||Gi(l.activatedId))return l.styling;if(void 0!==app.globalRequirements&&void 0!==u&&Zi(u.requireds))return l.styling}}}return app.styling}function zi(e,t){return t.has(e)?zi("".concat(e,"_dup"),t):e}function Gi(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vt,o=g(e.split("/ON#"),2),n=o[0],r=o[1],a=parseInt(void 0===r?"0":r);return a>0?((null===(t=i.get(n))||void 0===t?void 0:t.multiple)||0)>=a:i.has(n)}function _i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;switch(e){case"5":case"4":case"3":return 10*t+1;default:return 10*t+2}}function Hi(e){if("number"==typeof e)return e;if("string"==typeof e)return Number(e);var t=Hi(e.left),i=Hi(e.right);switch(e.operator){case"1":return t+i;case"2":return t-i;case"3":return t*i;case"4":return 0!==i?t/i:t;case"5":return 0!==i?t%i:t;default:return t}}function Yi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vt;if(e.required)switch(e.type){case"id":return Gi(e.reqId,t);case"points":var i=Wt.get(e.reqId);if(void 0!==i){if(void 0===e.operator)return i.startingSum>e.reqPoints;switch(e.operator){case"1":return i.startingSum>e.reqPoints;case"2":return i.startingSum>=e.reqPoints;case"3":return i.startingSum==e.reqPoints;case"4":return i.startingSum<=e.reqPoints;case"5":return i.startingSum<e.reqPoints}}return!1;case"or":for(var o=void 0===e.orNum?1:e.orNum,n=0,r=0;r<e.orRequired.length;r++){var a=e.orRequired[r].req;void 0!==a&&Gi(a,t)&&n++}return n>=o;case"pointCompare":var c=Wt.get(e.reqId),l=Wt.get(e.reqId1);if(void 0!==c&&void 0!==l){var s=l.startingSum;if(e.more)for(var u=0;u<e.more.length;u++){var d=0,v=e.more[u],f=v.operator||"1",g=_i(f,v.priority);if(v.id){var p=Wt.get(v.id);void 0!==p&&(d=p.startingSum)}else void 0!==v.points&&(d=v.points);var m={left:s,operator:f,right:d,priority:g};s="number"!=typeof s&&g<s.priority?{left:s.left,operator:s.operator,right:{left:s.right,operator:f,right:d,priority:g},priority:s.priority}:m}var h=Hi(s);switch(e.operator){case"1":return c.startingSum>h;case"2":return c.startingSum>=h;case"3":return c.startingSum==h;case"4":return c.startingSum<=h;case"5":return c.startingSum<h;default:return!1}}return!1;case"selFromGroups":if(e.selGroups){for(var b=0,w=void 0===e.selFromOperators?"1":e.selFromOperators,T=void 0===e.selNum?1:e.selNum,I=0;I<e.selGroups.length;I++){var S=Nt.get(e.selGroups[I]);if(void 0!==S)for(var y=S.elements,x=0;x<y.length;x++)Vt.has(y[x])&&b++}switch(w){case"1":return!(T>b||0===T&&b>0);case"2":return T===b;case"3":return!(T<b||0===T&&b>0);default:return!1}}case"selFromRows":if(e.selRows){for(var C=0,O=void 0===e.selFromOperators?"1":e.selFromOperators,A=void 0===e.selNum?1:e.selNum,k=0;k<e.selRows.length;k++){var B=Lt.get(e.selRows[k]);void 0!==B&&(C+=B.currentChoices)}switch(O){case"1":return!(A>C||0===A&&C>0);case"2":return A===C;case"3":return!(A<C||0===A&&C>0);default:return!1}}case"selFromWhole":for(var M=0,D=void 0===e.selFromOperators?"1":e.selFromOperators,F=void 0===e.selNum?1:e.selNum,R=0;R<app.rows.length;R++)M+=app.rows[R].currentChoices;switch(D){case"1":return!(F>M||0===F&&M>0);case"2":return F===M;case"3":return!(F<M||0===F&&M>0);default:return!1}case"gid":var j=Et.get(e.reqId);return void 0!==j&&void 0!==app.globalRequirements&&Zi(j.requireds,t);case"word":var P=zt.get(e.reqId);if(void 0!==P){for(var $=0,V=0;V<e.orRequired.length;V++){var q=e.orRequired[V].req;void 0!==q&&P.replaceText===q&&$++}return $>=1}return!1}else switch(e.type){case"id":return!Gi(e.reqId,t);case"or":for(var W=void 0===e.orNum?1:e.orNum,L=0,U=0;U<e.orRequired.length;U++){var N=e.orRequired[U].req;(""===N||void 0!==N&&Gi(N,t))&&L++}return L<e.orRequired.length-W+1;case"gid":var E=Et.get(e.reqId);return void 0!==E&&void 0!==app.globalRequirements&&!Zi(E.requireds,t)}return!1}function Zi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vt,i=!0;if(void 0!==e)for(var o=0;o<e.length;o++){var n=e[o],r=!0;if(void 0!==n.requireds)for(var a=0;a<n.requireds.length;a++)r=r&&Yi(n.requireds[a],t);r&&(i=i&&Yi(e[o],t))}return i}function Ji(e){var t=new Audio;return t.controls=!1,t.preload="metadata",e&&(t.crossOrigin="anonymous"),function(e){var t=!1,i=1,o=!1,n=!0;return e.addEventListener("loadedmetadata",function(){(o=Number.isFinite(e.duration)&&e.seekable&&e.seekable.length>0)&&(ti.curBgmLength=e.duration)}),e.addEventListener("play",function(){n=!1}),e.addEventListener("ended",function(){n=!0}),{type:"audio",load:function(t,i){e.src=t,e.loop=!(null==i||!i.loop),e.load(),n=!0,o=!1},play:function(){return e.play().catch(function(e){throw n=!0,console.warn(e),e})},pause:function(){return e.pause()},stop:function(){e.pause(),o&&(e.currentTime=0),n=!0},mute:function(){t=!0,e.muted=!0},unMute:function(){t=!1,e.muted=!1},setVolume:function(o){i=o/100,t||(e.volume=i)},isPlaying:function(){return!e.paused&&!n},isStopped:function(){return n},isMuted:function(){return t},seekTo:function(t){if(!o)return!1;try{return e.currentTime=t,!0}catch(i){return!1}},getCurrentTime:function(){return o?e.currentTime:0},getDuration:function(){return o?e.duration:0},getTitle:function(){var t;return null!==(t=e.src.split("/").pop())&&void 0!==t?t:""},getId:function(){return e.src}}}(t)}function Xi(e,t,i,o){function n(){var i=o.play();ti.noCors=!1,Promise.resolve(i).catch(function(){o=function(e,t){var i=Ji(!1);return i.load(e,{loop:t}),i.play(),Qt.set(i),ti.noCors=!0,i}(t,!e.bgmNoLoop)})}function r(){var r=0,a=0,c=0;if(i&&o.load(t,{loop:!e.bgmNoLoop}),e.bgmFadeIn&&void 0!==e.bgmFadeInSec&&e.bgmFadeInSec>0){var l=e.bgmFadeInSec/20;ti.lastFadeTime=e.bgmFadeInSec,o.setVolume(0),n(),0!==ti.bgmFadeInterval&&(window.clearInterval(ti.bgmFadeInterval),ti.bgmFadeInterval=0),0!==ti.bgmPlayInterval&&(window.clearInterval(ti.bgmPlayInterval),ti.bgmPlayInterval=0),ti.isFadingOut&&(ti.isFadingOut=!1),ti.bgmFadeInterval=window.setInterval(function(){o.isPlaying()&&(r<app.curVolume?(r+=5,o.setVolume(r),ti.lastFadeTime=ti.lastFadeTime-l):(o.setVolume(app.curVolume),window.clearInterval(ti.bgmFadeInterval),ti.bgmFadeInterval=0,ti.lastFadeTime=0))},l)}else ti.isFadingOut&&(ti.isFadingOut=!1,window.clearInterval(ti.bgmFadeInterval),ti.bgmFadeInterval=0),n(),o.setVolume(app.curVolume);ti.bgmObjectId=e.id,app.showMusicPlayer&&(0!==ti.bgmTitleInterval&&(window.clearInterval(ti.bgmTitleInterval),ti.bgmTitleInterval=0),ti.bgmTitleInterval=window.setInterval(function(){o.getId()!==t||""===o.getTitle()||0===o.getDuration()&&!ti.noCors||(ti.bgmTitle=o.getTitle(),ti.curBgmLength=o.getDuration(),window.clearInterval(ti.bgmTitleInterval),ti.bgmTitleInterval=0)},1e3),0!==ti.bgmPlayInterval&&(window.clearInterval(ti.bgmPlayInterval),ti.bgmPlayInterval=0),ti.bgmPlayInterval=window.setInterval(function(){if(!ti.isSeeking&&o.isPlaying()){var e=Math.floor(o.getCurrentTime());e!==ti.curBgmTime?a!==e?ti.curBgmTime=e:(++c>ti.curBgmLength&&(c=1),ti.curBgmTime=c):(a=e,c=e+1,ti.curBgmTime=c)}},1e3))}if(ti.isFadingOut){var a=ti.lastFadeTime;0!==ti.bgmFadeTimer&&(window.clearTimeout(ti.bgmFadeTimer),ti.bgmFadeTimer=0),ti.bgmFadeTimer=window.setTimeout(function(){r()},a)}else r()}function Ki(e,t){var i=app.curVolume/5;if(e.bgmFadeOut&&void 0!==e.bgmFadeOutSec&&e.bgmFadeOutSec>0&&i>0){var o=e.bgmFadeOutSec/i,n=app.curVolume;ti.lastFadeTime=e.bgmFadeOutSec,ti.isFadingOut=!0,0!==ti.bgmFadeInterval&&(window.clearInterval(ti.bgmFadeInterval),ti.bgmFadeInterval=0),ti.bgmFadeInterval=window.setInterval(function(){void 0!==t.setVolume&&(n>0?(n-=5,t.setVolume(n),ti.lastFadeTime-=o):ti.isFadingOut&&(t.pause(),t.setVolume(app.curVolume),window.clearInterval(ti.bgmFadeInterval),ti.bgmFadeInterval=0,ti.lastFadeTime=0,ti.isFadingOut=!1,0!==ti.bgmTitleInterval&&(window.clearInterval(ti.bgmTitleInterval),ti.bgmTitleInterval=0),0!==ti.bgmPlayInterval&&(window.clearInterval(ti.bgmPlayInterval),ti.bgmPlayInterval=0),ti.bgmTitle="No Audio Title",ti.curBgmTime=0,ti.curBgmLength=0))},o)}else t.pause(),0!==ti.bgmTitleInterval&&(window.clearInterval(ti.bgmTitleInterval),ti.bgmTitleInterval=0),0!==ti.bgmPlayInterval&&(window.clearInterval(ti.bgmPlayInterval),ti.bgmPlayInterval=0),ti.bgmTitle="No Audio Title",ti.curBgmTime=0,ti.curBgmLength=0}function Qi(e,t,i){var o,n,r=x(ei),a=x(Qt);e.useAudioURL?(!a||"audio"!==a.type||a.getId()!==t&&!0===ti.noCors)&&(null===(o=a)||void 0===o||o.stop(),a=Ji(!0),Qt.set(a)):!r||a&&"youtube"===a.type||(null===(n=a)||void 0===n||n.stop(),a=function(e){return{type:"youtube",load:function(t,i){null!=i&&i.loop?(e.loadPlaylist(t),e.setLoop(!0)):(e.loadVideoById(t),e.setLoop(!1))},play:function(){return e.playVideo()},pause:function(){return e.pauseVideo()},stop:function(){return e.stopVideo()},mute:function(){return e.mute()},unMute:function(){return e.unMute()},setVolume:function(t){return e.setVolume(t)},isPlaying:function(){return 1===e.getPlayerState()},isStopped:function(){return 2===e.getPlayerState()},isMuted:function(){return e.isMuted()},seekTo:function(t){return e.seekTo(t,!0),!0},getCurrentTime:function(){return e.getCurrentTime()},getDuration:function(){return e.getDuration()},getTitle:function(){var t,i;return null!==(t=null===(i=e.playerInfo)||void 0===i||null===(i=i.videoData)||void 0===i?void 0:i.title)&&void 0!==t?t:""},getId:function(){var t,i;return null!==(t=null===(i=e.playerInfo)||void 0===i||null===(i=i.videoData)||void 0===i?void 0:i.video_id)&&void 0!==t?t:""}}}(r),Qt.set(a));if(a){var c=ti.bgmIsPlaying;a.getId()===t?ti.bgmObjectId===e.id?c?(a.isStopped()||a.stop(),Xi(e,t,!1,a)):Ki(e,a):c?(a.stop(),Xi(e,t,!1,a)):Ki(e,a):c&&Xi(e,t,!0,a)}else i<10?window.setTimeout(function(){Qi(e,t,++i)},200):console.log("Failed to play bgm")}function eo(){return new Promise(function(e){if(window.YT&&window.YT.Player)e(window.YT);else{var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api",document.head.appendChild(t),window.onYouTubeIframeAPIReady=function(){return e(window.YT)}}})}function to(e){return io.apply(this,arguments)}function io(){return(io=v(l().m(function e(t){var i,o;return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,eo();case 1:i=e.v,o=new i.Player("bgm-player",{width:0,height:0,events:{onReady:function(){ei.set(o),Qi(t,t.bgmId||"",0),app.isMute&&!o.isMuted()&&o.mute()}}});case 2:return e.a(2)}},e)}))).apply(this,arguments)}function oo(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(void 0!==e){if(t)for(var o=["addonBorderRadiusTopLeft","addonBorderRadiusTopRight","addonBorderRadiusBottomLeft","addonBorderRadiusBottomRight","addonImgBorderRadiusTopLeft","addonImgBorderRadiusTopRight","addonImgBorderRadiusBottomLeft","addonImgBorderRadiusBottomRight","objectBorderRadiusTopLeft","objectBorderRadiusTopRight","objectBorderRadiusBottomLeft","objectBorderRadiusBottomRight","objectImgBorderRadiusTopLeft","objectImgBorderRadiusTopRight","objectImgBorderRadiusBottomLeft","objectImgBorderRadiusBottomRight","rowBorderRadiusTopLeft","rowBorderRadiusTopRight","rowBorderRadiusBottomLeft","rowBorderRadiusBottomRight","rowImgBorderRadiusTopLeft","rowImgBorderRadiusTopRight","rowImgBorderRadiusBottomLeft","rowImgBorderRadiusBottomRight"],n=0;n<o.length;n++){var r=o[n];void 0!==e[r]&&(e[r]=10*e[r])}for(var a=["selFilterBgColor","selFilterBorderColor","selFilterCTitleColor","selFilterCTextColor","selFilterATitleColor","selFilterATextColor","selFilterSTextColor","reqFilterBgColor","reqFilterBorderColor","reqFilterCTitleColor","reqFilterCTextColor","reqFilterATitleColor","reqFilterATextColor","reqFilterSTextColor","rowTitleColor","rowTextColor","objectTitleColor","objectTextColor","addonTitleColor","addonTextColor","scoreTextColor","objectImgBorderColor","rowImgBorderColor","addonImgBorderColor","backgroundColor","rowBgColor","objectBgColor","objectDropShadowColor","objectBorderColor","rowDropShadowColor","rowBorderColor","addonDropShadowColor","addonBorderColor","addonBgColor","barTextColor","barIconColor","barBackgroundColor","backpackBgColor","barPointNeg","barPointPos"],c=0;c<a.length;c++){var l=a[c];"object"===u(e[l])&&(e[l]=e[l].hexa)}i&&(void 0===e.customMultiTextFont&&(e.customMultiTextFont=!1),void 0===e.multiChoiceCounterPosition&&(e.multiChoiceCounterPosition=0),void 0===e.multiChoiceCounterSize&&(e.multiChoiceCounterSize=170),void 0===e.multiChoiceTextFont&&(e.multiChoiceTextFont="Times New Roman"),void 0===e.multiChoiceTextSize&&(e.multiChoiceTextSize=100))}}function no(e,t,i){switch(t){case"1":return e-i;case"2":return e+i;case"3":return e*i;case"4":return e/i;case"5":return i;default:return e}}function ro(e){delete e.tmpDiscount,delete e.discountTextA,delete e.discountTextB,delete e.dupTextA,delete e.dupTextB,delete e.discountedFrom,delete e.discountIsOn,delete e.discountScore,delete e.discountScoreCal,delete e.notStackableDiscount,delete e.discountShow,delete e.discountBeforeText,delete e.discountAfterText,delete e.isChangeDiscount,delete e.tmpDisScore,delete e.appliedDiscount,delete e.replaceText,delete e.hideDisValue,delete e.hideDisIcon}function ao(e,t){for(var i=0;i<t.scores.length;i++){var o=t.scores[i],n=o.appliedDiscount;if(!o.isNotDiscountable&&(void 0===e.discountPointTypes||0===e.discountPointTypes.length||-1!==e.discountPointTypes.indexOf(o.id))){var r=Wt.get(o.id);if(void 0!==r&&void 0!==e.discountOperator&&void 0!==e.discountValue){var a=r.allowFloat?o.value:Math.floor(o.value),c=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value;c=r.allowFloat?c:Math.floor(c);var l=0,s=0,u=[],d=!1,v=0;if(e.stackableDiscount){if(o.notStackableDiscount){if(void 0!==o.tmpDiscount){for(var f=0;f<o.tmpDiscount.length;f++)o.tmpDiscount[f].isStackable&&(u=o.tmpDiscount[f].discountedFrom,a=o.tmpDiscount[f].discountedValue,v=f);o.tmpDiscount.splice(v,1)}}else if(void 0!==o.discountedFrom){var g=o.discountedFrom.indexOf(e.id);if(o.discountedFrom.splice(g,1),o.discountedFrom.length>0){var p=!1,m=!1,h=!1;l=a;for(var b=0;b<o.discountedFrom.length;b++){var w=Ut.get(o.discountedFrom[b]);if(void 0!==w){var T=w.choice;void 0!==T.discountOperator&&void 0!==T.discountValue&&(l=no(l,T.discountOperator,T.discountValue),s=l=r.allowFloat?l:Math.floor(l),T.replaceScoreText&&(p=T.replaceScoreText),T.hideScoreValue&&(m=T.hideScoreValue),T.hideScoreIcon&&(h=T.hideScoreIcon),T.discountLowLimitIsOn&&void 0!==T.discountLowLimit&&(l=Math.max(l,T.discountLowLimit)))}}if(e.discountShow){var I=void 0!==e.discountAfterText&&void 0!==o.discountTextA?o.discountTextA.indexOf(e.discountAfterText):-1,S=void 0!==e.discountBeforeText&&void 0!==o.discountTextB?o.discountTextB.indexOf(e.discountBeforeText):-1;if(e.discountTextDuplicated){var y,x;if(-1!==I&&void 0!==o.dupTextA&&void 0!==e.discountAfterText)if(o.dupTextA[e.discountAfterText]-=1,0===o.dupTextA[e.discountAfterText])null===(y=o.discountTextA)||void 0===y||y.splice(I,1),delete o.dupTextA[e.discountAfterText];if(-1!==S&&void 0!==o.dupTextB&&void 0!==e.discountBeforeText)if(o.dupTextB[e.discountBeforeText]-=1,0===o.dupTextB[e.discountBeforeText])null===(x=o.discountTextB)||void 0===x||x.splice(I,1),delete o.dupTextB[e.discountBeforeText]}else-1!==I&&void 0!==o.discountTextA&&(o.discountTextA.splice(I,1),o.discountAfterText=o.discountTextA.join(" ")),-1!==S&&void 0!==o.discountTextB&&(o.discountTextB.splice(S,1),o.discountBeforeText=o.discountTextB.join(" "))}if(o.discountScore=l,o.discountScoreCal=s,o.replaceText=p,o.hideDisValue=m,o.hideDisIcon=h,e.useDiscountCount&&o.appliedDiscount){o.tmpDisScore=c-o.value,t.isActive&&(o.isChangeDiscount=!0);continue}}else{if(void 0!==o.tmpDiscount)for(var C=0;C<o.tmpDiscount.length;C++)o.tmpDiscount[C].isStackable||l>o.tmpDiscount[C].discountedValue&&(u=o.tmpDiscount[C].discountedFrom,s=o.tmpDiscount[C].calcValue,l=o.tmpDiscount[C].discountedValue,v=C,d=!0);d&&void 0!==o.tmpDiscount?0===u.length?o.tmpDiscount.splice(v,1):(o.discountedFrom=u,o.tmpDiscount[v].showDiscount&&(o.discountBeforeText=o.tmpDiscount[v].beforeText,o.discountAfterText=o.tmpDiscount[v].afterText,o.replaceText=o.tmpDiscount[v].replaceText||!1,o.hideDisValue=o.tmpDiscount[v].hideValue||!1,o.hideDisIcon=o.tmpDiscount[v].hideIcon||!1),o.tmpDiscount.splice(v,1),o.notStackableDiscount=!0):ro(o)}}}else if(o.notStackableDiscount)if(void 0!==o.discountedFrom&&o.discountedFrom.length>0&&void 0!==o.tmpDiscount){if(-1!==o.discountedFrom.indexOf(e.id)){if(o.tmpDiscount.length>0){a=o.tmpDiscount[0].discountedValue,d=!0;for(var O=1;O<o.tmpDiscount.length;O++)a>o.tmpDiscount[O].discountedValue&&(a=o.tmpDiscount[O].discountedValue,v=O)}if(d){var A,k;if(o.discountScore=a,o.discountScoreCal=o.tmpDiscount[v].calcValue,o.discountedFrom=o.tmpDiscount[v].discountedFrom,o.notStackableDiscount=!o.tmpDiscount[v].isStackable,o.discountShow=o.tmpDiscount[v].showDiscount,o.tmpDiscount[v].isStackable&&o.tmpDiscount[v].showDiscount)o.discountBeforeText=null===(A=o.discountTextB)||void 0===A?void 0:A.join(""),o.discountAfterText=null===(k=o.discountTextA)||void 0===k?void 0:k.join("");else o.tmpDiscount[v].showDiscount?(o.discountBeforeText=o.tmpDiscount[v].beforeText,o.discountAfterText=o.tmpDiscount[v].afterText,o.replaceText=o.tmpDiscount[v].replaceText||!1,o.hideDisValue=o.tmpDiscount[v].hideValue||!1,o.hideDisIcon=o.tmpDiscount[v].hideIcon||!1):(o.discountBeforeText="",o.discountAfterText="",o.replaceText=!1,o.hideDisValue=!1,o.hideDisIcon=!1);o.tmpDiscount.splice(v,1)}else ro(o)}else for(var B=0;B<o.tmpDiscount.length;B++)if(-1!==o.tmpDiscount[B].discountedFrom.indexOf(e.id)){o.tmpDiscount.splice(B,1);break}}else ro(o);else if(void 0!==o.tmpDiscount){if(o.tmpDiscount=o.tmpDiscount.filter(function(t){return-1!==t.discountedFrom.indexOf(e.id)}),o.tmpDiscount.length>0){a=o.tmpDiscount[0].discountedValue,d=!0;for(var M=1;M<o.tmpDiscount.length;M++)a>o.tmpDiscount[M].discountedValue&&(a=o.tmpDiscount[M].discountedValue,v=M)}if(d){var D,F;if(o.discountScore=a,o.discountScoreCal=o.tmpDiscount[v].calcValue,o.discountedFrom=o.tmpDiscount[v].discountedFrom,o.notStackableDiscount=!o.tmpDiscount[v].isStackable,o.notStackableDiscount)o.tmpDiscount[v].showDiscount?(o.discountBeforeText=o.tmpDiscount[v].beforeText,o.discountAfterText=o.tmpDiscount[v].afterText,o.replaceText=o.tmpDiscount[v].replaceText||!1,o.hideDisValue=o.tmpDiscount[v].hideValue||!1,o.hideDisIcon=o.tmpDiscount[v].hideIcon||!1):(o.discountBeforeText="",o.discountAfterText="",o.replaceText=!1,o.hideDisValue=!1,o.hideDisIcon=!1);else o.discountBeforeText=null===(D=o.discountTextB)||void 0===D?void 0:D.join(""),o.discountAfterText=null===(F=o.discountTextA)||void 0===F?void 0:F.join("");o.tmpDiscount.splice(v,1)}else ro(o)}else ro(o);var R=void 0!==o.discountScore?o.discountScore:o.value;(R=r.allowFloat?R:Math.floor(R))!==c&&n?(o.tmpDisScore=c-R,t.isActive&&(o.isChangeDiscount=!0)):t.isActive&&(o.isChangeDiscount=!1)}}}}function co(e,t){for(var i=0;i<t.scores.length;i++){var o=t.scores[i];if(!o.isNotDiscountable&&(void 0===e.discountPointTypes||0===e.discountPointTypes.length||-1!==e.discountPointTypes.indexOf(o.id))){var n=Wt.get(o.id);if(void 0!==n&&void 0!==e.discountOperator&&void 0!==e.discountValue){var r=n.allowFloat?o.value:Math.floor(o.value),a=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:r,c=0,l=0,s=[],u=void 0,d=!1,v=0;if(void 0===o.discountedFrom&&(o.discountedFrom=[]),e.stackableDiscount)if(o.notStackableDiscount){if(void 0!==o.tmpDiscount){for(var g=0;g<o.tmpDiscount.length;g++)o.tmpDiscount[g].isStackable&&((s=o.tmpDiscount[g].discountedFrom).push(e.id),r=o.tmpDiscount[g].discountedValue,d=!0,v=g);var p;if(c=no(r,e.discountOperator,e.discountValue),l=c=n.allowFloat?c:Math.floor(c),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(c=Math.max(c,e.discountLowLimit)),void 0!==o.discountScore&&o.discountScore>c)o.tmpDisScore=o.discountScore-c,t.isActive&&(o.isChangeDiscount=!0),u={isStackable:!1,discountedFrom:o.discountedFrom,calcValue:void 0!==o.discountScoreCal?o.discountScoreCal:o.discountScore,discountedValue:o.discountScore,showDiscount:!1,replaceText:!1,hideValue:!1,hideIcon:!1},o.discountShow&&(u.showDiscount=!0,u.beforeText=e.discountBeforeText,u.afterText=e.discountAfterText,e.replaceScoreText&&(u.replaceText=!0),e.hideScoreValue&&(u.hideValue=!0),e.hideScoreIcon&&(u.hideIcon=!0)),o.discountScore=c,o.discountScoreCal=l,e.discountShow&&(o.discountShow=!0,lo(e,o)),void 0!==o.discountTextA&&(o.discountAfterText=o.discountTextA.join(" ")),void 0!==o.discountTextB&&(o.discountBeforeText=o.discountTextB.join(" ")),(p=o.discountedFrom).push.apply(p,f(s)),d&&o.tmpDiscount.splice(v,1),o.tmpDiscount.push(u),o.notStackableDiscount=!1;else t.isActive&&(o.isChangeDiscount=!1),s.push(e.id),e.discountShow&&lo(e,o),d?(o.tmpDiscount[v].discountedFrom=s,o.tmpDiscount[v].calcValue=l,o.tmpDiscount[v].discountedValue=c):(u={isStackable:e.stackableDiscount||!1,discountedFrom:s,calcValue:l,discountedValue:c,showDiscount:e.discountShow||!1,replaceText:e.replaceScoreText||!1,hideValue:e.hideScoreValue||!1,hideIcon:e.hideScoreIcon||!1},o.tmpDiscount.push(u))}}else r=o.discountIsOn&&void 0!==o.discountScoreCal?o.discountScoreCal:o.value,r=n.allowFloat?r:Math.floor(r),a=o.discountIsOn&&void 0!==o.discountScore?o.discountScore:o.value,a=n.allowFloat?a:Math.floor(a),c=no(r,e.discountOperator,e.discountValue),l=c=n.allowFloat?c:Math.floor(c),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(c=Math.max(c,e.discountLowLimit)),Array.isArray(o.discountedFrom)||(o.discountedFrom=[]),o.discountScore=c,o.discountScoreCal=l,o.discountedFrom.push(e.id),o.discountScore!==a?(o.tmpDisScore=a-o.discountScore,t.isActive&&(o.isChangeDiscount=!0)):!o.appliedDiscount&&e.useDiscountCount&&e.discountCount?(void 0===e.appliedDisChoices&&(e.appliedDisChoices=[]),o.tmpDisScore=o.value-o.discountScore,t.isActive&&(o.isChangeDiscount=!0)):t.isActive&&(o.isChangeDiscount=!1),o.discountIsOn||(o.discountIsOn=!0),e.discountShow&&(o.discountShow=!0,lo(e,o)),void 0!==o.discountTextA&&(o.discountAfterText=o.discountTextA.join(" ")),void 0!==o.discountTextB&&(o.discountBeforeText=o.discountTextB.join(" "));else void 0===o.tmpDiscount&&(o.tmpDiscount=[]),c=no(r,e.discountOperator,e.discountValue),l=c=n.allowFloat?c:Math.floor(c),e.discountLowLimitIsOn&&void 0!==e.discountLowLimit&&(c=Math.max(c,e.discountLowLimit)),o.discountIsOn?void 0!==o.discountScore&&(o.discountScore>c?(u={isStackable:!o.notStackableDiscount,discountedFrom:o.discountedFrom,calcValue:void 0!==o.discountScoreCal?o.discountScoreCal:o.discountScore,discountedValue:o.discountScore,showDiscount:o.discountShow||!1},o.discountShow&&(u.showDiscount=!0,u.beforeText=o.discountBeforeText,u.afterText=o.discountAfterText,u.replaceText=o.replaceText||!1,u.hideValue=o.hideDisValue||!1,u.hideIcon=o.hideDisIcon||!1),o.discountScore=c,o.discountScoreCal=l,o.discountShow=e.discountShow,o.discountBeforeText=e.discountBeforeText,o.discountAfterText=e.discountAfterText,o.discountedFrom=[e.id],o.notStackableDiscount=!0,o.replaceText=e.replaceScoreText||!1,o.hideDisValue=e.hideScoreValue||!1,o.hideDisIcon=e.hideScoreIcon||!1):(u={isStackable:e.stackableDiscount||!1,discountedFrom:[e.id],calcValue:l,discountedValue:c,showDiscount:e.discountShow||!1,replaceText:o.replaceText||!1,hideValue:o.hideDisValue||!1,hideIcon:o.hideDisIcon||!1},e.discountShow&&(u.showDiscount=!0,u.beforeText=e.discountBeforeText,u.afterText=e.discountAfterText,e.replaceScoreText&&(u.replaceText=!0),e.hideScoreValue&&(u.hideValue=!0),e.hideScoreIcon&&(u.hideIcon=!0))),o.tmpDiscount.push(u)):(o.discountScore=c,o.discountScoreCal=l,e.discountShow&&(o.discountShow=e.discountShow,o.discountBeforeText=e.discountBeforeText,o.discountAfterText=e.discountAfterText,o.replaceText=e.replaceScoreText||!1,o.hideDisValue=e.hideScoreValue||!1,o.hideDisIcon=e.hideScoreIcon||!1),Array.isArray(o.discountedFrom)||(o.discountedFrom=[]),o.discountIsOn=!0,o.discountedFrom.push(e.id),o.notStackableDiscount=!0),void 0!==o.discountScore&&o.discountScore!==a?(o.tmpDisScore=a-o.discountScore,t.isActive&&(o.isChangeDiscount=!0)):t.isActive&&(o.isChangeDiscount=!1)}}}}function lo(e,t){void 0===t.discountTextA&&(t.discountTextA=[]),void 0===t.discountTextB&&(t.discountTextB=[]),void 0===t.dupTextA&&(t.dupTextA={}),void 0===t.dupTextB&&(t.dupTextB={}),e.discountTextDuplicated?(void 0!==e.discountAfterText&&(-1!==t.discountTextA.indexOf(e.discountAfterText)?t.dupTextA[e.discountAfterText]=(t.dupTextA[e.discountAfterText]||0)+1:(t.dupTextA[e.discountAfterText]=1,t.discountTextA.push(e.discountAfterText))),void 0!==e.discountBeforeText&&(-1!==t.discountTextB.indexOf(e.discountBeforeText)?t.dupTextB[e.discountBeforeText]=(t.dupTextB[e.discountBeforeText]||0)+1:(t.dupTextB[e.discountBeforeText]=1,t.discountTextB.push(e.discountBeforeText)))):(void 0!==e.discountAfterText&&t.discountTextA.push(e.discountAfterText),void 0!==e.discountBeforeText&&t.discountTextB.push(e.discountBeforeText)),t.replaceText=e.replaceScoreText||!1,t.hideDisValue=e.hideScoreValue||!1,t.hideDisIcon=e.hideScoreIcon||!1}function so(e,t){if(t.discountedFrom&&t.discountedFrom.length>0)for(var i=0;i<t.discountedFrom.length;i++){var o=Ut.get(t.discountedFrom[i]);if(void 0!==o){var n=o.choice,r=no(t.value,n.discountOperator,n.discountValue),a=r=e.allowFloat?r:Math.floor(r);n.discountLowLimitIsOn&&void 0!==n.discountLowLimit&&(r=Math.max(r,n.discountLowLimit)),t.discountScore=r,t.discountScoreCal=a}}}function uo(e,t){var i=!0,o=new Map,n=new d(JSON.parse(JSON.stringify(f(Vt)))),r=n.get(e.id);t?e.isSelectableMultiple&&e.isMultipleUseVariable?void 0!==r?r.multiple+=1:n.set(e.id,{multiple:e.multipleUseVariable+1}):n.set(e.id,{multiple:0}):void 0!==r&&n.delete(e.id);for(var a=0;a<e.scores.length;a++){var l=e.scores[a],s=Wt.get(l.id);if(void 0!==s){if(l.useExpression&&!l.setValue){if(l.isRandom&&l.expMinValue&&l.expMaxValue)try{var u=l.expMinValue.replace(/\{([^{}]+)\}/g,function(e,t){var i=o.get(t);if(void 0!==i)return"".concat(i);var n=Wt.get(t);if(void 0!==n)return"".concat(n.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))}),v=l.expMaxValue.replace(/\{([^{}]+)\}/g,function(e,t){var i=o.get(t);if(void 0!==i)return"".concat(i);var n=Wt.get(t);if(void 0!==n)return"".concat(n.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))}),g=C(u),p=C(v);l.value=Math.floor(Math.random()*(p-g+1))+g,l.value=s.allowFloat?l.value:Math.floor(l.value),l.setValue=!0,e.isSelectableMultiple&&e.isMultipleUseVariable&&(void 0===l.mulValue&&(l.mulValue=[]),l.mulValue.push(l.value))}catch(c){console.error(c)}else if(l.expValue)try{var m=l.expValue.replace(/\{([^{}]+)\}/g,function(e,t){var i=o.get(t);if(void 0!==i)return"".concat(i);var n=Wt.get(t);if(void 0!==n)return"".concat(n.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});l.value=C(m),l.value=s.allowFloat?l.value:Math.floor(l.value),l.setValue=!0,e.isSelectableMultiple&&e.isMultipleUseVariable&&(void 0===l.mulValue&&(l.mulValue=[]),l.mulValue.push(l.value))}catch(c){console.error(c)}}else l.isRandom&&!l.setValue&&vo(s,l);var h=l.discountIsOn&&void 0!==l.discountScore&&l.appliedDiscount?l.discountScore:l.value;if(l.multiplyByTimes&&(h*=Math.abs(e.multipleUseVariable)+1),Zi(l.requireds,n)&&!l.isActive){var b=o.get(l.id);void 0!==b?(s.belowZeroNotAllowed&&(i=i&&(t?b-h>=0:b+h>=0)),o.set(l.id,b-h)):(s.belowZeroNotAllowed&&(i=i&&(t?s.startingSum-h>=0:s.startingSum+h>=0)),o.set(l.id,s.startingSum-h))}}}if(e.multiplyPointtypeIsOnCheck&&void 0!==e.pointTypeToMultiply)for(var w=0,T=0;T<e.pointTypeToMultiply.length;T++){var I=Wt.get(e.pointTypeToMultiply[T]);if(void 0!==I&&I.belowZeroNotAllowed){for(var S=I.startingSum,y=Zt.length-1;y>=0;y--){var x=Zt[y];if(x.multiplyPointtypeIsOnCheck&&void 0!==x.startingSumAtMultiply){var O=x.startingSumAtMultiply[T].value*x.startingSumAtMultiply[T].calcVal;S-=O=I.allowFloat?O:Math.floor(O),S+=x.startingSumAtMultiply[T].value}if(x.dividePointtypeIsOnCheck&&void 0!==x.startingSumAtDivide){var A=x.startingSumAtDivide[T].value/x.startingSumAtDivide[T].calcVal;S-=A=I.allowFloat?A:Math.floor(A),S+=x.startingSumAtDivide[T].value}if(x.setPointtypeIsOnCheck&&void 0!==x.startingSumAtSet&&(S=x.startingSumAtSet[T].value),x.id===e.id){w=y;break}}for(var k=w+1;k<Zt.length;k++){var B=Zt[k];B.multiplyPointtypeIsOnCheck&&void 0!==B.startingSumAtMultiply&&(S*=B.startingSumAtMultiply[T].calcVal,S=I.allowFloat?S:Math.floor(S)),B.dividePointtypeIsOnCheck&&void 0!==B.startingSumAtDivide&&(S/=B.startingSumAtDivide[T].calcVal,S=I.allowFloat?S:Math.floor(S)),B.setPointtypeIsOnCheck&&void 0!==B.startingSumAtSet&&(S=B.startingSumAtSet[T].calcVal,S=I.allowFloat?S:Math.floor(S))}i=i&&S>=0}}if(e.dividePointtypeIsOnCheck&&void 0!==e.pointTypeToDivide)for(var M=0,D=0;D<e.pointTypeToDivide.length;D++){var F=Wt.get(e.pointTypeToDivide[D]);if(void 0!==F&&F.belowZeroNotAllowed){for(var R=F.startingSum,j=Zt.length-1;j>=0;j--){var P=Zt[j];if(P.multiplyPointtypeIsOnCheck&&void 0!==P.startingSumAtMultiply){var $=P.startingSumAtMultiply[D].value*P.startingSumAtMultiply[D].calcVal;R-=$=F.allowFloat?$:Math.floor($),R+=P.startingSumAtMultiply[D].value}if(P.dividePointtypeIsOnCheck&&void 0!==P.startingSumAtDivide){var V=P.startingSumAtDivide[D].value/P.startingSumAtDivide[D].calcVal;R-=V=F.allowFloat?V:Math.floor(V),R+=P.startingSumAtDivide[D].value}if(P.setPointtypeIsOnCheck&&void 0!==P.startingSumAtSet&&(R=P.startingSumAtSet[D].value),P.id===e.id){M=j;break}}for(var q=M+1;q<Zt.length;q++){var W=Zt[q];W.multiplyPointtypeIsOnCheck&&void 0!==W.startingSumAtMultiply&&(R*=W.startingSumAtMultiply[D].calcVal,R=F.allowFloat?R:Math.floor(R)),W.dividePointtypeIsOnCheck&&void 0!==W.startingSumAtDivide&&(R/=W.startingSumAtDivide[D].calcVal,R=F.allowFloat?R:Math.floor(R)),W.setPointtypeIsOnCheck&&void 0!==W.startingSumAtSet&&(R=W.startingSumAtSet[D].calcVal,R=F.allowFloat?R:Math.floor(R))}i=i&&R>=0}}if(e.setPointtypeIsOnCheck&&void 0!==e.pointTypeToSet)for(var L=0,U=0;U<e.pointTypeToSet.length;U++){var N=Wt.get(e.pointTypeToSet[U]);if(void 0!==N&&N.belowZeroNotAllowed){for(var E=N.startingSum,z=Zt.length-1;z>=0;z--){var G=Zt[z];if(G.multiplyPointtypeIsOnCheck&&void 0!==G.startingSumAtMultiply){var _=G.startingSumAtMultiply[U].value*G.startingSumAtMultiply[U].calcVal;E-=_=N.allowFloat?_:Math.floor(_),E+=G.startingSumAtMultiply[U].value}if(G.dividePointtypeIsOnCheck&&void 0!==G.startingSumAtDivide){var H=G.startingSumAtDivide[U].value/G.startingSumAtDivide[U].calcVal;E-=H=N.allowFloat?H:Math.floor(H),E+=G.startingSumAtDivide[U].value}if(G.setPointtypeIsOnCheck&&void 0!==G.startingSumAtSet&&(E=G.startingSumAtSet[U].value),G.id===e.id){L=z;break}}for(var Y=L+1;Y<Zt.length;Y++){var Z=Zt[Y];Z.multiplyPointtypeIsOnCheck&&void 0!==Z.startingSumAtMultiply&&(E*=Z.startingSumAtMultiply[U].calcVal,E=N.allowFloat?E:Math.floor(E)),Z.dividePointtypeIsOnCheck&&void 0!==Z.startingSumAtDivide&&(E/=Z.startingSumAtDivide[U].calcVal,E=N.allowFloat?E:Math.floor(E)),Z.setPointtypeIsOnCheck&&void 0!==Z.startingSumAtSet&&(E=Z.startingSumAtSet[U].calcVal,E=N.allowFloat?E:Math.floor(E))}i=i&&E>=0}}return i}function vo(e,t){t.isRandom&&void 0!==t.maxValue&&void 0!==t.minValue&&(t.value=Math.floor(Math.random()*(t.maxValue-t.minValue+1))+t.minValue,t.value=e.allowFloat?t.value:Math.floor(t.value),t.setValue=!0)}function fo(){var e=new Set,t=new Set;function i(o){if(o.activateOtherChoice&&void 0!==o.activateThisChoice)if(o.activatedRandom){if(o.isSelectableMultiple){for(var n=0;n<o.multipleUseVariable;n++)if(void 0!==o.activatedRandomMul)for(var r=0;r<o.activatedRandomMul[r].length;r++){var a=o.activatedRandomMul[n][r].split("/ON#"),c=Ut.get(a[0]);if(void 0!==c){var l=c.choice;if(Vt.has(l.id)||o.activateAfterReset)o.isAllowDeselect&&!o.activateAfterReset||(o.activateAfterReset&&t.add(l.id),e.add(l.id),a.length>1&&l.isSelectableMultiple&&(void 0===l.tempMultipleValue?l.tempMultipleValue=parseInt(a[1]):l.tempMultipleValue+=parseInt(a[1])),i(l));else{var s=qt.get(l.id);void 0!==s?a.length>1&&(s.multiple+=parseInt(a[1])):qt.set(l.id,{multiple:a.length>1?parseInt(a[1]):0,isAllowDeselect:l.isAllowDeselect||!1})}}}}else if(void 0!==o.activatedRandom)for(var u=0;u<o.activatedRandom.length;u++){var d=o.activatedRandom[u].split("/ON#"),v=Ut.get(d[0]);if(void 0!==v){var f=v.choice;if(Vt.has(f.id)||o.activateAfterReset)o.isAllowDeselect&&!o.activateAfterReset||(o.activateAfterReset&&t.add(f.id),e.add(f.id),d.length>1&&f.isSelectableMultiple&&(void 0===f.tempMultipleValue?f.tempMultipleValue=parseInt(d[1]):f.tempMultipleValue+=parseInt(d[1])),i(f));else{var g=qt.get(f.id);void 0!==g?d.length>1&&(g.multiple+=parseInt(d[1])):qt.set(f.id,{multiple:d.length>1?parseInt(d[1]):0,isAllowDeselect:f.isAllowDeselect||!1})}}}}else for(var p=o.activateThisChoice.split(","),m=0;m<p.length;m++){var h=p[m].split("/ON#"),b=Ut.get(h[0]);if(void 0!==b){var w=b.choice;if(Vt.has(w.id)||o.activateAfterReset)o.isAllowDeselect&&!o.activateAfterReset||(o.activateAfterReset&&t.add(w.id),e.add(w.id),h.length>1&&w.isSelectableMultiple&&(void 0===w.tempMultipleValue?w.tempMultipleValue=parseInt(h[1]):w.tempMultipleValue+=parseInt(h[1])),i(w));else{var T=qt.get(w.id);void 0!==T?h.length>1&&(T.multiple+=parseInt(h[1])):qt.set(w.id,{multiple:h.length>1?parseInt(h[1]):0,isAllowDeselect:w.isAllowDeselect||!1})}}}}qt.clear(),Array.from(Vt.entries()).forEach(function(t){var o=g(t,1)[0],n=Ut.get(o);if(void 0!==n){var r=n.choice;r.notDeselectedByClean&&(e.add(r.id),i(r))}else{var a=Gt.get(o);void 0!==a&&(a.isTrue=!a.isTrue),Vt.delete(o)}});var o,n=new Set,r=w(Vt.keys());try{for(r.s();!(o=r.n()).done;){var a=o.value;n.add(a)}}catch(Qe){r.e(Qe)}finally{r.f()}var c,l=w(Ut);try{for(l.s();!(c=l.n()).done;){var s=g(c.value,2),d=s[0];s[1].choice.isActive&&n.add(d)}}catch(Qe){l.e(Qe)}finally{l.f()}for(var v=[].concat(f(n),f(t)),p=v.length-1;p>=0;p--){var m=Ut.get(v[p]);if(void 0!==m){var h=m.choice;if(delete h.multiplyPointtypeIsOnCheck,delete h.startingSumAtMultiply,delete h.dividePointtypeIsOnCheck,delete h.startingSumAtDivide,delete h.numDiscountChoices,delete h.appliedDisChoices,h.addToAllowChoice&&void 0!==h.idOfAllowChoice&&void 0!==h.numbAddToAllowChoice)for(var b=0;b<h.idOfAllowChoice.length;b++){var T=Lt.get(h.idOfAllowChoice[b]);void 0!==T&&(T.allowedChoices-=h.numbAddToAllowChoice)}if(h.muteBgm&&Qt){var I=x(Qt);app.isMute=!1,I&&"function"==typeof I.unMute&&I.unMute()}if(e.has(h.id))h.isSelectableMultiple&&h.isMultipleUseVariable&&void 0!==h.tempMultipleValue&&(h.multipleUseVariable=h.tempMultipleValue,delete h.tempMultipleValue),t.has(h.id)&&(h.isActive=!0,Vt.set(h.id,{multiple:h.isSelectableMultiple&&h.isMultipleUseVariable?h.multipleUseVariable:0}));else{if(delete h.activatedRandom,delete h.activatedRandomMul,h.isContentHidden&&void 0!==h.hiddenContentsRow&&void 0!==h.hiddenContentsType)for(var S=0;S<h.hiddenContentsRow.length;S++){var y=Lt.get(h.hiddenContentsRow[S]);if(void 0!==y)for(var C=0;C<h.hiddenContentsType.length;C++)switch(h.hiddenContentsType[C]){case"1":delete y.objectTitleRemoved;break;case"2":delete y.objectImageRemoved;break;case"3":delete y.objectTextRemoved;break;case"4":delete y.objectScoreRemoved;break;case"5":delete y.objectRequirementRemoved;break;case"6":delete y.addonTitleRemoved;break;case"7":delete y.addonImageRemoved;break;case"8":delete y.addonTextRemoved}}if(h.isChangeVariables&&void 0!==h.changedVariables)for(var O=0;O<h.changedVariables.length;O++){var A=Gt.get(h.changedVariables[O]);void 0!==A&&("1"===h.changeType?A.isTrue=!0:"2"===h.changeType?A.isTrue=!1:"3"===h.changeType&&(A.isTrue=!A.isTrue))}if(h.textfieldIsOn&&void 0!==h.idOfTheTextfieldWord&&void 0!==h.wordChangeSelect){var k=zt.get(h.idOfTheTextfieldWord);void 0!==k&&(k.replaceText=void 0===h.wordChangeDeselect?"":h.wordChangeDeselect)}if(h.isImageUpload&&void 0!==h.defaultImage&&(h.image=h.defaultImage),h.setBgmIsOn&&Qt&&h.bgmId){var B=x(Qt);B&&B.getId()===h.bgmId&&(B.stop(),ti.bgmIsPlaying=!1,0!==ti.bgmFadeInterval&&(window.clearInterval(ti.bgmFadeInterval),ti.bgmFadeInterval=0),0!==ti.bgmTitleInterval&&(window.clearInterval(ti.bgmTitleInterval),ti.bgmTitleInterval=0),0!==ti.bgmPlayInterval&&(window.clearInterval(ti.bgmPlayInterval),ti.bgmPlayInterval=0),ti.lastFadeTime=0,ti.isFadingOut=!1,ti.bgmTitle="No Audio Title",ti.curBgmTime=0,ti.curBgmLength=0)}void 0!==h.initMultipleTimesMinus&&(h.numMultipleTimesMinus=h.initMultipleTimesMinus),h.multipleUseVariable=0,h.isActive=!1,Vt.delete(h.id)}}else Vt.delete(v[p])}for(var M=0;M<app.pointTypes.length;M++){var D=app.pointTypes[M];D.startingSum=D.initValue}for(var F=0;F<app.rows.length;F++){var R=app.rows[F];R.isEditModeOn=!1,R.currentChoices=0,R.index=F,delete R.isSimpleEditMode,delete R.templateStack,delete R.widthStack;for(var j=0;j<R.objects.length;j++){var P=R.objects[j];P.index=j,delete P.isEditModeOn,void 0!==P.defaultTemplate&&(P.template=P.defaultTemplate),void 0!==P.defaultWidth&&(P.width=P.defaultWidth),P.isActive||(delete P.forcedActivated,delete P.activatedFrom,delete P.numDiscountChoices,delete P.appliedDisChoices),delete P.templateStack,delete P.widthStack;for(var $=0;$<P.scores.length;$++){var V=P.scores[$];P.isSelectableMultiple?(delete V.isActiveMul,delete V.isActiveMulMinus):delete V.isActive,P.notDeselectedByClean||delete V.setValue,ro(V)}}}for(var q=0;q<app.backpack.length;q++){var W=app.backpack[q];W.isEditModeOn=!1,W.currentChoices=0,W.index=q,delete W.isSimpleEditMode,delete W.templateStack,delete W.widthStack;for(var L=0;L<W.objects.length;L++){var U=W.objects[L];U.index=L,delete U.isEditModeOn,void 0!==U.defaultTemplate&&(U.template=U.defaultTemplate),void 0!==U.defaultWidth&&(U.width=U.defaultWidth),U.isActive||(delete U.forcedActivated,delete U.activatedFrom,delete U.numDiscountChoices,delete U.appliedDisChoices),delete U.templateStack,delete U.widthStack;for(var N=0;N<U.scores.length;N++){var E=U.scores[N];U.isSelectableMultiple?(delete E.isActiveMul,delete E.isActiveMulMinus):delete E.isActive,U.notDeselectedByClean||delete E.setValue,ro(E)}}}if(void 0!==app.defaultBgColor&&(app.styling.backgroundColor=app.defaultBgColor,delete app.defaultBgColor),void 0!==app.defaultBgImage&&(app.styling.backgroundImage=app.defaultBgImage,delete app.defaultBgImage),void 0!==app.defaultBarBgColor&&(app.styling.barBackgroundColor=app.defaultBarBgColor,delete app.defaultBarBgColor),void 0!==app.defaultBarIconColor&&(app.styling.barIconColor=app.defaultBarIconColor,delete app.defaultBarIconColor),void 0!==app.defaultBarTextColor&&(app.styling.barTextColor=app.defaultBarTextColor,delete app.defaultBarTextColor),delete app.bgColorStack,delete app.bgImageStack,delete app.barBgColorStack,delete app.barIconColorStack,delete app.barTextColorStack,app.btnBackpackIsOn=0,app.showAllAddons=0,app.isMute=!1,app.curVolume=100,Qt){var z=x(Qt);z&&"function"==typeof z.unMute&&z.unMute()}Zt.splice(0),v=f(Vt.keys());for(var G=0;G<v.length;G++){var _=Ut.get(v[G]);if(void 0!==_){var H=_.choice;if(Zi(H.requireds)&&uo(H,!0)){if(H.discountOther&&void 0!==H.discountOperator&&void 0!==H.discountValue)if(H.isDisChoices){if(void 0!==H.discountChoices)for(var Y=0;Y<H.discountChoices.length;Y++){var Z=Ut.get(H.discountChoices[Y]);void 0!==Z&&co(H,Z.choice)}}else if(void 0!==H.discountGroups)for(var J=0;J<H.discountGroups.length;J++){var X=Nt.get(H.discountGroups[J]);if(void 0!==X)for(var K=0;K<X.elements.length;K++){var Q=Ut.get(X.elements[K]);void 0!==Q&&co(H,Q.choice)}}if(H.addToAllowChoice&&void 0!==H.idOfAllowChoice&&void 0!==H.numbAddToAllowChoice)for(var ee=0;ee<H.idOfAllowChoice.length;ee++){var te=Lt.get(H.idOfAllowChoice[ee]);void 0!==te&&(te.allowedChoices+=H.numbAddToAllowChoice)}}}}for(var ie=0;ie<v.length;ie++){var oe=Ut.get(v[ie]);if(void 0!==oe){var ne=oe.choice,re=oe.row;if(Zi(ne.requireds)&&uo(ne,!0)){for(var ae=0;ae<ne.scores.length;ae++){var ce=ne.scores[ae],le=Wt.get(ce.id);if(void 0!==le)if(ne.isSelectableMultiple&&ne.isMultipleUseVariableultiple)for(var se=0;se<ne.multipleUseVariable;se++)Zi(ce.requireds)&&(void 0===ce.isActiveMul&&(ce.isActiveMul=[]),ce.isActiveMul[se]||(ce.multiplyByTimes?le.startingSum-=ce.discountIsOn&&void 0!==ce.discountScore?ce.discountScore*(se+1):ce.value*(se+1):le.startingSum-=ce.discountIsOn&&void 0!==ce.discountScore?ce.discountScore:ce.value,ce.isActiveMul[se]=!0));else ne.isSelectableMultiple||Zi(ce.requireds)&&!ce.isActive&&(le.startingSum-=ce.discountIsOn&&void 0!==ce.discountScore?ce.discountScore:ce.value,ce.isActive=!0)}if(ne.multiplyPointtypeIsOn&&void 0!==ne.pointTypeToMultiply&&void 0!==ne.multiplyWithThis){var ue=0;ne.multiplyPointtypeIsOnCheck=!0,"object"!==u(ne.startingSumAtMultiply)&&(ne.startingSumAtMultiply=[]);for(var de=0;de<ne.pointTypeToMultiply.length;de++){var ve=Wt.get(ne.pointTypeToMultiply[de]);if(void 0!==ve)if(ne.multiplyPointtypeIsId&&"string"==typeof ne.multiplyWithThis){var fe=Wt.get(ne.multiplyWithThis);void 0!==fe?(ne.startingSumAtMultiply[de]={value:ve.startingSum,calcVal:fe.startingSum},ve.startingSum*=fe.startingSum):ue++}else"number"==typeof ne.multiplyWithThis&&(ne.startingSumAtMultiply[de]={value:ve.startingSum,calcVal:ne.multiplyWithThis},ve.startingSum*=ne.multiplyWithThis);else ue++}ue===ne.pointTypeToMultiply.length&&delete ne.multiplyPointtypeIsOnCheck,ne.multiplyPointtypeIsOnCheck&&Zt.push(ne)}if(ne.dividePointtypeIsOn&&void 0!==ne.pointTypeToDivide&&void 0!==ne.divideWithThis){var ge=0;ne.dividePointtypeIsOnCheck=!0,"object"!==u(ne.startingSumAtDivide)&&(ne.startingSumAtDivide=[]);for(var pe=0;pe<ne.pointTypeToDivide.length;pe++){var me=Wt.get(ne.pointTypeToDivide[pe]);if(void 0!==me)if(ne.dividePointtypeIsId&&"string"==typeof ne.divideWithThis){var he=Wt.get(ne.divideWithThis);void 0!==he?0===he.startingSum?ge++:(ne.startingSumAtDivide[pe]={value:me.startingSum,calcVal:he.startingSum},me.startingSum/=he.startingSum):ge++}else"number"==typeof ne.divideWithThis&&(0===ne.dividedWithThis?ge++:(ne.startingSumAtDivide[pe]={value:me.startingSum,calcVal:ne.divideWithThis},me.startingSum/=ne.divideWithThis));else ge++}ge===ne.pointTypeToDivide.length&&delete ne.dividePointtypeIsOnCheck,!ne.multiplyPointtypeIsOnCheck&&ne.dividePointtypeIsOnCheck&&Zt.push(ne)}if(ne.changeBackground&&(ne.changeBgImage?void 0!==ne.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:ne.id,data:ne.bgImage}),app.styling.backgroundImage=ne.bgImage):void 0!==ne.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:ne.id,data:ne.changedBgColorCode}),app.styling.backgroundColor=ne.changedBgColorCode)),ne.changePointBar&&(ne.changeBarBgColorIsOn&&void 0!==ne.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:ne.id,data:ne.changedBarBgColor}),app.styling.barBackgroundColor=ne.changedBarBgColor),ne.changeBarIconColorIsOn&&void 0!==ne.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:ne.id,data:ne.changedBarIconColor}),app.styling.barIconColor=ne.changedBarIconColor),ne.changeBarTextColorIsOn&&void 0!==ne.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:ne.id,data:ne.changedBarTextColor}),app.styling.barTextColor=ne.changedBarTextColor)),ne.changeTemplates&&ne.changeTemplatesList&&ne.changeToThisTemplate)for(var be=ne.changeTemplatesList.split(","),we=0;we<be.length;we++){var Te=be[we],Ie=Ut.get(Te);if(void 0===Ie){var Se=Lt.get(Te);if(void 0===Se){var ye=Nt.get(Te);if(void 0===ye);else{for(var xe=ye.rowElements,Ce=0;Ce<xe.length;Ce++){var Oe=Lt.get(xe[Ce]);void 0!==Oe&&vn(Oe,ne.id,ne.changeToThisTemplate)}for(var Ae=ye.elements,ke=0;ke<Ae.length;ke++){var Be=Ut.get(Ae[ke]);if(void 0!==Be)vn(Be.choice,ne.id,ne.changeToThisTemplate)}}}else vn(Se,ne.id,ne.changeToThisTemplate)}else{var Me=Ie.choice;if(vn(Me,ne.id,ne.changeToThisTemplate),ne.changeAddonTemplate)for(var De=0;De<Me.addons.length;De++){vn(Me.addons[De],ne.id,ne.changeToThisTemplate)}}}if(ne.changeWidth&&ne.changeWidthList&&ne.changeToThisWidth)for(var Fe=ne.changeWidthList.split(","),Re=0;Re<Fe.length;Re++){var je=Fe[Re],Pe=Ut.get(je);if(void 0===Pe){var $e=Lt.get(je);if(void 0===$e){var Ve=Nt.get(je);if(void 0===Ve);else{for(var qe=Ve.rowElements,We=0;We<qe.length;We++){var Le=Lt.get(qe[We]);void 0!==Le&&gn(Le,ne.id,ne.changeToThisWidth)}for(var Ue=Ve.elements,Ne=0;Ne<Ue.length;Ne++){var Ee=Ut.get(Ue[Ne]);if(void 0!==Ee)gn(Ee.choice,ne.id,ne.changeToThisWidth)}}}else gn($e,ne.id,ne.changeToThisWidth)}else{gn(Pe.choice,ne.id,ne.changeToThisWidth)}}if(ne.muteBgm&&Qt){var ze=x(Qt);app.isMute=!0,ze&&"function"==typeof ze.mute&&ze.mute()}ne.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),ne.showAllAddons&&(app.showAllAddons+=1),re.currentChoices+=1}else{if(ne.discountOther&&void 0!==ne.discountOperator&&void 0!==ne.discountValue)if(ne.isDisChoices){if(void 0!==ne.discountChoices)for(var Ge=0;Ge<ne.discountChoices.length;Ge++){var _e=Ut.get(ne.discountChoices[Ge]);void 0!==_e&&ao(ne,_e.choice)}}else if(void 0!==ne.discountGroups)for(var He=0;He<ne.discountGroups.length;He++){var Ye=Nt.get(ne.discountGroups[He]);if(void 0!==Ye)for(var Ze=0;Ze<Ye.elements.length;Ze++){var Je=Ut.get(Ye.elements[Ze]);void 0!==Je&&ao(ne,Je.choice)}}if(ne.addToAllowChoice&&void 0!==ne.idOfAllowChoice&&void 0!==ne.numbAddToAllowChoice)for(var Xe=0;Xe<ne.idOfAllowChoice.length;Xe++){var Ke=Lt.get(ne.idOfAllowChoice[Xe]);void 0!==Ke&&(Ke.allowedChoices-=ne.numbAddToAllowChoice)}Vt.delete(ne.id),ne.forcedActivated&&qt.set(ne.id,{multiple:ne.multipleUseVariable})}}else Vt.delete(v[ie])}}function go(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,n=t;if(t.isResultRow||t.isGroupRow){var r=Ut.get(e.id);void 0!==r&&(n=r.row)}!Zi(e.requireds)||t.isInfoRow||i&&e.isNotSelectable||e.forcedActivated||(e.isActive?e.selectOnce||Io(e,n,o):So(e,n,o))}function po(e,t,i,o,n){if(!t.isNotSelectable||!e.isNotActiveUnselectable){var r=!1;if(t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===n.linkedObjects.indexOf(e.id)&&t.activateThisChoice.split(",").some(function(t){return t.split("/ON#")[0]===e.id})&&(n.linkedObjects.push(e.id),r=!0),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss){var a=t.multipleUseVariable;if(o>0)for(var c=0;c<o;c++)yo(t,i,n),a++,e.isAllowDeselect||(t.numMultipleTimesMinus+=1);else if(o<0)for(var l=0;l>-1*o;l++)xo(t,i,n),a--,e.isAllowDeselect||(t.numMultipleTimesPluss-=1);if(t.multipleUseVariable!==a){var s=Math.abs(t.numMultipleTimesMinus-t.numMultipleTimesPluss);if(t.numMultipleTimesMinus>t.numMultipleTimePluss){var u=qt.get(t.id);o>0?(t.numMultipleTimesMinus-=s,void 0!==u?u.multiple+=s:qt.set(t.id,{multiple:s,isAllowDeselect:e.isAllowDeselect||!1})):o<0&&(void 0!==u?u.multiple-=s:qt.set(t.id,{multiple:-s,isAllowDeselect:e.isAllowDeselect||!1}))}}}}else t.isActive||go(t,i,!1,n),e.isAllowDeselect||(t.forcedActivated=!0),void 0===t.activatedFrom&&(t.activatedFrom=0),r||t.activatedFrom++;t.isActive||(delete t.forcedActivated,qt.set(t.id,{multiple:o,isAllowDeselect:e.isAllowDeselect||!1}))}}function mo(e,t,i,o,n){if(t.activateOtherChoice&&void 0!==t.activateThisChoice&&-1===n.linkedObjects.indexOf(e.id)&&t.activateThisChoice.split(",").some(function(t){return t.split("/ON#")[0]===e.id})&&n.linkedObjects.push(e.id),t.isSelectableMultiple){if(t.isMultipleUseVariable&&void 0!==t.numMultipleTimesMinus&&void 0!==t.numMultipleTimesPluss)if(t.isActive){if(o>0)for(var r=0;r<o;r++)e.isAllowDeselect||(t.numMultipleTimesMinus-=1),e.isNotDeactivate||xo(t,i,n);else if(o<0)for(var a=0;a>-1*o;a++)e.isAllowDeselect||(t.numMultipleTimesPluss+=1),e.isNotDeactivate||yo(t,i,n)}else{var c=qt.get(t.id),l=0;void 0!==c?0===(l=c.multiple-o)?qt.delete(t.id):qt.set(t.id,{multiple:l,isAllowDeselect:e.isAllowDeselect||!1}):qt.delete(t.id)}}else void 0!==t.activatedFrom?(t.activatedFrom--,(t.activatedFrom<=0||-1!==n.linkedObjects.indexOf(e.id))&&(t.isActive?(delete t.activatedFrom,delete t.forcedActivated,e.isNotDeactivate||Io(t,i,n)):qt.delete(t.id))):(delete t.forcedActivated,!e.isNotDeactivate&&t.isActive&&Io(t,i,n))}function ho(e,t){if(void 0!==e.activateThisChoice){for(var i=e.activateThisChoice.split(","),o=new Map,n=0;n<i.length;n++){var r=g(i[n].split("/ON#"),2),a=r[0],c=r[1],l=parseInt(void 0===c?"0":c),s=Nt.get(a);if(void 0!==s)for(var u=0;u<s.elements.length;u++){var d=Ut.get(s.elements[u]);if(void 0!==d){var v=d.choice,p=v.isSelectableMultiple&&v.isMultipleUseVariable&&void 0!==v.numMultipleTimesPluss&&v.numMultipleTimesPluss>=v.multipleUseVariable+l&&!v.isInfoRow&&!v.isNotSelectable&&Zi(v.requireds);Vt.has(v.id)&&!p||o.set(v.id,l)}}else{var m=Ut.get(a);if(void 0!==m){var h=m.choice,b=h.isSelectableMultiple&&h.isMultipleUseVariable&&void 0!==h.numMultipleTimesPluss&&h.numMultipleTimesPluss>=h.multipleUseVariable+l&&!h.isInfoRow&&!h.isNotSelectable&&Zi(h.requireds);Vt.has(a)&&!b||o.set(a,l)}}}for(var w=f(o.keys()),T=Math.min(w.length,e.numActivateRandom||0),I=T,S=w.length-1;S>0;S--){var y=Math.floor(Math.random()*(S+1)),x=[w[y],w[S]];w[S]=x[0],w[y]=x[1]}for(var C=[],O=0;O<T;){var A=w[O],k=Ut.get(A);if(void 0!==k){var B=k.row,M=k.choice,D=o.get(A)||0,F=M.multipleUseVariable;if(po(e,M,B,D,t),!M.isActive||M.isSelectableMultiple&&M.isMultipleUseVariable&&M.multipleUseVariable===F){if(C.length<T&&w.length>I){w[O]=w[I++],void 0!==M.activatedFrom&&(M.activatedFrom--,0===M.activatedFrom&&qt.delete(M.id));continue}break}var R=D>0?"".concat(A,"/ON#").concat(D):A;C.push(R)}O++}e.isSelectableMultiple?(void 0===e.activatedRandomMul&&(e.activatedRandomMul=[]),e.activatedRandomMul[e.multipleUseVariable-1]=[].concat(C)):e.activatedRandom=[].concat(C)}}function bo(e,t,i){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5?arguments[5]:void 0,a=Array.from(Vt.keys()),c=function(){var c=a[l],s=Ut.get(c);if(void 0!==s){for(var u=s.row,v=s.choice,g=new d,p=new Set,m=new Set,h=new Set,b=!1,w=!1,T=e.appliedDisChoices?e.appliedDisChoices.indexOf(v.id):-1,I=0;I<v.scores.length;I++){var S=v.scores[I];if(!S.isNotRecalculatable){var y=Wt.get(S.id);if(void 0!==y){if(e.discountOther&&S.isChangeDiscount&&S.isActive&&void 0!==S.tmpDisScore&&(!e.useDiscountCount||e.useDiscountCount&&e.appliedDisChoices)){var x=v.multipleUseVariable,C=!1;if(e.useDiscountCount&&S.discountedFrom&&S.discountedFrom.length>0)if(-1!==T)for(var O=0;O<S.discountedFrom.length;O++){var A=Ut.get(S.discountedFrom[O]);if(void 0!==A){var k=A.choice,B=k.isSelectableMultiple&&k.isMultipleUseVariable&&k.stackableDiscount&&k.discountCount?k.discountCount*k.multipleUseVariable+Number(e.id===k.id):k.discountCount;k.useDiscountCount&&k.appliedDisChoices&&B&&B>k.appliedDisChoices.length&&(k.id!==e.id&&h.add(k),C=!0)}}else C=!0;if(C){delete S.isChangeDiscount,delete S.tmpDisScore;continue}if(v.isSelectableMultiple&&v.isMultipleUseVariable&&void 0!==v.numMultipleTimesMinus){for(var M=x-1;M>=0;M--)v.isActive&&(y.belowZeroNotAllowed&&y.startingSum+S.tmpDisScore<0?v.forcedActivated&&v.isActive?(v.forcedActivated=!1,v.numMultipleTimesMinus--,xo(v,u,r),v.forcedActivated=!0):xo(v,u,r):y.startingSum+=S.tmpDisScore);v.isActive&&(g.set(S.id,S.tmpDisScore),delete S.isChangeDiscount,delete S.tmpDisScore)}else if(!v.isSelectableMultiple)if(y.belowZeroNotAllowed&&y.startingSum+S.tmpDisScore<0)if(v.forcedActivated&&(delete v.forcedActivated,v.isAllowDeselect||qt.set(v.id,{multiple:v.multipleUseVariable})),v.isSelectableMultiple&&v.isMultipleUseVariable)for(var D=0;D<v.multipleUseVariable;D++)v.isActive&&xo(v,u,r);else v.isActive&&Io(v,u,r);else y.startingSum+=S.tmpDisScore,g.set(S.id,S.tmpDisScore),delete S.isChangeDiscount,delete S.tmpDisScore;b=e.id!==v.id,S.discountIsOn||delete S.appliedDiscount,w=!0}if(!o.has(S.idx))for(var F=e.scores.length>0,R=e.scores.length||1,j=0;j<R;j++){var P=F?e.scores[j]:null,$=P&&t.get(P.id)||0,V=P?Wt.get(P.id):null;if((!F||F&&V)&&v.isActive){var q=Zi(S.requireds),W=new d(JSON.parse(JSON.stringify(f(Vt))));W.set(e.id,{multiple:e.multipleUseVariable}),u.currentChoices+=1,V&&(V.startingSum+=$);var L=Zi(S.requireds,W);if(u.currentChoices-=1,V&&(V.startingSum-=$),L!==q){S.setValue||vo(y,S);var U=S.discountIsOn&&void 0!==S.discountScore&&S.appliedDiscount?S.discountScore:S.value;U=y.allowFloat?U:Math.floor(U);var N=!1;if(L){if(v.isSelectableMultiple&&v.isMultipleUseVariable&&void 0!==v.numMultipleTimesMinus)for(var E=v.multipleUseVariable-1;E>=0;E--)void 0!==S.isActiveMul&&S.isActiveMul[E]&&(y.belowZeroNotAllowed&&y.startingSum+U<0?v.forcedActivated&&v.isActive?(v.forcedActivated=!1,v.numMultipleTimesMinus--,xo(v,u,r),v.forcedActivated=!0):xo(v,u,r):(y.startingSum+=U,g.set(S.id,U),S.isActiveMul[E]=!1,N||(N=!0)));else v.isSelectableMultiple||S.isActive&&(y.belowZeroNotAllowed&&y.startingSum+U<0?(v.forcedActivated&&delete v.forcedActivated,Io(v,u,r)):(y.startingSum+=U,g.set(S.id,U),delete S.isActive,N=!0));if(N&&S.discountIsOn&&S.appliedDiscount&&S.discountedFrom)for(var z=0;z<S.discountedFrom.length;z++){var G=Ut.get(S.discountedFrom[z]);if(void 0!==G){var _=G.choice;if(_.useDiscountCount&&void 0!==_.discountCount&&_.appliedDisChoices&&-1!==_.appliedDisChoices.indexOf(v.id)){delete S.appliedDiscount,m.add(_);break}delete S.appliedDiscount;break}}S.setValue&&delete S.setValue}else{if(v.isSelectableMultiple&&v.isMultipleUseVariable&&void 0!==v.numMultipleTimesMinus){var H=v.multipleUseVariable;void 0===S.isActiveMul&&(S.isActiveMul=[]);for(var Y=H-1;Y>=0;Y--)S.isActiveMul[Y]||(y.belowZeroNotAllowed&&y.startingSum+U<0?v.forcedActivated&&v.isActive?(v.forcedActivated=!1,v.numMultipleTimesMinus--,xo(v,u,r),v.forcedActivated=!0):xo(v,u,r):(y.startingSum-=U,g.set(S.id,U),S.isActiveMul[Y]=!0,N||(N=!0)))}else v.isSelectableMultiple||S.isActive||(y.belowZeroNotAllowed&&y.startingSum-U<0?(v.forcedActivated&&delete v.forcedActivated,Io(v,u,r)):(y.startingSum-=U,g.set(S.id,U),S.isActive=!0,N=!0));if(N&&S.discountIsOn&&!S.appliedDiscount&&S.discountedFrom)for(var Z=0;Z<S.discountedFrom.length;Z++){var J=Ut.get(S.discountedFrom[Z]);if(void 0!==J){var X=J.choice;if(!X.useDiscountCount||void 0===X.discountCount){S.appliedDiscount=!0;break}var K=X.isSelectableMultiple&&X.isMultipleUseVariable&&X.stackableDiscount?X.discountCount*X.multipleUseVariable:X.discountCount;if(X.appliedDisChoices||(X.appliedDisChoices=[]),K>X.appliedDisChoices.length||-1!==X.appliedDisChoices.indexOf(v.id)){S.appliedDiscount=!0,p.add(X);break}}}}b||(b=!0),o.add(S.idx)}}}}}}if(h.size>0)for(var Q=Array.from(h),ee=0;ee<Q.length;ee++){var te=Q[ee];te.appliedDisChoices||(te.appliedDisChoices=[]),-1===te.appliedDisChoices.indexOf(v.id)&&te.appliedDisChoices.push(v.id),-1!==T&&e.appliedDisChoices.splice(T,1)}w&&e.appliedDisChoices&&-1!==T&&e.appliedDisChoices.splice(T,1),m.size>0&&m.forEach(function(e){if(e.appliedDisChoices&&!e.scores.some(function(e){return e.appliedDiscount})){var t=e.appliedDisChoices.indexOf(v.id);-1!==t&&e.appliedDisChoices.splice(t,1)}}),p.size>0&&p.forEach(function(e){e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(v.id)&&e.appliedDisChoices.push(v.id)}),b&&(0===n.length?n.push("Scores Updated On: ".concat(v.title)):n.push(", ".concat(v.title)),bo(v,g,i+1,o,n,r))}},l=a.length-1;l>=0;l--)c();if(0===i){if(n.length>0&&!app.hideScoresUpdated){var s=document.createElement("div");s.innerHTML=n.join(""),ni.labelText=s.textContent,ni.isOpen=!0}n.splice(0)}}function wo(e,t,i){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5?arguments[5]:void 0,a=Array.from(Vt.keys()),c=function(){var c=a[l],s=Ut.get(c);if(void 0!==s){var u=s.row,v=s.choice,g=new d,p=new Set,m=new Set,h=!1,b=!1;e&&e.useDiscountCount&&!e.appliedDisChoices&&(e.appliedDisChoices=[]);for(var w=0;w<v.scores.length;w++){var T=v.scores[w];if(!T.isNotRecalculatable){var I=Wt.get(T.id);if(void 0!==I){if(e&&e.discountOther&&T.isChangeDiscount&&T.isActive&&void 0!==T.tmpDisScore&&v.id!==e.id){var S=v.multipleUseVariable,y=e.isSelectableMultiple&&e.isMultipleUseVariable&&e.stackableDiscount&&e.discountCount?e.discountCount*e.multipleUseVariable:e.discountCount;if(!e.useDiscountCount||e.useDiscountCount&&y&&y>e.appliedDisChoices.length){if(v.isSelectableMultiple&&v.isMultipleUseVariable&&void 0!==v.numMultipleTimesMinus){for(var x=S-1;x>=0;x--)v.isActive&&(I.belowZeroNotAllowed&&I.startingSum+T.tmpDisScore<0?v.forcedActivated&&v.isActive?(v.forcedActivated=!1,v.numMultipleTimesMinus--,xo(v,u,r),v.forcedActivated=!0):xo(v,u,r):I.startingSum+=T.tmpDisScore);v.isActive&&(g.set(T.id,T.tmpDisScore),delete T.isChangeDiscount,delete T.tmpDisScore)}else v.isSelectableMultiple||(I.belowZeroNotAllowed&&I.startingSum+T.tmpDisScore<0?(v.forcedActivated&&delete v.forcedActivated,Io(v,u,r)):(I.startingSum+=T.tmpDisScore,g.set(T.id,T.tmpDisScore),delete T.isChangeDiscount,delete T.tmpDisScore));b=!0,v.isActive&&(T.appliedDiscount=!0,h=!0)}}if(!o.has(T.idx))for(var C=e&&e.scores.length>0,O=e&&e.scores.length||1,A=0;A<O;A++){var k=C?e.scores[A]:null,B=k&&t.get(k.id)||0,M=k?Wt.get(k.id):null,D=e?null:Wt.get(t.keys().next().value||""),F=D&&t.values().next().value||0;if((!C||C&&M)&&v.isActive&&!T.isChanged){var R=Zi(T.requireds),j=new d(JSON.parse(JSON.stringify(f(Vt))));e?(j.delete(e.id),u.currentChoices-=1,M&&(M.startingSum+=B)):D&&(D.startingSum-=F);var P=Zi(T.requireds,j);if(e?(u.currentChoices+=1,M&&(M.startingSum-=B)):D&&(D.startingSum+=F),P!==R){T.setValue||vo(I,T);var $=T.discountIsOn&&void 0!==T.discountScore&&T.appliedDiscount?T.discountScore:T.value;$=I.allowFloat?$:Math.floor($);var V=!1;if(P){if(v.isSelectableMultiple&&v.isMultipleUseVariable&&void 0!==v.numMultipleTimesMinus)for(var q=v.multipleUseVariable-1;q>=0;q--)void 0!==T.isActiveMul&&T.isActiveMul[q]&&(I.belowZeroNotAllowed&&I.startingSum+$<0?v.forcedActivated&&v.isActive?(v.forcedActivated=!1,v.numMultipleTimesMinus--,xo(v,u,r),v.forcedActivated=!0):xo(v,u,r):(I.startingSum+=$,g.set(T.id,$),T.isActiveMul[q]=!1,V||(V=!0)));else v.isSelectableMultiple||T.isActive&&(I.belowZeroNotAllowed&&I.startingSum+$<0?(v.forcedActivated&&delete v.forcedActivated,Io(v,u,r)):(I.startingSum+=$,g.set(T.id,$),delete T.isActive,V=!0));if(V&&T.discountIsOn&&T.appliedDiscount&&T.discountedFrom)for(var W=0;W<T.discountedFrom.length;W++){var L=Ut.get(T.discountedFrom[W]);if(void 0!==L){var U=L.choice;if(U.useDiscountCount&&void 0!==U.discountCount&&U.appliedDisChoices&&-1!==U.appliedDisChoices.indexOf(v.id)){delete T.appliedDiscount,m.add(U);break}delete T.appliedDiscount;break}}T.setValue&&delete T.setValue}else{if(v.isSelectableMultiple&&v.isMultipleUseVariable&&void 0!==v.numMultipleTimesMinus){var N=v.multipleUseVariable;void 0===T.isActiveMul&&(T.isActiveMul=[]);for(var E=N-1;E>=0;E--)T.isActiveMul[E]||(I.belowZeroNotAllowed&&I.startingSum+$<0?v.forcedActivated&&v.isActive?(v.forcedActivated=!1,v.numMultipleTimesMinus--,xo(v,u,r),v.forcedActivated=!0):xo(v,u,r):(I.startingSum-=$,g.set(T.id,$),T.isActiveMul[E]=!0,V||(V=!0)))}else v.isSelectableMultiple||T.isActive||(I.belowZeroNotAllowed&&I.startingSum-$<0?(v.forcedActivated&&delete v.forcedActivated,Io(v,u,r)):(I.startingSum-=$,g.set(T.id,$),T.isActive=!0,V=!0));if(V&&T.discountIsOn&&!T.appliedDiscount&&T.discountedFrom)for(var z=0;z<T.discountedFrom.length;z++){var G=Ut.get(T.discountedFrom[z]);if(void 0!==G){var _=G.choice;if(!_.useDiscountCount||void 0===_.discountCount){T.appliedDiscount=!0;break}var H=_.isSelectableMultiple&&_.isMultipleUseVariable&&_.stackableDiscount?_.discountCount*_.multipleUseVariable:_.discountCount;if(_.appliedDisChoices||(_.appliedDisChoices=[]),H>_.appliedDisChoices.length||-1!==_.appliedDisChoices.indexOf(v.id)){T.appliedDiscount=!0,p.add(_);break}}}}b||(b=!0),o.add(T.idx)}}}}}}h&&e&&e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(v.id)&&e.appliedDisChoices.push(v.id),m.size>0&&m.forEach(function(e){if(e.appliedDisChoices&&!e.scores.some(function(e){return e.appliedDiscount})){var t=e.appliedDisChoices.indexOf(v.id);-1!==t&&e.appliedDisChoices.splice(t,1)}}),p.size>0&&p.forEach(function(e){e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(v.id)&&e.appliedDisChoices.push(v.id)}),b&&(0===n.length?n.push("Scores Updated On: ".concat(v.title)):n.push(", ".concat(v.title)),wo(v,g,i+1,o,n,r))}},l=0;l<a.length;l++)c();if(0===i){if(n.length>0&&!app.hideScoresUpdated){var s=document.createElement("div");s.innerHTML=n.join(""),ni.labelText=s.textContent,ni.isOpen=!0}n.splice(0)}}function To(e){var t=!1;Array.from(qt.entries()).forEach(function(i){var o=g(i,2),n=o[0],r=o[1],a=Ut.get(n);if(void 0!==a){var c=a.row,l=a.choice;l.isActive||(go(l,c,!1,e),l.isActive&&(qt.delete(n),t=!0,r.isAllowDeselect||(l.forcedActivated=!0)))}}),t&&To(e)}function Io(e,t,i){if(uo(e,!1)){var o=function(){for(var o=new d,n=new Set,r=0;r<e.scores.length;r++){var a=e.scores[r];if(Zi(a.requireds)&&a.isActive||a.isActive){var c=Wt.get(a.id);if(void 0!==c){var l=a.value;if(a.discountIsOn&&void 0!==a.discountScore&&a.appliedDiscount){if(a.discountedFrom&&a.discountedFrom.length>0)for(var s=0;s<a.discountedFrom.length;s++){var u=Ut.get(a.discountedFrom[s]);if(void 0!==u){var v=u.choice;if(v.useDiscountCount&&void 0!==v.discountCount&&v.appliedDisChoices&&v.appliedDisChoices.length>0){n.add(v);break}}}l=a.discountScore}l=c.allowFloat?l:Math.floor(l),c.startingSum+=l;var f=o.get(a.id);void 0!==f?o.set(a.id,-l+f):o.set(a.id,-l),delete a.isActive,delete a.setValue,delete a.appliedDiscount}}else delete a.setValue,delete a.appliedDiscount}if(n.size>0&&n.forEach(function(t){if(t.appliedDisChoices){var i=t.appliedDisChoices.indexOf(e.id);-1!==i&&t.appliedDisChoices.splice(i,1)}}),e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandom){for(var p=0;p<e.activatedRandom.length;p++){var m=Ut.get(e.activatedRandom[p]);if(void 0!==m){var h=m.row,b=m.choice;mo(e,b,h,0,i)}}delete e.activatedRandom}else for(var w=e.activateThisChoice.split(","),T=0;T<w.length;T++){var I=w[T].split("/ON#"),S=I.length>1?parseInt(I[1]):0,y=Ut.get(I[0]);if(void 0!==y){var C=y.row,O=y.choice;mo(e,O,C,S,i)}else{var A=Nt.get(I[0]);if(void 0!==A)for(var k=A.elements,B=0;B<k.length;B++){var M=Ut.get(k[B]);if(void 0!==M){var D=M.row,F=M.choice;mo(e,F,D,S,i)}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(void 0===e.discountPointTypes&&(e.discountPointTypes=[]),e.isDisChoices){var R=new Set;if(void 0!==e.discountRows)for(var j=0;j<e.discountRows.length;j++){var P=Lt.get(e.discountRows[j]);if(void 0!==P)for(var $=0;$<P.objects.length;$++){var V=P.objects[$];ao(e,V),R.add(V.id)}}if(void 0!==e.discountChoices)for(var q=0;q<e.discountChoices.length;q++)if(!R.has(e.discountChoices[q])){var W=Ut.get(e.discountChoices[q]);void 0!==W&&ao(e,W.choice)}}else if(void 0!==e.discountGroups)for(var L=0;L<e.discountGroups.length;L++){var U=Nt.get(e.discountGroups[L]);if(void 0!==U)for(var N=0;N<U.elements.length;N++){var E=Ut.get(U.elements[N]);void 0!==E&&ao(e,E.choice)}}if(e.isActive=!1,t.currentChoices-=1,Vt.delete(e.id),Array.from(Vt.entries()).forEach(function(t){var o=g(t,2),n=o[0],r=o[1],a=Ut.get(n);if(void 0!==a){var c=a.row,l=a.choice;if(l.id!==e.id&&!Zi(l.requireds))if(l.forcedActivated&&(delete l.forcedActivated,l.isAllowDeselect||qt.set(l.id,{multiple:r.multiple})),0===r.multiple)l.isActive&&Io(l,c,i);else if(r.multiple>0)for(var s=0;s<r.multiple;s++)l.isActive&&xo(l,c,i)}}),e.multiplyPointtypeIsOnCheck&&void 0!==e.pointTypeToMultiply){for(var z=0,G=0;G<e.pointTypeToMultiply.length;G++){var _=Wt.get(e.pointTypeToMultiply[G]);if(void 0!==_){for(var H=Zt.length-1;H>=0;H--){var Y=Zt[H];if(Y.multiplyPointtypeIsOnCheck&&void 0!==Y.startingSumAtMultiply){var Z=Y.startingSumAtMultiply[G].value*Y.startingSumAtMultiply[G].calcVal;Z=_.allowFloat?Z:Math.floor(Z),_.startingSum-=Z,_.startingSum+=Y.startingSumAtMultiply[G].value}if(Y.dividePointtypeIsOnCheck&&void 0!==Y.startingSumAtDivide){var J=Y.startingSumAtDivide[G].value/Y.startingSumAtDivide[G].calcVal;J=_.allowFloat?J:Math.floor(J),_.startingSum-=J,_.startingSum+=Y.startingSumAtDivide[G].value}if(Y.setPointtypeIsOnCheck&&void 0!==Y.startingSumAtSet&&(_.startingSum=Y.startingSumAtSet[G].value),Y.id===e.id){z=H;break}}for(var X=z+1;X<Zt.length;X++){var K=Zt[X];K.multiplyPointtypeIsOnCheck&&void 0!==K.startingSumAtMultiply&&(K.startingSumAtMultiply[G].value=_.startingSum,_.startingSum*=K.startingSumAtMultiply[G].calcVal,_.startingSum=_.allowFloat?_.startingSum:Math.floor(_.startingSum)),K.dividePointtypeIsOnCheck&&void 0!==K.startingSumAtDivide&&(K.startingSumAtDivide[G].value=_.startingSum,_.startingSum/=K.startingSumAtDivide[G].calcVal,_.startingSum=_.allowFloat?_.startingSum:Math.floor(_.startingSum)),K.setPointtypeIsOnCheck&&void 0!==K.startingSumAtSet&&(K.startingSumAtSet[G].value=_.startingSum,_.startingSum=K.startingSumAtSet[G].calcVal,_.startingSum=_.allowFloat?_.startingSum:Math.floor(_.startingSum))}}}delete e.multiplyPointtypeIsOnCheck,delete e.startingSumAtMultiply,e.dividePointtypeIsOnCheck||e.setPointtypeIsOnCheck||Zt.splice(z,1)}if(e.dividePointtypeIsOnCheck&&void 0!==e.pointTypeToDivide){for(var Q=0,ee=0;ee<e.pointTypeToDivide.length;ee++){var te=Wt.get(e.pointTypeToDivide[ee]);if(void 0!==te){for(var ie=Zt.length-1;ie>=0;ie--){var oe=Zt[ie];if(oe.multiplyPointtypeIsOnCheck&&void 0!==oe.startingSumAtMultiply){var ne=oe.startingSumAtMultiply[ee].value*oe.startingSumAtMultiply[ee].calcVal;ne=te.allowFloat?ne:Math.floor(ne),te.startingSum-=ne,te.startingSum+=oe.startingSumAtMultiply[ee].value}if(oe.dividePointtypeIsOnCheck&&void 0!==oe.startingSumAtDivide){var re=oe.startingSumAtDivide[ee].value/oe.startingSumAtDivide[ee].calcVal;re=te.allowFloat?re:Math.floor(re),te.startingSum-=re,te.startingSum+=oe.startingSumAtDivide[ee].value}if(oe.setPointtypeIsOnCheck&&void 0!==oe.startingSumAtSet&&(te.startingSum=oe.startingSumAtSet[ee].value),oe.id===e.id){Q=ie;break}}for(var ae=Q+1;ae<Zt.length;ae++){var ce=Zt[ae];ce.multiplyPointtypeIsOnCheck&&void 0!==ce.startingSumAtMultiply&&(ce.startingSumAtMultiply[ee].value=te.startingSum,te.startingSum*=ce.startingSumAtMultiply[ee].calcVal,te.startingSum=te.allowFloat?te.startingSum:Math.floor(te.startingSum)),ce.dividePointtypeIsOnCheck&&void 0!==ce.startingSumAtDivide&&(ce.startingSumAtDivide[ee].value=te.startingSum,te.startingSum/=ce.startingSumAtDivide[ee].calcVal,te.startingSum=te.allowFloat?te.startingSum:Math.floor(te.startingSum)),ce.setPointtypeIsOnCheck&&void 0!==ce.startingSumAtSet&&(ce.startingSumAtSet[ee].value=te.startingSum,te.startingSum=ce.startingSumAtSet[ee].calcVal,te.startingSum=te.allowFloat?te.startingSum:Math.floor(te.startingSum))}}}delete e.dividePointtypeIsOnCheck,delete e.startingSumAtDivide,e.setPointtypeIsOnCheck||Zt.splice(Q,1)}if(e.setPointtypeIsOnCheck&&void 0!==e.pointTypeToSet){for(var le=0,se=0;se<e.pointTypeToSet.length;se++){var ue=Wt.get(e.pointTypeToSet[se]);if(void 0!==ue){for(var de=Zt.length-1;de>=0;de--){var ve=Zt[de];if(ve.multiplyPointtypeIsOnCheck&&void 0!==ve.startingSumAtMultiply){var fe=ve.startingSumAtMultiply[se].value*ve.startingSumAtMultiply[se].calcVal;fe=ue.allowFloat?fe:Math.floor(fe),ue.startingSum-=fe,ue.startingSum+=ve.startingSumAtMultiply[se].value}if(ve.dividePointtypeIsOnCheck&&void 0!==ve.startingSumAtDivide){var ge=ve.startingSumAtDivide[se].value/ve.startingSumAtDivide[se].calcVal;ge=ue.allowFloat?ge:Math.floor(ge),ue.startingSum-=ge,ue.startingSum+=ve.startingSumAtDivide[se].value}if(ve.setPointtypeIsOnCheck&&void 0!==ve.startingSumAtSet&&(ue.startingSum=ve.startingSumAtSet[se].value),ve.id===e.id){le=de;break}}for(var pe=le+1;pe<Zt.length;pe++){var me=Zt[pe];me.multiplyPointtypeIsOnCheck&&void 0!==me.startingSumAtMultiply&&(me.startingSumAtMultiply[se].value=ue.startingSum,ue.startingSum*=me.startingSumAtMultiply[se].calcVal,ue.startingSum=ue.allowFloat?ue.startingSum:Math.floor(ue.startingSum)),me.dividePointtypeIsOnCheck&&void 0!==me.startingSumAtDivide&&(me.startingSumAtDivide[se].value=ue.startingSum,ue.startingSum/=me.startingSumAtDivide[se].calcVal,ue.startingSum=ue.allowFloat?ue.startingSum:Math.floor(ue.startingSum)),me.setPointtypeIsOnCheck&&void 0!==me.startingSumAtSet&&(me.startingSumAtSet[se].value=ue.startingSum,ue.startingSum=me.startingSumAtSet[se].calcVal,ue.startingSum=ue.allowFloat?ue.startingSum:Math.floor(ue.startingSum))}}}delete e.setPointtypeIsOnCheck,delete e.startingSumAtSet,Zt.splice(le,1)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(var he=0;he<e.changedVariables.length;he++){var be=Gt.get(e.changedVariables[he]);void 0!==be&&("1"===e.changeType?be.isTrue=!1:"2"===e.changeType?be.isTrue=!0:"3"===e.changeType&&(be.isTrue=!be.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var we=0;we<e.idOfAllowChoice.length;we++){var Te=Lt.get(e.idOfAllowChoice[we]);if(void 0!==Te&&(Te.allowedChoices-=e.numbAddToAllowChoice,Te.allowedChoices>0&&Te.currentChoices>=Te.allowedChoices))for(var Ie=0;Ie<Te.objects.length;Ie++){var Se=Te.objects[Ie];if(Se.isActive&&!Se.forcedActivated)if(Se.isSelectableMultiple)for(var ye=Se.multipleUseVariable,xe=0;xe<ye;xe++)xo(Se,Te,i);else Io(Se,Te,i);if(Te.allowedChoices>=Te.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){var Ce=zt.get(e.idOfTheTextfieldWord);void 0!==Ce&&(Ce.replaceText=void 0===e.wordChangeDeselect?"":e.wordChangeDeselect)}if(e.isImageUpload&&void 0!==e.defaultImage&&(e.image=e.defaultImage),e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.showAllAddons&&void 0!==app.showAllAddons&&(app.showAllAddons-=1),e.changeBackground)if(e.changeBgImage){if(void 0!==app.bgImageStack){var Oe=app.bgImageStack.findIndex(function(t){return t.id===e.id});-1!==Oe&&app.bgImageStack.splice(Oe,1);var Ae=app.bgImageStack.length;Ae>0?app.styling.backgroundImage=app.bgImageStack[Ae-1].data:(app.styling.backgroundImage=app.defaultBgImage||"",delete app.bgImageStack)}}else if(void 0!==e.changedBgColorCode&&void 0!==app.bgColorStack){var ke=app.bgColorStack.findIndex(function(t){return t.id===e.id});-1!==ke&&app.bgColorStack.splice(ke,1);var Be=app.bgColorStack.length;Be>0?app.styling.backgroundColor=app.bgColorStack[Be-1].data:(app.styling.backgroundColor=app.defaultBgColor||"#FFFFFFFF",delete app.bgColorStack)}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&void 0!==app.barBgColorStack){var Me=app.barBgColorStack.findIndex(function(t){return t.id===e.id});-1!==Me&&app.barBgColorStack.splice(Me,1);var De=app.barBgColorStack.length;De>0?app.styling.barBackgroundColor=app.barBgColorStack[De-1].data:(app.styling.barBackgroundColor=app.defaultBarBgColor||"#FFFFFFFF",delete app.barBgColorStack)}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&void 0!==app.barIconColorStack){var Fe=app.barIconColorStack.findIndex(function(t){return t.id===e.id});-1!==Fe&&app.barIconColorStack.splice(Fe,1);var Re=app.barIconColorStack.length;Re>0?app.styling.barIconColor=app.barIconColorStack[Re-1].data:(app.styling.barIconColor=app.defaultBarIconColor||"#0000008A",delete app.barIconColorStack)}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&void 0!==app.barTextColorStack){var je=app.barTextColorStack.findIndex(function(t){return t.id===e.id});-1!==je&&app.barTextColorStack.splice(je,1);var Pe=app.barTextColorStack.length;Pe>0?app.styling.barTextColor=app.barTextColorStack[Pe-1].data:(app.styling.barTextColor=app.defaultBarIconColor||"#000000",delete app.barTextColorStack)}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var $e=e.changeTemplatesList.split(","),Ve=0;Ve<$e.length;Ve++){var qe=$e[Ve],We=Ut.get(qe);if(void 0===We){var Le=Lt.get(qe);if(void 0===Le){var Ue=Nt.get(qe);if(void 0===Ue);else{for(var Ne=Ue.rowElements,Ee=0;Ee<Ne.length;Ee++){var ze=Lt.get(Ne[Ee]);void 0!==ze&&fn(ze,e.id)}for(var Ge=Ue.elements,_e=0;_e<Ge.length;_e++){var He=Ut.get(Ge[_e]);if(void 0!==He){var Ye=He.choice;if(fn(Ye,e.id),e.changeAddonTemplate)for(var Ze=0;Ze<Ye.addons.length;Ze++){fn(Ye.addons[Ze],e.id)}}}}}else fn(Le,e.id)}else{var Je=We.choice;if(fn(Je,e.id),e.changeAddonTemplate)for(var Xe=0;Xe<Je.addons.length;Xe++){fn(Je.addons[Xe],e.id)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var Ke=e.changeWidthList.split(","),Qe=0;Qe<Ke.length;Qe++){var et=Ke[Qe],tt=Ut.get(et);if(void 0===tt){var it=Lt.get(et);if(void 0===it){var ot=Nt.get(et);if(void 0===ot);else{for(var nt=ot.rowElements,rt=0;rt<nt.length;rt++){var at=Lt.get(nt[rt]);void 0!==at&&pn(at,e.id)}for(var ct=ot.elements,lt=0;lt<ct.length;lt++){var st=Ut.get(ct[lt]);if(void 0!==st)pn(st.choice,e.id)}}}else pn(it,e.id)}else{pn(tt.choice,e.id)}}if(e.setBgmIsOn&&Qt&&e.bgmId&&(ti.bgmIsPlaying=!1,Qi(e,e.bgmId,0)),e.muteBgm&&Qt){var ut=x(Qt);app.isMute=!1,ut&&"function"==typeof ut.unMute&&ut.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var dt=0;dt<e.hiddenContentsRow.length;dt++){var vt=Lt.get(e.hiddenContentsRow[dt]);if(void 0!==vt)for(var ft=0;ft<e.hiddenContentsType.length;ft++)switch(e.hiddenContentsType[ft]){case"1":delete vt.objectTitleRemoved;break;case"2":delete vt.objectImageRemoved;break;case"3":delete vt.objectTextRemoved;break;case"4":delete vt.objectScoreRemoved;break;case"5":delete vt.objectRequirementRemoved;break;case"6":delete vt.addonTitleRemoved;break;case"7":delete vt.addonImageRemoved;break;case"8":delete vt.addonTextRemoved}}delete e.tempSlots,bo(e,o,0,void 0,void 0,i),To(i),delete e.appliedDisChoices};if(e.isSelectDelayed&&void 0!==e.selectDelayTime)e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(function(){return e.customTextfieldIsOn&&!i.isOverDlg?(oi.choice=e,oi.row=t,oi.context=void 0!==e.wordPromptText?e.wordPromptText:"",oi.prevText=e.wordChangeSelect||"",oi.isWord=!0,oi.currentDialog="dlgCommon",oi.isDeselect=!0,void(oi.cFunc=function(o,n){if("deselect"===o.detail.action)i.isOverDlg=!0,Io(e,t,i);else if("accept"===o.detail.action&&oi.choice&&oi.choice.idOfTheTextfieldWord){if(oi.isWord){oi.choice.wordChangeSelect=n;var r=zt.get(oi.choice.idOfTheTextfieldWord);void 0!==r&&(r.replaceText=oi.choice.wordChangeSelect||"")}i.isOverDlg=!0}delete oi.isDeselect})):e.isImageUpload&&!i.isOverImg?(ii.currentDialog="appImageUpload",ii.data=e,ii.imgProp="image",ii.isDeselect=!0,void(ii.cFunc=function(o){"deselect"===o.detail.action&&(i.isOverImg=!0,Io(e,t,i)),delete ii.isDeselect})):(-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,o()},1e3*app.fadeTransitionTime)):o()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0),void delete e.selectDelayTimer)},e.selectDelayTime));else{if(e.customTextfieldIsOn&&!i.isOverDlg)return oi.choice=e,oi.row=t,oi.context=void 0!==e.wordPromptText?e.wordPromptText:"",oi.prevText=e.wordChangeSelect||"",oi.isWord=!0,oi.currentDialog="dlgCommon",oi.isDeselect=!0,void(oi.cFunc=function(o,n){if("deselect"===o.detail.action)i.isOverDlg=!0,Io(e,t,i);else if("accept"===o.detail.action&&oi.choice&&oi.choice.idOfTheTextfieldWord){if(oi.isWord){oi.choice.wordChangeSelect=n;var r=zt.get(oi.choice.idOfTheTextfieldWord);void 0!==r&&(r.replaceText=oi.choice.wordChangeSelect||"")}i.isOverDlg=!0}delete oi.isDeselect});if(e.isImageUpload&&!i.isOverImg)return ii.currentDialog="appImageUpload",ii.data=e,ii.imgProp="image",ii.isDeselect=!0,void(ii.cFunc=function(o){"deselect"===o.detail.action&&(i.isOverImg=!0,Io(e,t,i)),delete ii.isDeselect});-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,o()},1e3*app.fadeTransitionTime)):o()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0)}}}function So(e,t,i){var o=!0;if(t.allowedChoices>0&&t.currentChoices>=t.allowedChoices){for(var n=0,r=0;r<t.objects.length;r++){var a=t.objects[r];if(a.isActive){if(!a.forcedActivated&&!a.selectOnce){if(a.isSelectableMultiple)for(var l=a.multipleUseVariable,s=0;s<l;s++)xo(a,t,i);else go(a,t,!1,i);break}n++}}n>=t.allowedChoices&&(o=!1)}if(o)if(uo(e,!0)){var v=function(){var o=new d;if(e.isActive=!0,Vt.set(e.id,{multiple:0}),t.currentChoices+=1,e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue)if(e.isDisChoices){var n=new Set;if(void 0!==e.discountRows)for(var r=0;r<e.discountRows.length;r++){var a=Lt.get(e.discountRows[r]);if(void 0!==a)for(var l=0;l<a.objects.length;l++){var s=a.objects[l];co(e,s),n.add(s.id)}}if(void 0!==e.discountChoices)for(var v=0;v<e.discountChoices.length;v++)if(!n.has(e.discountChoices[v])){var f=Ut.get(e.discountChoices[v]);void 0!==f&&co(e,f.choice)}}else if(void 0!==e.discountGroups)for(var p=0;p<e.discountGroups.length;p++){var h=Nt.get(e.discountGroups[p]);if(void 0!==h)for(var b=0;b<h.elements.length;b++){var w=Ut.get(h.elements[b]);void 0!==w&&co(e,w.choice)}}for(var T=new Set,I=0;I<e.scores.length;I++){var S=e.scores[I];if(Zi(S.requireds)&&!S.isActive){var y=Wt.get(S.id);if(void 0!==y){var O=S.value;if(S.useExpression&&S.setValue&&so(y,S),S.appliedDiscount&&void 0!==S.discountScore)O=S.discountScore;else if(S.discountIsOn&&void 0!==S.discountScore&&S.discountedFrom&&S.discountedFrom.length>0){for(var k=!1,B=0;B<S.discountedFrom.length;B++){var M=Ut.get(S.discountedFrom[B]);if(void 0!==M){var D=M.choice;if(!D.useDiscountCount||void 0===D.discountCount){O=S.discountScore,S.appliedDiscount=!0,k=!0;break}var F=D.isSelectableMultiple&&D.isMultipleUseVariable&&D.stackableDiscount?D.discountCount*D.multipleUseVariable:D.discountCount;if(D.appliedDisChoices||(D.appliedDisChoices=[]),F>D.appliedDisChoices.length){T.add(D),O=S.discountScore,S.appliedDiscount=!0,k=!0;break}}}if(!k&&void 0!==S.tmpDiscount)for(var R=0;R<S.tmpDiscount.length;R++)O>S.tmpDiscount[R].discountedValue&&(O=S.tmpDiscount[R].discountedValue)}O=y.allowFloat?O:Math.floor(O),y.startingSum-=O,S.isActive=!0;var j=o.get(S.id);void 0!==j?o.set(S.id,O+j):o.set(S.id,O)}}}if(T.size>0&&T.forEach(function(t){t.appliedDisChoices&&-1===t.appliedDisChoices.indexOf(e.id)&&t.appliedDisChoices.push(e.id)}),e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&Mo(e),e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom){var P=m({},i);P.isOverDlg=!1,P.isOverImg=!1,ho(e,P)}else for(var $=e.activateThisChoice.split(","),V=0;V<$.length;V++){var q=$[V].split("/ON#"),W=q.length>1?parseInt(q[1]):0,L=Ut.get(q[0]);if(void 0!==L){var U=L.row,N=L.choice,E=m({},i);E.isOverDlg=!1,E.isOverImg=!1,po(e,N,U,W,E)}else{var z=Nt.get(q[0]);if(void 0!==z)for(var G=z.elements,_=0;_<G.length;_++){var H=Ut.get(G[_]);if(void 0!==H){var Y=H.row,Z=H.choice,J=m({},i);J.isOverDlg=!1,J.isOverImg=!1,po(e,Z,Y,W,J)}}}}if(e.deactivateOtherChoice&&void 0!==e.deactivateThisChoice)for(var X=e.deactivateThisChoice.split(","),K=0;K<X.length;K++){var Q=X[K].split("/ON#"),ee=Q.length>1?parseInt(Q[1]):0,te=Ut.get(Q[0]);if(void 0!==te){var ie=te.row,oe=te.choice;if(oe.isActive)if(oe.isSelectableMultiple&&oe.isMultipleUseVariable)for(var ne=0;ne<ee;ne++){var re=m({},i);re.isOverDlg=!1,re.isOverImg=!1,xo(oe,ie,re)}else{var ae=m({},i);ae.isOverDlg=!1,ae.isOverImg=!1,Io(oe,ie,ae)}}else{var ce=Nt.get(Q[0]);if(void 0!==ce)for(var le=ce.elements,se=0;se<le.length;se++){var ue=Ut.get(le[se]);if(void 0!==ue){var de=ue.row,ve=ue.choice;if(ve.isActive)if(ve.isSelectableMultiple&&ve.isMultipleUseVariable)for(var fe=0;fe<ee;fe++){var ge=m({},i);ge.isOverDlg=!1,ge.isOverImg=!1,xo(ve,de,ge)}else{var pe=m({},i);pe.isOverDlg=!1,pe.isOverImg=!1,Io(ve,de,pe)}}}}}if(Array.from(Vt.entries()).forEach(function(t){var o=g(t,2),n=o[0],r=o[1],a=Ut.get(n);if(void 0!==a){var c=a.row,l=a.choice;if(l.id!==e.id&&!Zi(l.requireds))if(l.forcedActivated&&(delete l.forcedActivated,l.isAllowDeselect||qt.set(l.id,{multiple:r.multiple})),0===r.multiple){if(l.isActive){var s=m({},i);s.isOverDlg=!1,s.isOverImg=!1,Io(l,c,s)}}else if(r.multiple>0)for(var u=0;u<r.multiple;u++)if(l.isActive){var d=m({},i);d.isOverDlg=!1,d.isOverImg=!1,xo(l,c,d)}}}),e.multiplyPointtypeIsOn&&void 0!==e.pointTypeToMultiply&&void 0!==e.multiplyWithThis){var me=0;e.multiplyPointtypeIsOnCheck=!0,"object"!==u(e.startingSumAtMultiply)&&(e.startingSumAtMultiply=[]);for(var he=0;he<e.pointTypeToMultiply.length;he++){var be=Wt.get(e.pointTypeToMultiply[he]);if(void 0!==be)if(e.multiplyPointtypeIsId&&"string"==typeof e.multiplyWithThis){var we=Wt.get(e.multiplyWithThis);void 0!==we?(e.startingSumAtMultiply[he]={value:be.startingSum,calcVal:we.startingSum},be.startingSum*=we.startingSum,be.startingSum=be.allowFloat?be.startingSum:Math.floor(be.startingSum)):me++}else"number"==typeof e.multiplyWithThis&&(e.startingSumAtMultiply[he]={value:be.startingSum,calcVal:e.multiplyWithThis},be.startingSum*=e.multiplyWithThis,be.startingSum=be.allowFloat?be.startingSum:Math.floor(be.startingSum));else me++}me===e.pointTypeToMultiply.length&&delete e.multiplyPointtypeIsOnCheck,e.multiplyPointtypeIsOnCheck&&Zt.push(e)}if(e.dividePointtypeIsOn&&void 0!==e.pointTypeToDivide&&void 0!==e.divideWithThis){var Te=0;e.dividePointtypeIsOnCheck=!0,"object"!==u(e.startingSumAtDivide)&&(e.startingSumAtDivide=[]);for(var Ie=0;Ie<e.pointTypeToDivide.length;Ie++){var Se=Wt.get(e.pointTypeToDivide[Ie]);void 0!==Se?0===e.dividedWithThis?Te++:(e.startingSumAtDivide[Ie]={value:Se.startingSum,calcVal:e.divideWithThis},Se.startingSum/=e.divideWithThis,Se.startingSum=Se.allowFloat?Se.startingSum:Math.floor(Se.startingSum)):Te++}Te===e.pointTypeToDivide.length&&delete e.dividePointtypeIsOnCheck,!e.multiplyPointtypeIsOnCheck&&e.dividePointtypeIsOnCheck&&Zt.push(e)}if(e.setPointtypeIsOn&&void 0!==e.pointTypeToSet&&void 0!==e.setWithThis){var ye=0;e.setPointtypeIsOnCheck=!0,"object"!==u(e.startingSumAtSet)&&(e.startingSumAtSet=[]);for(var xe=0;xe<e.pointTypeToSet.length;xe++){var Ce=Wt.get(e.pointTypeToSet[xe]);if(void 0!==Ce){var Oe=0;try{var Ae=e.setWithThis.replace(/\{([^{}]+)\}/g,function(e,t){var i=Wt.get(t);if(void 0!==i)return"".concat(i.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});Oe=C(Ae),Oe=Ce.allowFloat?Oe:Math.floor(Oe)}catch(c){console.error(c)}e.startingSumAtSet[xe]={value:Ce.startingSum,calcVal:Oe},Ce.startingSum=Oe}else ye++}ye===e.pointTypeToSet.length&&delete e.setPointtypeIsOnCheck,e.multiplyPointtypeIsOnCheck||e.dividePointtypeIsOnCheck||!e.setPointtypeIsOnCheck||Zt.push(e)}if(e.isChangeVariables&&void 0!==e.changedVariables)for(var ke=0;ke<e.changedVariables.length;ke++){var Be=Gt.get(e.changedVariables[ke]);void 0!==Be&&("1"===e.changeType?Be.isTrue=!0:"2"===e.changeType?Be.isTrue=!1:"3"===e.changeType&&(Be.isTrue=!Be.isTrue))}if(e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var Me=0;Me<e.idOfAllowChoice.length;Me++){var De=Lt.get(e.idOfAllowChoice[Me]);if(void 0!==De&&(De.allowedChoices+=e.numbAddToAllowChoice,De.allowedChoices>0&&De.currentChoices>=De.allowedChoices))for(var Fe=0;Fe<De.objects.length;Fe++){var Re=De.objects[Fe];if(Re.isActive&&!Re.forcedActivated)if(Re.isSelectableMultiple)for(var je=Re.multipleUseVariable,Pe=0;Pe<je;Pe++){var $e=m({},i);$e.isOverDlg=!1,$e.isOverImg=!1,xo(Re,De,$e)}else{var Ve=m({},i);Ve.isOverDlg=!1,Ve.isOverImg=!1,Io(Re,De,Ve)}if(De.allowedChoices>=De.currentChoices)break}}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){var qe=zt.get(e.idOfTheTextfieldWord);void 0!==qe&&(qe.replaceText=e.wordChangeSelect)}if(e.isImageUpload&&(e.defaultImage=e.image,ii.currentDialog="appImageUpload",ii.data=e,ii.imgProp="image"),e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var We=e.changeTemplatesList.split(","),Le=0;Le<We.length;Le++){var Ue=We[Le],Ne=Ut.get(Ue);if(void 0===Ne){var Ee=Lt.get(Ue);if(void 0===Ee){var ze=Nt.get(Ue);if(void 0===ze);else{for(var Ge=ze.rowElements,_e=0;_e<Ge.length;_e++){var He=Lt.get(Ge[_e]);void 0!==He&&vn(He,e.id,e.changeToThisTemplate)}for(var Ye=ze.elements,Ze=0;Ze<Ye.length;Ze++){var Je=Ut.get(Ye[Ze]);if(void 0!==Je){var Xe=Je.choice;if(vn(Xe,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(var Ke=0;Ke<Xe.addons.length;Ke++){vn(Xe.addons[Ke],e.id,e.changeToThisTemplate)}}}}}else vn(Ee,e.id,e.changeToThisTemplate)}else{var Qe=Ne.choice;if(vn(Qe,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(var et=0;et<Qe.addons.length;et++){vn(Qe.addons[et],e.id,e.changeToThisTemplate)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var tt=e.changeWidthList.split(","),it=0;it<tt.length;it++){var ot=tt[it],nt=Ut.get(ot);if(void 0===nt){var rt=Lt.get(ot);if(void 0===rt){var at=Nt.get(ot);if(void 0===at);else{for(var ct=at.rowElements,lt=0;lt<ct.length;lt++){var st=Lt.get(ct[lt]);void 0!==st&&gn(st,e.id,e.changeToThisWidth)}for(var ut=at.elements,dt=0;dt<ut.length;dt++){var vt=Ut.get(ut[dt]);if(void 0!==vt)gn(vt.choice,e.id,e.changeToThisWidth)}}}else gn(rt,e.id,e.changeToThisWidth)}else{gn(nt.choice,e.id,e.changeToThisWidth)}}if(e.setBgmIsOn&&e.bgmId&&(ti.bgmIsPlaying=!0,ti.isBgmInit||e.useAudioURL?Qi(e,e.bgmId,0):(to(e),ti.isBgmInit=!0)),e.muteBgm&&Qt){var ft=x(Qt);app.isMute=!0,ft&&"function"==typeof ft.mute&&ft.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var gt=0;gt<e.hiddenContentsRow.length;gt++){var pt=Lt.get(e.hiddenContentsRow[gt]);if(void 0!==pt){pt.textIsRemoved||(pt.textIsRemoved=!0);for(var mt=0;mt<e.hiddenContentsType.length;mt++)switch(e.hiddenContentsType[mt]){case"1":pt.objectTitleRemoved=!0;break;case"2":pt.objectImageRemoved=!0;break;case"3":pt.objectTextRemoved=!0;break;case"4":pt.objectScoreRemoved=!0;break;case"5":pt.objectRequirementRemoved=!0;break;case"6":pt.addonTitleRemoved=!0;break;case"7":pt.addonImageRemoved=!0;break;case"8":pt.addonTextRemoved=!0}}}e.scrollToRow&&A().then(function(){setTimeout(function(){if(e.scrollToObject){if(e.scrollObjectId){var t=Ut.get(e.scrollObjectId);if(void 0!==t){var o,n=t.choice,r=t.row,a=app.useToolbarBtn||!i.bCreatorMode||"appCyoaViewer"===Jt.value?r.index:r.index+1,c="appCyoaViewer"===Jt.value?0:1,l=null===(o=i.mainDiv)||void 0===o||null===(o=o.children[a])||void 0===o||null===(o=o.children[c])||void 0===o||null===(o=o.children[1])||void 0===o?void 0:o.children;if(void 0!==l){if(i.isBackpack){var s=document.getElementById("backpackDialog");null==s||s.scrollTo({top:l[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}window.scrollTo({top:l[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}}else if(e.scrollRowId){var u=Lt.get(e.scrollRowId);if(void 0!==u){var d,v=null===(d=i.mainDiv)||void 0===d?void 0:d.children;if(void 0!==v){var f=app.useToolbarBtn||!i.bCreatorMode?u.index:u.index+1;if(i.isBackpack){var g=document.getElementById("backpackDialog");null==g||g.scrollTo({top:v[f].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:v[f].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}},10)}),e.cleanACtivatedOnSelect&&fo(),wo(e,o,0,void 0,void 0,i),To(i),!Zi(e.requireds)&&e.isActive&&Io(e,t,i)};if(e.isSelectDelayed&&void 0!==e.selectDelayTime)e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(function(){return e.customTextfieldIsOn&&!i.isOverDlg?(ii.choice=e,ii.row=t,ii.context=void 0!==e.wordPromptText?e.wordPromptText:"",ii.prevText=e.wordChangeSelect||"",ii.isWord=!0,ii.currentDialog="dlgCommon",void(ii.cFunc=function(e,t){"accept"===e.detail.action&&ii.choice&&ii.row&&(ii.isWord&&(ii.choice.wordChangeSelect=t),i.isOverDlg=!0,So(ii.choice,ii.row,i))})):e.confirmIsOn&&!i.isOverDlg?(ii.choice=e,ii.row=t,ii.context=void 0!==e.wordPromptText?e.wordPromptText:"",ii.isWord=!1,ii.currentDialog="dlgCommon",void(ii.cFunc=function(e){"accept"===e.detail.action&&ii.choice&&ii.row&&(i.isOverDlg=!0,So(ii.choice,ii.row,i))})):(-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,v()},1e3*app.fadeTransitionTime)):v()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0),void delete e.selectDelayTimer)},e.selectDelayTime));else{if(e.customTextfieldIsOn&&!i.isOverDlg)return oi.choice=e,oi.row=t,oi.context=void 0!==e.wordPromptText?e.wordPromptText:"",oi.prevText=e.wordChangeSelect||"",oi.isWord=!0,oi.currentDialog="dlgCommon",void(oi.cFunc=function(e,t){"accept"===e.detail.action&&oi.choice&&oi.row&&(oi.isWord&&(oi.choice.wordChangeSelect=t),i.isOverDlg=!0,So(oi.choice,oi.row,i))});if(e.confirmIsOn&&!i.isOverDlg)return oi.choice=e,oi.row=t,oi.context=void 0!==e.wordPromptText?e.wordPromptText:"",oi.isWord=!1,oi.currentDialog="dlgCommon",void(oi.cFunc=function(e){"accept"===e.detail.action&&oi.choice&&oi.row&&(i.isOverDlg=!0,So(oi.choice,oi.row,i))});-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,v()},1e3*app.fadeTransitionTime)):v()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0)}}else for(var f=0;f<e.scores.length;f++){var p=e.scores[f];p.setValue&&delete p.setValue}}function yo(e,t,i){var o=Zi(e.requireds)&&!t.isInfoRow&&!e.isNotSelectable,n=!0,r=t;if(t.isResultRow){var a=Ut.get(e.id);void 0!==a&&(r=a.row)}if(o&&e.isMultipleUseVariable&&0===e.multipleUseVariable&&r.allowedChoices>0&&r.currentChoices>=r.allowedChoices){for(var c=0,l=0;l<r.objects.length;l++){var s=r.objects[l];if(s.isActive){if(!s.forcedActivated&&!s.selectOnce){if(s.isSelectableMultiple)for(var u=s.multipleUseVariable,v=0;v<u;v++)xo(s,r,i);else go(s,r,!1,i);break}c++}}c>=r.allowedChoices&&(n=!1)}if(n)if(uo(e,!0)){var f=function(){var o=new d,n=e.isActive,a=e.multipleUseVariable>=0,c=Math.abs(e.multipleUseVariable);if(e.multipleUseVariable+=1,0===e.multipleUseVariable?(Vt.delete(e.id),e.isActive=!1,r.currentChoices-=1):(1===e.multipleUseVariable&&(e.isActive=!0,r.currentChoices+=1),Vt.set(e.id,{multiple:e.multipleUseVariable})),a){if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue&&(e.stackableDiscount||!e.stackableDiscount&&1===e.multipleUseVariable))if(e.isDisChoices){var l=new Set;if(void 0!==e.discountRows)for(var s=0;s<e.discountRows.length;s++){var u=Lt.get(e.discountRows[s]);if(void 0!==u)for(var v=0;v<u.objects.length;v++){var f=u.objects[v];co(e,f),l.add(f.id)}}if(void 0!==e.discountChoices)for(var p=0;p<e.discountChoices.length;p++)if(!l.has(e.discountChoices[p])){var h=Ut.get(e.discountChoices[p]);void 0!==h&&co(e,h.choice)}}else if(void 0!==e.discountGroups)for(var b=0;b<e.discountGroups.length;b++){var w=Nt.get(e.discountGroups[b]);if(void 0!==w)for(var T=0;T<w.elements.length;T++){var I=Ut.get(w.elements[T]);void 0!==I&&co(e,I.choice)}}for(var S=new Set,y=0;y<e.scores.length;y++){var C=e.scores[y];if(void 0===C.isActiveMul&&(C.isActiveMul=[]),Zi(C.requireds)&&!C.isActiveMul[c]){var O=Wt.get(C.id);if(void 0!==O){var k=C.value;if(C.useExpression&&C.setValue&&so(O,C),C.appliedDiscount&&void 0!==C.discountScore)k=C.discountScore;else if(C.discountIsOn&&void 0!==C.discountScore&&C.discountedFrom&&C.discountedFrom.length>0){for(var B=!1,M=0;M<C.discountedFrom.length;M++){var D=Ut.get(C.discountedFrom[M]);if(void 0!==D){var F=D.choice;if(!F.useDiscountCount||void 0===F.discountCount){k=C.discountScore,C.appliedDiscount=!0,B=!0;break}var R=F.isSelectableMultiple&&F.isMultipleUseVariable&&F.stackableDiscount?F.discountCount*F.multipleUseVariable:F.discountCount;if(F.appliedDisChoices||(F.appliedDisChoices=[]),R>F.appliedDisChoices.length){S.add(F),k=C.discountScore,C.appliedDiscount=!0,B=!0;break}}}if(!B&&void 0!==C.tmpDiscount)for(var j=0;j<C.tmpDiscount.length;j++)k>C.tmpDiscount[j].discountedValue&&(k=C.tmpDiscount[j].discountedValue)}k=O.allowFloat?k:Math.floor(k),C.multiplyByTimes&&(k*=c+1),O.startingSum-=k,C.isActiveMul[c]=!0;var P=o.get(C.id);void 0!==P?o.set(C.id,k+P):o.set(C.id,k)}}}S.size>0&&S.forEach(function(t){t.appliedDisChoices&&-1===t.appliedDisChoices.indexOf(e.id)&&t.appliedDisChoices.push(e.id)})}else for(var $=0;$<e.scores.length;$++){var V=e.scores[$];if(void 0===V.isActiveMulMinus&&(V.isActiveMulMinus=[]),Zi(V.requireds)&&V.isActiveMulMinus[c]||V.isActiveMulMinus[c]){var q=Wt.get(V.id);if(void 0!==q){var W=V.discountIsOn&&void 0!==V.discountScore?V.discountScore:V.value;W=q.allowFloat?W:Math.floor(W),V.multiplyByTimes&&(W*=Math.abs(c)),q.startingSum-=W;var L=o.get(V.id);void 0!==L?o.set(V.id,W+L):o.set(V.id,W),delete V.isActiveMulMinus[c]}}}if(a&&(e.duplicateRow&&void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace&&Mo(e),e.activateOtherChoice&&void 0!==e.activateThisChoice))if(e.isActivateRandom)ho(e,i);else for(var U=e.activateThisChoice.split(","),N=0;N<U.length;N++){var E=U[N].split("/ON#"),z=E.length>1?parseInt(E[1]):0,G=Ut.get(E[0]);if(void 0!==G){var _=G.row,H=G.choice;!H.isSelectableMultiple&&n||po(e,H,_,z,i)}else{var Y=Nt.get(E[0]);if(void 0!==Y)for(var Z=Y.elements,J=0;J<Z.length;J++){var X=Ut.get(Z[J]);if(void 0!==X){var K=X.row,Q=X.choice;!Q.isSelectableMultiple&&n||po(e,Q,K,z,i)}}}}if(Array.from(Vt.entries()).forEach(function(t){var o=g(t,2),n=o[0],r=o[1],a=Ut.get(n);if(void 0!==a){var c=a.row,l=a.choice;if(l.id!==e.id&&!Zi(l.requireds))if(l.forcedActivated&&(delete l.forcedActivated,l.isAllowDeselect||qt.set(l.id,{multiple:r.multiple})),0===r.multiple){if(l.isActive){var s=m({},i);s.isOverDlg=!1,s.isOverImg=!1,Io(l,c,s)}}else if(r.multiple>0)for(var u=0;u<r.multiple;u++)if(l.isActive){var d=m({},i);d.isOverDlg=!1,d.isOverImg=!1,xo(l,c,d)}}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var ee=0;ee<e.idOfAllowChoice.length;ee++){var te=Lt.get(e.idOfAllowChoice[ee]);if(void 0!==te&&(te.allowedChoices+=e.numbAddToAllowChoice,te.allowedChoices>0&&te.currentChoices>=te.allowedChoices))for(var ie=0;ie<te.objects.length;ie++){var oe=te.objects[ie];if(oe.isActive&&!oe.forcedActivated)if(oe.isSelectableMultiple)for(var ne=oe.multipleUseVariable,re=0;re<ne;re++){var ae=m({},i);ae.isOverDlg=!1,ae.isOverImg=!1,xo(oe,te,ae)}else if(oe.isActive){var ce=m({},i);ce.isOverDlg=!1,ce.isOverImg=!1,Io(oe,te,ce)}if(te.allowedChoices>=te.currentChoices)break}}if(!n){if(e.isChangeVariables&&void 0!==e.changedVariables)for(var le=0;le<e.changedVariables.length;le++){var se=Gt.get(e.changedVariables[le]);void 0!==se&&("1"===e.changeType?se.isTrue=!0:"2"===e.changeType?se.isTrue=!1:"3"===e.changeType&&(se.isTrue=!se.isTrue))}if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){var ue=zt.get(e.idOfTheTextfieldWord);void 0!==ue&&(ue.replaceText=e.wordChangeSelect)}if(e.isImageUpload&&(e.defaultImage=e.image,ii.currentDialog="appImageUpload",ii.data=e,ii.imgProp="image"),e.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),e.showAllAddons&&(app.showAllAddons+=1),e.changeBackground&&(e.changeBgImage?void 0!==e.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:e.id,data:e.bgImage}),app.styling.backgroundImage=e.bgImage):void 0!==e.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:e.id,data:e.changedBgColorCode}),app.styling.backgroundColor=e.changedBgColorCode)),e.changePointBar&&(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:e.id,data:e.changedBarBgColor}),app.styling.barBackgroundColor=e.changedBarBgColor),e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:e.id,data:e.changedBarIconColor}),app.styling.barIconColor=e.changedBarIconColor),e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:e.id,data:e.changedBarTextColor}),app.styling.barTextColor=e.changedBarTextColor)),e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var de=e.changeTemplatesList.split(","),ve=0;ve<de.length;ve++){var fe=de[ve],ge=Ut.get(fe);if(void 0===ge){var pe=Lt.get(fe);if(void 0===pe){var me=Nt.get(fe);if(void 0===me);else{for(var he=me.rowElements,be=0;be<he.length;be++){var we=Lt.get(he[be]);void 0!==we&&vn(we,e.id,e.changeToThisTemplate)}for(var Te=me.elements,Ie=0;Ie<Te.length;Ie++){var Se=Ut.get(Te[Ie]);if(void 0!==Se){var ye=Se.choice;if(vn(ye,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(var xe=0;xe<ye.addons.length;xe++){vn(ye.addons[xe],e.id,e.changeToThisTemplate)}}}}}else vn(pe,e.id,e.changeToThisTemplate)}else{var Ce=ge.choice;if(vn(Ce,e.id,e.changeToThisTemplate),e.changeAddonTemplate)for(var Oe=0;Oe<Ce.addons.length;Oe++){vn(Ce.addons[Oe],e.id,e.changeToThisTemplate)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var Ae=e.changeWidthList.split(","),ke=0;ke<Ae.length;ke++){var Be=Ae[ke],Me=Ut.get(Be);if(void 0===Me){var De=Lt.get(Be);if(void 0===De){var Fe=Nt.get(Be);if(void 0===Fe);else{for(var Re=Fe.rowElements,je=0;je<Re.length;je++){var Pe=Lt.get(Re[je]);void 0!==Pe&&gn(Pe,e.id,e.changeToThisWidth)}for(var $e=Fe.elements,Ve=0;Ve<$e.length;Ve++){var qe=Ut.get($e[Ve]);if(void 0!==qe)gn(qe.choice,e.id,e.changeToThisWidth)}}}else gn(De,e.id,e.changeToThisWidth)}else{gn(Me.choice,e.id,e.changeToThisWidth)}}if(e.setBgmIsOn&&e.bgmId&&(ti.bgmIsPlaying=!0,ti.isBgmInit||e.useAudioURL?Qi(e,e.bgmId,0):(to(e),ti.isBgmInit=!0)),e.muteBgm&&ei){var We=x(ei);app.isMute=!0,We&&"function"==typeof We.mute&&We.mute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var Le=0;Le<e.hiddenContentsRow.length;Le++){var Ue=Lt.get(e.hiddenContentsRow[Le]);if(void 0!==Ue){Ue.textIsRemoved||(Ue.textIsRemoved=!0);for(var Ne=0;Ne<e.hiddenContentsType.length;Ne++)switch(e.hiddenContentsType[Ne]){case"1":Ue.objectTitleRemoved=!0;break;case"2":Ue.objectImageRemoved=!0;break;case"3":Ue.objectTextRemoved=!0;break;case"4":Ue.objectScoreRemoved=!0;break;case"5":Ue.objectRequirementRemoved=!0;break;case"6":Ue.addonTitleRemoved=!0;break;case"7":Ue.addonImageRemoved=!0;break;case"8":Ue.addonTextRemoved=!0}}}e.scrollToRow&&A().then(function(){setTimeout(function(){if(e.scrollToObject){if(e.scrollObjectId){var t=Ut.get(e.scrollObjectId);if(void 0!==t){var o,n=t.choice,r=t.row,a=app.useToolbarBtn||!i.bCreatorMode||"appCyoaViewer"===Jt.value?r.index:r.index+1,c="appCyoaViewer"===Jt.value?0:1,l=null===(o=i.mainDiv)||void 0===o||null===(o=o.children[a])||void 0===o||null===(o=o.children[c])||void 0===o||null===(o=o.children[1])||void 0===o?void 0:o.children;if(void 0!==l){if(i.isBackpack){var s=document.getElementById("backpackDialog");null==s||s.scrollTo({top:l[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}window.scrollTo({top:l[n.index].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}}else if(e.scrollRowId){var u=Lt.get(e.scrollRowId);if(void 0!==u){var d,v=null===(d=i.mainDiv)||void 0===d?void 0:d.children;if(void 0!==v){var f=app.useToolbarBtn||!i.bCreatorMode?u.index:u.index+1;if(i.isBackpack){var g=document.getElementById("backpackDialog");null==g||g.scrollTo({top:v[f].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}else window.scrollTo({top:v[f].getBoundingClientRect().top+window.scrollY,behavior:"smooth"})}}}},10)})}wo(e,o,0,void 0,void 0,i),To(i),!Zi(e.requireds)&&e.isActive&&xo(e,t,i)};if(o)if(e.isMultipleUseVariable){if(void 0===e.multipleUseVariable&&(e.multipleUseVariable=0),void 0===e.numMultipleTimesPluss&&(e.numMultipleTimesPluss=0),e.numMultipleTimesPluss>e.multipleUseVariable)if(e.isSelectDelayed&&void 0!==e.selectDelayTime)e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(function(){return!e.customTextfieldIsOn||i.isOverDlg||e.isActive?e.confirmIsOn&&!i.isOverDlg?(oi.choice=e,oi.row=t,oi.context=void 0!==e.wordPromptText?e.wordPromptText:"",oi.isWord=!1,oi.currentDialog="dlgCommon",void(oi.cFunc=function(e){"accept"===e.detail.action&&oi.choice&&oi.row&&(i.isOverDlg=!0,yo(oi.choice,oi.row,i))})):(-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,f()},1e3*app.fadeTransitionTime)):f()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0),void delete e.selectDelayTimer):(oi.choice=e,oi.row=t,oi.context=void 0!==e.wordPromptText?e.wordPromptText:"",oi.prevText=e.wordChangeSelect||"",oi.isWord=!0,oi.currentDialog="dlgCommon",void(oi.cFunc=function(e,t){"accept"===e.detail.action&&oi.choice&&oi.row&&(oi.isWord&&(oi.choice.wordChangeSelect=t),i.isOverDlg=!0,yo(oi.choice,oi.row,i))}))},e.selectDelayTime));else{if(e.customTextfieldIsOn&&!i.isOverDlg&&!e.isActive)return oi.choice=e,oi.row=t,oi.context=void 0!==e.wordPromptText?e.wordPromptText:"",oi.prevText=e.wordChangeSelect||"",oi.isWord=!0,oi.currentDialog="dlgCommon",void(oi.cFunc=function(e,t){"accept"===e.detail.action&&oi.choice&&oi.row&&(oi.isWord&&(oi.choice.wordChangeSelect=t),i.isOverDlg=!0,yo(oi.choice,oi.row,i))});if(e.confirmIsOn&&!i.isOverDlg)return oi.choice=e,oi.row=t,oi.context=void 0!==e.wordPromptText?e.wordPromptText:"",oi.isWord=!1,oi.currentDialog="dlgCommon",void(oi.cFunc=function(e){"accept"===e.detail.action&&oi.choice&&oi.row&&(i.isOverDlg=!0,yo(oi.choice,oi.row,i))});-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,f()},1e3*app.fadeTransitionTime)):f()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0)}}else if(void 0!==e.multipleScoreId){var p=Wt.get(e.multipleScoreId);void 0!==p&&(void 0===e.numMultipleTimesPluss&&(e.numMultipleTimesPluss=0),e.numMultipleTimesPluss>p.startingSum&&(p.startingSum+=1))}}else for(var h=0;h<e.scores.length;h++){var b=e.scores[h];b.setValue&&delete b.setValue}}function xo(e,t,i){var o=uo(e,!1),n=t;if(t.isResultRow){var r=Ut.get(e.id);void 0!==r&&(n=r.row)}if(o){var a=function(){var t=new d,o=e.multipleUseVariable>0,r=Math.abs(e.multipleUseVariable-1);if(o){for(var a=0;a<e.scores.length;a++){var c=e.scores[a];if(void 0!==c.isActiveMul&&(Zi(c.requireds)&&c.isActiveMul[r]||c.isActiveMul[r])){var l=Wt.get(c.id);if(void 0!==l){var s=c.discountIsOn&&void 0!==c.discountScore?c.discountScore:c.useExpression&&c.mulValue&&c.mulValue[r]?c.mulValue[r]:c.value;s=l.allowFloat?s:Math.floor(s),c.multiplyByTimes&&(s*=r+1),l.startingSum+=s;var u=t.get(c.id);void 0!==u?t.set(c.id,-s+u):t.set(c.id,-s),delete c.isActiveMul[r],c.mulValue&&delete c.mulValue[r],0===r&&delete c.setValue}}}if(e.activateOtherChoice&&void 0!==e.activateThisChoice)if(e.isActivateRandom&&void 0!==e.activatedRandomMul&&void 0!==e.activatedRandomMul[r]){for(var v=0;v<e.activatedRandomMul[r].length;v++){var f=e.activatedRandomMul[r][v].split("/ON#"),p=Ut.get(f[0]);if(void 0!==p){var h=p.row,b=p.choice,w=f.length>1?Number(f[1]):0,T=m({},i);T.isOverDlg=!1,T.isOverImg=!1,mo(e,b,h,w,T)}}e.activatedRandomMul.splice(r,1)}else for(var I=e.activateThisChoice.split(","),S=0;S<I.length;S++){var y=I[S].split("/ON#"),C=y.length>1?parseInt(y[1]):0,O=Ut.get(y[0]);if(void 0!==O){var A=O.row,k=O.choice;if(0===r||k.isSelectableMultiple){var B=m({},i);B.isOverDlg=!1,B.isOverImg=!1,mo(e,k,A,C,B)}}else{var M=Nt.get(y[0]);if(void 0!==M)for(var D=M.elements,F=0;F<D.length;F++){var R=Ut.get(D[F]);if(void 0!==R){var j=R.row,P=R.choice;if(0===r||P.isSelectableMultiple){var $=m({},i);$.isOverDlg=!1,$.isOverImg=!1,mo(e,P,j,C,$)}}}}}if(e.discountOther&&void 0!==e.discountOperator&&void 0!==e.discountValue&&(e.stackableDiscount||!e.stackableDiscount&&1===e.multipleUseVariable))if(void 0===e.discountPointTypes&&(e.discountPointTypes=[]),e.isDisChoices){var V=new Set;if(void 0!==e.discountRows)for(var q=0;q<e.discountRows.length;q++){var W=Lt.get(e.discountRows[q]);if(void 0!==W)for(var L=0;L<W.objects.length;L++){var U=W.objects[L];ao(e,U),V.add(U.id)}}if(void 0!==e.discountChoices)for(var N=0;N<e.discountChoices.length;N++)if(!V.has(e.discountChoices[N])){var E=Ut.get(e.discountChoices[N]);void 0!==E&&ao(e,E.choice)}}else if(void 0!==e.discountGroups)for(var z=0;z<e.discountGroups.length;z++){var G=Nt.get(e.discountGroups[z]);if(void 0!==G)for(var _=0;_<G.elements.length;_++){var H=Ut.get(G.elements[_]);void 0!==H&&ao(e,H.choice)}}}else for(var Y=0;Y<e.scores.length;Y++){var Z=e.scores[Y];if(void 0===Z.isActiveMulMinus&&(Z.isActiveMulMinus=[]),Zi(Z.requireds)&&!Z.isActiveMulMinus[r]){var J=Wt.get(Z.id);if(void 0!==J){var X=Z.discountIsOn&&void 0!==Z.discountScore?Z.discountScore:Z.value;X=J.allowFloat?X:Math.floor(X),Z.multiplyByTimes&&(X*=r),J.startingSum+=X;var K=t.get(Z.id);void 0!==K?t.set(Z.id,-X+K):t.set(Z.id,-X),Z.isActiveMulMinus[r]=!0}}}if(e.multipleUseVariable-=1,0===e.multipleUseVariable?(e.isActive=!1,n.currentChoices-=1,Vt.delete(e.id)):(-1===e.multipleUseVariable&&(e.isActive=!0,n.currentChoices+=1),Vt.set(e.id,{multiple:e.multipleUseVariable})),Array.from(Vt.entries()).forEach(function(t){var o=g(t,2),n=o[0],r=o[1],a=Ut.get(n);if(void 0!==a){var c=a.row,l=a.choice;if(l.id!==e.id&&!Zi(l.requireds))if(l.forcedActivated&&(delete l.forcedActivated,l.isAllowDeselect||qt.set(l.id,{multiple:r.multiple})),0===r.multiple){if(l.forcedActivated&&delete l.forcedActivated,l.isActive){var s=m({},i);s.isOverDlg=!1,s.isOverImg=!1,Io(l,c,s)}}else if(r.multiple>0)for(var u=0;u<r.multiple;u++)if(l.isActive){var d=m({},i);d.isOverDlg=!1,d.isOverImg=!1,xo(l,c,d)}}}),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var Q=0;Q<e.idOfAllowChoice.length;Q++){var ee=Lt.get(e.idOfAllowChoice[Q]);if(void 0!==ee&&(ee.allowedChoices-=e.numbAddToAllowChoice,ee.allowedChoices>0&&ee.currentChoices>=ee.allowedChoices))for(var te=0;te<ee.objects.length;te++){var ie=ee.objects[te];if(ie.isActive&&!ie.forcedActivated)if(ie.isSelectableMultiple)for(var oe=ie.multipleUseVariable,ne=0;ne<oe;ne++){var re=m({},i);re.isOverDlg=!1,re.isOverImg=!1,xo(ie,ee,re)}else if(ie.isActive){var ae=m({},i);ae.isOverDlg=!1,ae.isOverImg=!1,Io(ie,ee,ae)}if(ee.allowedChoices>=ee.currentChoices)break}}if(0===r){if(e.textfieldIsOn&&void 0!==e.idOfTheTextfieldWord&&void 0!==e.wordChangeSelect){var ce=zt.get(e.idOfTheTextfieldWord);void 0!==ce&&(ce.replaceText=void 0===e.wordChangeDeselect?"":e.wordChangeDeselect)}if(e.isImageUpload&&void 0!==e.defaultImage&&(e.image=e.defaultImage),e.isChangeVariables&&void 0!==e.changedVariables)for(var le=0;le<e.changedVariables.length;le++){var se=Gt.get(e.changedVariables[le]);void 0!==se&&("1"===e.changeType?se.isTrue=!1:"2"===e.changeType?se.isTrue=!0:"3"===e.changeType&&(se.isTrue=!se.isTrue))}if(e.backpackBtnRequirement&&void 0!==app.btnBackpackIsOn&&(app.btnBackpackIsOn-=1),e.showAllAddons&&void 0!==app.showAllAddons&&(app.showAllAddons-=1),e.changeBackground)if(e.changeBgImage){if(void 0!==app.bgImageStack){var ue=app.bgImageStack.findIndex(function(t){return t.id===e.id});-1!==ue&&app.bgImageStack.splice(ue,1);var de=app.bgImageStack.length;de>0?app.styling.backgroundImage=app.bgImageStack[de-1].data:(app.styling.backgroundImage=app.defaultBgImage||"",delete app.bgImageStack)}}else if(void 0!==e.changedBgColorCode&&void 0!==app.bgColorStack){var ve=app.bgColorStack.findIndex(function(t){return t.id===e.id});-1!==ve&&app.bgColorStack.splice(ve,1);var fe=app.bgColorStack.length;fe>0?app.styling.backgroundColor=app.bgColorStack[fe-1].data:(app.styling.backgroundColor=app.defaultBgColor||"#FFFFFFFF",delete app.bgColorStack)}if(e.changePointBar){if(e.changeBarBgColorIsOn&&void 0!==e.changedBarBgColor&&void 0!==app.barBgColorStack){var ge=app.barBgColorStack.findIndex(function(t){return t.id===e.id});-1!==ge&&app.barBgColorStack.splice(ge,1);var pe=app.barBgColorStack.length;pe>0?app.styling.barBackgroundColor=app.barBgColorStack[pe-1].data:(app.styling.barBackgroundColor=app.defaultBarBgColor||"#FFFFFFFF",delete app.barBgColorStack)}if(e.changeBarIconColorIsOn&&void 0!==e.changedBarIconColor&&void 0!==app.barIconColorStack){var me=app.barIconColorStack.findIndex(function(t){return t.id===e.id});-1!==me&&app.barIconColorStack.splice(me,1);var he=app.barIconColorStack.length;he>0?app.styling.barIconColor=app.barIconColorStack[he-1].data:(app.styling.barIconColor=app.defaultBarIconColor||"#0000008A",delete app.barIconColorStack)}if(e.changeBarTextColorIsOn&&void 0!==e.changedBarTextColor&&void 0!==app.barTextColorStack){var be=app.barTextColorStack.findIndex(function(t){return t.id===e.id});-1!==be&&app.barTextColorStack.splice(be,1);var we=app.barTextColorStack.length;we>0?app.styling.barTextColor=app.barTextColorStack[we-1].data:(app.styling.barTextColor=app.defaultBarIconColor||"#000000",delete app.barTextColorStack)}}if(e.changeTemplates&&e.changeTemplatesList&&e.changeToThisTemplate)for(var Te=e.changeTemplatesList.split(","),Ie=0;Ie<Te.length;Ie++){var Se=Te[Ie],ye=Ut.get(Se);if(void 0===ye){var xe=Lt.get(Se);if(void 0===xe){var Ce=Nt.get(Se);if(void 0===Ce);else{for(var Oe=Ce.rowElements,Ae=0;Ae<Oe.length;Ae++){var ke=Lt.get(Oe[Ae]);void 0!==ke&&fn(ke,e.id)}for(var Be=Ce.elements,Me=0;Me<Be.length;Me++){var De=Ut.get(Be[Me]);if(void 0!==De){var Fe=De.choice;if(fn(Fe,e.id),e.changeAddonTemplate)for(var Re=0;Re<Fe.addons.length;Re++){fn(Fe.addons[Re],e.id)}}}}}else fn(xe,e.id)}else{var je=ye.choice;if(fn(je,e.id),e.changeAddonTemplate)for(var Pe=0;Pe<je.addons.length;Pe++){fn(je.addons[Pe],e.id)}}}if(e.changeWidth&&e.changeWidthList&&e.changeToThisWidth)for(var $e=e.changeWidthList.split(","),Ve=0;Ve<$e.length;Ve++){var qe=$e[Ve],We=Ut.get(qe);if(void 0===We){var Le=Lt.get(qe);if(void 0===Le){var Ue=Nt.get(qe);if(void 0===Ue);else{for(var Ne=Ue.rowElements,Ee=0;Ee<Ne.length;Ee++){var ze=Lt.get(Ne[Ee]);void 0!==ze&&pn(ze,e.id)}for(var Ge=Ue.elements,_e=0;_e<Ge.length;_e++){var He=Ut.get(Ge[_e]);if(void 0!==He)pn(He.choice,e.id)}}}else pn(Le,e.id)}else{pn(We.choice,e.id)}}if(e.setBgmIsOn&&ei&&e.bgmId&&(ti.bgmIsPlaying=!1,Qi(e,e.bgmId,0)),e.muteBgm&&ei){var Ye=x(ei);app.isMute=!1,Ye&&"function"==typeof Ye.unMute&&Ye.unMute()}if(e.isContentHidden&&void 0!==e.hiddenContentsRow&&void 0!==e.hiddenContentsType)for(var Ze=0;Ze<e.hiddenContentsRow.length;Ze++){var Je=Lt.get(e.hiddenContentsRow[Ze]);if(void 0!==Je)for(var Xe=0;Xe<e.hiddenContentsType.length;Xe++)switch(e.hiddenContentsType[Xe]){case"1":Je.objectTitleRemoved=!1;break;case"2":Je.objectImageRemoved=!1;break;case"3":Je.objectTextRemoved=!1;break;case"4":Je.objectScoreRemoved=!1;break;case"5":Je.objectRequirementRemoved=!1;break;case"6":Je.addonTitleRemoved=!1;break;case"7":Je.addonImageRemoved=!1;break;case"8":Je.addonTextRemoved=!1}}}bo(e,t,0,void 0,void 0,i),To(i)};if(!t.isInfoRow&&!e.isNotSelectable&&!e.selectOnce)if(e.isMultipleUseVariable){if(void 0===e.numMultipleTimesMinus&&(e.numMultipleTimesMinus=0),e.multipleUseVariable>e.numMultipleTimesMinus)if(e.isSelectDelayed&&void 0!==e.selectDelayTime)e.selectDelayTimer||(e.selectDelayTimer=window.setTimeout(function(){if(e.customTextfieldIsOn&&!i.isOverDlg&&e.multipleUseVariable===e.numMultipleTimesMinus+1)return oi.choice=e,oi.row=t,oi.context=void 0!==e.wordPromptText?e.wordPromptText:"",oi.prevText=e.wordChangeSelect||"",oi.isWord=!0,oi.currentDialog="dlgCommon",oi.isDeselect=!0,void(oi.cFunc=function(o,n){if("deselect"===o.detail.action)i.isOverDlg=!0,xo(e,t,i);else if("accept"===o.detail.action&&oi.choice&&oi.choice.idOfTheTextfieldWord){if(oi.isWord){oi.choice.wordChangeSelect=n;var r=zt.get(oi.choice.idOfTheTextfieldWord);void 0!==r&&(r.replaceText=oi.choice.wordChangeSelect||"")}i.isOverDlg=!0}delete oi.isDeselect});-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,a()},1e3*app.fadeTransitionTime)):a()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0),delete e.selectDelayTimer},e.selectDelayTime));else{if(e.customTextfieldIsOn&&!i.isOverDlg&&e.multipleUseVariable===e.numMultipleTimesMinus+1)return oi.choice=e,oi.row=t,oi.context=void 0!==e.wordPromptText?e.wordPromptText:"",oi.prevText=e.wordChangeSelect||"",oi.isWord=!0,oi.currentDialog="dlgCommon",oi.isDeselect=!0,void(oi.cFunc=function(o,n){if("deselect"===o.detail.action)i.isOverDlg=!0,xo(e,t,i);else if("accept"===o.detail.action&&oi.choice&&oi.choice.idOfTheTextfieldWord){if(oi.isWord){oi.choice.wordChangeSelect=n;var r=zt.get(oi.choice.idOfTheTextfieldWord);void 0!==r&&(r.replaceText=oi.choice.wordChangeSelect||"")}i.isOverDlg=!0}delete oi.isDeselect});-1===i.linkedObjects.indexOf(e.id)&&(e.isFadeTransition?(void 0===e.fadeTransitionColor||""===e.fadeTransitionColor?app.fadeTransitionColor="000000FF":app.fadeTransitionColor=e.fadeTransitionColor,void 0===e.fadeInTransitionTime?app.fadeTransitionTime=.25:app.fadeTransitionTime=e.fadeInTransitionTime/1e3,app.fadeTransitionIsOn=!0,window.setTimeout(function(){void 0!==e.fadeOutTransitionTime&&(app.fadeTransitionTime=e.fadeOutTransitionTime/1e3),app.fadeTransitionIsOn=!1,a()},1e3*app.fadeTransitionTime)):a()),0===i.linkedObjects.indexOf(e.id)&&i.linkedObjects.splice(0)}}else if(void 0!==e.multipleScoreId){var c=Wt.get(e.multipleScoreId);void 0!==c&&(void 0===e.numMultipleTimesMinus&&(e.numMultipleTimesMinus=0),c.startingSum>e.numMultipleTimesMinus&&(c.startingSum-=1))}}}function Co(e,t,i){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Set,n=Array.from(Vt.keys()),r=0;r<n.length;r++){var a=n[r],c=Ut.get(a);if(void 0!==c){var l=c.row,s=c.choice,u=new d,v=!1,g=!1;e.useDiscountCount&&!e.appliedDisChoices&&(e.appliedDisChoices=[]);for(var p=0;p<s.scores.length;p++){var m=s.scores[p];if(!m.isNotRecalculatable){var h=Wt.get(m.id);if(void 0!==h){if(e.discountOther&&m.isChangeDiscount&&void 0!==m.tmpDisScore){var b=s.multipleUseVariable,w=e.isSelectableMultiple&&e.isMultipleUseVariable&&e.stackableDiscount&&e.discountCount?e.discountCount*e.multipleUseVariable:e.discountCount;if(!e.useDiscountCount||e.useDiscountCount&&w&&w>e.appliedDisChoices.length){if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){for(var T=b-1;T>=0;T--)s.isActive&&(h.startingSum+=m.tmpDisScore);s.isActive&&(u.set(m.id,m.tmpDisScore),delete m.isChangeDiscount,delete m.tmpDisScore)}else s.isSelectableMultiple||(h.startingSum+=m.tmpDisScore,u.set(m.id,m.tmpDisScore),delete m.isChangeDiscount,delete m.tmpDisScore);g=!0,s.isActive&&(m.appliedDiscount=!0,v=!0)}}if(!o.has(m.idx))for(var I=e.scores.length>0,S=e.scores.length||1,y=0;y<S;y++){var x=I?e.scores[y]:null,C=x&&t.get(x.id)||0,O=x?Wt.get(x.id):null;if((!I||I&&O)&&s.isActive){var A=Zi(m.requireds),k=new d(JSON.parse(JSON.stringify(f(Vt))));k.delete(e.id),l.currentChoices-=1,O&&(O.startingSum+=C);var B=Zi(m.requireds,k);if(l.currentChoices+=1,O&&(O.startingSum-=C),B!==A){m.setValue||vo(h,m);var M=m.discountIsOn&&m.appliedDiscount&&void 0!==m.discountScore?m.discountScore:m.value;if(M=h.allowFloat?M:Math.floor(M),B)if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus)for(var D=s.multipleUseVariable-1;D>=0;D--)void 0!==m.isActiveMul&&m.isActiveMul[D]&&(h.startingSum+=M,u.set(m.id,M),m.isActiveMul[D]=!1);else s.isSelectableMultiple||m.isActive&&(h.startingSum+=M,u.set(m.id,M),delete m.isActive);else if(s.isSelectableMultiple&&s.isMultipleUseVariable&&void 0!==s.numMultipleTimesMinus){var F=s.multipleUseVariable;void 0===m.isActiveMul&&(m.isActiveMul=[]);for(var R=F-1;R>=0;R--)m.isActiveMul[R]||(h.startingSum-=M,u.set(m.id,M),m.isActiveMul[R]=!0)}else s.isSelectableMultiple||m.isActive||(h.startingSum-=M,u.set(m.id,M),m.isActive=!0);g||(g=!0),o.add(m.idx)}}}}}}v&&e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(s.id)&&e.appliedDisChoices.push(s.id),g&&Co(s,u,++i,o)}}}function Oo(e,t){var i=e.split("/IMG#"),o=i.length>1?i[1].replace(/\/CHAR#/g,","):"",n=(i=i[0].split("/WORD#")).length>1?i[1].replace(/\/CHAR#/g,","):"",r=(i=i[0].split("/RND#")).length>1?i[1].split("/AND#"):"",a=(i=i[0].split("/RS#")).length>1?i[1]:"",l=i[0],s=Ut.get(l);if(void 0!==s){var v=s.row,g=s.choice,p=new Map;if(a)for(var m=a.split("/AND#"),h=0;h<m.length;h++){var b=m[h].split(":"),w=Number(b[0]),T=Number(b[1]);Number.isNaN(w)||p.set(w,Number.isNaN(T)?0:T)}for(var I=0;I<g.scores.length;I++){var S=g.scores[I],y=Wt.get(S.id);void 0===y||S.setValue||(p.size>0&&p.has(I)?(S.value=p.get(I),S.setValue=!0):vo(y,S))}var O=new d;if(g.isActive=!0,Vt.set(g.id,{multiple:0}),v.currentChoices+=1,g.discountOther&&void 0!==g.discountOperator&&void 0!==g.discountValue)if(g.isDisChoices){var A=new Set;if(void 0!==g.discountRows)for(var k=0;k<g.discountRows.length;k++){var B=Lt.get(g.discountRows[k]);if(void 0!==B)for(var M=0;M<B.objects.length;M++){var D=B.objects[M];co(g,D),A.add(D.id)}}if(void 0!==g.discountChoices)for(var F=0;F<g.discountChoices.length;F++)if(!A.has(g.discountChoices[F])){var R=Ut.get(g.discountChoices[F]);if(void 0!==R){var j=R.choice;co(g,j)}}}else if(void 0!==g.discountGroups)for(var P=0;P<g.discountGroups.length;P++){var $=Nt.get(g.discountGroups[P]);if(void 0!==$)for(var V=0;V<$.elements.length;V++){var q=Ut.get($.elements[V]);if(void 0!==q){var W=q.choice;co(g,W)}}}for(var L=new Set,U=0;U<g.scores.length;U++){var N=g.scores[U];if(Zi(N.requireds)&&!N.isActive){var E=Wt.get(N.id);if(void 0!==E){var z=N.value;if(N.useExpression&&N.setValue&&so(E,N),N.appliedDiscount&&void 0!==N.discountScore)z=N.discountScore;else if(N.discountIsOn&&void 0!==N.discountScore&&N.discountedFrom&&N.discountedFrom.length>0){for(var G=!1,_=0;_<N.discountedFrom.length;_++){var H=Ut.get(N.discountedFrom[_]);if(void 0!==H){var Y=H.choice;if(!Y.useDiscountCount||void 0===Y.discountCount){z=N.discountScore,N.appliedDiscount=!0,G=!0;break}var Z=Y.isSelectableMultiple&&Y.isMultipleUseVariable&&Y.stackableDiscount?Y.discountCount*Y.multipleUseVariable:Y.discountCount;if(Y.appliedDisChoices||(Y.appliedDisChoices=[]),Z>Y.appliedDisChoices.length){L.add(Y),z=N.discountScore,N.appliedDiscount=!0,G=!0;break}}}if(!G&&void 0!==N.tmpDiscount)for(var J=0;J<N.tmpDiscount.length;J++)z>N.tmpDiscount[J].discountedValue&&(z=N.tmpDiscount[J].discountedValue)}z=E.allowFloat?z:Math.floor(z),E.startingSum-=z,N.isActive=!0;var X=O.get(N.id);void 0!==X?O.set(N.id,z+X):O.set(N.id,z)}}}if(L.size>0&&L.forEach(function(e){e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(g.id)&&e.appliedDisChoices.push(g.id)}),g.duplicateRow&&void 0!==g.duplicateRowId&&void 0!==g.duplicateRowPlace&&Mo(g),g.activateOtherChoice&&void 0!==g.activateThisChoice){var K=new Set(t.map(function(e){return e.split("/ON#")[0]}));if(g.isActivateRandom&&void 0!==g.numActivateRandom)if(""===r){for(var Q=g.activateThisChoice.split(",").filter(function(e){return K.has(e.split("/ON#")[0])}),ee=g.numActivateRandom>Q.length?Q.length:g.numActivateRandom,te=new Set,ie=0;ie<Q.length;ie++){var oe=Ut.get(Q[ie]);if(void 0!==oe)if(!Zi(oe.choice.requireds)){var ne=Q[ie];Q.splice(ie,1),Q.push(ne)}}for(var re=Q.length-1;re>=0;re--)te.add(Q[re]);Q=f(te).reverse(),g.activatedRandom=Q.slice(0,ee);for(var ae=0;ae<ee;ae++){var ce=g.activatedRandom[ae].split("/ON#"),le=Ut.get(ce[0]);if(void 0!==le){var se=le.choice;if(!g.isAllowDeselect){if(se.isSelectableMultiple&&se.isMultipleUseVariable)for(var ue=parseInt(ce[1]),de=0;de<Math.abs(ue);de++)ue>0&&void 0!==se.numMultipleTimesMinus?se.numMultipleTimesMinus++:ue<0&&void 0!==se.numMultipleTimesPluss&&se.numMultipleTimesPluss--;se.forcedActivated=!0}se.isSelectableMultiple||(void 0===se.activatedFrom&&(se.activatedFrom=0),se.activatedFrom+=1)}}}else{var ve=r.filter(function(e){return K.has(e.split("/RON#")[0])});g.activatedRandom=ve;for(var fe=0;fe<ve.length;fe++){var ge=g.activatedRandom[fe].split("/RON#"),pe=Ut.get(ge[0]);if(void 0!==pe){var me=pe.choice;if(!g.isAllowDeselect){if(me.isSelectableMultiple&&me.isMultipleUseVariable)for(var he=parseInt(ge[1]),be=0;be<Math.abs(he);be++)he>0&&void 0!==me.numMultipleTimesMinus?me.numMultipleTimesMinus++:he<0&&void 0!==me.numMultipleTimesPluss&&me.numMultipleTimesPluss--;me.forcedActivated=!0}me.isSelectableMultiple||(void 0===me.activatedFrom&&(me.activatedFrom=0),me.activatedFrom+=1)}}}else for(var we=g.activateThisChoice.split(",").filter(function(e){return K.has(e.split("/ON#")[0])}),Te=0;Te<we.length;Te++){var Ie=we[Te].split("/ON#"),Se=Ie.length>1?parseInt(Ie[1]):0,ye=Ut.get(Ie[0]);if(void 0!==ye){var xe=ye.choice;if(!g.isAllowDeselect){if(xe.isSelectableMultiple&&xe.isMultipleUseVariable)if(g.isSelectableMultiple&&g.isMultipleUseVariable)for(var Ce=0;Ce<Math.abs(g.multipleUseVariable);Ce++)for(var Oe=0;Oe<Math.abs(Se);Oe++)Se>0&&void 0!==xe.numMultipleTimesMinus?xe.numMultipleTimesMinus++:Se<0&&void 0!==xe.numMultipleTimesPluss&&xe.numMultipleTimesPluss--;else for(var Ae=0;Ae<Math.abs(Se);Ae++)Se>0&&void 0!==xe.numMultipleTimesMinus?xe.numMultipleTimesMinus++:Se<0&&void 0!==xe.numMultipleTimesPluss&&xe.numMultipleTimesPluss--;xe.forcedActivated=!0}xe.isSelectableMultiple||(void 0===xe.activatedFrom&&(xe.activatedFrom=0),xe.activatedFrom+=1)}else{var ke=Nt.get(Ie[0]);if(void 0!==ke)for(var Be=ke.elements,Me=0;Me<Be.length;Me++){var De=Ut.get(Be[Me]);if(void 0!==De){var Fe=De.choice;if(!g.isAllowDeselect){if(Fe.isSelectableMultiple&&Fe.isMultipleUseVariable)if(g.isSelectableMultiple&&g.isMultipleUseVariable)for(var Re=0;Re<Math.abs(g.multipleUseVariable);Re++)for(var je=0;je<Math.abs(Se);je++)Se>0&&void 0!==Fe.numMultipleTimesMinus?Fe.numMultipleTimesMinus++:Se<0&&void 0!==Fe.numMultipleTimesPluss&&Fe.numMultipleTimesPluss--;else for(var Pe=0;Pe<Math.abs(Se);Pe++)Se>0&&void 0!==Fe.numMultipleTimesMinus?Fe.numMultipleTimesMinus++:Se<0&&void 0!==Fe.numMultipleTimesPluss&&Fe.numMultipleTimesPluss--;Fe.forcedActivated=!0}Fe.isSelectableMultiple||(void 0===Fe.activatedFrom&&(Fe.activatedFrom=0),Fe.activatedFrom+=1)}}}}}if(g.multiplyPointtypeIsOn&&void 0!==g.pointTypeToMultiply&&void 0!==g.multiplyWithThis){var $e=0;g.multiplyPointtypeIsOnCheck=!0,"object"!==u(g.startingSumAtMultiply)&&(g.startingSumAtMultiply=[]);for(var Ve=0;Ve<g.pointTypeToMultiply.length;Ve++){var qe=Wt.get(g.pointTypeToMultiply[Ve]);if(void 0!==qe)if(g.multiplyPointtypeIsId&&"string"==typeof g.multiplyWithThis){var We=Wt.get(g.multiplyWithThis);void 0!==We?(g.startingSumAtMultiply[Ve]={value:qe.startingSum,calcVal:We.startingSum},qe.startingSum*=We.startingSum,qe.startingSum=qe.allowFloat?qe.startingSum:Math.floor(qe.startingSum)):$e++}else"number"==typeof g.multiplyWithThis&&(g.startingSumAtMultiply[Ve]={value:qe.startingSum,calcVal:g.multiplyWithThis},qe.startingSum*=g.multiplyWithThis,qe.startingSum=qe.allowFloat?qe.startingSum:Math.floor(qe.startingSum));else $e++}$e===g.pointTypeToMultiply.length&&delete g.multiplyPointtypeIsOnCheck,g.multiplyPointtypeIsOnCheck&&Zt.push(g)}if(g.dividePointtypeIsOn&&void 0!==g.pointTypeToDivide&&void 0!==g.divideWithThis){var Le=0;g.dividePointtypeIsOnCheck=!0,"object"!==u(g.startingSumAtDivide)&&(g.startingSumAtDivide=[]);for(var Ue=0;Ue<g.pointTypeToDivide.length;Ue++){var Ne=Wt.get(g.pointTypeToDivide[Ue]);void 0!==Ne?0===g.dividedWithThis?Le++:(g.startingSumAtDivide[Ue]={value:Ne.startingSum,calcVal:g.divideWithThis},Ne.startingSum/=g.divideWithThis,Ne.startingSum=Ne.allowFloat?Ne.startingSum:Math.floor(Ne.startingSum)):Le++}Le===g.pointTypeToDivide.length&&delete g.dividePointtypeIsOnCheck,!g.multiplyPointtypeIsOnCheck&&g.dividePointtypeIsOnCheck&&Zt.push(g)}if(g.setPointtypeIsOn&&void 0!==g.pointTypeToSet&&void 0!==g.setWithThis){var Ee=0;g.setPointtypeIsOnCheck=!0,"object"!==u(g.startingSumAtSet)&&(g.startingSumAtSet=[]);for(var ze=0;ze<g.pointTypeToSet.length;ze++){var Ge=Wt.get(g.pointTypeToSet[ze]);if(void 0!==Ge){var _e=0;try{var He=g.setWithThis.replace(/\{([^{}]+)\}/g,function(e,t){var i=Wt.get(t);if(void 0!==i)return"".concat(i.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});_e=C(He),_e=Ge.allowFloat?_e:Math.floor(_e)}catch(c){console.error(c)}g.startingSumAtSet[ze]={value:Ge.startingSum,calcVal:_e},Ge.startingSum=_e}else Ee++}Ee===g.pointTypeToSet.length&&delete g.setPointtypeIsOnCheck,g.multiplyPointtypeIsOnCheck||g.dividePointtypeIsOnCheck||!g.setPointtypeIsOnCheck||Zt.push(g)}if(g.isChangeVariables&&void 0!==g.changedVariables)for(var Ye=0;Ye<g.changedVariables.length;Ye++){var Ze=Gt.get(g.changedVariables[Ye]);void 0!==Ze&&("1"===g.changeType?Ze.isTrue=!0:"2"===g.changeType?Ze.isTrue=!1:"3"===g.changeType&&(Ze.isTrue=!Ze.isTrue))}if(g.addToAllowChoice&&void 0!==g.idOfAllowChoice&&void 0!==g.numbAddToAllowChoice)for(var Je=0;Je<g.idOfAllowChoice.length;Je++){var Xe=Lt.get(g.idOfAllowChoice[Je]);void 0!==Xe&&(Xe.allowedChoices+=g.numbAddToAllowChoice)}if(g.textfieldIsOn&&void 0!==g.idOfTheTextfieldWord&&void 0!==g.wordChangeSelect){var Ke=zt.get(g.idOfTheTextfieldWord);void 0!==Ke&&(g.customTextfieldIsOn?Ke.replaceText=n:Ke.replaceText=g.wordChangeSelect)}if(g.isImageUpload&&(g.defaultImage=g.image,g.image=o),g.backpackBtnRequirement&&(void 0===app.btnBackpackIsOn&&(app.btnBackpackIsOn=0),app.btnBackpackIsOn+=1),g.showAllAddons&&(void 0===app.showAllAddons&&(app.showAllAddons=0),app.showAllAddons+=1),g.changeBackground&&(g.changeBgImage?void 0!==g.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:g.id,data:g.bgImage}),app.styling.backgroundImage=g.bgImage):void 0!==g.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:g.id,data:g.changedBgColorCode}),app.styling.backgroundColor=g.changedBgColorCode)),g.changePointBar&&(g.changeBarBgColorIsOn&&void 0!==g.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:g.id,data:g.changedBarBgColor}),app.styling.barBackgroundColor=g.changedBarBgColor),g.changeBarIconColorIsOn&&void 0!==g.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:g.id,data:g.changedBarIconColor}),app.styling.barIconColor=g.changedBarIconColor),g.changeBarTextColorIsOn&&void 0!==g.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:g.id,data:g.changedBarTextColor}),app.styling.barTextColor=g.changedBarTextColor)),g.changeTemplates&&g.changeTemplatesList&&g.changeToThisTemplate)for(var Qe=g.changeTemplatesList.split(","),et=0;et<Qe.length;et++){var tt=Qe[et],it=Ut.get(tt);if(void 0===it){var ot=Lt.get(tt);if(void 0===ot){var nt=Nt.get(tt);if(void 0===nt);else{for(var rt=nt.rowElements,at=0;at<rt.length;at++){var ct=Lt.get(rt[at]);void 0!==ct&&vn(ct,g.id,g.changeToThisTemplate)}for(var lt=nt.elements,st=0;st<lt.length;st++){var ut=Ut.get(lt[st]);if(void 0!==ut){var dt=ut.choice;if(vn(dt,g.id,g.changeToThisTemplate),g.changeAddonTemplate)for(var vt=0;vt<dt.addons.length;vt++){vn(dt.addons[vt],g.id,g.changeToThisTemplate)}}}}}else vn(ot,g.id,g.changeToThisTemplate)}else{var ft=it.choice;if(vn(ft,g.id,g.changeToThisTemplate),g.changeAddonTemplate)for(var gt=0;gt<ft.addons.length;gt++){vn(ft.addons[gt],g.id,g.changeToThisTemplate)}}}if(g.changeWidth&&g.changeWidthList&&g.changeToThisWidth)for(var pt=g.changeWidthList.split(","),mt=0;mt<pt.length;mt++){var ht=pt[mt],bt=Ut.get(ht);if(void 0===bt){var wt=Lt.get(ht);if(void 0===wt){var Tt=Nt.get(ht);if(void 0===Tt);else{for(var It=Tt.rowElements,St=0;St<It.length;St++){var yt=Lt.get(It[St]);void 0!==yt&&gn(yt,g.id,g.changeToThisWidth)}for(var xt=Tt.elements,Ct=0;Ct<xt.length;Ct++){var Ot=Ut.get(xt[Ct]);if(void 0!==Ot)gn(Ot.choice,g.id,g.changeToThisWidth)}}}else gn(wt,g.id,g.changeToThisWidth)}else{gn(bt.choice,g.id,g.changeToThisWidth)}}if(g.setBgmIsOn&&g.bgmId&&(ti.bgmIsPlaying=!0,ti.isBgmInit||g.useAudioURL?Qi(g,g.bgmId,0):(to(g),ti.isBgmInit=!0)),g.muteBgm&&ei){var At=x(ei);app.isMute=!0,At&&"function"==typeof At.mute&&At.mute()}if(g.isContentHidden&&void 0!==g.hiddenContentsRow&&void 0!==g.hiddenContentsType)for(var kt=0;kt<g.hiddenContentsRow.length;kt++){var Bt=Lt.get(g.hiddenContentsRow[kt]);if(void 0!==Bt){Bt.textIsRemoved||(Bt.textIsRemoved=!0);for(var Mt=0;Mt<g.hiddenContentsType.length;Mt++)switch(g.hiddenContentsType[Mt]){case"1":Bt.objectTitleRemoved=!0;break;case"2":Bt.objectImageRemoved=!0;break;case"3":Bt.objectTextRemoved=!0;break;case"4":Bt.objectScoreRemoved=!0;break;case"5":Bt.objectRequirementRemoved=!0;break;case"6":Bt.addonTitleRemoved=!0;break;case"7":Bt.addonImageRemoved=!0;break;case"8":Bt.addonTextRemoved=!0}}}Co(g,O,0)}}function Ao(e,t){var i=e.split("/IMG#"),o=i.length>1?i[1].replace(/\/CHAR#/g,","):"",n=(i=i[0].split("/WORD#")).length>1?i[1].replace(/\/CHAR#/g,","):"",r=(i=i[0].split("/RND#")).length>1?i[1].split("/AND#"):"",a=(i=i[0].split("/RS#")).length>1?i[1]:"",c=i[0].split("/ON#"),l=Ut.get(c[0]);if(void 0!==l){var s=l.choice,u=l.row,v=new Map;if(a)for(var g=a.split("/AND#"),p=0;p<g.length;p++){var m=g[p].split(":"),h=Number(m[0]),b=Number(m[1]);Number.isNaN(h)||v.set(h,Number.isNaN(b)?0:b)}for(var w=0;w<s.scores.length;w++){var T=s.scores[w],I=Wt.get(T.id);void 0===I||T.setValue||(v.size>0&&v.has(w)?(T.value=v.get(w),T.setValue=!0):vo(I,T))}var S=new d,y=s.isActive,C=s.multipleUseVariable>=0,O=Math.abs(s.multipleUseVariable);if(s.isActive||(s.isActive=!0,u.currentChoices+=1),s.multipleUseVariable++,Vt.set(s.id,{multiple:s.multipleUseVariable}),C&&s.discountOther&&void 0!==s.discountOperator&&void 0!==s.discountValue)if(s.isDisChoices){var A=new Set;if(void 0!==s.discountRows)for(var k=0;k<s.discountRows.length;k++){var B=Lt.get(s.discountRows[k]);if(void 0!==B)for(var M=0;M<B.objects.length;M++){var D=B.objects[M];co(s,D),A.add(D.id)}}if(void 0!==s.discountChoices)for(var F=0;F<s.discountChoices.length;F++)if(!A.has(s.discountChoices[F])){var R=Ut.get(s.discountChoices[F]);if(void 0!==R){var j=R.choice;co(s,j)}}}else if(void 0!==s.discountGroups)for(var P=0;P<s.discountGroups.length;P++){var $=Nt.get(s.discountGroups[P]);if(void 0!==$)for(var V=0;V<$.elements.length;V++){var q=Ut.get($.elements[V]);if(void 0!==q){var W=q.choice;co(s,W)}}}for(var L=new Set,U=0;U<s.scores.length;U++){var N=s.scores[U];if(void 0===N.isActiveMul&&(N.isActiveMul=[]),Zi(N.requireds)&&!N.isActiveMul[O]){var E=Wt.get(N.id);if(void 0!==E){var z=N.value;if(N.useExpression&&N.setValue&&so(E,N),N.discountIsOn&&void 0!==N.discountScore&&N.discountedFrom&&N.discountedFrom.length>0){var G=Ut.get(N.discountedFrom[0]);if(void 0!==G){var _=G.choice;if(_.useDiscountCount&&void 0!==_.discountCount){if(_.appliedDisChoices||(_.appliedDisChoices=[]),_.discountCount>_.appliedDisChoices.length)L.add(_),z=N.discountScore,N.appliedDiscount=!0;else if(void 0!==N.tmpDiscount)for(var H=0;H<N.tmpDiscount.length;H++)z>N.tmpDiscount[H].discountedValue&&(z=N.tmpDiscount[H].discountedValue)}else z=N.discountScore,N.appliedDiscount=!0}}z=E.allowFloat?z:Math.floor(z),N.multiplyByTimes&&(z*=O+1),E.startingSum-=z,N.isActiveMul[O]=!0;var Y=S.get(N.id);void 0!==Y?S.set(N.id,z+Y):S.set(N.id,z)}}}if(L.size>0&&L.forEach(function(e){e.appliedDisChoices&&-1===e.appliedDisChoices.indexOf(s.id)&&e.appliedDisChoices.push(s.id)}),C&&(s.duplicateRow&&void 0!==s.duplicateRowId&&void 0!==s.duplicateRowPlace&&Mo(s),s.activateOtherChoice&&void 0!==s.activateThisChoice)){var Z=new Set(t.map(function(e){return e.split("/ON#")[0]}));if(s.isActivateRandom&&void 0!==s.numActivateRandom)if(void 0===s.activatedRandomMul&&(s.activatedRandomMul=[]),""===r){if(1===s.multipleUseVariable){var J=s.activateThisChoice.split(",").filter(function(e){return Z.has(e.split("/ON#")[0])});s.numActivateRandom>J.length?J.length:s.numActivateRandom;for(var X=new Set,K=0;K<J.length;K++){var Q=Ut.get(J[K]);if(void 0!==Q)if(!Zi(Q.choice.requireds)){var ee=J[K];J.splice(K,1),J.push(ee)}}for(var te=J.length-1;te>=0;te--)X.add(J[te]);J=f(X).reverse();for(var ie=0,oe=[],ne=0;ne<s.numActivateRandom;ne++){oe[ne]=J.length/(s.numActivateRandom*(ne+1))<1?J.length%(s.numActivateRandom*(ne+1)):s.numActivateRandom,s.activatedRandomMul.push(J.slice(ie,oe[ne]+ie));for(var re=0;re<oe[ne]-ie;re++){var ae=s.activatedRandomMul[ne][re].split("/ON#"),ce=ae.length>1?parseInt(ae[1]):0,le=Ut.get(ae[0]);if(void 0!==le){var se=le.choice;if(!s.isAllowDeselect){if(se.isSelectableMultiple&&se.isMultipleUseVariable)for(var ue=0;ue<Math.abs(ce);ue++)ce>0&&void 0!==se.numMultipleTimesMinus?se.numMultipleTimesMinus++:ce<0&&void 0!==se.numMultipleTimesPluss&&se.numMultipleTimesPluss--;se.forcedActivated=!0}}}ie+=oe[ne]}}}else{var de=(s.multipleUseVariable-1)*s.numActivateRandom,ve=r.splice(de,de+s.numActivateRandom);s.activatedRandomMul.push(ve);for(var fe=0;fe<s.activatedRandomMul[s.multipleUseVariable-1].length;fe++){var ge=s.activatedRandomMul[s.multipleUseVariable-1][fe].split("/RON#"),pe=ge.length>1?parseInt(ge[1]):0,me=Ut.get(ge[0]);if(void 0!==me){var he=me.choice;if(!s.isAllowDeselect&&Z.has(he.id)){if(he.isSelectableMultiple&&he.isMultipleUseVariable)for(var be=0;be<Math.abs(pe);be++)pe>0&&void 0!==he.numMultipleTimesMinus?he.numMultipleTimesMinus++:pe<0&&void 0!==he.numMultipleTimesPluss&&he.numMultipleTimesPluss--;he.forcedActivated=!0}}}}else for(var we=s.activateThisChoice.split(",").filter(function(e){return Z.has(e.split("/ON#")[0])}),Te=0;Te<we.length;Te++){var Ie=we[Te].split("/ON#"),Se=Ie.length>1?parseInt(Ie[1]):0,ye=Ut.get(Ie[0]);if(void 0!==ye){var xe=ye.choice;if(!s.isAllowDeselect){if(xe.isSelectableMultiple&&xe.isMultipleUseVariable)if(s.isSelectableMultiple&&s.isMultipleUseVariable)for(var Ce=0;Ce<Math.abs(s.multipleUseVariable);Ce++)for(var Oe=0;Oe<Math.abs(Se);Oe++)Se>0&&void 0!==xe.numMultipleTimesMinus?xe.numMultipleTimesMinus++:Se<0&&void 0!==xe.numMultipleTimesPluss&&xe.numMultipleTimesPluss--;else for(var Ae=0;Ae<Math.abs(Se);Ae++)Se>0&&void 0!==xe.numMultipleTimesMinus?xe.numMultipleTimesMinus++:Se<0&&void 0!==xe.numMultipleTimesPluss&&xe.numMultipleTimesPluss--;xe.forcedActivated=!0}}else{var ke=Nt.get(Ie[0]);if(void 0!==ke)for(var Be=ke.elements,Me=0;Me<Be.length;Me++){var De=Ut.get(Be[Me]);if(void 0!==De){var Fe=De.choice;if(!s.isAllowDeselect){if(Fe.isSelectableMultiple&&Fe.isMultipleUseVariable)if(s.isSelectableMultiple&&s.isMultipleUseVariable)for(var Re=0;Re<Math.abs(s.multipleUseVariable);Re++)for(var je=0;je<Math.abs(Se);je++)Se>0&&void 0!==Fe.numMultipleTimesMinus?Fe.numMultipleTimesMinus++:Se<0&&void 0!==Fe.numMultipleTimesPluss&&Fe.numMultipleTimesPluss--;else for(var Pe=0;Pe<Math.abs(Se);Pe++)Se>0&&void 0!==Fe.numMultipleTimesMinus?Fe.numMultipleTimesMinus++:Se<0&&void 0!==Fe.numMultipleTimesPluss&&Fe.numMultipleTimesPluss--;Fe.forcedActivated=!0}}}}}}if(s.addToAllowChoice&&void 0!==s.idOfAllowChoice&&void 0!==s.numbAddToAllowChoice)for(var $e=0;$e<s.idOfAllowChoice.length;$e++){var Ve=Lt.get(s.idOfAllowChoice[$e]);void 0!==Ve&&(Ve.allowedChoices+=s.numbAddToAllowChoice)}if(!y){if(s.isChangeVariables&&void 0!==s.changedVariables)for(var qe=0;qe<s.changedVariables.length;qe++){var We=Gt.get(s.changedVariables[qe]);void 0!==We&&("1"===s.changeType?We.isTrue=!0:"2"===s.changeType?We.isTrue=!1:"3"===s.changeType&&(We.isTrue=!We.isTrue))}if(s.textfieldIsOn&&void 0!==s.idOfTheTextfieldWord&&void 0!==s.wordChangeSelect){var Le=zt.get(s.idOfTheTextfieldWord);void 0!==Le&&(s.customTextfieldIsOn?Le.replaceText=n:Le.replaceText=s.wordChangeSelect)}if(s.isImageUpload&&(s.defaultImage=s.image,s.image=o),s.backpackBtnRequirement&&(app.btnBackpackIsOn+=1),s.showAllAddons&&(app.showAllAddons+=1),s.changeBackground&&(s.changeBgImage?void 0!==s.bgImage&&(void 0===app.bgImageStack&&(app.bgImageStack=[],app.defaultBgImage=app.styling.backgroundImage||""),app.bgImageStack.push({id:s.id,data:s.bgImage}),app.styling.backgroundImage=s.bgImage):void 0!==s.changedBgColorCode&&(void 0===app.bgColorStack&&(app.bgColorStack=[],app.defaultBgColor=app.styling.backgroundColor||""),app.bgColorStack.push({id:s.id,data:s.changedBgColorCode}),app.styling.backgroundColor=s.changedBgColorCode)),s.changePointBar&&(s.changeBarBgColorIsOn&&void 0!==s.changedBarBgColor&&(void 0===app.barBgColorStack&&(app.barBgColorStack=[],app.defaultBarBgColor=app.styling.barBackgroundColor||"#FFFFFFFF"),app.barBgColorStack.push({id:s.id,data:s.changedBarBgColor}),app.styling.barBackgroundColor=s.changedBarBgColor),s.changeBarIconColorIsOn&&void 0!==s.changedBarIconColor&&(void 0===app.barIconColorStack&&(app.barIconColorStack=[],app.defaultBarIconColor=app.styling.barIconColor||"#0000008A"),app.barIconColorStack.push({id:s.id,data:s.changedBarIconColor}),app.styling.barIconColor=s.changedBarIconColor),s.changeBarTextColorIsOn&&void 0!==s.changedBarTextColor&&(void 0===app.barTextColorStack&&(app.barTextColorStack=[],app.defaultBarTextColor=app.styling.barTextColor||"#000000"),app.barTextColorStack.push({id:s.id,data:s.changedBarTextColor}),app.styling.barTextColor=s.changedBarTextColor)),s.changeTemplates&&s.changeTemplatesList&&s.changeToThisTemplate)for(var Ue=s.changeTemplatesList.split(","),Ne=0;Ne<Ue.length;Ne++){var Ee=Ue[Ne],ze=Ut.get(Ee);if(void 0===ze){var Ge=Lt.get(Ee);if(void 0===Ge){var _e=Nt.get(Ee);if(void 0===_e);else{for(var He=_e.rowElements,Ye=0;Ye<He.length;Ye++){var Ze=Lt.get(He[Ye]);void 0!==Ze&&vn(Ze,s.id,s.changeToThisTemplate)}for(var Je=_e.elements,Xe=0;Xe<Je.length;Xe++){var Ke=Ut.get(Je[Xe]);if(void 0!==Ke){var Qe=Ke.choice;if(vn(Qe,s.id,s.changeToThisTemplate),s.changeAddonTemplate)for(var et=0;et<Qe.addons.length;et++){vn(Qe.addons[et],s.id,s.changeToThisTemplate)}}}}}else vn(Ge,s.id,s.changeToThisTemplate)}else{var tt=ze.choice;if(vn(tt,s.id,s.changeToThisTemplate),s.changeAddonTemplate)for(var it=0;it<tt.addons.length;it++){vn(tt.addons[it],s.id,s.changeToThisTemplate)}}}if(s.changeWidth&&s.changeWidthList&&s.changeToThisWidth)for(var ot=s.changeWidthList.split(","),nt=0;nt<ot.length;nt++){var rt=ot[nt],at=Ut.get(rt);if(void 0===at){var ct=Lt.get(rt);if(void 0===ct){var lt=Nt.get(rt);if(void 0===lt);else{for(var st=lt.rowElements,ut=0;ut<st.length;ut++){var dt=Lt.get(st[ut]);void 0!==dt&&gn(dt,s.id,s.changeToThisWidth)}for(var vt=lt.elements,ft=0;ft<vt.length;ft++){var gt=Ut.get(vt[ft]);if(void 0!==gt)gn(gt.choice,s.id,s.changeToThisWidth)}}}else gn(ct,s.id,s.changeToThisWidth)}else{gn(at.choice,s.id,s.changeToThisWidth)}}if(s.setBgmIsOn&&s.bgmId&&(ti.bgmIsPlaying=!0,ti.isBgmInit||s.useAudioURL?Qi(s,s.bgmId,0):(to(s),ti.isBgmInit=!0)),s.muteBgm&&ei){var pt=x(ei);app.isMute=!0,pt&&"function"==typeof pt.mute&&pt.mute()}if(s.isContentHidden&&void 0!==s.hiddenContentsRow&&void 0!==s.hiddenContentsType)for(var mt=0;mt<s.hiddenContentsRow.length;mt++){var ht=Lt.get(s.hiddenContentsRow[mt]);if(void 0!==ht){ht.textIsRemoved||(ht.textIsRemoved=!0);for(var bt=0;bt<s.hiddenContentsType.length;bt++)switch(s.hiddenContentsType[bt]){case"1":ht.objectTitleRemoved=!0;break;case"2":ht.objectImageRemoved=!0;break;case"3":ht.objectTextRemoved=!0;break;case"4":ht.objectScoreRemoved=!0;break;case"5":ht.objectRequirementRemoved=!0;break;case"6":ht.addonTitleRemoved=!0;break;case"7":ht.addonImageRemoved=!0;break;case"8":ht.addonTextRemoved=!0}}}}Co(s,S,0)}}function ko(e,t){for(var i=new d,o=Math.abs(e.multipleUseVariable-1),n=0;n<e.scores.length;n++){var r=e.scores[n];if(void 0===r.isActiveMulMinus&&(r.isActiveMulMinus=[]),Zi(r.requireds)&&!r.isActiveMulMinus[o]){var a=Wt.get(r.id);if(void 0!==a){var c=r.discountIsOn&&void 0!==r.discountScore?r.discountScore:r.value;c=a.allowFloat?c:Math.floor(c),r.multiplyByTimes&&(c*=Math.abs(o)),a.startingSum+=c;var l=i.get(r.id);void 0!==l?i.set(r.id,-c+l):i.set(r.id,-c),r.isActiveMulMinus[o]=!0}}}if(e.multipleUseVariable-=1,0===e.multipleUseVariable?(e.isActive=!1,t.currentChoices-=1,Vt.delete(e.id)):(-1===e.multipleUseVariable&&(e.isActive=!0,t.currentChoices+=1),Vt.set(e.id,{multiple:e.multipleUseVariable})),e.addToAllowChoice&&void 0!==e.idOfAllowChoice&&void 0!==e.numbAddToAllowChoice)for(var s=0;s<e.idOfAllowChoice.length;s++){var u=Lt.get(e.idOfAllowChoice[s]);void 0!==u&&(u.allowedChoices-=e.numbAddToAllowChoice)}Co(e,i,0)}function Bo(e){fo();for(var t=e.split(","),i=0;i<t.length;i++){var o=t[i].split("/RP#");if(o.length>1){var n=o[1].split("/NUM#"),r=n.length>1?parseInt(n[1]):0,a=Wt.get(n[0]);void 0!==a&&(a.startingSum+=r),Vt.set(o[0],{multiple:0,isRowButton:!0,rndPoint:n[0],pointNum:r})}else{var c=t[i].split(/\/(IMG|WORD|RND|RS)#/)[0].split("/ON#"),l=c.length>1?parseInt(c[1]):0,s=Ut.get(c[0]);if(void 0!==s){var u=s.choice;if(u.isSelectableMultiple&&u.isMultipleUseVariable)for(var d=0;d<Math.abs(l);d++)l>0?Ao(t[i],t):ko(u,s.row);else Oo(t[i],t)}else{var v=Gt.get(c[0]);void 0!==v&&(v.isTrue=!0,Vt.set(v.id,{multiple:0,isVariable:!0}))}}}}function Mo(e,t){if(void 0!==e.duplicateRowId&&void 0!==e.duplicateRowPlace){var i=e.duplicateRowId,o=0;Array.from(Lt.entries()).forEach(function(e){g(e,1)[0].split("/D#")[0]===i.split("/D#")[0]&&o++});var n=Lt.get(e.duplicateRowId),r=Lt.get(e.duplicateRowPlace),a="/D#".concat(o);if(void 0!==n&&void 0!==r){var c=JSON.parse(JSON.stringify(n));if(c.id="".concat(c.id.split("/D#")[0]).concat(a),r.isBackpack){app.backpack.splice(r.index+1,0,c),Lt.set(c.id,app.backpack[r.index+1]);for(var l=r.index+1;l<app.backpack.length;l++)app.backpack[l].index=l}else{app.rows.splice(r.index+1,0,c),Lt.set(c.id,app.rows[r.index+1]);for(var s=r.index+1;s<app.rows.length;s++)app.rows[s].index=s}for(var u=0;u<c.objects.length;u++){var d=c.objects[u];d.id="".concat(d.id.split("/D#")[0]).concat(a),d.isActive=!1,delete d.forcedActivated,delete d.appliedDisChoices;for(var v=0;v<d.scores.length;v++){var f=d.scores[v];f.idx=Vi(0,5),Yt.add(f.idx),d.isSelectableMultiple?(delete f.isActiveMul,delete f.isActiveMulMinus):delete f.isActive,delete f.setValue,ro(f)}for(var p=0;p<d.addons.length;p++){d.addons[p].parentId=d.id}if(!e.dRowAddSufReq){for(var m=0;m<d.requireds.length;m++){var h=d.requireds[m];if("id"===h.type){var b=h.reqId.split("/ON#"),w="".concat(b[0].split("/D#")[0]).concat(a);b.length>1?h.reqId="".concat(w,"/ON#").concat(b[1]):h.reqId=w}else if("or"===h.type)for(var T=0;T<h.orRequired.length;T++){var I=h.orRequired[T];if(void 0!==I.req){var S=I.req.split("/ON#"),y="".concat(S[0].split("/D#")[0]).concat(a);S.length>1?I.req="".concat(y,"/ON#").concat(S[1]):I.req=y}}if(void 0!==h.requireds)for(var x=0;x<h.requireds.length;x++){var C=d.requireds[m];if("id"===C.type){var O=C.reqId.split("/ON#"),A="".concat(O[0].split("/D#")[0]).concat(a);O.length>1?C.reqId="".concat(A,"/ON#").concat(O[1]):C.reqId=A}else if("or"===C.type)for(var k=0;k<C.orRequired.length;k++){var B=C.orRequired[k];if(void 0!==B.req){var M=B.req.split("/ON#"),D="".concat(M[0].split("/D#")[0]).concat(a);M.length>1?B.req="".concat(D,"/ON#").concat(M[1]):B.req=D}}}}for(var F=0;F<d.scores.length;F++){var R=d.scores[F];if(void 0!==R.requireds)for(var j=0;j<R.requireds.length;j++){var P=R.requireds[j];if("id"===P.type){var $=P.reqId.split("/ON#"),V="".concat($[0].split("/D#")[0]).concat(a);$.length>1?P.reqId="".concat(V,"/ON#").concat($[1]):P.reqId=V}else if("or"===P.type)for(var q=0;q<P.orRequired.length;q++){var W=P.orRequired[q];if(void 0!==W.req){var L=W.req.split("/ON#"),U="".concat(L[0].split("/D#")[0]).concat(a);L.length>1?W.req="".concat(U,"/ON#").concat(L[1]):W.req=U}}}}for(var N=0;N<d.addons.length;N++){var E=d.addons[N];if(void 0!==E.requireds)for(var z=0;z<E.requireds.length;z++){var G=E.requireds[z];if("id"===G.type){var _=G.reqId.split("/ON#"),H="".concat(_[0].split("/D#")[0]).concat(a);_.length>1?G.reqId="".concat(H,"/ON#").concat(_[1]):G.reqId=H}else if("or"===G.type)for(var Y=0;Y<G.orRequired.length;Y++){var Z=G.orRequired[Y];if(void 0!==Z.req){var J=Z.req.split("/ON#"),X="".concat(J[0].split("/D#")[0]).concat(a);J.length>1?Z.req="".concat(X,"/ON#").concat(J[1]):Z.req=X}}}}}if(!e.dRowAddSufFunc){if(d.activateOtherChoice&&void 0!==d.activateThisChoice){for(var K=d.activateThisChoice.split(","),Q="",ee=0;ee<K.length;ee++){var te=K[ee].split("/ON#"),ie="".concat(te[0].split("/D#")[0]).concat(a);te.length>1?Q+="".concat(ie,"/ON#").concat(te[1],","):Q+="".concat(ie,",")}d.activateThisChoice=Q}if(d.deactivateOtherChoice&&void 0!==d.deactivateThisChoice){for(var oe=d.deactivateThisChoice.split(","),ne="",re=0;re<oe.length;re++){var ae=oe[re].split("/ON#"),ce="".concat(ae[0].split("/D#")[0]).concat(a);ae.length>1?ne+="".concat(ce,"/ON#").concat(ae[1],","):ne+="".concat(ce,",")}d.deactivateThisChoice=ne}if(d.duplicateRow&&void 0!==d.duplicateRowId&&void 0!==d.duplicateRowPlace){var le=d.duplicateRowId,se=d.duplicateRowPlace;d.duplicateRowId="".concat(le.split("/D")[0]).concat(a),d.duplicateRowPlace="".concat(se.split("/D")[0]).concat(a)}}if(d.backpackBtnRequirement&&(void 0!==app.hideBackpackBtn?app.hideBackpackBtn+=1:delete d.backpackBtnRequirement),r.isBackpack?Ut.set(d.id,{choice:app.backpack[r.index+1].objects[u],row:app.backpack[r.index+1]}):Ut.set(d.id,{choice:app.rows[r.index+1].objects[u],row:app.rows[r.index+1]}),d.groups)for(var ue=0;ue<d.groups.length;ue++){var de=Nt.get(d.groups[ue]);if(void 0!==de)-1===de.elements.indexOf(d.id)&&de.elements.push(d.id)}if(d.objectDesignGroups)for(var ve=0;ve<d.objectDesignGroups.length;ve++){var fe=Ht.get(d.objectDesignGroups[ve]);if(void 0!==fe)-1===fe.elements.indexOf(d.id)&&fe.elements.push(d.id)}}}}}function Do(e){return/^data:[a-zA-Z]+\/[a-zA-Z]+;base64,/.test(e)}function Fo(e){var t=e.match(/^data:(image\/[a-zA-Z0-9.+-]+);base64,/);return!!t&&"image/avif"===t[1].toLowerCase()}var Ro=b({selFilterBlur:T.number().optional(),selFilterBright:T.number().optional(),selFilterCont:T.number().optional(),selFilterGray:T.number().optional(),selFilterHue:T.number().optional(),selFilterInvert:T.number().optional(),selFilterOpac:T.number().optional(),selFilterSatur:T.number().optional(),selFilterSepia:T.number().optional(),reqFilterBlur:T.number().optional(),reqFilterBright:T.number().optional(),reqFilterCont:T.number().optional(),reqFilterGray:T.number().optional(),reqFilterHue:T.number().optional(),reqFilterInvert:T.number().optional(),reqFilterOpac:T.number().optional(),reqFilterSatur:T.number().optional(),reqFilterSepia:T.number().optional(),unselFilterBlur:T.number().optional(),unselFilterBright:T.number().optional(),unselFilterCont:T.number().optional(),unselFilterGray:T.number().optional(),unselFilterHue:T.number().optional(),unselFilterInvert:T.number().optional(),unselFilterOpac:T.number().optional(),unselFilterSatur:T.number().optional(),unselFilterSepia:T.number().optional()}).passthrough(),jo=b({rowTitleTextSize:T.number().optional(),rowTextTextSize:T.number().optional(),objectTitleTextSize:T.number().optional(),objectTextTextSize:T.number().optional(),addonTitleTextSize:T.number().optional(),addonTextTextSize:T.number().optional(),scoreTextSize:T.number().optional()}).passthrough(),Po=b({objectImgBorderWidth:T.number().optional(),objectImageWidth:T.number().optional(),objectImageMarginTop:T.number().optional(),objectImageMarginBottom:T.number().optional(),objectImgBorderRadiusTopLeft:T.number().optional(),objectImgBorderRadiusTopRight:T.number().optional(),objectImgBorderRadiusBottomRight:T.number().optional(),objectImgBorderRadiusBottomLeft:T.number().optional(),objectImageBoxWidth:T.number().optional()}).passthrough(),$o=b({rowImgBorderWidth:T.number().optional(),rowImageWidth:T.number().optional(),rowImageMarginTop:T.number().optional(),rowImageMarginBottom:T.number().optional(),rowImgBorderRadiusTopLeft:T.number().optional(),rowImgBorderRadiusTopRight:T.number().optional(),rowImgBorderRadiusBottomRight:T.number().optional(),rowImgBorderRadiusBottomLeft:T.number().optional(),rowImageBoxWidth:T.number().optional()}).passthrough(),Vo=b({addonImgBorderWidth:T.number().optional(),addonImageWidth:T.number().optional(),addonImageMarginTop:T.number().optional(),addonImageMarginBottom:T.number().optional(),addonImgBorderRadiusTopLeft:T.number().optional(),addonImgBorderRadiusTopRight:T.number().optional(),addonImgBorderRadiusBottomRight:T.number().optional(),addonImgBorderRadiusBottomLeft:T.number().optional(),addonImageBoxWidth:T.number().optional()}).passthrough(),qo=b({objectMargin:T.number().optional(),objectTextPadding:T.number().optional(),objectBorderWidth:T.number().optional(),objectDropShadowH:T.number().optional(),objectDropShadowV:T.number().optional(),objectDropShadowBlur:T.number().optional(),objectDropShadowSpread:T.number().optional(),objectBorderRadiusTopLeft:T.number().optional(),objectBorderRadiusTopRight:T.number().optional(),objectBorderRadiusBottomRight:T.number().optional(),objectBorderRadiusBottomLeft:T.number().optional(),objectBorderImageWidth:T.number().optional(),objectBorderImageSliceTop:T.number().optional(),objectBorderImageSliceBottom:T.number().optional(),objectBorderImageSliceLeft:T.number().optional(),objectBorderImageSliceRight:T.number().optional()}).passthrough(),Wo=b({rowMargin:T.number().optional(),rowBodyMarginSides:T.number().optional(),rowBodyMarginTop:T.number().optional(),rowBodyMarginBottom:T.number().optional(),rowTextPaddingY:T.number().optional(),rowTextPaddingX:T.number().optional(),rowDropShadowH:T.number().optional(),rowDropShadowV:T.number().optional(),rowDropShadowBlur:T.number().optional(),rowDropShadowSpread:T.number().optional(),rowButtonXPadding:T.number().optional(),rowButtonYPadding:T.number().optional(),rowBorderRadiusTopLeft:T.number().optional(),rowBorderRadiusTopRight:T.number().optional(),rowBorderRadiusBottomRight:T.number().optional(),rowBorderRadiusBottomLeft:T.number().optional(),rowBorderWidth:T.number().optional(),rowBorderImageWidth:T.number().optional(),rowBorderImageSliceTop:T.number().optional(),rowBorderImageSliceBottom:T.number().optional(),rowBorderImageSliceLeft:T.number().optional(),rowBorderImageSliceRight:T.number().optional()}).passthrough(),Lo=b({addonMargin:T.number().optional(),addonTextPadding:T.number().optional(),addonBorderWidth:T.number().optional(),addonDropShadowH:T.number().optional(),addonDropShadowV:T.number().optional(),addonDropShadowBlur:T.number().optional(),addonDropShadowSpread:T.number().optional(),addonBorderRadiusTopLeft:T.number().optional(),addonBorderRadiusTopRight:T.number().optional(),addonBorderRadiusBottomRight:T.number().optional(),addonBorderRadiusBottomLeft:T.number().optional(),addonBorderImageWidth:T.number().optional(),addonBorderImageSliceTop:T.number().optional(),addonBorderImageSliceBottom:T.number().optional(),addonBorderImageSliceLeft:T.number().optional(),addonBorderImageSliceRight:T.number().optional()}).passthrough(),Uo=b({multiChoiceCounterPosition:T.number().optional(),multiChoiceCounterSize:T.number().optional(),multiChoiceTextSize:T.number().optional()}).passthrough(),No=b({barTextPadding:T.number().optional(),barTextMargin:T.number().optional(),barPadding:T.number().optional(),barMargin:T.number().optional(),barTextSize:T.number().optional()}).passthrough(),Eo=b({backPackWidth:T.number().optional()}).passthrough(),zo=I(function(e){return""===e?{}:e},Ro.merge(jo).merge(Po).merge($o).merge(Vo).merge(qo).merge(Wo).merge(Lo).merge(Uo).merge(No).merge(Eo).passthrough()),Go=b({template:T.number().optional()}).passthrough(),_o=b({value:T.number().optional(),minValue:T.number().optional(),maxValue:T.number().optional(),discountScore:T.number().optional(),discountScoreCal:T.number().optional(),tmpDisScore:T.number().optional()}).passthrough(),Ho=b({index:T.number().optional(),template:T.number().optional(),multipleUseVariable:T.number().optional(),initMultipleTimesMinus:T.number().optional(),selectedThisManyTimesProp:T.number().optional(),addons:S(Go).optional(),scores:S(_o).optional(),styling:zo.optional(),numMultipleTimesMinus:T.number().optional(),numMultipleTimesPluss:T.number().optional(),numActivateRandom:T.number().optional(),discountLowLimit:T.number().optional(),discountValue:T.number().optional(),numbAddToAllowChoice:T.number().optional(),bgmFadeInSec:T.number().optional(),bgmFadeOutSec:T.number().optional(),fadeTransitionTime:T.number().optional(),divideWithThis:T.number().optional(),activatedFrom:T.number().optional()}).passthrough(),Yo=b({index:T.number().optional(),template:T.number().optional(),buttonRandomNumber:T.number().optional(),defaultAspectWidth:T.number().optional(),defaultAspectHeight:T.number().optional(),allowedChoices:T.number().optional(),currentChoices:T.number().optional(),objects:S(Ho).optional(),styling:zo.optional(),objectImgObjectFillHeight:T.number().optional(),randomMin:T.number().optional(),randomMax:T.number().optional()}).passthrough(),Zo=b({startingSum:T.number().optional(),initValue:T.number().optional(),iconWidth:T.number().optional(),iconHeight:T.number().optional(),negativeIconWidth:T.number().optional(),negativeIconHeight:T.number().optional()}).passthrough(),Jo=b({styling:zo.optional()}).passthrough(),Xo=b({styling:zo.optional()}).passthrough(),Ko=b({curVolume:T.number().optional(),fadeTransitionTime:T.number().optional(),hideBackpackBtn:T.number().optional(),btnBackpackIsOn:T.number().optional(),rowIdLength:T.number().optional(),objectIdLength:T.number().optional(),rowDesignGroups:S(Jo).optional(),objectDesignGroups:S(Xo).optional(),rows:S(Yo).optional(),pointTypes:S(Zo).optional(),backpack:S(Yo).optional(),styling:zo.optional()}).passthrough(),Qo=["autoSaveInterval","bgmFadeInterval","bgmFadeTimer","bgmIsPlaying","bgmObjectId","bgmPlayInterval","bgmTitle","bgmTitleInterval","cancelForcedActivated","comp","compG","compODG","compR","compRDG","curBgmTime","curBgmLength","isSeeking","isFadingOut","lastFadeTime","objectMap","pointTypeMap","wordMap"];function en(e){if(Array.isArray(e))return e.map(en).filter(function(e){return null!==e&&!("object"===u(e)&&0===Object.keys(e).length)});if(e&&"object"===u(e)){for(var t={},i=Object.keys(e),o=0;o<i.length;o++){var n=i[o],r=en(e[n]);null!==r&&(t[n]=r)}return Object.keys(t).length>0?t:null}return e}function tn(e){e.isPrivateStyling&&e.privateFilterIsOn&&void 0!==e.styling&&(void 0===e.styling.unselFilterBlurIsOn&&(e.styling.unselFilterBlurIsOn=!1),void 0===e.styling.unselFilterBlur&&(e.styling.unselFilterBlur=0),void 0===e.styling.unselFilterBrightIsOn&&(e.styling.unselFilterBrightIsOn=!1),void 0===e.styling.unselFilterBright&&(e.styling.unselFilterBright=100),void 0===e.styling.unselFilterCont&&(e.styling.unselFilterCont=100),void 0===e.styling.unselFilterGrayIsOn&&(e.styling.unselFilterGrayIsOn=!1),void 0===e.styling.unselFilterGray&&(e.styling.unselFilterGray=0),void 0===e.styling.unselFilterHueIsOn&&(e.styling.unselFilterHueIsOn=!1),void 0===e.styling.unselFilterHue&&(e.styling.unselFilterHue=0),void 0===e.styling.unselFilterInvertIsOn&&(e.styling.unselFilterInvertIsOn=!1),void 0===e.styling.unselFilterInvert&&(e.styling.unselFilterInvert=0),void 0===e.styling.unselFilterOpacIsOn&&(e.styling.unselFilterOpacIsOn=!1),void 0===e.styling.unselFilterOpac&&(e.styling.unselFilterOpac=100),void 0===e.styling.unselFilterSaturIsOn&&(e.styling.unselFilterSaturIsOn=!1),void 0===e.styling.unselFilterSatur&&(e.styling.unselFilterSatur=0),void 0===e.styling.unselFilterSepiaIsOn&&(e.styling.unselFilterSepiaIsOn=!1),void 0===e.styling.unselFilterSepia&&(e.styling.unselFilterSepia=0))}function on(e,t){if(e.isPrivateStyling&&void 0===e.privateFilterIsOn&&void 0!==e.styling)for(var i=Object.keys(xt),o=0;o<i.length;o++){var n=i[o];if(e.styling.hasOwnProperty(n)){e.privateFilterIsOn=!0;break}e.privateFilterIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateTextIsOn&&void 0!==e.styling)for(var r=Object.keys(Ct),a=0;a<r.length;a++){var c=r[a];if(e.styling.hasOwnProperty(c)){e.privateTextIsOn=!0;break}e.privateTextIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateObjectImageIsOn&&void 0!==e.styling)for(var l=Object.keys(Ot),s=0;s<l.length;s++){var u=l[s];if(e.styling.hasOwnProperty(u)){e.privateObjectImageIsOn=!0;break}e.privateObjectImageIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateObjectIsOn&&void 0!==e.styling)for(var d=Object.keys(Mt),v=0;v<d.length;v++){var f=d[v];if(e.styling.hasOwnProperty(f)){e.privateObjectIsOn=!0;break}e.privateObjectIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateAddonImageIsOn&&void 0!==e.styling)for(var g=Object.keys(kt),p=0;p<g.length;p++){var m=g[p];if(e.styling.hasOwnProperty(m)){e.privateAddonImageIsOn=!0;break}e.privateAddonImageIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateAddonIsOn&&void 0!==e.styling)for(var h=Object.keys(Ft),b=0;b<h.length;b++){var w=h[b];if(e.styling.hasOwnProperty(w)){e.privateAddonIsOn=!0;break}e.privateAddonIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateBackgroundIsOn&&void 0!==e.styling)for(var T=Object.keys(Bt),I=0;I<T.length;I++){var S=T[I];if(e.styling.hasOwnProperty(S)){e.privateBackgroundIsOn=!0;break}e.privateBackgroundIsOn=!1}if(t){if(e.isPrivateStyling&&void 0===e.privateRowImageIsOn&&void 0!==e.styling)for(var y=Object.keys(At),x=0;x<y.length;x++){var C=y[x];if(e.styling.hasOwnProperty(C)){e.privateRowImageIsOn=!0;break}e.privateRowImageIsOn=!1}if(e.isPrivateStyling&&void 0===e.privateRowIsOn&&void 0!==e.styling)for(var O=Object.keys(Dt),A=0;A<O.length;A++){var k=O[A];if(e.styling.hasOwnProperty(k)){e.privateRowIsOn=!0;break}e.privateRowIsOn=!1}}tn(e),e.isPrivateStyling||void 0===e.styling||(void 0!==e.styling.objectImgObjectFillHeight&&(e.objectImgObjectFillHeight=e.styling.objectImgObjectFillHeight),delete e.styling)}function nn(e){for(var t=Object.keys(e),i=0;i<t.length;i++){var o=t[i];if(-1!==Qo.indexOf(o))delete e[o];else if(Array.isArray(e[o])){if("rows"===o||"backpack"===o)for(var n=0;n<e[o].length;n++){var r=e[o][n];if(r.index=n,"backpack"===o&&(r.isBackpack=!0),on(r,!0),void 0!==r.styling&&oo(r.styling,void 0===e.version||"2.0.0-beta"===e.version),void 0!==r.rowDesignGroups)for(var a=0;a<r.rowDesignGroups.length;a++)"object"===u(r.rowDesignGroups[a])&&(r.rowDesignGroups[a]=r.rowDesignGroups[a].id);if("string"==typeof r.width&&(r.width=!1),"boolean"==typeof r.defaultWidth&&delete r.defaultWidth,u(r.image)&&(Do(r.image)?ui.value||(ui.value=Fo(r.image)):si.add(r.image)),void 0!==r.objects)for(var c=0;c<r.objects.length;c++){var l=r.objects[c];if(l.index=c,on(l,!1),void 0!==l.styling&&oo(l.styling,void 0===e.version||"2.0.0-beta"===e.version),l.multiplyPointtypeIsOn&&("string"==typeof l.pointTypeToMultiply&&(l.pointTypeToMultiply=[l.pointTypeToMultiply]),"number"==typeof l.startingSumAtMultiply&&(l.startingSumAtMultiply=[l.startingSumAtMultiply])),l.dividePointtypeIsOn&&("string"==typeof l.pointTypeToDivide&&(l.pointTypeToDivide=[l.pointTypeToDivide]),"number"==typeof l.startingSumAtDivide&&(l.startingSumAtDivide=[l.startingSumAtDivide])),l.fadeTransitionIsOn&&void 0!==l.fadeTransitionTime&&(l.fadeInTransitionTime=l.fadeTransitionTime,l.fadeOutTransitionTime=l.fadeTransitionTime,delete l.fadeTransitionTime),l.addToAllowChoice&&"string"==typeof l.idOfAllowChoice&&(l.idOfAllowChoice=[l.idOfAllowChoice]),void 0!==l.groups)for(var s=0;s<l.groups.length;s++)"object"===u(l.groups[s])&&(l.groups[s]=l.groups[s].id);if(void 0!==l.objectDesignGroups)for(var d=0;d<l.objectDesignGroups.length;d++)"object"===u(l.objectDesignGroups[d])&&(l.objectDesignGroups[d]=l.objectDesignGroups[d].id);l.isSelectableMultiple&&void 0!==l.numMultipleTimesMinus&&void 0===l.initMultipleTimesMinus&&(l.initMultipleTimesMinus=l.forcedActivated?0:l.numMultipleTimesMinus),"string"==typeof l.width&&delete l.width,"boolean"==typeof l.defaultWidth&&delete l.defaultWidth,u(l.image)&&(Do(l.image)?ui.value||(ui.value=Fo(l.image)):si.add(l.image));for(var v=0;v<l.addons.length;v++){var f=l.addons[v];void 0!==f.template&&0!==f.template||(f.template=1),f.parentId=l.id,u(f.image)&&(Do(f.image)?ui.value||(ui.value=Fo(f.image)):si.add(f.image))}}}else if("objectDesignGroups"===o||"rowDesignGroups"===o)for(var g=0;g<e[o].length;g++){var p=e[o][g];void 0===p.activatedId&&(p.activatedId=""),void 0===p.elements&&(p.elements=[]),void 0===p.backpackElements&&(p.backpackElements=[]);for(var m=0;m<p.elements.length;m++)"object"===u(p.elements[m])&&(p.elements[m]=p.elements[m].id);for(var h=0;h<p.backpackElements.length;h++)"object"===u(p.backpackElements[h])&&(p.backpackElements[h]=p.backpackElements[h].id);tn(p),oo(p.styling,void 0===e.version||"2.0.0-beta"===e.version)}else if("pointTypes"===o)for(var b=0;b<e[o].length;b++){var w=e[o][b];void 0===w.initValue&&(w.initValue=w.startingSum),"object"===u(w.positiveColor)&&void 0!==w.positiveColor.hexa&&(w.positiveColor=w.positiveColor.hexa),"object"===u(w.negativeColor)&&void 0!==w.negativeColor.hexa&&(w.negativeColor=w.negativeColor.hexa),"object"===u(w.privateColor)&&void 0!==w.privateColor.hexa&&(w.privateColor=w.privateColor.hexa),"object"===u(w.privateNegativeColor)&&void 0!==w.privateNegativeColor.hexa&&(w.privateNegativeColor=w.privateNegativeColor.hexa)}else if("groups"===o)for(var T=0;T<e[o].length;T++){var I=e[o][T];void 0===I.elements&&(I.elements=[]),void 0===I.rowElements&&(I.rowElements=[]);for(var S=0;S<I.elements.length;S++)"object"===u(I.elements[S])&&(I.elements[S]=I.elements[S].id);for(var y=0;y<I.rowElements.length;y++)"object"===u(I.rowElements[y])&&(I.rowElements[y]=I.rowElements[y].id)}}else"object"===u(e[o])&&"styling"===o&&oo(e[o],void 0===e.version||"2.0.0-beta"===e.version,!0)}Vt.clear(),Wt.clear(),Lt.clear(),Ut.clear(),Nt.clear(),Et.clear(),zt.clear(),Gt.clear(),_t.clear(),Ht.clear(),Zt.splice(0);for(var x=Object.keys($t),C=0;C<x.length;C++){var O=x[C];$t.hasOwnProperty(O)?app[O]=$t[O]:delete app[O]}for(var A=Object.keys(e),k=0;k<A.length;k++){var B=A[k];app[B]=e[B]}for(var M=0;M<app.googleFonts.length;M++){var D=app.googleFonts[M].replace(/ /g,"+"),F="https://fonts.googleapis.com/css2?family=".concat(D,"&display=swap"),R=document.createElement("link");R.id=D,R.rel="stylesheet",R.href=F,R.crossOrigin="anonymous",document.head.appendChild(R)}for(var j=0;j<app.customFonts.length;j++){var P=app.customFonts[j],$=document.createElement("link");$.id=P,$.rel="stylesheet",$.href=P,$.crossOrigin="anonymous",document.head.appendChild($)}for(var V=0;V<app.pointTypes.length;V++){var q=app.pointTypes[V];void 0!==q.id&&""!==q.id||(q.id=Pi(0,4)),q.id=zi(q.id,Wt),void 0===q.initValue&&(q.initValue=q.startingSum),void 0===q.isNotShownObjects&&""!==q.activatedId&&(q.isNotShownObjects=!0),void 0===q.isNotShownPointBar&&""!==q.activatedId&&(q.isNotShownPointBar=!0),Wt.set(q.id,q)}for(var W=0;W<app.rows.length;W++){var L=app.rows[W];void 0!==L.id&&""!==L.id||(L.id=Mi(0,4)),L.id=zi(L.id,Lt),Lt.set(L.id,L);for(var U=0;U<L.objects.length;U++){var N=L.objects[U];void 0!==N.id&&""!==N.id||(N.id=Fi(0,4)),N.id=zi(N.id,Ut),Ut.set(N.id,{choice:N,row:L});for(var E=0;E<N.scores.length;E++){var z=N.scores[E];void 0!==z.idx&&""!==z.idx||(z.idx=Vi(0,5)),z.idx=zi(z.idx,Yt),Yt.add(z.idx)}}}for(var G=0;G<app.backpack.length;G++){var _=app.backpack[G];void 0!==_.id&&""!==_.id||(_.id=Mi(0,4)),_.id=zi(_.id,Lt),Lt.set(_.id,_);for(var H=0;H<_.objects.length;H++){var Y=_.objects[H];void 0!==Y.id&&""!==Y.id||(Y.id=Fi(0,4)),Y.id=zi(Y.id,Ut),Ut.set(Y.id,{choice:Y,row:_});for(var Z=0;Z<Y.scores.length;Z++){var J=Y.scores[Z];void 0!==J.idx&&""!==J.idx||(J.idx=Vi(0,5)),J.idx=zi(J.idx,Yt),Yt.add(J.idx)}}}for(var X=0;X<app.groups.length;X++){var K=app.groups[X];void 0!==K.id&&""!==K.id||(K.id=ji(0,4)),K.id=zi(K.id,Nt),Nt.set(K.id,app.groups[X]);for(var Q=K.elements.length-1;Q>=0;Q--)Ut.has(K.elements[Q])||K.elements.splice(Q,1);for(var ee=K.rowElements.length-1;ee>=0;ee--)Lt.has(K.rowElements[ee])||K.rowElements.splice(ee,1)}for(var te=0;te<app.rows.length;te++){var ie=app.rows[te];if(void 0!==ie.groups)for(var oe=ie.groups.length-1;oe>=0;oe--)Nt.has(ie.groups[oe])||ie.groups.splice(oe,1);for(var ne=0;ne<ie.objects.length;ne++){var re=ie.objects[ne];if(void 0!==re.groups)for(var ae=re.groups.length-1;ae>=0;ae--)Nt.has(re.groups[ae])||re.groups.splice(ae,1)}}for(var ce=0;ce<app.backpack.length;ce++){var le=app.backpack[ce];if(void 0!==le.groups)for(var se=le.groups.length-1;se>=0;se--)Nt.has(le.groups[se])||le.groups.splice(se,1);for(var ue=0;ue<le.objects.length;ue++){var de=le.objects[ue];if(void 0!==de.groups)for(var ve=de.groups.length-1;ve>=0;ve--)Nt.has(de.groups[ve])||de.groups.splice(ve,1)}}for(var fe=0;fe<app.words.length;fe++){var ge=app.words[fe];void 0!==ge.id&&""!==ge.id||(ge.id=Di(0,4)),ge.id=zi(ge.id,zt),zt.set(ge.id,app.words[fe])}for(var pe=0;pe<app.variables.length;pe++){var me=app.variables[pe];void 0!==me.id&&""!==me.id||(me.id=$i(0,4)),me.id=zi(me.id,Gt),Gt.set(me.id,app.variables[pe])}if(void 0!==app.rowDesignGroups)for(var he=0;he<app.rowDesignGroups.length;he++){var be=app.rowDesignGroups[he];void 0!==be.id&&""!==be.id||(be.id=Ri(0,4)),be.id=zi(be.id,_t);for(var we=be.elements.length-1;we>=0;we--)Lt.has(be.elements[we])||be.elements.splice(we,1);for(var Te=be.backpackElements.length-1;Te>=0;Te--)Lt.has(be.backpackElements[Te])||be.backpackElements.splice(Te,1);_t.set(be.id,be)}if(void 0!==app.objectDesignGroups)for(var Ie=0;Ie<app.objectDesignGroups.length;Ie++){var Se=app.objectDesignGroups[Ie];void 0!==Se.id&&""!==Se.id||(Se.id=Ri(0,4)),Se.id=zi(Se.id,Ht);for(var ye=Se.elements.length-1;ye>=0;ye--)Ut.has(Se.elements[ye])||Se.elements.splice(ye,1);for(var xe=Se.backpackElements.length-1;xe>=0;xe--)Ut.has(Se.backpackElements[xe])||Se.backpackElements.splice(xe,1);Ht.set(app.objectDesignGroups[Ie].id,app.objectDesignGroups[Ie])}if(void 0!==app.globalRequirements)for(var Ce=0;Ce<app.globalRequirements.length;Ce++){var Oe=app.globalRequirements[Ce];Et.set(Oe.id,Oe)}app.activated.length>0&&Bo(app.activated.join(",")),void 0!==app.customCSS&&function(e){var t=document.getElementById("customCSS");t?""===e?(t.remove(),delete app.customCSS):(t.textContent=e,app.customCSS=e):((t=document.createElement("style")).id="customCSS",t.textContent=e,app.customCSS=e,document.head.appendChild(t))}(app.customCSS),app.buildAutoSaveIsOn&&(hi&&hi.abort(),wi()),"boolean"!=typeof app.isMute&&(app.curVolume=100,app.isMute=!1)}function rn(e){return an.apply(this,arguments)}function an(){return(an=v(l().m(function e(t){var i,o;return l().w(function(e){for(;;)if(0===e.n)return i=t.querySelectorAll("img"),o=Array.from(i).map(function(e){return e.complete?Promise.resolve():new Promise(function(t){e.onload=t,e.onerror=t})}),e.a(2,Promise.all(o).then(function(){}))},e)}))).apply(this,arguments)}function cn(e){e.querySelectorAll("img").forEach(function(e){"lazy"===e.loading&&(e.loading="eager")})}function ln(e){return sn.apply(this,arguments)}function sn(){return(sn=v(l().m(function e(t){var i,o,n;return l().w(function(e){for(;;)switch(e.n){case 0:return i=t.querySelectorAll("*"),o=[],i.forEach(function(e){var t=getComputedStyle(e).borderImageSource.match(/url\(["']?(.*?)["']?\)/);t&&t[1]&&o.push(t[1])}),n=o.map(function(e){return new Promise(function(t){var i=new Image;i.src=e,i.onload=t,i.onerror=t})}),e.n=1,Promise.all(n);case 1:return e.a(2)}},e)}))).apply(this,arguments)}function un(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return new Promise(function(t){var i=0;requestAnimationFrame(function o(){if(++i>=e)return t();requestAnimationFrame(o)})})}function dn(){return(dn=v(l().m(function e(i){var o,n,r,a,c,s,u,d,v,f,g,p,m,h,b,w;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!i){e.n=14;break}return o=[],e.p=1,ni.labelText="Downloading image...",ni.isOpen=!0,cn(i),e.n=2,rn(i);case 2:return e.n=3,St({usePromise:!0});case 3:if(n=e.v,r=n.height,a=i.offsetHeight,c=i.offsetWidth,ri.isSingleFile||!(a>r)){e.n=7;break}s=0,u=1,d=Math.ceil(a/r),v=l().m(function e(){var t,o,n,v,f,g,p;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=Math.min(r,a-s),o=document.createElement("div"),ni.labelText="Splitting large image...(".concat(u," / ").concat(d,")"),ni.isOpen=!0,app.styling.useBackpackDesign?(app.styling.backpackBgImage&&(o.style.backgroundImage=app.styling.backpackBgImage),app.styling.backpackBgColor&&(o.style.backgroundColor=hn(app.styling.backpackBgColor)),app.styling.isBackpackBgRepeat?o.style.backgroundRepeat="repeat":app.styling.isBackpackBgFitIn?o.style.backgroundSize="100% 100%":o.style.backgroundSize="cover"):(app.styling.backgroundImage&&(o.style.backgroundImage=app.styling.backgroundImage),app.styling.backgroundColor&&(o.style.backgroundColor=hn(app.styling.backgroundColor)),app.styling.isBackgroundRepeat?o.style.backgroundRepeat="repeat":app.styling.isBackgroundFitIn?o.style.backgroundSize="100% 100%":o.style.backgroundSize="cover"),i.parentElement&&i.parentElement.classList.contains("mdc-dialog__content")&&o.classList.add("backpack-wrapper"),o.style.width="".concat(c,"px"),o.style.height="".concat(t,"px"),o.style.overflow="hidden",o.style.position="absolute",o.style.display="block",o.style.top="0",o.style.left="0",o.style.zIndex="-9999",o.style.pointerEvents="none",cn(n=i.cloneNode(!0)),n.style.position="relative",n.style.top="-".concat(s,"px"),o.appendChild(n),document.body.appendChild(o),e.n=1,rn(o);case 1:return e.n=2,ln(o);case 2:return e.n=3,un(5);case 3:return e.p=3,e.n=4,k(o,{filter:function(e){var t,i;return!(null!==(t=e.classList)&&void 0!==t&&t.contains("mdc-top-app-bar")||null!==(i=e.classList)&&void 0!==i&&i.contains("hidden")||e.nodeType===Node.COMMENT_NODE)}});case 4:if(v=e.v){e.n=5;break}throw new Error("blob creation failed");case 5:f=URL.createObjectURL(v),(g=document.createElement("a")).href=f,g.download="Build_".concat(Ai(),"_part").concat(u++,".png"),g.target="_blank",g.click(),setTimeout(function(){URL.revokeObjectURL(f)},1e3),e.n=7;break;case 6:e.p=6,p=e.v,ni.labelText="Download failed: Restricted content detected.",ni.isOpen=!0,console.error(p);case 7:return e.p=7,document.body.removeChild(o),e.f(7);case 8:s+=r;case 9:return e.a(2)}},e,null,[[3,6,7,8]])});case 4:if(!(s<a)){e.n=6;break}return e.d(t(v()),5);case 5:e.n=4;break;case 6:ni.labelText="Image downloads complete.",ni.isOpen=!0,e.n=10;break;case 7:return e.n=8,k(i,{filter:function(e){var t,i;return!(null!==(t=e.classList)&&void 0!==t&&t.contains("mdc-top-app-bar")||null!==(i=e.classList)&&void 0!==i&&i.contains("hidden")||e.nodeType===Node.COMMENT_NODE)}});case 8:if(f=e.v){e.n=9;break}throw new Error("blob creation failed");case 9:g=URL.createObjectURL(f),(p=document.createElement("a")).href=g,p.download="Build_".concat(Ai(),".png"),p.target="_blank",p.click(),setTimeout(function(){URL.revokeObjectURL(g)},1e3),ni.labelText="Image download complete.",ni.isOpen=!0;case 10:e.n=12;break;case 11:e.p=11,w=e.v,ni.labelText="Download failed: Restricted content detected.",ni.isOpen=!0,console.error(w);case 12:for(e.p=12,m=0;m<o.length;m++)(b=o[m]).style.removeProperty("height"),""===(null===(h=b.getAttribute("style"))||void 0===h?void 0:h.trim())&&b.removeAttribute("style");return e.f(12);case 13:e.n=15;break;case 14:ni.labelText="Download failed: Cannot find window.",ni.isOpen=!0;case 15:return e.a(2)}},e,null,[[1,11,12,13]])}))).apply(this,arguments)}function vn(e,t,i){void 0===e.templateStack&&(e.templateStack=[],e.defaultTemplate=void 0!==e.template?e.template:1),e.templateStack.push({id:t,data:i}),e.template=i}function fn(e,t){if(void 0!==e.templateStack){var i=e.templateStack.findIndex(function(e){return e.id===t});-1!==i&&e.templateStack.splice(i,1);var o=e.templateStack.length;o>0?e.template=e.templateStack[o-1].data:(e.template=void 0!==e.defaultTemplate?e.defaultTemplate:1,delete e.templateStack)}}function gn(e,t,i){void 0===e.widthStack&&(e.widthStack=[],e.defaultWidth=void 0!==e.objectWidth?e.objectWidth:"col-md-3"),e.widthStack.push({id:t,data:i}),e.objectWidth=i}function pn(e,t){if(void 0!==e.widthStack){var i=e.widthStack.findIndex(function(e){return e.id===t});-1!==i&&e.widthStack.splice(i,1);var o=e.widthStack.length;o>0?e.objectWidth=e.widthStack[o-1].data:(e.objectWidth=void 0!==e.defaultWidth?e.defaultWidth:"col-md-3",delete e.widthStack)}}var mn=CSS.supports("color","#00000080");function hn(e){if(void 0===e)return"";if(mn||!/^#([\da-f]{8})$/i.test(e))return e;var t=parseInt(e.slice(1,3),16),i=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16),n=parseInt(e.slice(7,9),16)/255;return"rgba(".concat(t,", ").concat(i,", ").concat(o,", ").concat(n.toFixed(3),")")}var bn=s({anchor:null,text:"",isVisible:!0}),wn=0;function Tn(e,t){var i="string"==typeof t?t:t.text;function o(){var o="string"==typeof t?void 0!==app.tooltipDelay?app.tooltipDelay:1e3:t.delay;0!==wn&&(clearTimeout(wn),wn=0),o>0?wn=window.setTimeout(function(){bn.anchor=e,bn.text=i,bn.isVisible=!0},o):(bn.anchor=e,bn.text=i,bn.isVisible=!0)}function n(){0!==wn&&(clearTimeout(wn),wn=0),bn.isVisible=!1}return e.addEventListener("mouseenter",o),e.addEventListener("mouseleave",n),e.addEventListener("focusin",o),e.addEventListener("focusout",n),{destroy:function(){bn.isVisible=!1,bn.anchor=null,e.removeEventListener("mouseenter",o),e.removeEventListener("mouseleave",n),e.removeEventListener("focusin",o),e.removeEventListener("focusout",n)}}}var In=D('<div class="mdc-tooltip" role="tooltip" style="z-index: 9999;"><div class="mdc-tooltip__surface"><!></div></div>');var Sn=D("<div><!></div>");var yn=function(e,t){var i=G(t,"text",3,""),o=G(t,"innerClass",3,""),n=Sn(),r=E(n);_(r,function(){var e;return null!==(e=t.children)&&void 0!==e?e:H}),Y(n,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return{text:i(),delay:0}}),Z(function(){return J(n,1,X(o()))}),j(e,n)};var xn=D("<input/>");function Cn(e,t){$(t,!0);var i,o=G(t,"use",19,function(){return[]}),n=G(t,"class",3,""),r=G(t,"type",3,"text"),a=G(t,"placeholder",3," "),c=G(t,"value",15),l=G(t,"files",15,null),u=G(t,"dirty",15,!1),d=G(t,"invalid",15,!1),v=G(t,"updateInvalid",3,!0),f=G(t,"initialInvalid",3,!1),g=G(t,"emptyValueNull",19,function(){return null===c()}),p=G(t,"emptyValueUndefined",19,function(){return void 0===c()}),b=G(t,"step",3,"any"),w=ee(t,["$$slots","$$events","$$legacy","use","class","type","placeholder","value","files","dirty","invalid","updateInvalid","initialInvalid","emptyValueNull","emptyValueUndefined","step"]),T=s({}),I=s({});function S(e){return""===e?Number.NaN:+e}function y(e){if("file"!==r())if(""===e.currentTarget.value&&g())c(null);else if(""===e.currentTarget.value&&p())c(void 0);else switch(r()){case"number":/^-?0\d+/.test(e.currentTarget.value)&&(e.currentTarget.value=e.currentTarget.value.replace(/^(-?)0+(\d+)/,"$1$2")),"number"!=typeof c()&&"-0"!==e.currentTarget.value&&(c(S(e.currentTarget.value)),isNaN(c())&&(c(0),e.currentTarget.value="0")),function(e){return"inputType"in e&&"data"in e}(e)&&(""!==e.currentTarget.value&&"0"!==e.currentTarget.value||("-"===e.data?(c("-0"),e.currentTarget.value="-0"):"deleteContentBackward"===e.inputType?""===e.currentTarget.value&&("number"==typeof c()&&c()<0?(c("-0"),e.currentTarget.value="-0"):(c(0),e.currentTarget.value="0")):"insertFromPaste"===e.inputType&&e.data&&!isNaN(parseInt(e.data))?(c(parseFloat(e.data)),e.currentTarget.value=parseFloat(e.data).toString()):"."!==e.data&&(c(0),e.currentTarget.value="0")));break;case"range":c(S(e.currentTarget.value));break;default:c(e.currentTarget.value)}else l(e.currentTarget.files)}function x(){return i}B(function(){"file"===r()?delete I.value:I.value=null==c()?"":c()}),te(function(){v()&&f()&&d(x().matches(":invalid"))});var C={getAttr:function(e){return e in T?void 0!==T[e]?T[e]:null:x().getAttribute(e)},addAttr:function(e,t){T[e]!==t&&(T[e]=t)},removeAttr:function(e){e in T&&null==T[e]||(T[e]=void 0)},focus:function(){x().focus()},blur:function(){x().blur()},getElement:x},O=xn(),A=function(e){var i;"file"!==r()&&y(e),null===(i=t.oninput)||void 0===i||i.call(t,e)},k=function(e){var i;!function(e){"file"!==r()&&"range"!==r()||y(e),"number"===r()&&c(parseFloat(e.currentTarget.value)),u(!0),v()&&d(x().matches(":invalid"))}(e),null===(i=t.onchange)||void 0===i||i.call(t,e)};return ie(O,function(e){return m(m(m(m({class:e,type:r(),placeholder:a()},I),T),{},{step:b()},w),{},{oninput:A,onchange:k})},[function(){return oe(h({"mdc-text-field__input":!0},n(),!0))}],void 0,void 0,!0),R(O,function(e){return i=e},function(){return i}),Y(O,function(e,t){var i;return null===(i=ne)||void 0===i?void 0:i(e,t)},o),j(e,O),P(C)}var On=D("<textarea></textarea>");function An(e,t){$(t,!0);var i,o=G(t,"use",19,function(){return[]}),n=G(t,"class",3,""),r=G(t,"style",3,""),a=G(t,"value",15,""),c=G(t,"dirty",15,!1),l=G(t,"invalid",15,!1),u=G(t,"updateInvalid",3,!0),d=G(t,"initialInvalid",3,!1),v=G(t,"resizable",3,!0),f=ee(t,["$$slots","$$events","$$legacy","use","class","style","value","dirty","invalid","updateInvalid","initialInvalid","resizable"]),g=s({});function p(){return i}te(function(){u()&&d()&&l(p().matches(":invalid"))});var b={getAttr:function(e){return e in g?void 0!==g[e]?g[e]:null:p().getAttribute(e)},addAttr:function(e,t){g[e]!==t&&(g[e]=t)},removeAttr:function(e){e in g&&null==g[e]||(g[e]=void 0)},focus:function(){p().focus()},blur:function(){p().blur()},getElement:p},w=On(),T=function(e){var i;c(!0),u()&&l(p().matches(":invalid")),null===(i=t.onchange)||void 0===i||i.call(t,e)};return ie(w,function(e){return m(m(m({class:e,style:"".concat(v()?"":"resize: none; ").concat(r())},g),f),{},{onchange:T})},[function(){return oe(h({"mdc-text-field__input":!0},n(),!0))}]),R(w,function(e){return i=e},function(){return i}),Y(w,function(e,t){var i;return null===(i=ne)||void 0===i?void 0:i(e,t)},o),re(function(){return ae(w,a)}),j(e,w),P(b)}var kn=D('<span class="mdc-text-field__ripple"></span>'),Bn=D("<!> <!>",1),Mn=D("<span><!> <!></span>"),Dn=D("<!> <!> <!>",1),Fn=D("<label><!> <!> <!> <!> <!> <!> <!></label>"),Rn=D("<div><!> <!> <!> <!> <!></div>"),jn=D("<!> <!>",1);function Pn(e,t){$(t,!0);var i=de.applyPassive,o=function(){};function n(e){return e===o}var r=G(t,"use",19,function(){return[]}),a=G(t,"class",3,""),c=G(t,"style",3,""),l=G(t,"ripple",3,!0),u=G(t,"disabled",3,!1),d=G(t,"required",3,!1),v=G(t,"textarea",3,!1),f=G(t,"variant",19,function(){return v()?"outlined":"standard"}),p=G(t,"noLabel",3,!1),b=G(t,"type",3,"text"),w=G(t,"value",15),T=G(t,"files",15,o),I=G(t,"invalid",15,o),S=G(t,"updateInvalid",19,function(){return n(I())}),y=G(t,"initialInvalid",3,!1),x=G(t,"dirty",15,!1),C=G(t,"validateOnValueChange",19,S),O=G(t,"useNativeValidation",19,S),k=G(t,"withLeadingIcon",3,o),D=G(t,"withTrailingIcon",3,o),F=G(t,"input",7),W=G(t,"floatingLabel",7),N=G(t,"lineRipple",7),re=G(t,"notchedOutline",7),ae=G(t,"alwaysFloat",3,!1),Ce=ee(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","required","textarea","variant","noLabel","label","type","value","files","invalid","updateInvalid","initialInvalid","dirty","prefix","suffix","validateOnValueChange","useNativeValidation","withLeadingIcon","withTrailingIcon","input","floatingLabel","lineRipple","notchedOutline","children","leadingIcon","trailingIcon","internalCounter","line","helper","alwaysFloat"]),Oe=void 0!==w()||void 0===w()&&t.input$emptyValueUndefined||!n(T());n(T())&&T(null),n(I())&&I(!1);var Ae,ke,Be=q(s(document.createElement("div"))),Me=q(void 0),De=new ue,Fe=s({}),Re=s({}),je=q(void 0),Pe=q(!1),$e=q(s(y())),Ve=ce("SMUI:addLayoutListener"),qe=new Promise(function(e){return ke=e}),We=void 0,Le=void 0,Ue=void 0,Ne=void 0,Ee=me(function(){return F()&&F().getElement()});B(function(){(x()||V($e)||!S())&&V(Me)&&V(Me).isValid()!==!I()&&(S()?I(!V(Me).isValid()):V(Me).setValid(!I()))}),B(function(){V(Me)&&V(Me).getValidateOnValueChange()!==C()&&V(Me).setValidateOnValueChange(!n(C())&&C())}),B(function(){V(Me)&&V(Me).setUseNativeValidation(!!n(O())||O())}),B(function(){V(Me)&&V(Me).setDisabled(u())});var ze=w();function Ge(e){return e in Fe?void 0!==Fe[e]&&Fe[e]:Je().classList.contains(e)}function _e(e){Fe[e]||(Fe[e]=!0)}function He(e){e in Fe&&!Fe[e]||(Fe[e]=!1)}function Ye(e,t){Re[e]!=t&&(""===t||null==t?delete Re[e]:Re[e]=t)}function Ze(){if(V(Me)){var e=V(Me).shouldFloat;V(Me).notchOutline(e)}}function Je(){return V(Be)}B(function(){if(V(Me)&&Oe&&ze!==w()){ze=w();var e="".concat(null==w()?"":w());V(Me).getValue()!==e&&V(Me).setValue(e)}}),Ve&&(Ae=Ve(Ze)),le("SMUI:textfield:leading-icon:mount",function(e){We=e}),le("SMUI:textfield:leading-icon:unmount",function(){We=void 0}),le("SMUI:textfield:trailing-icon:mount",function(e){Le=e}),le("SMUI:textfield:trailing-icon:unmount",function(){Le=void 0}),le("SMUI:textfield:helper-text:id",function(e){z(je,e,!0)}),le("SMUI:textfield:helper-text:mount",function(e){Ue=e}),le("SMUI:textfield:helper-text:unmount",function(){z(je,void 0),Ue=void 0}),le("SMUI:textfield:character-counter:mount",function(e){Ne=e}),le("SMUI:textfield:character-counter:unmount",function(){Ne=void 0}),te(function(){if(z(Me,new se({addClass:_e,removeClass:He,hasClass:Ge,registerTextFieldInteractionHandler:function(e,t){return De.on(Je(),e,t)},deregisterTextFieldInteractionHandler:function(e,t){return De.off(Je(),e,t)},registerValidationAttributeChangeHandler:function(e){var t=new MutationObserver(function(t){O()&&e(function(e){return e.map(function(e){return e.attributeName}).filter(function(e){return e})}(t))});return F()&&t.observe(F().getElement(),{attributes:!0}),t},deregisterValidationAttributeChangeHandler:function(e){e.disconnect()},getNativeInput:function(){var e;return void 0!==(null===(e=F())||void 0===e?void 0:e.getElement())?F().getElement():null},setInputAttr:function(e,t){var i;null===(i=F())||void 0===i||i.addAttr(e,t)},removeInputAttr:function(e){var t;null===(t=F())||void 0===t||t.removeAttr(e)},isFocused:function(){var e;return document.activeElement===(null===(e=F())||void 0===e?void 0:e.getElement())},registerInputInteractionHandler:function(e,t){var o,n=null===(o=F())||void 0===o?void 0:o.getElement();if(n){var r=i();De.on(n,e,t,"boolean"==typeof r?{capture:r}:r)}},deregisterInputInteractionHandler:function(e,t){var i,o=null===(i=F())||void 0===i?void 0:i.getElement();o&&De.off(o,e,t)},floatLabel:function(e){return W()&&W().float(e||ae())},getLabelWidth:function(){return W()?W().getWidth():0},hasLabel:function(){return!!W()},shakeLabel:function(e){return W()&&W().shake(e)},setLabelRequired:function(e){return W()&&W().setRequired(e)},activateLineRipple:function(){return N()&&N().activate()},deactivateLineRipple:function(){return N()&&N().deactivate()},setLineRippleTransformOrigin:function(e){return N()&&N().setRippleCenter(e)},closeOutline:function(){return re()&&re().closeNotch()},hasOutline:function(){return!!re()},notchOutline:function(e){return re()&&re().notch(e)}},{get helperText(){return Ue},get characterCounter(){return Ne},get leadingIcon(){return We},get trailingIcon(){return Le}}),!0),Oe){var e;if(null==F())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null===(e=V(Me))||void 0===e||e.init()}else A().then(function(){var e;if(null==F())throw new Error("SMUI Textfield must be initialized with either a non-undefined initial value or an Input component.");null===(e=V(Me))||void 0===e||e.init()});return ke(),function(){var e;null===(e=V(Me))||void 0===e||e.destroy(),De.clear()}}),M(function(){Ae&&Ae()});var Xe={focus:function(){var e;null===(e=F())||void 0===e||e.focus()},blur:function(){var e;null===(e=F())||void 0===e||e.blur()},layout:Ze,getElement:Je},Ke=jn(),Qe=U(Ke),et=function(e){var i=Fn();ie(i,function(e,t,i){return m({class:e,style:t,for:void 0},i)},[function(){return oe(m(m({"mdc-text-field":!0,"mdc-text-field--disabled":u(),"mdc-text-field--textarea":v(),"mdc-text-field--filled":"filled"===f(),"mdc-text-field--outlined":"outlined"===f(),"smui-text-field--standard":"standard"===f()&&!v(),"mdc-text-field--no-label":p()||null==t.label,"mdc-text-field--label-floating":V(Pe)||null!=w()&&""!==w(),"mdc-text-field--with-leading-icon":n(k())?t.leadingIcon:k(),"mdc-text-field--with-trailing-icon":n(D())?t.trailingIcon:D(),"mdc-text-field--with-internal-counter":v()&&t.internalCounter,"mdc-text-field--invalid":I()},Fe),{},h({},a(),!0)))},function(){return Object.entries(Re).map(function(e){var t=g(e,2),i=t[0],o=t[1];return"".concat(i,": ").concat(o,";")}).concat([c()]).join(" ")},function(){return ge(Ce,["input$","label$","ripple$","outline$","helperLine$"])}]);var o=E(i),s=function(e){var i=Bn(),o=U(i),n=function(e){var t=kn();j(e,t)};ve(o,function(e){"filled"===f()&&e(n)});var r=fe(o,2),a=function(e){var i=me(function(){return V(Pe)||ae()||null!=w()&&""!==w()&&("number"!=typeof w()||!isNaN(w()))}),o=me(function(){return be(Ce,"label$")});R(Te(e,Q({get floatAbove(){return V(i)},get required(){return d()},wrapped:!0},function(){return V(o)},{children:function(e,i){var o=L(),n=U(o),r=function(e){},a=function(e){var i=L(),o=U(i),n=function(e){var i=Ie();Z(function(){return Se(i,t.label)}),j(e,i)},r=function(e){var i=L(),o=U(i);_(o,function(){return t.label}),j(e,i)};ve(o,function(e){"string"==typeof t.label?e(n):e(r,!1)},!0),j(e,i)};ve(n,function(e){null==t.label?e(r):e(a,!1)}),j(e,o)},$$slots:{default:!0}})),function(e){return W(e)},function(){return W()})};ve(r,function(e){p()||null==t.label||e(a)}),j(e,i)};ve(o,function(e){"outlined"!==f()&&e(s)});var y=fe(o,2),C=function(e){var i=me(function(){return p()||null==t.label}),o=me(function(){return be(Ce,"outline$")});R(we(e,Q({get noLabel(){return V(i)}},function(){return V(o)},{children:function(e,i){var o=L(),n=U(o),r=function(e){var i=me(function(){return V(Pe)||ae()||null!=w()&&""!==w()&&("number"!=typeof w()||!isNaN(w()))}),o=me(function(){return be(Ce,"label$")});R(Te(e,Q({get floatAbove(){return V(i)},get required(){return d()},wrapped:!0},function(){return V(o)},{children:function(e,i){var o=L(),n=U(o),r=function(e){},a=function(e){var i=L(),o=U(i),n=function(e){var i=Ie();Z(function(){return Se(i,t.label)}),j(e,i)},r=function(e){var i=L(),o=U(i);_(o,function(){return t.label}),j(e,i)};ve(o,function(e){"string"==typeof t.label?e(n):e(r,!1)},!0),j(e,i)};ve(n,function(e){null==t.label?e(r):e(a,!1)}),j(e,o)},$$slots:{default:!0}})),function(e){return W(e)},function(){return W()})};ve(n,function(e){p()||null==t.label||e(r)}),j(e,o)},$$slots:{default:!0}})),function(e){return re(e)},function(){return re()})};ve(y,function(e){"outlined"===f()&&e(C)});var O=fe(y,2);pe(O,{key:"SMUI:textfield:icon:leading",value:!0,children:function(e,i){var o=L(),n=U(o);_(n,function(){var e;return null!==(e=t.leadingIcon)&&void 0!==e?e:H}),j(e,o)},$$slots:{default:!0}});var A=fe(O,2);_(A,function(){var e;return null!==(e=t.children)&&void 0!==e?e:H});var B=fe(A,2),M=function(e){var i=Mn(),o=E(i),n=me(function(){return be(Ce,"input$")});R(An(o,Q({get disabled(){return u()},get required(){return d()},get updateInvalid(){return S()},get initialInvalid(){return V($e)},get"aria-controls"(){return V(je)},get"aria-describedby"(){return V(je)}},function(){return V(n)},{onblur:function(e){var i;z(Pe,!1),z($e,!0),ye(Je(),"blur",e),null===(i=t.input$onblur)||void 0===i||i.call(t,e)},onfocus:function(e){var i;z(Pe,!0),ye(Je(),"focus",e),null===(i=t.input$onfocus)||void 0===i||i.call(t,e)},get value(){return w()},set value(e){w(e)},get dirty(){return x()},set dirty(e){x(e)},get invalid(){return I()},set invalid(e){I(e)}})),function(e){return F(e)},function(){return F()});var r=fe(o,2);_(r,function(){var e;return null!==(e=t.internalCounter)&&void 0!==e?e:H}),Z(function(e){return J(i,1,e)},[function(){return X(oe({"mdc-text-field__resizer":!("input$resizable"in Ce)||t.input$resizable}))}]),j(e,i)},q=function(e){var i=Dn(),o=U(i),n=function(e){var i=L(),o=U(i),n=function(e){!function(e,t){$(t,!0);var i,o=ee(t,["$$slots","$$events","$$legacy","children"]),n={getElement:function(){return i.getElement()}};R(K(e,Q({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--prefix",tag:"span"},function(){return o},{children:function(e,i){var o=L(),n=U(o);_(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:H}),j(e,o)},$$slots:{default:!0}})),function(e){return i=e},function(){return i}),P(n)}(e,{children:function(e,i){var o=Ie();Z(function(){return Se(o,t.prefix)}),j(e,o)},$$slots:{default:!0}})},r=function(e){var i=L(),o=U(i);_(o,function(){var e;return null!==(e=t.prefix)&&void 0!==e?e:H}),j(e,i)};ve(o,function(e){"string"==typeof t.prefix?e(n):e(r,!1)}),j(e,i)};ve(o,function(e){null!=t.prefix&&e(n)});var r=fe(o,2),a=me(function(){return be(Ce,"input$")});R(Cn(r,Q({get type(){return b()},get disabled(){return u()},get required(){return d()},get updateInvalid(){return S()},get initialInvalid(){return V($e)},get"aria-controls"(){return V(je)},get"aria-describedby"(){return V(je)}},function(){return p()&&null!=t.label&&"string"==typeof t.label?{placeholder:t.label}:{}},function(){return V(a)},{onblur:function(e){var i;z(Pe,!1),z($e,!0),ye(Je(),"blur",e),null===(i=t.input$onblur)||void 0===i||i.call(t,e)},onfocus:function(e){var i;z(Pe,!0),ye(Je(),"focus",e),null===(i=t.input$onfocus)||void 0===i||i.call(t,e)},get value(){return w()},set value(e){w(e)},get files(){return T()},set files(e){T(e)},get dirty(){return x()},set dirty(e){x(e)},get invalid(){return I()},set invalid(e){I(e)}})),function(e){return F(e)},function(){return F()});var c=fe(r,2),l=function(e){var i=L(),o=U(i),n=function(e){!function(e,t){$(t,!0);var i,o=ee(t,["$$slots","$$events","$$legacy","children"]),n={getElement:function(){return i.getElement()}};R(K(e,Q({_smuiClass:"mdc-text-field__affix mdc-text-field__affix--suffix",tag:"span"},function(){return o},{children:function(e,i){var o=L(),n=U(o);_(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:H}),j(e,o)},$$slots:{default:!0}})),function(e){return i=e},function(){return i}),P(n)}(e,{children:function(e,i){var o=Ie();Z(function(){return Se(o,t.suffix)}),j(e,o)},$$slots:{default:!0}})},r=function(e){var i=L(),o=U(i);_(o,function(){var e;return null!==(e=t.suffix)&&void 0!==e?e:H}),j(e,i)};ve(o,function(e){"string"==typeof t.suffix?e(n):e(r,!1)}),j(e,i)};ve(c,function(e){null!=t.suffix&&e(l)}),j(e,i)};ve(B,function(e){v()&&"string"==typeof w()?e(M):e(q,!1)});var G=fe(B,2);pe(G,{key:"SMUI:textfield:icon:leading",value:!1,children:function(e,i){var o=L(),n=U(o);_(n,function(){var e;return null!==(e=t.trailingIcon)&&void 0!==e?e:H}),j(e,o)},$$slots:{default:!0}});var te=fe(G,2),ce=function(e){var t=me(function(){return be(Ce,"ripple$")});R(xe(e,Q(function(){return V(t)})),function(e){return N(e)},function(){return N()})};ve(te,function(e){"outlined"!==f()&&l()&&e(ce)}),R(i,function(e){return z(Be,e)},function(){return V(Be)}),Y(i,function(e,t){var i;return null===(i=he)||void 0===i?void 0:i(e,t)},function(){return{ripple:"filled"===f(),unbounded:!1,addClass:_e,removeClass:He,addStyle:Ye,eventTarget:V(Ee),activeTarget:V(Ee),initPromise:qe}}),Y(i,function(e,t){var i;return null===(i=ne)||void 0===i?void 0:i(e,t)},r),j(e,i)},tt=function(e){var i=Rn();ie(i,function(e,t,i){return m({class:e,style:t},i)},[function(){return oe(m(m({"mdc-text-field":!0,"mdc-text-field--disabled":u(),"mdc-text-field--textarea":v(),"mdc-text-field--filled":"filled"===f(),"mdc-text-field--outlined":"outlined"===f(),"smui-text-field--standard":"standard"===f()&&!v(),"mdc-text-field--no-label":p()||null==t.label,"mdc-text-field--with-leading-icon":t.leadingIcon,"mdc-text-field--with-trailing-icon":t.trailingIcon,"mdc-text-field--invalid":I()},Fe),{},h({},a(),!0)))},function(){return Object.entries(Re).map(function(e){var t=g(e,2),i=t[0],o=t[1];return"".concat(i,": ").concat(o,";")}).concat([c()]).join(" ")},function(){return ge(Ce,["input$","label$","ripple$","outline$","helperLine$"])}]);var o=E(i),n=function(e){var i=L(),o=U(i);_(o,function(){var e;return null!==(e=t.label)&&void 0!==e?e:H}),j(e,i)};ve(o,function(e){"string"!=typeof t.label&&e(n)});var s=fe(o,2);pe(s,{key:"SMUI:textfield:icon:leading",value:!0,children:function(e,i){var o=L(),n=U(o);_(n,function(){var e;return null!==(e=t.leadingIcon)&&void 0!==e?e:H}),j(e,o)},$$slots:{default:!0}});var d=fe(s,2);_(d,function(){var e;return null!==(e=t.children)&&void 0!==e?e:H});var b=fe(d,2);pe(b,{key:"SMUI:textfield:icon:leading",value:!1,children:function(e,i){var o=L(),n=U(o);_(n,function(){var e;return null!==(e=t.trailingIcon)&&void 0!==e?e:H}),j(e,o)},$$slots:{default:!0}});var w=fe(b,2);_(w,function(){var e;return null!==(e=t.line)&&void 0!==e?e:H}),R(i,function(e){return z(Be,e)},function(){return V(Be)}),Y(i,function(e,t){var i;return null===(i=he)||void 0===i?void 0:i(e,t)},function(){return{ripple:l(),unbounded:!1,addClass:_e,removeClass:He,addStyle:Ye}}),Y(i,function(e,t){var i;return null===(i=ne)||void 0===i?void 0:i(e,t)},r),j(e,i)};ve(Qe,function(e){Oe?e(et):e(tt,!1)});var it=fe(Qe,2),ot=function(e){var i=me(function(){return be(Ce,"helperLine$")});!function(e,t){$(t,!0);var i,o=ee(t,["$$slots","$$events","$$legacy","children"]),n={getElement:function(){return i.getElement()}};R(K(e,Q({_smuiClass:"mdc-text-field-helper-line",tag:"div"},function(){return o},{children:function(e,i){var o=L(),n=U(o);_(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:H}),j(e,o)},$$slots:{default:!0}})),function(e){return i=e},function(){return i}),P(n)}(e,Q(function(){return V(i)},{children:function(e,i){var o=L(),n=U(o);_(n,function(){var e;return null!==(e=t.helper)&&void 0!==e?e:H}),j(e,o)},$$slots:{default:!0}}))};return ve(it,function(e){t.helper&&e(ot)}),j(e,Ke),P(Xe)}var $n=D('<div class="row"><div class="col-12 mt-4 mb-2"><!></div> <div class="col-sm-6 col-12 mb-4"><!></div> <div class="col-sm-6 col-12 mb-4"><!></div> <div class="col-12"><!> <!></div></div>'),Vn=D("<!> <!> <!>",1);function qn(e,t){$(t,!0);var i=G(t,"open",7),o=q(""),n=q(!1);function r(){var e=[],t=Array.from(Vt.keys()),i="";if(t.sort(function(e,t){var i=Ut.get(e),o=Ut.get(t);return void 0!==i&&void 0!==o?i.row.index!==o.row.index?i.row.index-o.row.index:i.choice.index-o.choice.index:0}),V(n)){for(var o="",r=0;r<t.length;r++){var a=Ut.get(t[r]);if(void 0!==a){var c=a.row,l=a.choice;""!==l.title&&(c.id!==o?(""!==o&&e.push("\n"),e.push("**".concat(""!==c.title?c.title:c.debugTitle||"","**\n")),l.isSelectableMultiple?e.push("".concat(l.title,"(x").concat(l.multipleUseVariable,")")):e.push("".concat(l.title)),o=c.id):l.isSelectableMultiple?e.push(", ".concat(l.title,"(x").concat(l.multipleUseVariable,")")):e.push(", ".concat(l.title)))}}i=e.join("")}else{for(var s=0;s<t.length;s++){var u=Ut.get(t[s]);if(void 0!==u){var d=u.choice;""!==d.title&&(d.isSelectableMultiple?e.push("".concat(d.title,"(x").concat(d.multipleUseVariable,")")):e.push("".concat(d.title)))}}i=e.join(", ")}var v=document.createElement("div");return v.innerHTML=i,v.textContent}Ce(e,{surface$style:"width: 1920px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return i()},set open(e){i(e)},children:function(e,t){var i=Vn(),a=U(i);Oe(a,{class:"px-3 pb-0 toolbar toolbar__dialog",tabindex:0,autofocus:!0,children:function(e,t){var i=Ie("Build Form");j(e,i)},$$slots:{default:!0}});var c=fe(a,2);Ae(c,{children:function(e,t){var i=$n(),a=E(i),c=E(a);ke(c,{label:function(e){var t=Ie("Separate Choice Titles by Row");j(e,t)},children:function(e,t){Be(e,{color:"secondary",class:"switch-scale",get checked(){return V(n)},set checked(e){z(n,e,!0)}})},$$slots:{label:!0,default:!0}});var l=fe(a,2),s=E(l),u=me(r);Pn(s,{textarea:!0,get value(){return V(u)},label:"Current Activated Choices Titles",variant:"filled",input$rows:5});var d=fe(l,2),v=E(d),f=me(Oi);Pn(v,{textarea:!0,get value(){return V(f)},label:"Current Activated Choices ID's",variant:"filled",input$rows:5});var g=fe(d,2),p=E(g);Pn(p,{textarea:!0,label:"Area To Import Activated Choices With Lists Of Id's",variant:"filled",input$rows:5,get value(){return V(o)},set value(e){z(o,e,!0)}});var m=fe(p,2);Me(m,{onclickcapture:function(){return Bo(V(o))},variant:"raised",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Import Choices/Clean if empty");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}});var l=fe(c,2);Fe(l,{children:function(e,t){Me(e,{action:"close",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Cancel");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}}),P()}var Wn=0,Ln=D("<div><!></div>");var Un=0,Nn=D("<input/>"),En=D('<span class="mdc-select__ripple"></span>'),zn=D('<div><!> <div><!> <!> <!> <!> <span><span> </span></span> <span><svg class="mdc-select__dropdown-icon-graphic" viewBox="7 10 10 5" focusable="false"><polygon class="mdc-select__dropdown-icon-inactive" stroke="none" fill-rule="evenodd" points="7 10 12 15 17 10"></polygon><polygon class="mdc-select__dropdown-icon-active" stroke="none" fill-rule="evenodd" points="7 15 12 10 17 15"></polygon></svg></span> <!></div> <!></div> <!>',1);function Gn(e,t){$(t,!0);var i=function(){return We(it,"$selectedTextStore",n)},o=g(Le(),2),n=o[0],r=o[1],a=function(){};function c(e){return e===a}var l,u=G(t,"use",19,function(){return[]}),d=G(t,"class",3,""),v=G(t,"style",3,""),f=G(t,"ripple",3,!0),p=G(t,"disabled",3,!1),b=G(t,"variant",3,"standard"),w=G(t,"noLabel",3,!1),T=G(t,"label",3,void 0),I=G(t,"value",15),S=G(t,"key",3,function(e){return e}),x=G(t,"dirty",15,!1),C=G(t,"invalid",15,a),O=G(t,"updateInvalid",19,function(){return c(C())}),A=G(t,"required",3,!1),k=G(t,"inputId",19,function(){return"SMUI-select-"+Un++}),D=G(t,"hiddenInput",3,!1),F=G(t,"withLeadingIcon",3,a),W=G(t,"anchor$use",19,function(){return[]}),N=G(t,"anchor$class",3,""),J=G(t,"selectedTextContainer$use",19,function(){return[]}),X=G(t,"selectedTextContainer$class",3,""),K=G(t,"selectedText$use",19,function(){return[]}),re=G(t,"selectedText$class",3,""),ae=G(t,"dropdownIcon$use",19,function(){return[]}),se=G(t,"dropdownIcon$class",3,""),ue=G(t,"menu$class",3,""),de=G(t,"alwaysFloat",3,!1),pe=ee(t,["$$slots","$$events","$$legacy","use","class","style","ripple","disabled","variant","noLabel","label","value","key","dirty","invalid","updateInvalid","required","inputId","hiddenInput","withLeadingIcon","anchor$use","anchor$class","selectedTextContainer$use","selectedTextContainer$class","selectedText$use","selectedText$class","dropdownIcon$use","dropdownIcon$class","menu$class","children","leadingIcon","helperText","alwaysFloat"]),Ce=c(C());c(C())&&C(!1);var Oe,Ae,ke,Be=q(void 0),Me=s({}),De=s({}),Fe=s({}),Ue=q(-1),Ne=me(function(){return void 0!==pe.menu$id?pe.menu$id:k()+"-menu"}),Ee=q(void 0),ze=ce("SMUI:addLayoutListener"),Ge=q(!1),_e=s({}),He=q(void 0),Ye=q(void 0),Ze=q(!1),Je=ce("SMUI:select:context"),Xe=void 0,Ke=void 0,Qe=q(void 0),et=q(void 0),tt=q(void 0);le("SMUI:list:role",""),le("SMUI:list:nav",!1);var it=y("");le("SMUI:select:selectedText",it);var ot=y(I());B(function(){je(ot,I())}),le("SMUI:select:value",ot),B(function(){V(Be)&&V(Be).getValue()!==S()(I())&&V(Be).setValue(S()(I()))});var nt=V(Ue);function rt(e){return e in Me?Me[e]:ht().classList.contains(e)}function at(e){Me[e]||(Me[e]=!0)}function ct(e){e in Me&&!Me[e]||(Me[e]=!1)}function lt(e,t){De[e]!=t&&(""===t||null==t?delete De[e]:De[e]=t)}function st(e){_e[e]||(_e[e]=!0)}function ut(e){e in _e&&!_e[e]||(_e[e]=!1)}function dt(e){return e in Fe?void 0!==Fe[e]?Fe[e]:null:ht().getAttribute(e)}function vt(e,t){Fe[e]!==t&&(Fe[e]=t)}function ft(e){e in Fe&&null==Fe[e]||(Fe[e]=void 0)}function gt(){return ke.getOrderedList().map(function(e){return e.getValue()})}function pt(e){var t;null===(t=V(Be))||void 0===t||t.setUseDefaultValidation(e)}function mt(){var e;null===(e=V(Be))||void 0===e||e.layout()}function ht(){return l}B(function(){if(nt!==V(Ue))if(nt=V(Ue),V(Be))V(Be).setSelectedIndex(V(Ue),!1,!0);else{var e=gt();I()!==e[V(Ue)]&&I(e[V(Ue)])}}),B(function(){V(Be)&&V(Be).getDisabled()!==p()&&V(Be).setDisabled(p())}),B(function(){V(Be)&&x()&&V(Be).isValid()!==!C()&&(O()?C(!V(Be).isValid()):V(Be).setValid(!C()))}),B(function(){V(Be)&&V(Be).getRequired()!==A()&&V(Be).setRequired(A())}),ze&&(Ae=ze(mt)),le("SMUI:select:leading-icon:mount",function(e){Xe=e}),le("SMUI:select:leading-icon:unmount",function(){Xe=void 0}),le("SMUI:list:mount",function(e){ke=e}),le("SMUI:select:helper-text:id",function(e){z(Ee,e,!0)}),le("SMUI:select:helper-text:mount",function(e){Ke=e}),le("SMUI:select:helper-text:unmount",function(){z(Ee,void 0),Ke=void 0}),te(function(){return z(Be,new Pe({setSelectedText:function(e){je(it,e)},isSelectAnchorFocused:function(){return document.activeElement===Oe},getSelectAnchorAttr:dt,setSelectAnchorAttr:vt,removeSelectAnchorAttr:ft,addMenuClass:st,removeMenuClass:ut,openMenu:function(){z(Ge,!0)},closeMenu:function(){z(Ge,!1)},getAnchorElement:function(){return Oe},setMenuAnchorElement:function(e){z(He,e,!0)},setMenuAnchorCorner:function(e){z(Ye,e,!0)},setMenuWrapFocus:function(e){z(Ze,e,!0)},getSelectedIndex:function(){return V(Ue)},setSelectedIndex:function(e){nt=e,z(Ue,e,!0),I(gt()[V(Ue)])},focusMenuItemAtIndex:function(e){ke.focusItemAtIndex(e)},getMenuItemCount:function(){return ke.items.length},getMenuItemValues:function(){return gt().map(S())},getMenuItemTextAtIndex:function(e){return ke.getPrimaryTextAtIndex(e)},isTypeaheadInProgress:function(){return ke.typeaheadInProgress},typeaheadMatchItem:function(e,t){return ke.typeaheadMatchItem(e,t)},addClass:at,removeClass:ct,hasClass:rt,setRippleCenter:function(e){return V(et)&&V(et).setRippleCenter(e)},activateBottomLine:function(){return V(et)&&V(et).activate()},deactivateBottomLine:function(){return V(et)&&V(et).deactivate()},notifyChange:function(e){var t;(x(!0),O())&&C(!(null!==(t=V(Be))&&void 0!==t&&t.isValid()));ye(ht(),"SMUISelectChange",{value:I(),index:V(Ue)})},hasOutline:function(){return!!V(tt)},notchOutline:function(e){return V(tt)&&V(tt).notch(e)},closeOutline:function(){return V(tt)&&V(tt).closeNotch()},hasLabel:function(){return!!V(Qe)},floatLabel:function(e){return V(Qe)&&V(Qe).float(e||de())},getLabelWidth:function(){return V(Qe)?V(Qe).getWidth():0},setLabelRequired:function(e){return V(Qe)&&V(Qe).setRequired(e)}},{get helperText(){return Ke},get leadingIcon(){return Xe}}),!0),z(Ue,gt().indexOf(I()),!0),V(Be).init(),pt(Ce),function(){var e;null===(e=V(Be))||void 0===e||e.destroy()}}),M(function(){Ae&&Ae()});var bt={getUseDefaultValidation:function(){if(null==V(Be))throw new Error("Instance is undefined.");return V(Be).getUseDefaultValidation()},setUseDefaultValidation:pt,focus:function(){Oe.focus()},layout:mt,getElement:ht},wt=zn(),Tt=U(wt);ie(Tt,function(e,t,i){return m({class:e,style:t},i)},[function(){return oe(m(m({"mdc-select":!0,"mdc-select--required":A(),"mdc-select--disabled":p(),"mdc-select--filled":"filled"===b(),"mdc-select--outlined":"outlined"===b(),"smui-select--standard":"standard"===b(),"mdc-select--with-leading-icon":c(F())?t.leadingIcon:F(),"mdc-select--no-label":w()||null==T(),"mdc-select--invalid":C(),"mdc-select--activated":V(Ge),"mdc-data-table__pagination-rows-per-page-select":"data-table:pagination"===Je},Me),{},h({},d(),!0)))},function(){return Object.entries(De).map(function(e){var t=g(e,2),i=t[0],o=t[1];return"".concat(i,": ").concat(o,";")}).concat([v()]).join(" ")},function(){return ge(pe,["input$","anchor$","label$","outline$","selectedTextContainer$","selectedText$","dropdownIcon$","ripple$","menu$","list$","helperText$"])}]);var It=E(Tt),St=function(e){var t=Nn();ie(t,function(e){return m({type:"hidden",required:A(),disabled:p(),value:I()},e)},[function(){return be(pe,"input$")}],void 0,void 0,!0),j(e,t)};ve(It,function(e){D()&&e(St)});var yt=fe(It,2),xt=function(e){var i,o,n;Oe.focus(),V(Be)&&V(Be).handleClick((n=(o=e).currentTarget.getBoundingClientRect(),(function(e){return"touches"in e}(o)?o.touches[0].clientX:o.clientX)-n.left)),null===(i=t.anchor$onclick)||void 0===i||i.call(t,e)},Ct=function(e){var i;V(Be)&&V(Be).handleKeydown(e),null===(i=t.onkeydown)||void 0===i||i.call(t,e)},Ot=function(e){var i;V(Be)&&V(Be).handleBlur(),ye(ht(),"blur",e),null===(i=t.anchor$onblur)||void 0===i||i.call(t,e)},At=function(e){var i;V(Be)&&V(Be).handleFocus(),ye(ht(),"focus",e),null===(i=t.anchor$onfocus)||void 0===i||i.call(t,e)};ie(yt,function(e,t){return m(m(m({class:e,"aria-required":A()?"true":void 0,"aria-disabled":p()?"true":void 0,"aria-controls":V(Ne),"aria-expanded":V(Ge)?"true":"false","aria-describedby":V(Ee),role:"combobox",tabindex:"0"},Fe),t),{},{onclick:xt,onkeydown:Ct,onblur:Ot,onfocus:At})},[function(){return oe(h(h({},N(),!0),"mdc-select__anchor",!0))},function(){return be(pe,"anchor$")}]);var kt=E(yt),Bt=function(e){var t=En();j(e,t)};ve(kt,function(e){"filled"===b()&&e(Bt)});var Mt=fe(kt,2),Dt=function(e){var t=me(function(){return k()+"-smui-label"}),o=me(function(){return""!==i()||de()}),n=me(function(){return be(pe,"label$")});R(Te(e,Q({get id(){return V(t)},get floatAbove(){return V(o)},get required(){return A()}},function(){return V(n)},{children:function(e,t){var i=L(),o=U(i),n=function(e){},r=function(e){var t=L(),i=U(t),o=function(e){var t=Ie();Z(function(){return Se(t,T())}),j(e,t)},n=function(e){var t=L(),i=U(t);_(i,T),j(e,t)};ve(i,function(e){"string"==typeof T()?e(o):e(n,!1)},!0),j(e,t)};ve(o,function(e){null==T()?e(n):e(r,!1)}),j(e,i)},$$slots:{default:!0}})),function(e){return z(Qe,e,!0)},function(){return V(Qe)})};ve(Mt,function(e){"outlined"===b()||w()||null==T()||e(Dt)});var Ft=fe(Mt,2),Rt=function(e){var t=me(function(){return w()||null==T()}),o=me(function(){return be(pe,"outline$")});R(we(e,Q({get noLabel(){return V(t)}},function(){return V(o)},{children:function(e,t){var o=L(),n=U(o),r=function(e){var t=me(function(){return k()+"-smui-label"}),o=me(function(){return""!==i()||de()}),n=me(function(){return be(pe,"label$")});R(Te(e,Q({get id(){return V(t)},get floatAbove(){return V(o)},get required(){return A()}},function(){return V(n)},{children:function(e,t){var i=L(),o=U(i),n=function(e){},r=function(e){var t=L(),i=U(t),o=function(e){var t=Ie();Z(function(){return Se(t,T())}),j(e,t)},n=function(e){var t=L(),i=U(t);_(i,T),j(e,t)};ve(i,function(e){"string"==typeof T()?e(o):e(n,!1)},!0),j(e,t)};ve(o,function(e){null==T()?e(n):e(r,!1)}),j(e,i)},$$slots:{default:!0}})),function(e){return z(Qe,e,!0)},function(){return V(Qe)})};ve(n,function(e){w()||null==T()||e(r)}),j(e,o)},$$slots:{default:!0}})),function(e){return z(tt,e,!0)},function(){return V(tt)})};ve(Ft,function(e){"outlined"===b()&&e(Rt)});var jt=fe(Ft,2);_(jt,function(){var e;return null!==(e=t.leadingIcon)&&void 0!==e?e:H});var Pt=fe(jt,2);ie(Pt,function(e,t){return m({class:e},t)},[function(){return oe(h(h({},X(),!0),"mdc-select__selected-text-container",!0))},function(){return be(pe,"selectedTextContainer$")}]);var $t=E(Pt);ie($t,function(e,t){return m({id:k()+"-smui-selected-text",class:e,role:"button","aria-haspopup":"listbox","aria-labelledby":k()+"-smui-label"},t)},[function(){return oe(h(h({},re(),!0),"mdc-select__selected-text",!0))},function(){return be(pe,"selectedText$")}]);var Vt=E($t);Y($t,function(e,t){var i;return null===(i=ne)||void 0===i?void 0:i(e,t)},K),Y(Pt,function(e,t){var i;return null===(i=ne)||void 0===i?void 0:i(e,t)},J);var qt=fe(Pt,2);ie(qt,function(e,t){return m({class:e},t)},[function(){return oe(h(h({},se(),!0),"mdc-select__dropdown-icon",!0))},function(){return be(pe,"dropdownIcon$")}]),Y(qt,function(e,t){var i;return null===(i=ne)||void 0===i?void 0:i(e,t)},ae);var Wt=fe(qt,2),Lt=function(e){var t=me(function(){return be(pe,"ripple$")});R(xe(e,Q(function(){return V(t)})),function(e){return z(et,e,!0)},function(){return V(et)})};ve(Wt,function(e){"outlined"!==b()&&f()&&e(Lt)}),R(yt,function(e){return Oe=e},function(){return Oe}),Y(yt,function(e,t){var i;return null===(i=ne)||void 0===i?void 0:i(e,t)},W);var Ut=fe(yt,2),Nt=me(function(){return oe(m(h(h({},ue(),!0),"mdc-select__menu",!0),_e))}),Et=me(function(){return be(pe,"menu$")});$e(Ut,Q({get class(){return V(Nt)},get id(){return V(Ne)},fullWidth:!0,anchor:!1,get anchorElement(){return V(He)},get anchorCorner(){return V(Ye)}},function(){return V(Et)},{onSMUIMenuSelected:function(e){var i;V(Be)&&V(Be).handleMenuItemAction(e.detail.index),null===(i=t.onSMUIMenuSelected)||void 0===i||i.call(t,e)},onSMUIMenuSurfaceClosing:function(e){var i;V(Be)&&V(Be).handleMenuClosing(),null===(i=t.onSMUIMenuSurfaceClosing)||void 0===i||i.call(t,e)},onSMUIMenuSurfaceClosed:function(e){var i;V(Be)&&V(Be).handleMenuClosed(),null===(i=t.onSMUIMenuSurfaceClosed)||void 0===i||i.call(t,e)},onSMUIMenuSurfaceOpened:function(e){var i;V(Be)&&V(Be).handleMenuOpened(),null===(i=t.onSMUIMenuSurfaceOpened)||void 0===i||i.call(t,e)},get open(){return V(Ge)},set open(e){z(Ge,e,!0)},children:function(e,i){var o=me(function(){return be(pe,"list$")});Ve(e,Q({role:"listbox",get wrapFocus(){return V(Ze)}},function(){return V(o)},{style:"max-height: 296px",get selectedIndex(){return V(Ue)},set selectedIndex(e){z(Ue,e,!0)},children:function(e,i){var o=L(),n=U(o);_(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:H}),j(e,o)},$$slots:{default:!0}}))},$$slots:{default:!0}})),R(Tt,function(e){return l=e},function(){return l}),Y(Tt,function(e,t){var i;return null===(i=he)||void 0===i?void 0:i(e,t)},function(){return{ripple:"filled"===b(),unbounded:!1,addClass:at,removeClass:ct,addStyle:lt}}),Y(Tt,function(e,t){var i;return null===(i=qe)||void 0===i?void 0:i(e,t)},function(){return{addClass:at,removeClass:ct}}),Y(Tt,function(e,t){var i;return null===(i=ne)||void 0===i?void 0:i(e,t)},u);var zt=fe(Tt,2),Gt=function(e){var i=me(function(){return be(pe,"helperText$")});!function(e,t){$(t,!0);var i,o=G(t,"use",19,function(){return[]}),n=G(t,"class",3,""),r=G(t,"id",19,function(){return"SMUI-select-helper-text-"+Wn++}),a=G(t,"persistent",3,!1),c=G(t,"validationMsg",3,!1),l=ee(t,["$$slots","$$events","$$legacy","use","class","id","persistent","validationMsg","children"]),u=q(void 0),d=s({}),v=s({}),f=q(void 0),g=ce("SMUI:select:helper-text:id"),p=ce("SMUI:select:helper-text:mount"),b=ce("SMUI:select:helper-text:unmount");function w(e){return e in d?d[e]:C().classList.contains(e)}function T(e){d[e]||(d[e]=!0)}function I(e){e in d&&!d[e]||(d[e]=!1)}function S(e){return e in v?void 0!==v[e]?v[e]:null:C().getAttribute(e)}function y(e,t){v[e]!==t&&(v[e]=t)}function x(e){e in v&&null==v[e]||(v[e]=void 0)}function C(){return i}te(function(){return z(u,new Re({addClass:T,removeClass:I,hasClass:w,getAttr:S,setAttr:y,removeAttr:x,setContent:function(e){z(f,e,!0)}}),!0),g&&g(r()),p&&p(V(u)),V(u).init(),function(){var e;b&&V(u)&&b(V(u)),null===(e=V(u))||void 0===e||e.destroy()}});var O={getElement:C},A=Ln();ie(A,function(e){return m(m({class:e,"aria-hidden":a()?void 0:"true",id:r()},v),l)},[function(){return oe(m(m({"mdc-select-helper-text":!0,"mdc-select-helper-text--validation-msg":c(),"mdc-select-helper-text--validation-msg-persistent":a()},d),{},h({},n(),!0)))}]);var k=E(A),B=function(e){var i=L(),o=U(i);_(o,function(){var e;return null!==(e=t.children)&&void 0!==e?e:H}),j(e,i)},M=function(e){var t=Ie();Z(function(){return Se(t,V(f))}),j(e,t)};ve(k,function(e){null==V(f)?e(B):e(M,!1)}),R(A,function(e){return i=e},function(){return i}),Y(A,function(e,t){var i;return null===(i=ne)||void 0===i?void 0:i(e,t)},o),j(e,A),P(O)}(e,Q(function(){return V(i)},{children:function(e,i){var o=L(),n=U(o);_(n,function(){var e;return null!==(e=t.helperText)&&void 0!==e?e:H}),j(e,o)},$$slots:{default:!0}}))};ve(zt,function(e){t.helperText&&e(Gt)}),Z(function(){return Se(Vt,i())}),j(e,wt);var _t=P(bt);return r(),_t}function _n(e,t){$(t,!0);var i=g(Le(),2),o=i[0],n=i[1],r=G(t,"use",19,function(){return[]});G(t,"class",3,"");var a,c=G(t,"value",3,""),l=ee(t,["$$slots","$$events","$$legacy","use","class","value","children"]),s=ce("SMUI:select:selectedText"),u=ce("SMUI:select:value");le("SMUI:list:item:role","option");var d=me(function(){return null!=c()&&""!==c()&&We(u,"$selectedValue",o)===c()});function v(){V(d)&&a&&je(s,a.getPrimaryText())}te(v),M(v);var f={getElement:function(){return a.getElement()}};R(Ue(e,Q({get use(){return r()},get"data-value"(){return c()},get value(){return c()},get selected(){return V(d)}},function(){return l},{children:function(e,i){var o=L(),n=U(o);_(n,function(){var e;return null!==(e=t.children)&&void 0!==e?e:H}),j(e,o)},$$slots:{default:!0}})),function(e){return a=e},function(){return a});var p=P(f);return n(),p}var Hn=D('<div class="col-12 px-3 mt-0"><!></div>'),Yn=D('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12"><!></div> <div class="col-12"><!></div> <!> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div> <div class="col-12"><!></div></div></div>'),Zn=D("<b>Interactive CYOA Creator Plus</b>"),Jn=D('<div class="container-fluid p-0"><div class="row gy-3"><div class="col-12 text-right"> <br/></div></div></div>'),Xn=D("<!> <!>",1),Kn=D("<!> <!>",1),Qn=D("<!> <!> <!>",1);function er(e,t){$(t,!0);var i=G(t,"open",7),o=[{text:"2 per row",value:"col-6"},{text:"3 per row",value:"col-4"},{text:"4 per row",value:"col-3"}],n=q("General");function r(){hi&&hi.abort(),wi()}function a(){for(var e=ri.allowDeselect,t=0;t<app.backpack.length;t++){var i=app.backpack[t];i.isResultRow&&(i.isInfoRow=!e)}}Ce(e,{surface$style:"width: 600px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},get open(){return i()},set open(e){i(e)},children:function(e,t){var i=Qn(),c=U(i);Oe(c,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:function(e,t){var i=Ie("Settings");j(e,i)},$$slots:{default:!0}});var l=fe(c,2);Ae(l,{children:function(e,t){var i=Kn(),c=U(i);Ne(c,{tabs:["General","About"],get active(){return V(n)},set active(e){z(n,e,!0)},tab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H;Ee(e,{get tab(){return t()},children:function(e,i){De(e,{children:function(e,i){var o=Ie();Z(function(){return Se(o,t())}),j(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{tab:!0}});var l=fe(c,2),s=function(e){ze(e,{role:"tabpanel",variant:"unelevated",children:function(e,t){Ge(e,{children:function(e,t){var i=Yn(),n=E(i),c=E(n);Gn(E(c),{label:"Choices per row",variant:"standard",alwaysFloat:!0,get value(){return app.objectsPerRow},set value(e){app.objectsPerRow=e},helperText:function(e){var t=Ie("Maximum Number of Choices per Row for Screens Between 720px and 1280px.");j(e,t)},children:function(e,t){var i=L(),n=U(i);_e(n,17,function(){return o},function(e){return e.text},function(e,t){_n(e,{get value(){return V(t).value},children:function(e,i){var o=Ie();Z(function(){return Se(o,V(t).text)}),j(e,o)},$$slots:{default:!0}})}),j(e,i)},$$slots:{helperText:!0,default:!0}});var l=fe(c,2),s=E(l);ke(s,{label:function(e){var t=Ie("Enable Auto Save");j(e,t)},children:function(e,t){Be(e,{get checked(){return app.buildAutoSaveIsOn||!1},set checked(e){!function(e){app.buildAutoSaveIsOn=e}(e)},onSMUISwitchChange:function(){app.buildAutoSaveIsOn&&r()},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var u=fe(l,2),d=function(e){var t=Hn(),i=E(t);Pn(i,{get value(){return app.buildAutoSaveInterval||10},set value(e){!function(e){app.buildAutoSaveInterval=e}(e)},label:"Auto Save Interval",type:"number",suffix:"min",variant:"standard",style:"max-width: 200px",input$class:"text-right",input$min:"1",onchange:function(){app.buildAutoSaveInterval<1&&(app.buildAutoSaveInterval=1),r()}}),j(e,t)};ve(u,function(e){app.buildAutoSaveIsOn&&e(d)});var v=fe(u,2),f=E(v);ke(f,{label:function(e){var t=Ie("Preload Images in Backpack");j(e,t)},children:function(e,t){Be(e,{get checked(){return app.preloadImages||!1},set checked(e){!function(e){app.preloadImages=e}(e)},color:"secondary",class:"switch-scale"})},$$slots:{label:!0,default:!0}});var g=fe(v,2),p=E(g);ke(p,{label:function(e){var t=Ie("Allow Deselecting Choices in Backpack");j(e,t)},children:function(e,t){Be(e,{onSMUISwitchChange:a,color:"secondary",class:"switch-scale",get checked(){return ri.allowDeselect},set checked(e){ri.allowDeselect=e}})},$$slots:{label:!0,default:!0}});var m=fe(g,2),h=E(m);yn(h,{text:"Enabling this option may cause image downloads to fail or reduce the image resolution.",children:function(e,t){ke(e,{label:function(e){var t=Ie("Download Images as Single File");j(e,t)},children:function(e,t){Be(e,{color:"secondary",class:"switch-scale",get checked(){return ri.isSingleFile},set checked(e){ri.isSingleFile=e}})},$$slots:{label:!0,default:!0}})},$$slots:{default:!0}});var b=fe(m,2),w=E(b);ke(w,{label:function(e){var t=Ie("Show Background Music Player");j(e,t)},children:function(e,t){Be(e,{get checked(){return app.showMusicPlayer||!1},set checked(e){!function(e){app.showMusicPlayer=e}(e)},color:"secondary",class:"switch-scale",onchange:function(){if(app.showMusicPlayer){var e=x(Qt);if(e){var t=0,i=0;0!==ti.bgmTitleInterval&&(clearInterval(ti.bgmTitleInterval),ti.bgmTitleInterval=0),ti.bgmTitleInterval=window.setInterval(function(){if(""!==ti.bgmObjectId){var t=Ut.get(ti.bgmObjectId);if(void 0!==t){var i=t.choice;e.getId()===i.bgmId&&""!==e.getTitle()&&(ti.bgmTitle=e.getTitle(),ti.curBgmLength=e.getDuration(),clearInterval(ti.bgmTitleInterval),ti.bgmTitleInterval=0)}}},1e3),0!==ti.bgmPlayInterval&&(clearInterval(ti.bgmPlayInterval),ti.bgmPlayInterval=0),ti.bgmPlayInterval=window.setInterval(function(){if(!ti.isSeeking&&e.isPlaying()){var o=Math.floor(e.getCurrentTime());o!==ti.curBgmTime?t!==o?ti.curBgmTime=o:(++i>ti.curBgmLength&&(i=1),ti.curBgmTime=i):(t=o,i=o+1,ti.curBgmTime=i)}},1e3)}}else ti.bgmIsPlaying&&(0!==ti.bgmTitleInterval&&(clearInterval(ti.bgmTitleInterval),ti.bgmTitleInterval=0),0!==ti.bgmPlayInterval&&(clearInterval(ti.bgmPlayInterval),ti.bgmPlayInterval=0))}})},$$slots:{label:!0,default:!0}});var T=fe(b,2),I=E(T);Pn(I,{get value(){return app.styling.backPackWidth||1200},set value(e){!function(e){app.styling.backPackWidth=e}(e)},label:"Backpack Width",type:"number",suffix:"px",variant:"standard",input$min:"0",onchange:function(){void 0!==app.styling.backPackWidth&&app.styling.backPackWidth<0&&(app.styling.backPackWidth=0)}}),j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},u=function(e){var t=L(),i=U(t),o=function(e){ze(e,{role:"tabpanel",variant:"unelevated",children:function(e,t){var i=Xn(),o=U(i);He(o,{class:"text-center",children:function(e,t){var i=Zn();j(e,i)},$$slots:{default:!0}});var n=fe(o,2);Ge(n,{children:function(e,t){var i=Jn(),o=E(i),n=E(o),r=E(n);Z(function(){return Se(r,"v".concat(yt))}),j(e,i)},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}})};ve(i,function(e){"About"===V(n)&&e(o)},!0),j(e,t)};ve(l,function(e){"General"===V(n)?e(s):e(u,!1)}),j(e,i)},$$slots:{default:!0}});var s=fe(l,2);Fe(s,{children:function(e,t){Me(e,{action:"close",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Close");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}}),P()}var tr=D('<div><span class="d-flex text-prewrap align-items-center"><!> <!> <span translate="no"> </span> <!> <!></span></div>');var ir=D('<div class="col-12"><!></div>'),or=D('<div class="row pt-4"><div class="col-12"><!></div> <!></div>'),nr=D('<div class="col-12"><!></div>'),rr=D('<div class="container-fluid"><div class="row"><!> <div class="col-6"><!></div> <div class="col-6"><!></div></div></div>'),ar=D("<!> <!> <!>",1);function cr(e,t){$(t,!0);var i=G(t,"open",7),o=G(t,"title",3,""),n=G(t,"defaultRow",3,5),r=G(t,"textLabel",3,""),a=q(s(t.isWord&&t.prevText?t.prevText:""));Ce(e,{surface$style:"width: 400px; max-width: calc(100vw - 32px);",onSMUIDialogClosed:function(e){t.isWord?t.closeHandler(e,V(a)):t.closeHandler(e),t.onclose()},get open(){return i()},set open(e){i(e)},children:function(e,i){var c=ar(),l=U(c);Oe(l,{class:"px-3 pb-0 toolbar toolbar__dialog",children:function(e,t){var i=L(),n=U(i);N(n,o),j(e,i)},$$slots:{default:!0}});var s=fe(l,2);Ae(s,{children:function(e,i){var o=or(),c=E(o),l=E(c);N(l,function(){return t.context});var s=fe(c,2),u=function(e){var t=ir(),i=E(t),o=function(e){Pn(e,{get label(){return r()},variant:"filled",get value(){return V(a)},set value(e){z(a,e,!0)}})},c=function(e){Pn(e,{textarea:!0,get label(){return r()},variant:"filled",get input$rows(){return n()},get value(){return V(a)},set value(e){z(a,e,!0)}})};ve(i,function(e){1===n()?e(o):e(c,!1)}),j(e,t)};ve(s,function(e){t.isWord&&e(u)}),j(e,o)},$$slots:{default:!0}});var u=fe(s,2);Fe(u,{children:function(e,i){var o=rr(),n=E(o),r=E(n),a=function(e){var t=nr(),i=E(t);Me(i,{action:"deselect",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Deselect");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),j(e,t)};ve(r,function(e){t.isDeselect&&e(a)});var c=fe(r,2),l=E(c);Me(l,{action:"close",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Cancel");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var s=fe(c,2),u=E(s);Me(u,{action:"accept",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("OK");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),j(e,o)},$$slots:{default:!0}}),j(e,c)},$$slots:{default:!0}}),P()}var lr=D('<i class="mdi mdi-play"></i>'),sr=D('<i class="mdi mdi-clipboard-outline"></i>'),ur=D('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-10 col-8"><div class="col-12 pt-1"><div> </div> <div> </div></div></div> <div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div></div>'),dr=D('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-12" style="height: 48px">Empty</div></div>'),vr=D('<i class="mdi mdi-alpha-a-box-outline"></i>'),fr=D('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12 pt-1"><div> </div> <div> </div></div></div></div>'),gr=D('<i class="mdi mdi-play"></i>'),pr=D('<i class="mdi mdi-trash-can"></i>'),mr=D('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-10 col-8"><div class="col-12 pt-1"><div> </div> <div> </div></div></div> <div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div></div>'),hr=D('<i class="mdi mdi-content-save"></i>'),br=D('<div class="row gx-0" style="border-bottom: 1px solid"><div class="col-sm-1 col-2 d-flex align-items-center justify-center"><!></div> <div class="col-sm-11 col-10"><div class="col-12"><!></div></div></div>'),wr=D("<!> <!>",1),Tr=D('<i class="mdi mdi-menu-left"></i>'),Ir=D('<i class="mdi mdi-menu-right"></i>'),Sr=D('<div class="container-fluid pb-2 mb-2" style="border: 1px solid"><!></div> <div class="row gy-2"><div class="col pb-2"><!></div> <div class="col pb-2"><div class="d-row align-items-center justify-end"><!> <span class="list-text px-2"> </span> <!></div></div></div> <div class="row gy-2"><div class="col-12"><!></div></div>',1),yr=D("<!> <!> <!>",1),xr=D("<!> <!>",1);function Cr(e,t){$(t,!0);var i=G(t,"open",7),o={action:function(){},title:"Warning",context:""},n=q("none"),r=q(1),a=me(function(){return 9*(V(r)-1)}),c=me(function(){return Math.min(V(a)+9-1,99)}),s=me(function(){return Array.from({length:V(c)-V(a)+1},function(e,t){return ci[V(a)+t]})}),u=me(function(){return Array.from({length:V(c)-V(a)+1},function(e,t){return li[V(a)+t]})}),d=q(!1),f=me(function(){return 9*(V(r)-1)});function g(){return g=v(l().m(function e(t){var i;return l().w(function(e){for(;;)switch(e.n){case 0:return i="".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(t),e.n=1,yi(i,"buildStore");case 1:Bo(e.v.app);case 2:return e.a(2)}},e)})),g.apply(this,arguments)}function p(){return p=v(l().m(function e(){var t;return l().w(function(e){for(;;)switch(e.n){case 0:return t="".concat(location.pathname.replace(/\/index\.html$/,"/"),"autoSave"),e.n=1,yi(t,"buildStore");case 1:Bo(e.v.app);case 2:return e.a(2)}},e)})),p.apply(this,arguments)}function m(){return m=v(l().m(function e(t){var i,o;return l().w(function(e){for(;;)switch(e.n){case 0:return i=V(u)[t].name,e.n=1,yi(i,"buildStore",!0);case 1:o=e.v,Bo(Array.isArray(o.value)?o.value.join(","):o.value);case 2:return e.a(2)}},e)})),m.apply(this,arguments)}function h(){return h=v(l().m(function e(t){var i,o,n;return l().w(function(e){for(;;)switch(e.n){case 0:return i=V(u)[t].name,e.n=1,yi(i,"buildStore",!0);case 1:o=e.v,n=Array.isArray(o.value)?o.value.join(","):o.value,navigator.clipboard.writeText(n).then(function(){ni.labelText="Build code copied to clipboard.",ni.isOpen=!0}).catch(function(e){ni.labelText="Failed to copy build code to clipboard.",ni.isOpen=!0,console.error(e)});case 2:return e.a(2)}},e)})),h.apply(this,arguments)}function b(e){var t="".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(e),i=navigator.language,o=new Date,n=new Intl.DateTimeFormat(i,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(o);!function(e,t,i,o,n){Ii.apply(this,arguments)}({stored:!0,name:ci[e].name,time:n,app:Oi()},t,e,"buildStore",!0)}function w(e){!function(e,t,i,o){Si.apply(this,arguments)}("".concat(location.pathname.replace(/\/index\.html$/,"/"),"slot-").concat(e),e,"buildStore",!0)}var T=xr(),I=U(T);Ce(I,{surface$style:"width: 700px; max-width: calc(100vw - 32px);",get onSMUIDialogClosed(){return t.onclose},id:"dialog",get open(){return i()},set open(e){i(e)},children:function(e,t){var i=yr(),a=U(i);Oe(a,{class:"text-left dialog-title",tabindex:0,autofocus:!0,children:function(e,t){var i=Ie("Save/Load Build");j(e,i)},$$slots:{default:!0}});var c=fe(a,2);Ae(c,{class:"pt-3",children:function(e,t){var i=Sr(),a=U(i),c=E(a),l=function(e){var t=L(),i=U(t);_e(i,17,function(){return V(u)},Je,function(e,t,i){var r=L(),a=U(r),c=function(e){var r=ur(),a=E(r),c=E(a);Ze(c,{onclickcapture:function(){o.action=function(){return function(e){return m.apply(this,arguments)}(V(f)+i)},o.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",z(n,"dlgCommon")},children:function(e,t){var i=lr();j(e,i)},$$slots:{default:!0}});var l=fe(a,2),s=E(l),u=E(s),d=E(u),v=fe(u,2),g=E(v),p=fe(l,2),b=E(p);Ze(b,{onclickcapture:function(){return function(e){return h.apply(this,arguments)}(V(f)+i)},children:function(e,t){var i=sr();j(e,i)},$$slots:{default:!0}}),Z(function(){Se(d,V(t).name),Se(g,V(t).time)}),j(e,r)},l=function(e){var t=dr();j(e,t)};ve(a,function(e){V(t).stored?e(c):e(l,!1)}),j(e,r)}),j(e,t)},v=function(e){var t=wr(),i=U(t),r=function(e){var t=fr(),i=E(t),r=E(i);Ze(r,{onclickcapture:function(){o.action=function(){return function(){return p.apply(this,arguments)}()},o.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",z(n,"dlgCommon")},children:function(e,t){var i=vr();j(e,i)},$$slots:{default:!0}});var a=fe(i,2),c=E(a),l=E(c),s=E(l),u=fe(l,2),d=E(u);Z(function(){Se(s,ai.name),Se(d,ai.time)}),j(e,t)};ve(i,function(e){ai.stored&&e(r)});var a=fe(i,2);_e(a,17,function(){return V(s)},Je,function(e,t,i){var r=L(),a=U(r),c=function(e){var r=mr(),a=E(r),c=E(a);Ze(c,{onclickcapture:function(){o.action=function(){return function(e){return g.apply(this,arguments)}(V(f)+i)},o.context="Are you sure you want to load this build?<br>Any unsaved changes will be lost.",z(n,"dlgCommon")},children:function(e,t){var i=gr();j(e,i)},$$slots:{default:!0}});var l=fe(a,2),s=E(l),u=E(s),d=E(u),v=fe(u,2),p=E(v),m=fe(l,2),h=E(m);Ze(h,{onclickcapture:function(){o.action=function(){return w(V(f)+i)},o.context="Are you sure you want to delete this build?<br>This action cannot be undone.",z(n,"dlgCommon")},children:function(e,t){var i=pr();j(e,i)},$$slots:{default:!0}}),Z(function(){Se(d,V(t).name),Se(p,V(t).time)}),j(e,r)},l=function(e){var o=br(),n=E(o),r=E(n);Ze(r,{onclickcapture:function(){return b(V(f)+i)},children:function(e,t){var i=hr();j(e,i)},$$slots:{default:!0}});var a=fe(n,2),c=E(a);Pn(E(c),{onclickcapture:function(){return V(t).name=""},onblur:function(){""===V(t).name&&(V(t).name="Slot ".concat(V(f)+i+1))},input$onkeydown:function(e){"Enter"===e.key&&b(V(f)+i)},class:"textbox-mini",variant:"standard",get value(){return V(t).name},set value(e){V(t).name=e}}),j(e,o)};ve(a,function(e){V(t).stored?e(c):e(l,!1)}),j(e,r)}),j(e,t)};ve(c,function(e){V(d)?e(l):e(v,!1)});var T=fe(a,2),I=E(T),S=E(I);ke(S,{style:"height: 48px",label:function(e){var t=Ie("Load from Legacy Version");j(e,t)},children:function(e,t){Be(e,{onSMUISwitchChange:function(){return z(r,1)},color:"secondary",class:"switch-scale",get checked(){return V(d)},set checked(e){z(d,e,!0)}})},$$slots:{label:!0,default:!0}});var y=fe(I,2),x=E(y),C=E(x);Ze(C,{onclickcapture:function(){return V(r)>1?z(r,V(r)-1):z(r,11)},children:function(e,t){var i=Tr();j(e,i)},$$slots:{default:!0}});var O=fe(C,2),A=E(O),k=fe(O,2);Ze(k,{onclickcapture:function(){return V(r)<11?z(r,V(r)+1):z(r,1)},children:function(e,t){var i=Ir();j(e,i)},$$slots:{default:!0}});var B=fe(T,2),M=E(B),D=E(M);Me(D,{onclickcapture:function(){return z(n,"appBuildForm")},variant:"raised",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Open Build Form");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),Z(function(){var e;return Se(A,"Page ".concat(null!==(e=V(r))&&void 0!==e?e:""))}),j(e,i)},$$slots:{default:!0}});var l=fe(c,2);Fe(l,{children:function(e,t){Me(e,{action:"close",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Close");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}});var S=fe(I,2),y=function(e){var t=me(function(){return"dlgCommon"===V(n)});cr(e,{get open(){return V(t)},onclose:function(){return z(n,"none")},get title(){return o.title},get context(){return o.context},closeHandler:function(e){"accept"===e.detail.action&&o.action()}})},x=function(e){var t=L(),i=U(t),o=function(e){var t=me(function(){return"appBuildForm"===V(n)});qn(e,{get open(){return V(t)},onclose:function(){return z(n,"none")}})};ve(i,function(e){"appBuildForm"===V(n)&&e(o)},!0),j(e,t)};ve(S,function(e){"dlgCommon"===V(n)?e(y):e(x,!1)}),j(e,T),P()}var Or=D('<div class="col req text-prewrap"><!></div>'),Ar=D('<div class="col req text-prewrap"><!></div>');function kr(e,t){$(t,!0);var i=me(function(){var e=Et.get(t.required.reqId);return void 0!==e&&void 0!==app.globalRequirements?e.requireds:[]}),o=me(function(){var e=!1;return t.required.showRequired&&(e=!0,t.required.hideRequired2&&(e=Zi(t.required.requireds)),t.required.hideRequired&&(e=t.required.requireds.length>0?Zi(t.required.requireds)&&!Yi(t.required):!Yi(t.required))),e}),n=me(function(){return Ni(ki(t.required))}),r=L(),a=U(r),c=function(e){var o=L(),r=U(o),a=function(e){var o=L(),n=U(o);_e(n,17,function(){return V(i)},Je,function(e,i){var o=L(),n=U(o),r=function(e){var o=L(),n=U(o);F(n,function(){return Ni(ki(V(i)))},function(e){var o=Or(),n=E(o);N(n,function(){return Xe.sanitize(Ni(ki(V(i))),Kt)}),Z(function(){return Ye(o,t.scoreText)}),j(e,o)}),j(e,o)};ve(n,function(e){V(i).showRequired&&e(r)}),j(e,o)}),j(e,o)},c=function(e){var i=L(),o=U(i);F(o,function(){return V(n)},function(e){var i=Ar(),o=E(i);N(o,function(){return Xe.sanitize(V(n),Kt)}),Z(function(){return Ye(i,t.scoreText)}),j(e,i)}),j(e,i)};ve(r,function(e){"gid"===t.required.type?e(a):e(c,!1)}),j(e,o)};ve(a,function(e){V(o)&&e(c)}),j(e,r),P()}var Br=D('<img class="me-1" alt=""/>'),Mr=D('<img class="mx-1" alt=""/>'),Dr=D('<img class="mx-1" alt=""/>'),Fr=D('<img class="ms-1" alt=""/>'),Rr=D("<!> <!><!> <!><!> <!><!>",1),jr=D('<p class="m-0 d-flex text-prewrap align-items-center"><!></p>'),Pr=D('<div class="row m-0"><div class="col-12 p-0 m-0 d-flex align-items-center justify-center"><!></div></div>');function $r(e,t){$(t,!0);var i=me(function(){return Ei("privateTextIsOn",t.row,t.choice)}),o=me(function(){return Ei("privateFilterIsOn",t.row,t.choice)}),n=me(function(){return Wt.get(t.score.id)}),r=me(function(){return Zi(t.choice.requireds)}),a=me(function(){var e={isWithinCount:!1,isSimple:!1};if(!t.score.discountIsOn||!t.score.discountedFrom||0===t.score.discountedFrom.length)return e;for(var i=0;i<t.score.discountedFrom.length;i++){var o=Ut.get(t.score.discountedFrom[i]);if(void 0!==o){var n=o.choice;if(!n.useDiscountCount||void 0===n.discountCount||!n.appliedDisChoices){e.isSimple=!0;break}if((n.isSelectableMultiple&&n.isMultipleUseVariable?n.discountCount*n.multipleUseVariable:n.discountCount)>n.appliedDisChoices.length){e.isWithinCount=!0;break}}}return e}),l=me(function(){var e=[];if(t.score.discountIsOn&&t.score.discountShow&&t.score.discountAfterText)if(t.score.appliedDiscount)t.score.replaceText||e.push("".concat(t.score.afterText)),e.push("".concat(t.score.discountAfterText));else if(V(a).isWithinCount)t.score.replaceText||e.push("".concat(t.score.afterText)),e.push("".concat(t.score.discountAfterText));else if(V(a).isSimple)t.score.replaceText||e.push("".concat(t.score.afterText)),e.push("".concat(t.score.discountAfterText));else if(void 0!==t.score.tmpDiscount){for(var i=t.score.value,o="",n=!1,r=0;r<t.score.tmpDiscount.length;r++)t.score.tmpDiscount[r].showDiscount&&i>t.score.tmpDiscount[r].discountedValue&&(i=t.score.tmpDiscount[r].discountedValue,o=t.score.tmpDiscount[r].beforeText||"",n=t.score.tmpDiscount[r].replaceText||!1);n||e.push("".concat(t.score.afterText)),e.push("".concat(o))}else e.push("".concat(t.score.afterText));else e.push("".concat(t.score.afterText));return e.join(" ")}),s=me(function(){var e=[];if(t.score.discountIsOn&&t.score.discountShow&&t.score.discountBeforeText)if(t.score.appliedDiscount)t.score.replaceText||e.push("".concat(t.score.beforeText)),e.push("".concat(t.score.discountBeforeText));else if(V(a).isWithinCount)t.score.replaceText||e.push("".concat(t.score.beforeText)),e.push("".concat(t.score.discountBeforeText));else if(V(a).isSimple)t.score.replaceText||e.push("".concat(t.score.beforeText)),e.push("".concat(t.score.discountBeforeText));else if(void 0!==t.score.tmpDiscount){for(var i=t.score.value,o="",n=!1,r=0;r<t.score.tmpDiscount.length;r++)t.score.tmpDiscount[r].showDiscount&&i>t.score.tmpDiscount[r].discountedValue&&(i=t.score.tmpDiscount[r].discountedValue,o=t.score.tmpDiscount[r].beforeText||"",n=t.score.tmpDiscount[r].replaceText||!1);n||e.push("".concat(t.score.beforeText)),e.push("".concat(o))}else e.push("".concat(t.score.beforeText));else e.push("".concat(t.score.beforeText));return e.join(" ")}),u=me(function(){var e=t.score.value;if(!t.score.hideValue){var i,o;if(t.score.isRandom&&!t.score.setValue)return V(d);if(!t.score.setValue&&t.score.useExpression&&t.score.expValue)if(void 0!==Wt.get(t.score.id))try{var r=t.score.expValue.replace(/\{([^{}]+)\}/g,function(e,t){var i=Wt.get(t);if(void 0!==i)return"".concat(i.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});e=C(r)}catch(c){console.error(c)}if(t.score.discountShow)if(t.score.appliedDiscount){if(t.score.replaceText&&t.score.hideDisValue)return"";void 0!==t.score.discountScore&&(e=t.score.discountScore)}else if(V(a).isWithinCount||V(a).isSimple){if(t.score.replaceText&&t.score.hideDisValue)return"";if(t.score.useExpression&&t.score.expValue){if(t.score.discountedFrom&&t.score.discountedFrom.length>0)for(var l=0;l<t.score.discountedFrom.length;l++){var s=Ut.get(t.score.discountedFrom[l]);if(void 0!==s){var u=s.choice;e=no(e,u.discountOperator,u.discountValue),u.discountLowLimitIsOn&&void 0!==u.discountLowLimit&&(e=Math.max(e,u.discountLowLimit))}}}else void 0!==t.score.discountScore&&(e=t.score.discountScore)}else if(void 0!==t.score.tmpDiscount){for(var f=!1,g=0;g<t.score.tmpDiscount.length;g++)t.score.tmpDiscount[g].showDiscount&&e>t.score.tmpDiscount[g].discountedValue&&(e=t.score.tmpDiscount[g].discountedValue,f=t.score.tmpDiscount[g].hideValue||!1);if(f)return""}if(e=Math.abs(e),e=null!==(i=V(n))&&void 0!==i&&i.allowFloat?e%1==0?e:parseFloat(e.toFixed(void 0!==V(n).decimalPlaces?V(n).decimalPlaces:2)):Math.floor(e),t.choice.isSelectableMultiple&&t.score.multiplyByTimes&&t.score.displayMulScore&&(e*=t.choice.multipleUseVariable+1),null!==(o=V(n))&&void 0!==o&&o.plussOrMinusAdded){var p=V(n).plussOrMinusInverted?V(v)?"-":"+":V(v)?"+":"-";return"".concat(p).concat(e)}return"".concat(e)}return""}),d=me(function(){var e,i,o=0,r=0,a=!1,l=!1;if(t.score.useExpression){if(t.score.expMaxValue)try{var s=t.score.expMaxValue.replace(/\{([^{}]+)\}/g,function(e,t){var i=Wt.get(t);if(void 0!==i)return"".concat(i.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});a=(o=C(s))<0}catch(c){console.error(c)}if(t.score.expMinValue)try{var u=t.score.expMinValue.replace(/\{([^{}]+)\}/g,function(e,t){var i=Wt.get(t);if(void 0!==i)return"".concat(i.startingSum);throw new Error('Undefined variable: "'.concat(t,'"'))});l=(r=C(u))<0}catch(c){console.error(c)}}else void 0!==t.score.maxValue&&void 0!==t.score.minValue&&(a=t.score.maxValue<0,l=t.score.minValue<0,o=Math.abs(t.score.maxValue),r=Math.abs(t.score.minValue));if(null!==(e=V(n))&&void 0!==e&&e.allowFloat?(o=o%1==0?o:parseFloat(o.toFixed(void 0!==V(n).decimalPlaces?V(n).decimalPlaces:2)),r=r%1==0?r:parseFloat(r.toFixed(void 0!==V(n).decimalPlaces?V(n).decimalPlaces:2))):(o=Math.floor(o),r=Math.floor(r)),null!==(i=V(n))&&void 0!==i&&i.plussOrMinusAdded){var d=V(n).plussOrMinusInverted?a?"-":"+":a?"+":"-",v=V(n).plussOrMinusInverted?l?"-":"+":l?"+":"-";return a?"".concat(d).concat(o," ~ ").concat(v).concat(r):"".concat(v).concat(r," ~ ").concat(d).concat(o)}return a?"".concat(o," ~ ").concat(r):"".concat(r," ~ ").concat(o)}),v=me(function(){return t.score.discountShow?(void 0!==t.score.discountScore&&(t.score.appliedDiscount||V(a).isWithinCount||V(a).isSimple)?t.score.discountScore:t.score.value)<0:t.score.value<0}),f=me(function(){var e,a=[];return a.push("font-family: '".concat(V(i).scoreText,"'; font-size: ").concat(V(i).scoreTextSize,"%; text-align: ").concat(V(i).scoreTextAlign,";")),null!==(e=V(n))&&void 0!==e&&e.pointColorsIsOn?V(v)?a.push("color: ".concat(hn(V(n).positiveColor),";")):a.push("color: ".concat(hn(V(n).negativeColor),";")):a.push("color: ".concat(hn(V(i).scoreTextColor),";")),V(r)?t.choice.isActive&&V(o).selScoreTextColorIsOn&&a.push("color: ".concat(hn(V(o).selFilterSTextColor))):V(o).reqScoreTextColorIsOn&&a.push("color: ".concat(hn(V(o).reqFilterSTextColor))),a.join(" ")}),g=me(function(){if(!V(n)||!V(n).iconIsOn)return!1;if(t.score.discountIsOn&&t.score.discountShow)if(t.score.appliedDiscount){if(t.score.replaceText&&t.score.hideDisIcon)return!1}else if(V(a).isWithinCount){if(t.score.replaceText&&t.score.hideDisIcon)return!1}else if(V(a).isSimple){if(t.score.hideDisIcon)return!1}else if(void 0!==t.score.tmpDiscount){for(var e=t.score.value,i=!1,o=0;o<t.score.tmpDiscount.length;o++)t.score.tmpDiscount[o].showDiscount&&e>t.score.tmpDiscount[o].discountedValue&&(e=t.score.tmpDiscount[o].discountedValue,i=t.score.tmpDiscount[o].hideIcon||!1);if(i)return!1}return!0}),p=me(function(){var e;return(null===(e=V(n))||void 0===e?void 0:e.negativeIconIsOn)&&V(v)}),m=me(function(){return!!V(n)&&(V(p)?V(n).useSeperatePosition?!!V(n).negativeImageSidePlacementInChoice:!!V(n).negativeImageSidePlacement:V(n).useSeperatePosition?!!V(n).imageSidePlacementInChoice:!!V(n).imageSidePlacement)}),h=me(function(){return!!V(n)&&(V(p)?V(n).useSeperatePosition?!!V(n).negativeImageOnSideInChoice:!!V(n).negativeImageOnSide:V(n).useSeperatePosition?!!V(n).imageOnSideInChoice:!!V(n).imageOnSide)}),b=me(function(){var e,t;return(V(p)?null===(e=V(n))||void 0===e?void 0:e.negativeImage:null===(t=V(n))||void 0===t?void 0:t.image)||""}),w=me(function(){var e,t;return(V(p)?null===(e=V(n))||void 0===e?void 0:e.negativeIconWidth:null===(t=V(n))||void 0===t?void 0:t.iconWidth)||0}),T=me(function(){var e,t;return(V(p)?null===(e=V(n))||void 0===e?void 0:e.negativeIconHeight:null===(t=V(n))||void 0===t?void 0:t.iconHeight)||0}),I=me(function(){return!V(m)&&!V(h)}),S=me(function(){return!V(m)&&V(h)}),y=me(function(){return V(m)&&!V(h)}),x=me(function(){return V(m)&&V(h)}),O=me(function(){return"".concat(V(s)," ").concat(V(u)," ").concat(V(l))});var A=L(),k=U(A),B=function(e){var t=Pr(),i=E(t),o=E(i);F(o,function(){return V(O)},function(e){var t=jr(),i=E(t),o=function(e){var t=Rr(),i=U(t),o=function(e){var t=Br();Z(function(){var e,i;Ke(t,"src",V(b)),Ye(t,"width: ".concat(null!==(e=V(w))&&void 0!==e?e:"","px; height: ").concat(null!==(i=V(T))&&void 0!==i?i:"","px;"))}),j(e,t)};ve(i,function(e){V(I)&&e(o)});var n=fe(i,2);N(n,function(){return Xe.sanitize(V(s),Kt)});var r=fe(n),a=function(e){var t=Mr();Z(function(){var e,i;Ke(t,"src",V(b)),Ye(t,"width: ".concat(null!==(e=V(w))&&void 0!==e?e:"","px; height: ").concat(null!==(i=V(T))&&void 0!==i?i:"","px;"))}),j(e,t)};ve(r,function(e){V(S)&&e(a)});var c=fe(r,2);N(c,function(){return Xe.sanitize(V(u),Kt)});var d=fe(c),v=function(e){var t=Dr();Z(function(){var e,i;Ke(t,"src",V(b)),Ye(t,"width: ".concat(null!==(e=V(w))&&void 0!==e?e:"","px; height: ").concat(null!==(i=V(T))&&void 0!==i?i:"","px;"))}),j(e,t)};ve(d,function(e){V(y)&&e(v)});var f=fe(d,2);N(f,function(){return Xe.sanitize(V(l),Kt)});var g=fe(f),p=function(e){var t=Fr();Z(function(){var e,i;Ke(t,"src",V(b)),Ye(t,"width: ".concat(null!==(e=V(w))&&void 0!==e?e:"","px; height: ").concat(null!==(i=V(T))&&void 0!==i?i:"","px;"))}),j(e,t)};ve(g,function(e){V(x)&&e(p)}),j(e,t)},n=function(e){var t=L(),i=U(t);N(i,function(){return Xe.sanitize("".concat(V(s)," ").concat(V(u)," ").concat(V(l)),Kt)}),j(e,t)};ve(i,function(e){V(g)?e(o):e(n,!1)}),j(e,t)}),Z(function(){return Ye(i,V(f))}),j(e,t)};ve(k,function(e){(function(){if(t.score.showScore){if(void 0!==V(n)&&V(n).isNotShownObjects){if(void 0!==V(n).activatedId&&""!==V(n).activatedId){var e=Et.get(V(n).activatedId),i=Gt.get(V(n).activatedId);return void 0!==e?Zi(e.requireds):void 0!==i?i.isTrue:Gi(V(n).activatedId)}return!1}return!0}return!1})()&&Zi(t.score.requireds)&&e(B)}),j(e,A),P()}var Vr=D('<img alt=""/>'),qr=D('<img alt=""/>'),Wr=D('<h3 class="m-0"><!></h3>'),Lr=D("<!> <!>",1),Ur=D('<img alt=""/>'),Nr=D('<img alt=""/>'),Er=D('<p class="mb-0"><!></p>'),zr=D('<img alt=""/>'),Gr=D('<img alt=""/>'),_r=D("<div><!> <!> <!> <!> <!> <!> <!></div>"),Hr=D('<img alt=""/>'),Yr=D('<img alt=""/>'),Zr=D('<h2 class="mb-0"><!></h2>'),Jr=D("<!> <!>",1),Xr=D('<p class="mb-0"><!></p>'),Kr=D('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!> <!> <!></div>',1),Qr=D('<h2 class="mb-0"><!></h2>'),ea=D("<!> <!>",1),ta=D('<p class="mb-0"><!></p>'),ia=D('<img alt=""/>'),oa=D('<img alt=""/>'),na=D('<div class="col p-0 text-center"><!> <!> <!> <!></div> <div class="col p-0 text-center"><!></div>',1),ra=D('<div class="row m-0 p-0 w-100"><!></div>'),aa=D("<div><!></div>");function ca(e,t){$(t,!0);var i=function(){return We(di,"$winWidth",n)},o=g(Le(),2),n=o[0],r=o[1],a=G(t,"windowWidth",3,0),c=G(t,"preloadImages",3,!1),l=me(function(){return void 0!==t.choice&&t.choice.isActive}),s=me(function(){return Ei("privateAddonImageIsOn",t.row,t.choice)}),u=me(function(){return Ei("privateAddonIsOn",t.row,t.choice)}),d=me(function(){return Ei("privateFilterIsOn",t.row,t.choice)}),v=me(function(){return Ei("privateObjectImageIsOn",t.row,t.choice)}),f=me(function(){return Ei("privateObjectIsOn",t.row,t.choice)}),p=me(function(){return Ei("privateTextIsOn",t.row,t.choice)}),m=me(function(){return Zi(t.addon.requireds)}),h=me(function(){return Ni(t.addon.title)}),b=me(function(){return Ni(t.addon.text)}),w=me(function(){return void 0!==V(s).addonImageBoxWidth?V(s).addonImageBoxWidth:50}),T=me(function(){var e=V(u).useAddonDesign,i=(e?V(u).addonBorderRadiusIsPixels:V(f).objectBorderRadiusIsPixels)?"px":"%",o=0,n=0,r=0,a=[];if(e){if(V(u).addonBorderImage&&a.push("border-image: url('".concat(V(u).addonBorderImage,"') ").concat(V(u).addonBorderImageSliceTop," ").concat(V(u).addonBorderImageSliceRight," ").concat(V(u).addonBorderImageSliceBottom," ").concat(V(u).addonBorderImageSliceLeft," / ").concat(V(u).addonBorderImageWidth,"px ").concat(V(u).addonBorderImageRepeat,"; border-style: solid; padding: ").concat(V(u).addonBorderImageWidth,"px;")),V(u).useAddonBackgroundImage&&V(u).addonBackgroundImage&&(a.push("background-image: url('".concat(V(u).addonBackgroundImage,"'); ").concat(V(u).isObjectBackgroundRepeat?"background-repeat: repeat;":V(u).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),o=a.length),V(u).addonBgColorIsOn&&(a.push("background-color: ".concat(hn(V(u).addonBgColor),";")),n=a.length),a.push("margin: ".concat(V(u).addonMargin,"px;")),a.push("border-radius: ".concat(V(u).addonBorderRadiusTopLeft).concat(i," ").concat(V(u).addonBorderRadiusTopRight).concat(i," ").concat(V(u).addonBorderRadiusBottomRight).concat(i," ").concat(V(u).addonBorderRadiusBottomLeft).concat(i,";")),V(u).addonOverflowIsOn&&a.push("overflow: hidden;"),V(u).addonBorderIsOn||V(l)&&V(d).selBorderColorIsOn||!t.isEnabled&&V(d).reqBorderColorIsOn){var c=V(u).addonBorderColor;!t.isEnabled&&V(d).reqBorderColorIsOn?c=V(d).reqFilterBorderColor:V(l)&&V(d).selBorderColorIsOn&&(c=V(d).selFilterBorderColor),a.push("border: ".concat(V(u).addonBorderWidth,"px ").concat(V(u).addonBorderStyle," ").concat(hn(c),";"))}V(u).addonGradientIsOn&&(t.isEnabled&&V(m)?V(l)?a.push("background-image: linear-gradient(".concat(V(u).addonGradientOnSelect,");")):a.push("background-image: linear-gradient(".concat(V(u).addonGradient,");")):a.push("background-image: linear-gradient(".concat(V(u).addonGradientOnReq,");"))),V(u).addonDropShadowIsOn&&(V(u).addonUseBoxShadowIsOn?a.push("box-shadow: ".concat(V(u).addonDropShadowH,"px ").concat(V(u).addonDropShadowV,"px ").concat(V(u).addonDropShadowBlur,"px ").concat(V(u).addonDropShadowSpread,"px ").concat(hn(V(u).addonDropShadowColor),";")):(r=a.length,a.push("filter: drop-shadow(".concat(V(u).addonDropShadowH,"px ").concat(V(u).addonDropShadowV,"px ").concat(V(u).addonDropShadowBlur,"px ").concat(hn(V(u).addonDropShadowColor),")")))),0===r&&(a.push("filter:"),r=a.length),t.isEnabled&&V(m)&&(V(l)?(V(d).selFilterBlurIsOn&&a.push(" blur(".concat(V(d).selFilterBlur,"px)")),V(d).selFilterBrightIsOn&&a.push(" brightness(".concat(V(d).selFilterBright,"%)")),V(d).selFilterContIsOn&&a.push(" contrast(".concat(V(d).selFilterCont,"%)")),V(d).selFilterGrayIsOn&&a.push(" grayscale(".concat(V(d).selFilterGray,"%)")),V(d).selFilterHueIsOn&&a.push(" hue-rotate(".concat(V(d).selFilterHue,"deg)")),V(d).selFilterInvertIsOn&&a.push(" invert(".concat(V(d).selFilterInvert,"%)")),V(d).selFilterOpacIsOn&&a.push(" opacity(".concat(V(d).selFilterOpac,"%)")),V(d).selFilterSaturIsOn&&a.push(" saturate(".concat(V(d).selFilterSatur,")")),V(d).selFilterSepiaIsOn&&a.push(" sepia(".concat(V(d).selFilterGray,"%)")),a.length===r?a.splice(r-1,1):a.push(";")):(V(d).unselFilterBlurIsOn&&a.push(" blur(".concat(V(d).unselFilterBlur,"px)")),V(d).unselFilterBrightIsOn&&a.push(" brightness(".concat(V(d).unselFilterBright,"%)")),V(d).unselFilterContIsOn&&a.push(" contrast(".concat(V(d).unselFilterCont,"%)")),V(d).unselFilterGrayIsOn&&a.push(" grayscale(".concat(V(d).unselFilterGray,"%)")),V(d).unselFilterHueIsOn&&a.push(" hue-rotate(".concat(V(d).unselFilterHue,"deg)")),V(d).unselFilterInvertIsOn&&a.push(" invert(".concat(V(d).unselFilterInvert,"%)")),V(d).unselFilterOpacIsOn&&a.push(" opacity(".concat(V(d).unselFilterOpac,"%)")),V(d).unselFilterSaturIsOn&&a.push(" saturate(".concat(V(d).unselFilterSatur,")")),V(d).unselFilterSepiaIsOn&&a.push(" sepia(".concat(V(d).unselFilterGray,"%)"))),a.length===r?a.splice(r-1,1):a.push(";"))}return(app.showAllAddons>0||t.addon.showAddon)&&t.isEnabled&&!V(m)&&(0===r&&(a.push("filter:"),r=a.length),V(d).reqFilterBlurIsOn&&a.push(" blur(".concat(V(d).reqFilterBlur,"px)")),V(d).reqFilterBrightIsOn&&a.push(" brightness(".concat(V(d).reqFilterBright,"%)")),V(d).reqFilterContIsOn&&a.push(" contrast(".concat(V(d).reqFilterCont,"%)")),V(d).reqFilterGrayIsOn&&a.push(" grayscale(".concat(V(d).reqFilterGray,"%)")),V(d).reqFilterHueIsOn&&a.push(" hue-rotate(".concat(V(d).reqFilterHue,"deg)")),V(d).reqFilterInvertIsOn&&a.push(" invert(".concat(V(d).reqFilterInvert,"%)")),V(d).reqFilterOpacIsOn&&a.push(" opacity(".concat(V(d).reqFilterOpac,"%)")),V(d).reqFilterSaturIsOn&&a.push(" saturate(".concat(V(d).reqFilterSatur,")")),V(d).reqFilterSepiaIsOn&&a.push(" sepia(".concat(V(d).reqFilterGray,"%)")),a.length===r?a.splice(r-1,1):a.push(";"),V(d).reqBgColorIsOn&&(V(d).reqOverlayOnImage||(0!==n&&a.splice(n-1,1),0!==o&&a.splice(o-1,1)),a.push("background-color: ".concat(hn(V(d).reqFilterBgColor),";"))),e&&V(u).addonGradientIsOn&&a.push("background-image: linear-gradient(".concat(V(u).addonGradientOnReq,");"))),a.join(" ")}),I=me(function(){var e=[];return e.push("white-space: pre-line; font-family: '".concat(V(p).addonTitle,"'; font-size: ").concat(V(p).addonTitleTextSize,"%; text-align: ").concat(V(p).addonTitleAlign,";")),!t.isEnabled&&V(d).reqATitleColorIsOn?e.push("color: ".concat(hn(V(d).reqFilterATitleColor),";")):V(l)&&V(d).selATitleColorIsOn?e.push("color: ".concat(hn(V(d).selFilterATitleColor),";")):e.push("color: ".concat(hn(V(p).addonTitleColor),";")),V(u).useAddonDesign?V(u).titlePaddingIsOn&&e.push("padding: ".concat(V(u).addonTextPadding,"px;")):V(f).titlePaddingIsOn&&e.push("padding: ".concat(V(f).objectTextPadding,"px;")),e.join(" ")}),S=me(function(){var e=[];return e.push("white-space: pre-wrap; font-family: '".concat(V(p).addonText,"'; text-align: ").concat(V(p).addonTextAlign,"; font-size: ").concat(V(p).addonTextTextSize,"%;")),!t.isEnabled&&V(d).reqATextColorIsOn?e.push("color: ".concat(hn(V(d).reqFilterATextColor),";")):V(l)&&V(d).selATextColorIsOn?e.push("color: ".concat(hn(V(d).selFilterATextColor),";")):e.push("color: ".concat(hn(V(p).addonTextColor),";")),V(u).useAddonDesign?e.push("padding: ".concat(V(u).addonTextPadding,"px;")):e.push("padding: ".concat(V(f).objectTextPadding,"px;")),e.join(" ")}),y=me(function(){var e=[],i=V(s).useAddonImage,o=(i?V(s).addonImgBorderRadiusIsPixels:V(v).objectImgBorderRadiusIsPixels)?"px":"%";if(i){if(e.push("width: ".concat(V(s).addonImageWidth,"%; margin-top: ").concat(V(s).addonImageMarginTop,"%; margin-bottom: ").concat(V(s).addonImageMarginBottom,"%;")),V(s).addonImgObjectFillIsOn){e.push("object-fit: ".concat(V(s).addonImgObjectFillStyle,";"));var n=t.choice.addonImgObjectFillHeight||V(v).addonImgObjectFillHeight;n&&e.push("height: ".concat(n,"px"))}if(e.push("border-radius: ".concat(V(s).addonImgBorderRadiusTopLeft).concat(o," ").concat(V(s).addonImgBorderRadiusTopRight).concat(o," ").concat(V(s).addonImgBorderRadiusBottomRight).concat(o," ").concat(V(s).addonImgBorderRadiusBottomLeft).concat(o,";")),V(s).addonImgOverflowIsOn&&e.push("overflow: hidden;"),V(s).addonImgBorderIsOn){var r=t.isEnabled?V(l)&&V(d).selImgBorderColorIsOn&&V(d).selFilterImgBorderColor||V(s).addonImgBorderColor:V(d).reqImgBorderColorIsOn&&V(d).reqFilterImgBorderColor||V(s).addonImgBorderColor;e.push("border: ".concat(V(s).addonImgBorderWidth,"px ").concat(V(s).addonImgBorderStyle," ").concat(hn(r),";"))}}else{if(e.push("width: ".concat(V(v).objectImageWidth,"%; margin-top: ").concat(V(v).objectImageMarginTop,"%; margin-bottom: ").concat(V(v).objectImageMarginBottom,"%;")),V(v).objectImgObjectFillIsOn){var a;e.push("object-fit: ".concat(V(v).objectImgObjectFillStyle,";"));var c=(null===(a=t.row)||void 0===a?void 0:a.objectImgObjectFillHeight)||V(v).objectImgObjectFillHeight;c&&e.push("height: ".concat(c,"px;"))}if(e.push("border-radius: ".concat(V(v).objectImgBorderRadiusTopLeft).concat(o," ").concat(V(v).objectImgBorderRadiusTopRight).concat(o," ").concat(V(v).objectImgBorderRadiusBottomRight).concat(o," ").concat(V(v).objectImgBorderRadiusBottomLeft).concat(o,";")),V(v).objectImgOverflowIsOn&&e.push("overflow: hidden;"),V(v).objectImgBorderIsOn){var u=t.isEnabled?V(l)&&V(d).selImgBorderColorIsOn&&V(d).selFilterImgBorderColor||V(v).objectImgBorderColor:V(d).reqImgBorderColorIsOn&&V(d).reqFilterImgBorderColor||V(v).objectImgBorderColor;e.push("border: ".concat(V(v).objectImgBorderWidth,"px ").concat(V(v).objectImgBorderStyle," ").concat(hn(u),";"))}}return e.join(" ")}),x=me(function(){return"font-family: '".concat(V(p).scoreText,"'; font-size: ").concat(V(p).scoreTextSize,"%; text-align: ").concat(V(p).scoreTextAlign,"; color: ").concat(hn(V(p).scoreTextColor),";")});function C(e){navigator.clipboard.writeText(t.addon.imageSourceTooltip).then(function(){ni.labelText="Tooltip copied to clipboard.",ni.isOpen=!0}).catch(function(){console.log(t.addon.imageSourceTooltip),ni.labelText="Tooltip text logged to developer console.",ni.isOpen=!0})}var O=aa(),A=E(O),k=function(e){var i=_r(),o=E(i),n=function(e){var i=L(),o=U(i),n=function(e){var i=Vr();i.__contextmenu=C,Y(i,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.addon.imageSourceTooltip}),Z(function(){Ke(i,"src",t.addon.image),Ye(i,V(y)),Ke(i,"loading",c()?"eager":"lazy")}),j(e,i)},r=function(e){var i=qr();Z(function(){Ke(i,"src",t.addon.image),Ye(i,V(y)),Ke(i,"loading",c()?"eager":"lazy")}),j(e,i)};ve(o,function(e){t.addon.imageSourceTooltip?e(n):e(r,!1)}),j(e,i)};ve(o,function(e){var i;!(1===t.addon.template||a()<=1280)||!t.addon.image||null!==(i=t.row)&&void 0!==i&&i.addonImageRemoved||e(n)});var r=fe(o,2),l=function(e){var t=L(),i=U(t);F(i,function(){return V(h)},function(e){var t=Wr(),i=E(t);N(i,function(){return Xe.sanitize(V(h),Kt)}),Z(function(){return Ye(t,V(I))}),j(e,t)}),j(e,t)};ve(r,function(e){var i;""===t.addon.title||null!==(i=t.row)&&void 0!==i&&i.addonTitleRemoved||e(l)});var s=fe(r,2),u=function(e){var i=L(),o=U(i);_e(o,17,function(){return t.choice.scores},Je,function(e,i){$r(e,{get score(){return V(i)},get row(){return t.row},get choice(){return t.choice}})}),j(e,i)};ve(s,function(e){var i;null!==(i=t.row)&&void 0!==i&&i.objectScoreRemoved||!t.choice.showScoreInAddon||!t.isFirst||e(u)});var d=fe(s,2),v=function(e){var i=Lr(),o=U(i),n=function(e){var i=L(),o=U(i);_e(o,17,function(){return t.choice.requireds},Je,function(e,t){kr(e,{get required(){return V(t)},get scoreText(){return V(x)}})}),j(e,i)};ve(o,function(e){t.choice.showReqInAddon&&t.isFirst&&e(n)});var r=fe(o,2);_e(r,17,function(){return t.addon.requireds},Je,function(e,t){kr(e,{get required(){return V(t)},get scoreText(){return V(x)}})}),j(e,i)};ve(d,function(e){var i;null!==(i=t.row)&&void 0!==i&&i.objectRequirementRemoved||e(v)});var f=fe(d,2),g=function(e){var i=L(),o=U(i),n=function(e){var i=Ur();i.__contextmenu=C,Y(i,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.addon.imageSourceTooltip}),Z(function(){Ke(i,"src",t.addon.image),Ye(i,V(y)),Ke(i,"loading",c()?"eager":"lazy")}),j(e,i)},r=function(e){var i=Nr();Z(function(){Ke(i,"src",t.addon.image),Ye(i,V(y)),Ke(i,"loading",c()?"eager":"lazy")}),j(e,i)};ve(o,function(e){t.addon.imageSourceTooltip?e(n):e(r,!1)}),j(e,i)};ve(f,function(e){var i;5===t.addon.template&&a()>1280&&t.addon.image&&(null===(i=t.row)||void 0===i||!i.addonImageRemoved)&&e(g)});var p=fe(f,2),m=function(e){var t=L(),i=U(t);F(i,function(){return V(b)},function(e){var t=Er(),i=E(t);N(i,function(){return Xe.sanitize(V(b),Kt)}),Z(function(){return Ye(t,V(S))}),j(e,t)}),j(e,t)};ve(p,function(e){var i;""===t.addon.text||null!==(i=t.row)&&void 0!==i&&i.addonTextRemoved||e(m)});var w=fe(p,2),T=function(e){var i=L(),o=U(i),n=function(e){var i=zr();i.__contextmenu=C,Y(i,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.addon.imageSourceTooltip}),Z(function(){Ke(i,"src",t.addon.image),Ye(i,V(y)),Ke(i,"loading",c()?"eager":"lazy")}),j(e,i)},r=function(e){var i=Gr();Z(function(){Ke(i,"src",t.addon.image),Ye(i,V(y)),Ke(i,"loading",c()?"eager":"lazy")}),j(e,i)};ve(o,function(e){t.addon.imageSourceTooltip?e(n):e(r,!1)}),j(e,i)};ve(w,function(e){var i;4===t.addon.template&&a()>1280&&t.addon.image&&(null===(i=t.row)||void 0===i||!i.addonImageRemoved)&&e(T)}),j(e,i)},B=function(e){var i=ra(),o=E(i),n=function(e){var i=Kr(),o=U(i),n=E(o),r=function(e){var i=L(),o=U(i),n=function(e){var i=Hr();i.__contextmenu=C,Y(i,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.addon.imageSourceTooltip}),Z(function(){Ke(i,"src",t.addon.image),Ye(i,V(y)),Ke(i,"loading",c()?"eager":"lazy")}),j(e,i)},r=function(e){var i=Yr();Z(function(){Ke(i,"src",t.addon.image),Ye(i,V(y)),Ke(i,"loading",c()?"eager":"lazy")}),j(e,i)};ve(o,function(e){t.addon.imageSourceTooltip?e(n):e(r,!1)}),j(e,i)};ve(n,function(e){var i;!t.addon.image||null!==(i=t.row)&&void 0!==i&&i.addonImageRemoved||e(r)});var a=fe(o,2),l=E(a),s=function(e){var t=L(),i=U(t);F(i,function(){return V(h)},function(e){var t=Zr(),i=E(t);N(i,function(){return Xe.sanitize(V(h),Kt)}),Z(function(){return Ye(t,V(I))}),j(e,t)}),j(e,t)};ve(l,function(e){var i;""===t.addon.title||null!==(i=t.row)&&void 0!==i&&i.addonTitleRemoved||e(s)});var u=fe(l,2),d=function(e){var i=L(),o=U(i);_e(o,17,function(){return t.choice.scores},Je,function(e,i){$r(e,{get score(){return V(i)},get row(){return t.row},get choice(){return t.choice}})}),j(e,i)};ve(u,function(e){var i;null!==(i=t.row)&&void 0!==i&&i.objectScoreRemoved||!t.choice.showScoreInAddon||!t.isFirst||e(d)});var v=fe(u,2),f=function(e){var i=Jr(),o=U(i),n=function(e){var i=L(),o=U(i);_e(o,17,function(){return t.choice.requireds},Je,function(e,t){kr(e,{get required(){return V(t)},get scoreText(){return V(x)}})}),j(e,i)};ve(o,function(e){t.choice.showReqInAddon&&t.isFirst&&e(n)});var r=fe(o,2);_e(r,17,function(){return t.addon.requireds},Je,function(e,t){kr(e,{get required(){return V(t)},get scoreText(){return V(x)}})}),j(e,i)};ve(v,function(e){var i;null!==(i=t.row)&&void 0!==i&&i.objectRequirementRemoved||e(f)});var g=fe(v,2),p=function(e){var t=L(),i=U(t);F(i,function(){return V(b)},function(e){var t=Xr(),i=E(t);N(i,function(){return Xe.sanitize(V(b),Kt)}),Z(function(){return Ye(t,V(S))}),j(e,t)}),j(e,t)};ve(g,function(e){var i;""===t.addon.text||null!==(i=t.row)&&void 0!==i&&i.addonTextRemoved||e(p)}),Z(function(){var e;Ye(o,"max-width: ".concat(null!==(e=V(w))&&void 0!==e?e:"","%")),Ye(a,"max-width: ".concat(100-V(w),"%"))}),j(e,i)},r=function(e){var i=L(),o=U(i),n=function(e){var i=na(),o=U(i),n=E(o),r=function(e){var t=L(),i=U(t);F(i,function(){return V(h)},function(e){var t=Qr(),i=E(t);N(i,function(){return Xe.sanitize(V(h),Kt)}),Z(function(){return Ye(t,V(I))}),j(e,t)}),j(e,t)};ve(n,function(e){var i;""===t.addon.title||null!==(i=t.row)&&void 0!==i&&i.addonTitleRemoved||e(r)});var a=fe(n,2),l=function(e){var i=L(),o=U(i);_e(o,17,function(){return t.choice.scores},Je,function(e,i){$r(e,{get score(){return V(i)},get row(){return t.row},get choice(){return t.choice}})}),j(e,i)};ve(a,function(e){var i;null!==(i=t.row)&&void 0!==i&&i.objectScoreRemoved||!t.choice.showScoreInAddon||!t.isFirst||e(l)});var s=fe(a,2),u=function(e){var i=ea(),o=U(i),n=function(e){var i=L(),o=U(i);_e(o,17,function(){return t.choice.requireds},Je,function(e,t){kr(e,{get required(){return V(t)},get scoreText(){return V(x)}})}),j(e,i)};ve(o,function(e){t.choice.showReqInAddon&&t.isFirst&&e(n)});var r=fe(o,2);_e(r,17,function(){return t.addon.requireds},Je,function(e,t){kr(e,{get required(){return V(t)},get scoreText(){return V(x)}})}),j(e,i)};ve(s,function(e){var i;null!==(i=t.row)&&void 0!==i&&i.objectRequirementRemoved||e(u)});var d=fe(s,2),v=function(e){var t=L(),i=U(t);F(i,function(){return V(b)},function(e){var t=ta(),i=E(t);N(i,function(){return Xe.sanitize(V(b),Kt)}),Z(function(){return Ye(t,V(S))}),j(e,t)}),j(e,t)};ve(d,function(e){var i;""===t.addon.text||null!==(i=t.row)&&void 0!==i&&i.addonTextRemoved||e(v)});var f=fe(o,2),g=E(f),p=function(e){var i=L(),o=U(i),n=function(e){var i=ia();i.__contextmenu=C,Y(i,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.addon.imageSourceTooltip}),Z(function(){Ke(i,"src",t.addon.image),Ye(i,V(y)),Ke(i,"loading",c()?"eager":"lazy")}),j(e,i)},r=function(e){var i=oa();Z(function(){Ke(i,"src",t.addon.image),Ye(i,V(y)),Ke(i,"loading",c()?"eager":"lazy")}),j(e,i)};ve(o,function(e){t.addon.imageSourceTooltip?e(n):e(r,!1)}),j(e,i)};ve(g,function(e){var i;!t.addon.image||null!==(i=t.row)&&void 0!==i&&i.addonImageRemoved||e(p)}),Z(function(){var e;Ye(o,"max-width: ".concat(100-V(w),"%")),Ye(f,"max-width: ".concat(null!==(e=V(w))&&void 0!==e?e:"","%"))}),j(e,i)};ve(o,function(e){3===t.addon.template&&e(n)},!0),j(e,i)};ve(o,function(e){2===t.addon.template?e(n):e(r,!1)}),j(e,i)};ve(A,function(e){t.addon.template>=4||1===t.addon.template||a()<=1280?e(k):e(B,!1)}),Z(function(e){J(O,1,"text-center addon".concat(t.addon.isSelectable?" addon-".concat(t.addon.id):""," ").concat(null!=e?e:"")),Ye(O,V(T))},[function(){var e=t.addon.addonWidth||"col-12",o=qi(e),n="col-6"===app.objectsPerRow?2:"col-4"===app.objectsPerRow?3:4;if(i()>1280)return e;if(!(i()>720))return i()>480?1===o?"col-12":"col-6":"col-12";switch(o){case 1:return"col-12";case 2:return"col-6";case 3:return n>2?"col-4":app.objectsPerRow;case 4:return n>3?"col-3":app.objectsPerRow;default:return app.objectsPerRow}}]),j(e,O),P(),r()}Qe(["contextmenu"]);var la=D('<i class="mdi mdi-minus"></i>'),sa=D('<i class="mdi mdi-plus"></i>'),ua=D('<div class="px-5 w-100 multi-slider"><!></div>'),da=D('<div class="d-row justify-space-around w-100 multi-counter"><!> <div translate="no"> </div> <!></div> <!>',1);function va(e,t){$(t,!0);var i=q(0),o=me(function(){if(t.choice.isMultipleUseVariable)return t.choice.multipleUseVariable;if(void 0!==t.choice.multipleScoreId){var e=Wt.get(t.choice.multipleScoreId);if(void 0!==e)return e.startingSum}return 0});function n(e){t.selectedOneMore()}function r(e){t.selectedOneLess()}function a(){for(var e=V(i)-V(o),n=0;n<Math.abs(e);n++)e>0?t.selectedOneMore():t.selectedOneLess();document.activeElement&&document.activeElement.blur()}function c(e){t.isEnabled&&(ii.currentDialog="selectDialog",ii.choice=t.choice,ii.func=l)}function l(e){for(var i=e-t.choice.multipleUseVariable,o=0;o<Math.abs(i);o++)i>0?t.selectedOneMore():t.selectedOneLess()}B(function(){t.choice.useSlider&&z(i,V(o),!0)});var s=L(),u=U(s),d=function(e){var l=da(),s=U(l),u=E(s),d=function(e){var i=me(function(){return!t.isEnabled});Ze(e,{class:"counter-icons",get disabled(){return V(i)},onclickcapture:r,children:function(e,i){var o=la();Z(function(){return Ye(o,t.multiChoiceButton)}),j(e,o)},$$slots:{default:!0}})};ve(u,function(e){t.choice.hideCounter||e(d)});var v=fe(u,2),f=E(v),g=fe(v,2),p=function(e){var i=me(function(){return!t.isEnabled});Ze(e,{class:"counter-icons",get disabled(){return V(i)},onclickcapture:n,children:function(e,i){var o=sa();Z(function(){return Ye(o,t.multiChoiceButton)}),j(e,o)},$$slots:{default:!0}})};ve(g,function(e){t.choice.hideCounter||e(p)});var m=fe(s,2),h=function(e){var o=ua(),n=E(o),r=me(function(){return!t.isEnabled});tt(n,{get min(){return t.choice.numMultipleTimesMinus},get max(){return t.choice.numMultipleTimesPluss},step:1,class:"mx-2",onpointerup:a,get disabled(){return V(r)},discrete:!0,get value(){return V(i)},set value(e){z(i,e,!0)}}),j(e,o)};ve(m,function(e){t.choice.useSlider&&e(h)}),Z(function(){Ye(v,t.multiChoiceText),Se(f,V(o))}),et("click",v,c,!0),j(e,l)};ve(u,function(e){t.choice.hideCounterUntilSelect&&0===t.choice.multipleUseVariable||e(d)}),j(e,s),P()}var fa=D('<div class="col-12"><!></div>'),ga=D('<img alt=""/>'),pa=D('<img alt=""/>'),ma=D('<h3 class="m-0"><!></h3>'),ha=D('<img alt=""/>'),ba=D('<img alt=""/>'),wa=D('<p class="mb-0"><!></p>'),Ta=D('<img alt=""/>'),Ia=D('<img alt=""/>'),Sa=D("<div></div>"),ya=D('<div class="d-column w-100 p-0 align-items-center"><!> <!> <div class="w-100"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!> <!></div>'),xa=D('<img alt=""/>'),Ca=D('<img alt=""/>'),Oa=D('<h2 class="mb-0"><!></h2>'),Aa=D('<p class="mb-0"><!></p>'),ka=D("<div></div>"),Ba=D("<!> <!>",1),Ma=D("<div></div>"),Da=D('<div class="col-12 text-center"><!> <!></div>'),Fa=D('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <!>',1),Ra=D('<h2 class="mb-0"><!></h2>'),ja=D('<p class="mb-0"><!></p>'),Pa=D("<div></div>"),$a=D("<!> <!>",1),Va=D('<img alt=""/>'),qa=D('<img alt=""/>'),Wa=D("<div></div>"),La=D('<div class="col-12 text-center"><!> <!></div>'),Ua=D('<div class="col p-0 text-center"><!> <!> <!> <!> <!> <!> <!> <!> <!></div> <div class="col p-0 text-center"><!></div> <!>',1),Na=D("<div><div><div><!></div></div></div>");function Ea(e,t){$(t,!0);var i=function(){return We(di,"$winWidth",n)},o=g(Le(),2),n=o[0],r=o[1],a=G(t,"preloadImages",3,!1),c={linkedObjects:[],mainDiv:t.mainDiv,bCreatorMode:!1,isBackpack:t.isBackpack,isOverDlg:!1,isOverImg:!1},l=me(function(){if(t.choice.addons)for(var e=0;e<t.choice.addons.length;e++){var i=t.choice.addons[e];if(app.showAllAddons>0||!i.skipIndex&&(!i.hideAddon||t.choice.isActive)&&(i.showAddon||Zi(i.requireds)))return e}return-1}),s=me(function(){return Ei("privateBackgroundIsOn",t.row,t.choice)}),u=me(function(){return Ei("privateFilterIsOn",t.row,t.choice)}),d=me(function(){return Ei("privateMultiChoiceIsOn",t.row,t.choice)}),v=me(function(){return Ei("privateObjectImageIsOn",t.row,t.choice)}),f=me(function(){return Ei("privateObjectIsOn",t.row,t.choice)}),p=me(function(){return Ei("privateTextIsOn",t.row,t.choice)}),m=me(function(){return void 0!==V(v).objectImageBoxWidth?V(v).objectImageBoxWidth:50}),h=me(function(){return Zi(t.choice.requireds)}),b=me(function(){return t.choice.isActive?!V(u).selFilterVisibleIsOn:V(h)?!V(u).unselFilterVisibleIsOn:!V(u).reqFilterVisibleIsOn}),T=me(function(){return t.choice.addonJustify?" justify-".concat(t.choice.addonJustify):""}),I=me(function(){return t.choice.isActive}),S=me(function(){return V(f).objectHeight}),y=me(function(){if(t.row.isResultRow){var e=Ut.get(t.choice.id);if(void 0!==e)return e.row}return t.row}),x=me(function(){var e=[];return e.push("white-space: pre-line; font-family: '".concat(V(p).objectTitle,"'; font-size: ").concat(V(p).objectTitleTextSize,"%; text-align: ").concat(V(p).objectTitleAlign,";")),!V(h)&&V(u).reqCTitleColorIsOn?e.push("color: ".concat(hn(V(u).reqFilterCTitleColor),";")):V(I)&&V(u).selCTitleColorIsOn?e.push("color: ".concat(hn(V(u).selFilterCTitleColor),";")):e.push("color: ".concat(hn(V(p).objectTitleColor),";")),V(f).titlePaddingIsOn&&e.push("padding: ".concat(V(f).objectTextPadding,"px;")),e.join(" ")}),C=me(function(){return Ni(""!==V(y).title?V(y).title:V(y).debugTitle||"")}),O=me(function(){return Ni(t.choice.title)}),A=me(function(){return Ni(t.choice.text)}),k=me(function(){return"font-family: '".concat(V(d).multiChoiceTextFont,"'; color: ").concat(hn(V(p).scoreTextColor),"; font-size: ").concat(V(d).multiChoiceTextSize,"%; align-content: center;")}),M=me(function(){return"font-size: ".concat(V(d).multiChoiceCounterSize,"%; color: ").concat(hn(V(p).scoreTextColor),";")}),D=me(function(){return!t.choice.hideMultipleCounter||V(h)}),R=me(function(){var e=[];return e.push("white-space: pre-wrap; font-family: '".concat(V(p).objectText,"'; text-align: ").concat(V(p).objectTextAlign,"; font-size: ").concat(V(p).objectTextTextSize,"%;")),!V(h)&&V(u).reqCTextColorIsOn?e.push("color: ".concat(hn(V(u).reqFilterCTextColor),";")):V(I)&&V(u).selCTextColorIsOn?e.push("color: ".concat(hn(V(u).selFilterCTextColor),";")):e.push("color: ".concat(hn(V(p).objectTextColor),";")),e.push("padding: ".concat(V(f).objectTextPadding,"px;")),e.join(" ")}),q=me(function(){var e=V(f).objectBorderRadiusIsPixels?"px":"%",i=0,o=0,n=0,r=[];if(V(f).objectBorderImage&&r.push("border-image: url('".concat(V(f).objectBorderImage,"') ").concat(V(f).objectBorderImageSliceTop," ").concat(V(f).objectBorderImageSliceRight," ").concat(V(f).objectBorderImageSliceBottom," ").concat(V(f).objectBorderImageSliceLeft," / ").concat(V(f).objectBorderImageWidth,"px ").concat(V(f).objectBorderImageRepeat,"; border-style: solid; padding: ").concat(V(f).objectBorderImageWidth,"px;")),V(s).objectBackgroundImage&&(r.push("background-image: url('".concat(V(s).objectBackgroundImage,"'); ").concat(V(s).isObjectBackgroundRepeat?"background-repeat: repeat;":V(s).isObjectBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),i=r.length),V(s).objectBgColorIsOn&&(r.push("background-color: ".concat(hn(V(s).objectBgColor),";")),o=r.length),r.push("margin: ".concat(V(f).objectMargin,"px;")),r.push("border-radius: ".concat(V(f).objectBorderRadiusTopLeft).concat(e," ").concat(V(f).objectBorderRadiusTopRight).concat(e," ").concat(V(f).objectBorderRadiusBottomRight).concat(e," ").concat(V(f).objectBorderRadiusBottomLeft).concat(e,";")),V(f).objectOverflowIsOn&&r.push("overflow: hidden;"),V(f).objectBorderIsOn||V(I)&&V(u).selBorderColorIsOn||!V(h)&&V(u).reqBorderColorIsOn){var a=V(f).objectBorderColor;!V(h)&&V(u).reqBorderColorIsOn?a=V(u).reqFilterBorderColor:V(I)&&V(u).selBorderColorIsOn&&(a=V(u).selFilterBorderColor),r.push("border: ".concat(V(f).objectBorderWidth,"px ").concat(V(f).objectBorderStyle," ").concat(hn(a),";"))}return V(f).objectDropShadowIsOn&&(V(f).objectUseBoxShadowIsOn?r.push("box-shadow: ".concat(V(f).objectDropShadowH,"px ").concat(V(f).objectDropShadowV,"px ").concat(V(f).objectDropShadowBlur,"px ").concat(V(f).objectDropShadowSpread,"px ").concat(hn(V(f).objectDropShadowColor),";")):(n=r.length,r.push("filter: drop-shadow(".concat(V(f).objectDropShadowH,"px ").concat(V(f).objectDropShadowV,"px ").concat(V(f).objectDropShadowBlur,"px ").concat(hn(V(f).objectDropShadowColor),")")))),0===n&&(r.push("filter:"),n=r.length),V(h)?(V(I)?(V(u).selFilterBlurIsOn&&r.push(" blur(".concat(V(u).selFilterBlur,"px)")),V(u).selFilterBrightIsOn&&r.push(" brightness(".concat(V(u).selFilterBright,"%)")),V(u).selFilterContIsOn&&r.push(" contrast(".concat(V(u).selFilterCont,"%)")),V(u).selFilterGrayIsOn&&r.push(" grayscale(".concat(V(u).selFilterGray,"%)")),V(u).selFilterHueIsOn&&r.push(" hue-rotate(".concat(V(u).selFilterHue,"deg)")),V(u).selFilterInvertIsOn&&r.push(" invert(".concat(V(u).selFilterInvert,"%)")),V(u).selFilterOpacIsOn&&r.push(" opacity(".concat(V(u).selFilterOpac,"%)")),V(u).selFilterSaturIsOn&&r.push(" saturate(".concat(V(u).selFilterSatur,")")),V(u).selFilterSepiaIsOn&&r.push(" sepia(".concat(V(u).selFilterGray,"%)")),r.length===n?r.splice(n-1,1):r.push(";"),V(u).selBgColorIsOn&&(0!==o&&r.splice(o-1,1),V(u).selOverlayOnImage||0!==i&&r.splice(i-1,1),r.push("background-color: ".concat(hn(V(u).selFilterBgColor),";"))),V(f).objectGradientIsOn&&r.push("background-image: linear-gradient(".concat(V(f).objectGradientOnSelect,");"))):(V(u).unselFilterBlurIsOn&&r.push(" blur(".concat(V(u).unselFilterBlur,"px)")),V(u).unselFilterBrightIsOn&&r.push(" brightness(".concat(V(u).unselFilterBright,"%)")),V(u).unselFilterContIsOn&&r.push(" contrast(".concat(V(u).unselFilterCont,"%)")),V(u).unselFilterGrayIsOn&&r.push(" grayscale(".concat(V(u).unselFilterGray,"%)")),V(u).unselFilterHueIsOn&&r.push(" hue-rotate(".concat(V(u).unselFilterHue,"deg)")),V(u).unselFilterInvertIsOn&&r.push(" invert(".concat(V(u).unselFilterInvert,"%)")),V(u).unselFilterOpacIsOn&&r.push(" opacity(".concat(V(u).unselFilterOpac,"%)")),V(u).unselFilterSaturIsOn&&r.push(" saturate(".concat(V(u).unselFilterSatur,")")),V(u).unselFilterSepiaIsOn&&r.push(" sepia(".concat(V(u).unselFilterGray,"%)")),r.length===n?r.splice(n-1,1):r.push(";"),V(f).objectGradientIsOn&&r.push("background-image: linear-gradient(".concat(V(f).objectGradient,");"))),app.isPointerCursor&&!t.choice.isNotSelectable&&(!t.choice.isSelectableMultiple||t.choice.allowSelectByClick&&0===t.choice.multipleUseVariable)&&r.push("cursor: pointer;")):(V(u).reqFilterBlurIsOn&&r.push(" blur(".concat(V(u).reqFilterBlur,"px)")),V(u).reqFilterBrightIsOn&&r.push(" brightness(".concat(V(u).reqFilterBright,"%)")),V(u).reqFilterContIsOn&&r.push(" contrast(".concat(V(u).reqFilterCont,"%)")),V(u).reqFilterGrayIsOn&&r.push(" grayscale(".concat(V(u).reqFilterGray,"%)")),V(u).reqFilterHueIsOn&&r.push(" hue-rotate(".concat(V(u).reqFilterHue,"deg)")),V(u).reqFilterInvertIsOn&&r.push(" invert(".concat(V(u).reqFilterInvert,"%)")),V(u).reqFilterOpacIsOn&&r.push(" opacity(".concat(V(u).reqFilterOpac,"%)")),V(u).reqFilterSaturIsOn&&r.push(" saturate(".concat(V(u).reqFilterSatur,")")),V(u).reqFilterSepiaIsOn&&r.push(" sepia(".concat(V(u).reqFilterGray,"%)")),r.length===n?r.splice(n-1,1):r.push(";"),V(u).reqBgColorIsOn&&(0!==o&&r.splice(o-1,1),V(u).reqOverlayOnImage||0!==i&&r.splice(i-1,1),r.push("background-color: ".concat(hn(V(u).reqFilterBgColor),";"))),V(f).objectGradientIsOn&&r.push("background-image: linear-gradient(".concat(V(f).objectGradientOnReq,");"))),r.join(" ")}),W=me(function(){var e=[],i=V(v).objectImgBorderRadiusIsPixels?"px":"%";if(e.push("width: ".concat(V(v).objectImageWidth,"%; margin-top: ").concat(V(v).objectImageMarginTop,"%; margin-bottom: ").concat(V(v).objectImageMarginBottom,"%;")),V(v).objectImgObjectFillIsOn){e.push("object-fit: ".concat(V(v).objectImgObjectFillStyle,";"));var o=t.row.objectImgObjectFillHeight||V(v).objectImgObjectFillHeight;o&&e.push("height: ".concat(o,"px;"))}if(e.push("border-radius: ".concat(V(v).objectImgBorderRadiusTopLeft).concat(i," ").concat(V(v).objectImgBorderRadiusTopRight).concat(i," ").concat(V(v).objectImgBorderRadiusBottomRight).concat(i," ").concat(V(v).objectImgBorderRadiusBottomLeft).concat(i,";")),V(v).objectImgOverflowIsOn&&e.push("overflow: hidden;"),V(v).objectImgBorderIsOn){var n=V(h)?V(I)&&V(u).selImgBorderColorIsOn&&V(u).selFilterImgBorderColor||V(v).objectImgBorderColor:V(u).reqImgBorderColorIsOn&&V(u).reqFilterImgBorderColor||V(v).objectImgBorderColor;e.push("border: ".concat(V(v).objectImgBorderWidth,"px ").concat(V(v).objectImgBorderStyle," ").concat(hn(n),";"))}return e.join(" ")}),z=me(function(){var e=[];return e.push("font-family: '".concat(V(p).scoreText,"'; font-size: ").concat(V(p).scoreTextSize,"%; text-align: ").concat(V(p).scoreTextAlign,";")),e.push("color: ".concat(hn(V(p).scoreTextColor),";")),V(h)?t.choice.isActive&&V(u).selScoreTextColorIsOn&&e.push("color: ".concat(hn(V(u).selFilterSTextColor))):V(u).reqScoreTextColorIsOn&&e.push("color: ".concat(hn(V(u).reqFilterSTextColor))),e.join(" ")});function _(e,t,i){for(var o=e,n=!1;o;){var r,a=w(o.classList);try{for(a.s();!(r=a.n()).done;){var c=r.value;if(c.startsWith(t))return!0;c.startsWith(i)&&(n=!0)}}catch(l){a.e(l)}finally{a.f()}if(n)return!1;o=o.parentElement}return!1}function H(e,i,o){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=o&&o.target?o.target:null,a=i;if(c.isOverDlg=!1,c.isOverImg=!1,!(r&&e.isActive&&e.addons&&e.addons.length>0&&_(r,"addon-","addon"))){if(i.isResultRow||i.isGroupRow){var l=Ut.get(e.id);void 0!==l&&(a=l.row)}if(e.isSelectableMultiple){if(e.id===t.choice.id&&e.allowSelectByClick&&0===e.multipleUseVariable){if(r&&_(r,"multi-","choice-"))return;yo(e,a,c)}}else!Zi(e.requireds)||i.isInfoRow||n&&e.isNotSelectable||e.forcedActivated||(e.isActive?e.selectOnce||Io(e,a,c):So(e,a,c))}}function K(e){navigator.clipboard.writeText(t.choice.imageSourceTooltip).then(function(){ni.labelText="Tooltip copied to clipboard.",ni.isOpen=!0}).catch(function(){console.log(t.choice.imageSourceTooltip),ni.labelText="Tooltip text logged to developer console.",ni.isOpen=!0})}B(function(){t.mainDiv&&(c.mainDiv=t.mainDiv),t.isBackpack&&(c.isBackpack=t.isBackpack)});var Q={activateObject:H,options:c},ee=L(),te=U(ee),ie=function(e){var o,n=Na(),r=E(n),s=E(r),v=E(s),f=function(e){var i=ya(),o=E(i),n=function(e){var t=L(),i=U(t);F(i,function(){return V(C)},function(e){var t=fa(),i=E(t);N(i,function(){return Xe.sanitize(V(C),Kt)}),Z(function(){return Ye(t,V(z))}),j(e,t)}),j(e,t)};ve(o,function(e){t.row.resultShowRowTitle&&e(n)});var r=fe(o,2),s=function(e){var i=L(),o=U(i),n=function(e){var i=ga();i.__contextmenu=K,Y(i,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.choice.imageSourceTooltip}),Z(function(){Ke(i,"src",t.choice.image),Ye(i,V(W)),Ke(i,"loading",a()?"eager":"lazy")}),j(e,i)},r=function(e){var i=pa();Z(function(){Ke(i,"src",t.choice.image),Ye(i,V(W)),Ke(i,"loading",a()?"eager":"lazy")}),j(e,i)};ve(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),j(e,i)};ve(r,function(e){(1===t.choice.template||t.windowWidth<=1280||t.row.choicesShareTemplate)&&t.choice.image&&!t.row.objectImageRemoved&&e(s)});var u=fe(r,2),v=E(u),f=function(e){var t=L(),i=U(t);F(i,function(){return V(O)},function(e){var t=ma(),i=E(t);N(i,function(){return Xe.sanitize(V(O),Kt)}),Z(function(){return Ye(t,V(x))}),j(e,t)}),j(e,t)};ve(v,function(e){""===t.choice.title||t.row.objectTitleRemoved||e(f)});var g=fe(v,2),p=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(g,function(e){t.choice.isSelectableMultiple&&V(D)&&0===V(d).multiChoiceCounterPosition&&e(p)});var m=fe(g,2),b=function(e){var i=L(),o=U(i);_e(o,17,function(){return t.choice.scores},Je,function(e,i){$r(e,{get score(){return V(i)},get row(){return t.row},get choice(){return t.choice}})}),j(e,i)};ve(m,function(e){t.row.objectScoreRemoved||t.choice.showScoreInAddon||e(b)});var w=fe(m,2),I=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(w,function(e){t.choice.isSelectableMultiple&&V(D)&&1===V(d).multiChoiceCounterPosition&&e(I)});var S=fe(w,2),y=function(e){var i=L(),o=U(i);_e(o,17,function(){return t.choice.requireds},Je,function(e,t){kr(e,{get required(){return V(t)},get scoreText(){return V(z)}})}),j(e,i)};ve(S,function(e){t.row.objectRequirementRemoved||t.choice.showReqInAddon||e(y)});var B=fe(S,2),P=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(B,function(e){t.choice.isSelectableMultiple&&V(D)&&2===V(d).multiChoiceCounterPosition&&e(P)});var $=fe(B,2),q=function(e){var i=L(),o=U(i),n=function(e){var i=ha();i.__contextmenu=K,Y(i,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.choice.imageSourceTooltip}),Z(function(){Ke(i,"src",t.choice.image),Ye(i,V(W)),Ke(i,"loading",a()?"eager":"lazy")}),j(e,i)},r=function(e){var i=ba();Z(function(){Ke(i,"src",t.choice.image),Ye(i,V(W)),Ke(i,"loading",a()?"eager":"lazy")}),j(e,i)};ve(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),j(e,i)};ve($,function(e){5===t.choice.template&&t.windowWidth>1280&&t.choice.image&&!t.row.objectImageRemoved&&e(q)});var G=fe($,2),_=function(e){var t=L(),i=U(t);F(i,function(){return V(A)},function(e){var t=wa(),i=E(t);N(i,function(){return Xe.sanitize(V(A),Kt)}),Z(function(){return Ye(t,V(R))}),j(e,t)}),j(e,t)};ve(G,function(e){""===t.choice.text||t.row.objectTextRemoved||e(_)});var H=fe(G,2),X=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(H,function(e){t.choice.isSelectableMultiple&&V(D)&&3===V(d).multiChoiceCounterPosition&&e(X)});var Q=fe(H,2),ee=function(e){var i=L(),o=U(i),n=function(e){var i=Ta();i.__contextmenu=K,Y(i,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.choice.imageSourceTooltip}),Z(function(){Ke(i,"src",t.choice.image),Ye(i,V(W)),Ke(i,"loading",a()?"eager":"lazy")}),j(e,i)},r=function(e){var i=Ia();Z(function(){Ke(i,"src",t.choice.image),Ye(i,V(W)),Ke(i,"loading",a()?"eager":"lazy")}),j(e,i)};ve(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),j(e,i)};ve(Q,function(e){4===t.choice.template&&t.windowWidth>1280&&t.choice.image&&!t.row.objectImageRemoved&&e(ee)});var te=fe(u,2),ie=function(e){var i=Sa();_e(i,21,function(){return t.choice.addons},Je,function(e,i,o){var n=L(),r=U(n),c=function(e){var n=me(function(){return V(l)===o});ca(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return V(i)},get isEnabled(){return V(h)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return V(n)}})};ve(r,function(e){(app.showAllAddons>0||(!V(i).hideAddon||t.choice.isActive)&&(V(i).showAddon||Zi(V(i).requireds)))&&e(c)}),j(e,n)}),Z(function(){var e;return J(i,1,"row g-0 p-0 w-100".concat(null!==(e=V(T))&&void 0!==e?e:""))}),j(e,i)};ve(te,function(e){t.choice.addons&&t.choice.addons.length>0&&e(ie)});var oe=fe(te,2),ne=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(oe,function(e){t.choice.isSelectableMultiple&&V(D)&&4===V(d).multiChoiceCounterPosition&&e(ne)}),j(e,i)},g=function(e){var i=L(),o=U(i),n=function(e){var i=Fa(),o=U(i),n=E(o),r=function(e){var i=L(),o=U(i),n=function(e){var i=xa();i.__contextmenu=K,Y(i,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.choice.imageSourceTooltip}),Z(function(){Ke(i,"src",t.choice.image),Ye(i,V(W)),Ke(i,"loading",a()?"eager":"lazy")}),j(e,i)},r=function(e){var i=Ca();Z(function(){Ke(i,"src",t.choice.image),Ye(i,V(W)),Ke(i,"loading",a()?"eager":"lazy")}),j(e,i)};ve(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),j(e,i)};ve(n,function(e){t.choice.image&&!t.row.objectImageRemoved&&e(r)});var s=fe(o,2),u=E(s),v=function(e){var t=L(),i=U(t);F(i,function(){return V(O)},function(e){var t=Oa(),i=E(t);N(i,function(){return Xe.sanitize(V(O),Kt)}),Z(function(){return Ye(t,V(x))}),j(e,t)}),j(e,t)};ve(u,function(e){""===t.choice.title||t.row.objectTitleRemoved||e(v)});var f=fe(u,2),g=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(f,function(e){t.choice.isSelectableMultiple&&V(D)&&0===V(d).multiChoiceCounterPosition&&e(g)});var p=fe(f,2),b=function(e){var i=L(),o=U(i);_e(o,17,function(){return t.choice.scores},Je,function(e,i){$r(e,{get score(){return V(i)},get row(){return t.row},get choice(){return t.choice}})}),j(e,i)};ve(p,function(e){t.row.objectScoreRemoved||t.choice.showScoreInAddon||e(b)});var w=fe(p,2),I=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(w,function(e){t.choice.isSelectableMultiple&&V(D)&&1===V(d).multiChoiceCounterPosition&&e(I)});var S=fe(w,2),y=function(e){var i=L(),o=U(i);_e(o,17,function(){return t.choice.requireds},Je,function(e,t){kr(e,{get required(){return V(t)},get scoreText(){return V(z)}})}),j(e,i)};ve(S,function(e){t.row.objectRequirementRemoved||t.choice.showReqInAddon||e(y)});var C=fe(S,2),B=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(C,function(e){t.choice.isSelectableMultiple&&V(D)&&2===V(d).multiChoiceCounterPosition&&e(B)});var P=fe(C,2),$=function(e){var i=L(),o=U(i);F(o,function(){return V(A)},function(e){var i=Aa(),o=E(i);N(o,function(){return Xe.sanitize(Ni(t.choice.text),Kt)}),Z(function(){return Ye(i,V(R))}),j(e,i)}),j(e,i)};ve(P,function(e){""===t.choice.text||t.row.objectTextRemoved||e($)});var q=fe(P,2),G=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(q,function(e){t.choice.isSelectableMultiple&&V(D)&&3===V(d).multiChoiceCounterPosition&&e(G)});var _=fe(q,2),H=function(e){var i=Ba(),o=U(i),n=function(e){var i=ka();_e(i,21,function(){return t.choice.addons},Je,function(e,i,o){var n=L(),r=U(n),c=function(e){var n=me(function(){return V(l)===o});ca(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return V(i)},get isEnabled(){return V(h)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return V(n)}})};ve(r,function(e){(app.showAllAddons>0||(!V(i).hideAddon||t.choice.isActive)&&(V(i).showAddon||Zi(V(i).requireds)))&&e(c)}),j(e,n)}),Z(function(){var e;return J(i,1,"row g-0 p-0 col w-100".concat(null!==(e=V(T))&&void 0!==e?e:""))}),j(e,i)};ve(o,function(e){t.choice.addons&&t.choice.addons.length>0&&e(n)});var r=fe(o,2),s=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(r,function(e){t.choice.isSelectableMultiple&&V(D)&&4===V(d).multiChoiceCounterPosition&&e(s)}),j(e,i)};ve(_,function(e){t.choice.useSeperateAddon||e(H)});var X=fe(s,2),Q=function(e){var i=Da(),o=E(i),n=function(e){var i=Ma();_e(i,21,function(){return t.choice.addons},Je,function(e,i,o){var n=L(),r=U(n),c=function(e){var n=me(function(){return V(l)===o});ca(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return V(i)},get isEnabled(){return V(h)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return V(n)}})};ve(r,function(e){(app.showAllAddons>0||(!V(i).hideAddon||t.choice.isActive)&&(V(i).showAddon||Zi(V(i).requireds)))&&e(c)}),j(e,n)}),Z(function(){var e;return J(i,1,"row g-0 p-0 col w-100".concat(null!==(e=V(T))&&void 0!==e?e:""))}),j(e,i)};ve(o,function(e){t.choice.addons&&t.choice.addons.length>0&&e(n)});var r=fe(o,2),s=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(r,function(e){t.choice.isSelectableMultiple&&V(D)&&4===V(d).multiChoiceCounterPosition&&e(s)}),j(e,i)};ve(X,function(e){t.choice.useSeperateAddon&&e(Q)}),Z(function(){var e;Ye(o,"max-width: ".concat(null!==(e=V(m))&&void 0!==e?e:"","%")),Ye(s,"max-width: ".concat(100-V(m),"%"))}),j(e,i)},r=function(e){var i=L(),o=U(i),n=function(e){var i=Ua(),o=U(i),n=E(o),r=function(e){var t=L(),i=U(t);F(i,function(){return V(O)},function(e){var t=Ra(),i=E(t);N(i,function(){return Xe.sanitize(V(O),Kt)}),Z(function(){return Ye(t,V(x))}),j(e,t)}),j(e,t)};ve(n,function(e){""===t.choice.title||t.row.objectTitleRemoved||e(r)});var s=fe(n,2),u=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(s,function(e){t.choice.isSelectableMultiple&&V(D)&&0===V(d).multiChoiceCounterPosition&&e(u)});var v=fe(s,2),f=function(e){var i=L(),o=U(i);_e(o,17,function(){return t.choice.scores},Je,function(e,i){$r(e,{get score(){return V(i)},get row(){return t.row},get choice(){return t.choice}})}),j(e,i)};ve(v,function(e){t.row.objectScoreRemoved||t.choice.showScoreInAddon||e(f)});var g=fe(v,2),p=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(g,function(e){t.choice.isSelectableMultiple&&V(D)&&1===V(d).multiChoiceCounterPosition&&e(p)});var b=fe(g,2),w=function(e){var i=L(),o=U(i);_e(o,17,function(){return t.choice.requireds},Je,function(e,t){kr(e,{get required(){return V(t)},get scoreText(){return V(z)}})}),j(e,i)};ve(b,function(e){t.row.objectRequirementRemoved||t.choice.showReqInAddon||e(w)});var I=fe(b,2),S=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(I,function(e){t.choice.isSelectableMultiple&&V(D)&&2===V(d).multiChoiceCounterPosition&&e(S)});var y=fe(I,2),C=function(e){var t=L(),i=U(t);F(i,function(){return V(A)},function(e){var t=ja(),i=E(t);N(i,function(){return Xe.sanitize(V(A),Kt)}),Z(function(){return Ye(t,V(R))}),j(e,t)}),j(e,t)};ve(y,function(e){""===t.choice.text||t.row.objectTextRemoved||e(C)});var B=fe(y,2),P=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(B,function(e){t.choice.isSelectableMultiple&&V(D)&&3===V(d).multiChoiceCounterPosition&&e(P)});var $=fe(B,2),q=function(e){var i=$a(),o=U(i),n=function(e){var i=Pa();_e(i,21,function(){return t.choice.addons},Je,function(e,i,o){var n=L(),r=U(n),c=function(e){var n=me(function(){return V(l)===o});ca(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return V(i)},get isEnabled(){return V(h)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return V(n)}})};ve(r,function(e){(app.showAllAddons>0||(!V(i).hideAddon||t.choice.isActive)&&(V(i).showAddon||Zi(V(i).requireds)))&&e(c)}),j(e,n)}),Z(function(){var e;return J(i,1,"row g-0 p-0 col w-100".concat(null!==(e=V(T))&&void 0!==e?e:""))}),j(e,i)};ve(o,function(e){t.choice.addons&&t.choice.addons.length>0&&e(n)});var r=fe(o,2),s=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(r,function(e){t.choice.isSelectableMultiple&&V(D)&&4===V(d).multiChoiceCounterPosition&&e(s)}),j(e,i)};ve($,function(e){t.choice.useSeperateAddon||e(q)});var G=fe(o,2),_=E(G),H=function(e){var i=L(),o=U(i),n=function(e){var i=Va();i.__contextmenu=K,Y(i,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.choice.imageSourceTooltip}),Z(function(){Ke(i,"src",t.choice.image),Ye(i,V(W)),Ke(i,"loading",a()?"eager":"lazy")}),j(e,i)},r=function(e){var i=qa();Z(function(){Ke(i,"src",t.choice.image),Ye(i,V(W)),Ke(i,"loading",a()?"eager":"lazy")}),j(e,i)};ve(o,function(e){t.choice.imageSourceTooltip?e(n):e(r,!1)}),j(e,i)};ve(_,function(e){t.choice.image&&!t.row.objectImageRemoved&&e(H)});var X=fe(G,2),Q=function(e){var i=La(),o=E(i),n=function(e){var i=Wa();_e(i,21,function(){return t.choice.addons},Je,function(e,i,o){var n=L(),r=U(n),c=function(e){var n=me(function(){return V(l)===o});ca(e,{get row(){return t.row},get choice(){return t.choice},get addon(){return V(i)},get isEnabled(){return V(h)},get windowWidth(){return t.windowWidth},get preloadImages(){return a()},get isFirst(){return V(n)}})};ve(r,function(e){(app.showAllAddons>0||(!V(i).hideAddon||t.choice.isActive)&&(V(i).showAddon||Zi(V(i).requireds)))&&e(c)}),j(e,n)}),Z(function(){var e;return J(i,1,"row g-0 p-0 col w-100".concat(null!==(e=V(T))&&void 0!==e?e:""))}),j(e,i)};ve(o,function(e){t.choice.addons&&t.choice.addons.length>0&&e(n)});var r=fe(o,2),s=function(e){var i=me(function(){return V(h)&&!t.row.isInfoRow&&!t.choice.isNotSelectable});va(e,{get isEnabled(){return V(i)},get multiChoiceButton(){return V(M)},get multiChoiceText(){return V(k)},get choice(){return t.choice},selectedOneMore:function(){return yo(t.choice,t.row,c)},selectedOneLess:function(){return xo(t.choice,t.row,c)}})};ve(r,function(e){t.choice.isSelectableMultiple&&V(D)&&4===V(d).multiChoiceCounterPosition&&e(s)}),j(e,i)};ve(X,function(e){t.choice.useSeperateAddon&&e(Q)}),Z(function(){var e;Ye(o,"max-width: ".concat(100-V(m),"%")),Ye(G,"max-width: ".concat(null!==(e=V(m))&&void 0!==e?e:"","%"))}),j(e,i)};ve(o,function(e){3===t.choice.template&&e(n)},!0),j(e,i)};ve(o,function(e){2===t.choice.template?e(n):e(r,!1)}),j(e,i)};ve(v,function(e){t.choice.template>=4||1===t.choice.template||t.windowWidth<=1280||t.row.choicesShareTemplate?e(f):e(g,!1)}),Z(function(e,i){var a,c;J(n,1,e),o=J(r,1,"d-flex",null,o,i),J(s,1,"row row-".concat(null!==(a=t.row.id)&&void 0!==a?a:""," choice-").concat(null!==(c=t.choice.id)&&void 0!==c?c:""," ").concat(V(I)?"choice-selected":"choice-unselected"," ").concat(V(h)?"choice-enabled":"choice-disabled"," ").concat(V(I)&&V(u).selOverlayOnImage||!V(h)&&V(u).reqOverlayOnImage?"bg-overlay ":"","w-100")),Ye(s,V(q))},[function(){return X(function(){var e=t.choice.objectWidth||t.row.objectWidth,o=qi(e),n="col-6"===app.objectsPerRow?2:"col-4"===app.objectsPerRow?3:4;if(i()>1280)return e;if(!(i()>720))return i()>480?1===o?"col-12":"col-6":"col-12";switch(o){case 1:return"col-12";case 2:return"col-6";case 3:return n>2?"col-4":app.objectsPerRow;case 4:return n>3?"col-3":app.objectsPerRow;default:return app.objectsPerRow}}())},function(){return{fullHeight:V(S)}}]),et("click",s,function(e){return H(t.choice,t.row,e,!0)},!0),j(e,n)};ve(te,function(e){V(b)&&e(ie)}),j(e,ee);var oe=P(Q);return r(),oe}Qe(["contextmenu"]);var za=D('<img alt=""/>'),Ga=D('<img alt=""/>'),_a=D('<h2 class="mb-0"><!></h2>'),Ha=D('<img alt=""/>'),Ya=D('<img alt=""/>'),Za=D('<p class="mb-0"><!></p>'),Ja=D('<img alt=""/>'),Xa=D('<img alt=""/>'),Ka=D('<div class="col-12 m-0 p-0"><!> <!> <!> <!> <!></div>'),Qa=D('<h2 class="mb-0"><!></h2>'),ec=D('<p class="mb-0"><!></p>'),tc=D('<img alt=""/>'),ic=D('<img alt=""/>'),oc=D('<div class="col p-0 text-center"><!> <!></div> <div class="col p-0 text-center"><!></div>',1),nc=D('<img alt=""/>'),rc=D('<img alt=""/>'),ac=D('<h2 class="mb-0"><!></h2>'),cc=D('<p class="mb-0"><!></p>'),lc=D('<div class="col p-0 text-center"><!></div> <div class="col p-0 text-center"><!> <!></div>',1),sc=D("<div><!></div>"),uc=D("<div><!></div>"),dc=D("<div><!> <!></div>");function vc(e,t){$(t,!0);var i=G(t,"preloadImages",3,!1),o=G(t,"isBackpack",3,!1),n={linkedObjects:[]},r=q(void 0),a=me(function(){return Ei("privateBackgroundIsOn",t.row)}),c=me(function(){return Ei("privateRowImageIsOn",t.row)}),l=me(function(){return Ei("privateRowIsOn",t.row)}),s=me(function(){return Ei("privateTextIsOn",t.row)}),u=q(0),v=me(function(){return void 0!==V(c).rowImageBoxWidth?V(c).rowImageBoxWidth:50}),f=me(function(){return Zi(t.row.requireds)}),p=me(function(){return t.row.onlyIfNoChoices&&0!==t.row.currentChoices}),m=me(function(){return t.row.rowJustify?"justify-".concat(t.row.rowJustify):""}),h=me(function(){return Ni(t.row.title)}),b=me(function(){return Ni(t.row.titleText)}),T=me(function(){var e=[];if(void 0!==t.row.resultGroupId&&""!==t.row.resultGroupId&&t.row.resultGroupId){var i,o=w(Vt);try{for(o.s();!(i=o.n()).done;){var n=g(i.value,1)[0],r=Ut.get(n);if(void 0!==r){var a=r.choice,c=r.row;if(!a.isNotResult)if(t.row.resultGroupId===c.resultGroupId)e.push({choice:a,row:c});else if(void 0!==a.groups)for(var l=0;l<a.groups.length;l++)if(a.groups[l]===t.row.resultGroupId){e.push({choice:a,row:c});break}}}}catch(m){o.e(m)}finally{o.f()}}else{var s,u=w(Vt);try{for(u.s();!(s=u.n()).done;){var d=g(s.value,1)[0],v=Ut.get(d);if(void 0!==v){var f=v.choice,p=v.row;f.isNotResult||e.push({choice:f,row:p})}}}catch(m){u.e(m)}finally{u.f()}}return e.sort(function(e,t){return e.row.index!==t.row.index?e.row.index-t.row.index:e.choice.index-t.choice.index}),e}),I=me(function(){var e=[];if(void 0!==t.row.resultGroupId){var i=Nt.get(t.row.resultGroupId);if(void 0!==i)for(var o=0;o<i.elements.length;o++){var n=Ut.get(i.elements[o]);void 0!==n&&e.push({choice:n.choice,row:n.row})}}return e.sort(function(e,t){return e.row.index!==t.row.index?e.row.index-t.row.index:e.choice.index-t.choice.index}),e}),S=me(function(){if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.backgroundImage)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(var e=0;e<t.row.rowDesignGroups.length;e++){var i=_t.get(t.row.rowDesignGroups[e]);if(void 0!==i&&i.privateBackgroundIsOn&&i.styling.backgroundImage){var o=i.activatedId,n=Et.get(o);if(""===o||Gi(i.activatedId))return i.styling;if(void 0!==app.globalRequirements&&void 0!==n&&Zi(n.requireds))return i.styling}}return!1}),y=me(function(){if(void 0!==t.row.styling&&t.row.isPrivateStyling&&t.row.privateBackgroundIsOn&&t.row.styling.bgColorIsOn&&t.row.styling.backgroundColor)return t.row.styling;if(void 0!==app.rowDesignGroups&&t.row.rowDesignGroups)for(var e=0;e<t.row.rowDesignGroups.length;e++){var i=_t.get(t.row.rowDesignGroups[e]);if(void 0!==i&&i.privateBackgroundIsOn&&i.styling.bgColorIsOn&&i.styling.backgroundColor){var o=i.activatedId,n=Et.get(o);if(""===o||Gi(i.activatedId))return i.styling;if(void 0!==app.globalRequirements&&void 0!==n&&Zi(n.requireds))return i.styling}}return!1}),x=me(function(){var e=[];return e.push("margin: ".concat(V(l).rowBodyMarginTop,"px ").concat(V(l).rowBodyMarginSides,"% ").concat(V(l).rowBodyMarginBottom,"px ").concat(V(l).rowBodyMarginSides,"%;")),V(S)&&e.push("background-image: url('".concat(V(S).backgroundImage,"'); ").concat(V(S).isBackgroundRepeat?"background-repeat: repeat;":V(S).isBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),V(y)&&e.push("background-color: ".concat(hn(V(y).backgroundColor),";")),e.join(" ")}),C=me(function(){var e=V(l).rowBorderRadiusIsPixels?"px":"%",t=[];return V(l).rowBorderImage&&t.push("border-image: url('".concat(V(l).rowBorderImage,"') ").concat(V(l).rowBorderImageSliceTop," ").concat(V(l).rowBorderImageSliceRight," ").concat(V(l).rowBorderImageSliceBottom," ").concat(V(l).rowBorderImageSliceLeft," / ").concat(V(l).rowBorderImageWidth,"px ").concat(V(l).rowBorderImageRepeat,"; border-style: solid; padding: ").concat(V(l).rowBorderImageWidth,"px;")),V(a).rowBackgroundImage&&t.push("background-image: url('".concat(V(a).rowBackgroundImage,"'); ").concat(V(a).isRowBackgroundRepeat?"background-repeat: repeat;":V(a).isRowBackgroundFitIn?"background-size: 100% 100%;":"background-size: cover;")),V(a).rowBgColorIsOn&&t.push("background-color: ".concat(hn(V(a).rowBgColor),";")),t.push("margin-left: ".concat(V(l).rowMargin,"%; margin-right: ").concat(V(l).rowMargin,"%;")),V(l).rowGradientIsOn&&t.push("background-image: linear-gradient(".concat(V(l).rowGradient,");")),t.push("border-radius: ".concat(V(l).rowBorderRadiusTopLeft).concat(e," ").concat(V(l).rowBorderRadiusTopRight).concat(e," ").concat(V(l).rowBorderRadiusBottomRight).concat(e," ").concat(V(l).rowBorderRadiusBottomLeft).concat(e,";")),V(l).rowOverflowIsOn&&t.push("overflow: hidden;"),V(l).rowBorderIsOn&&t.push("border: ".concat(V(l).rowBorderWidth,"px ").concat(V(l).rowBorderStyle," ").concat(hn(V(l).rowBorderColor),";")),V(l).rowDropShadowIsOn&&(V(l).rowUseBoxShadowIsOn?t.push("box-shadow: ".concat(V(l).rowDropShadowH,"px ").concat(V(l).rowDropShadowV,"px ").concat(V(l).rowDropShadowBlur,"px ").concat(V(l).rowDropShadowSpread,"px ").concat(hn(V(l).rowDropShadowColor),";")):t.push("filter: drop-shadow(".concat(V(l).rowDropShadowH,"px ").concat(V(l).rowDropShadowV,"px ").concat(V(l).rowDropShadowBlur,"px ").concat(hn(V(l).rowDropShadowColor),");"))),t.join(" ")}),O=me(function(){return"white-space: pre-line; font-family: '".concat(V(s).rowTitle,"'; font-size: ").concat(V(s).rowTitleTextSize,"%; text-align: ").concat(V(s).rowTitleAlign,"; color: ").concat(hn(V(s).rowTitleColor))}),A=me(function(){return"white-space: pre-wrap; font-family: '".concat(V(s).rowText,"'; font-size: ").concat(V(s).rowTextTextSize,"%; text-align: ").concat(V(s).rowTextAlign,"; color: ").concat(hn(V(s).rowTextColor),"; padding: ").concat(V(l).rowTextPaddingX,"px ").concat(V(l).rowTextPaddingY,"% ").concat(V(l).rowTextPaddingX,"px ").concat(V(l).rowTextPaddingY,"%;")}),k=me(function(){var e=V(c).rowImgBorderRadiusIsPixels?"px":"%",t=[];if(t.push("width: ".concat(V(c).rowImageWidth,"%; margin-top: ").concat(V(c).rowImageMarginTop,"%; margin-bottom: ").concat(V(c).rowImageMarginBottom,"%;")),V(c).rowImgObjectFillIsOn){t.push("object-fit: ".concat(V(c).rowImgObjectFillStyle,";"));var i=V(c).rowImgObjectFillHeight;i&&t.push("height: ".concat(i,"px;"))}return t.push("border-radius: ".concat(V(c).rowImgBorderRadiusTopLeft).concat(e," ").concat(V(c).rowImgBorderRadiusTopRight).concat(e," ").concat(V(c).rowImgBorderRadiusBottomRight).concat(e," ").concat(V(c).rowImgBorderRadiusBottomLeft).concat(e,";")),V(c).rowImgOverflowIsOn&&t.push("overflow: hidden;"),V(c).rowImgBorderIsOn&&t.push("border: ".concat(V(c).rowImgBorderWidth,"px ").concat(V(c).rowImgBorderStyle," ").concat(hn(V(c).rowImgBorderColor),";")),t.join(" ")}),M=me(function(){return"padding-left: ".concat(V(l).rowButtonYPadding,"px; padding-right: ").concat(V(l).rowButtonYPadding,"px; padding-top: ").concat(V(l).rowButtonXPadding,"px; padding-bottom: ").concat(V(l).rowButtonXPadding,"px;")});function D(){if(t.row.btnPointAddon&&"sumaddon"===t.row.buttonTypeRadio&&void 0!==t.row.pointTypeRandom){var e=t.row.randomMax||0,i=t.row.randomMin||0,o=Math.floor(Math.random()*(e-i)+i),a=new d,c=Wt.get(t.row.pointTypeRandom);if(void 0!==c){if(c.belowZeroNotAllowed&&c.startingSum+o<0)return;var l=Vt.get(t.row.id),s=0;c.startingSum+=o,void 0!==l&&l.pointNum&&(s=l.pointNum),Vt.set(t.row.id,{multiple:0,isRowButton:!0,rndPoint:t.row.pointTypeRandom,pointNum:s+o}),a.set(c.id,o),wo(null,a,0,void 0,void 0,n)}}else if(t.row.buttonRandom){var u=[],v=t.row.objects.filter(function(e){return Zi(e.requireds)&&(!e.isNotSelectable||t.row.allowActivateUnselectable)});if(t.row.isWeightedRandom){for(var f=0,g=0;g<v.length;g++){f+=v[g].randomWeight||100}if(void 0!==t.row.buttonRandomNumber)for(var p=0;p<t.row.buttonRandomNumber;p++)for(var m=Math.floor(Math.random()*f),h=0,b=0;b<v.length;b++){var w=v[b];if(m<(h+=w.randomWeight||100)){w.isSelectableMultiple&&w.isMultipleUseVariable&&w.numMultipleTimesPluss?w.numMultipleTimesPluss>w.multipleUseVariable?yo(w,t.row,V(r).options):xo(w,t.row,V(r).options):V(r).activateObject(w,t.row);break}}}else if(void 0!==t.row.buttonRandomNumber)for(var T=0;T<t.row.buttonRandomNumber;T++){var I=0,S=void 0,y=void 0;do{S=v[y=Math.floor(Math.random()*v.length)],I++}while(t.row.onlyUnselectedChoices&&(-1!==u.indexOf(y)||Vt.has(S.id))&&I<100);S&&-1===u.indexOf(y)&&(u.push(y),S.isSelectableMultiple&&S.isMultipleUseVariable&&S.numMultipleTimesPluss?S.numMultipleTimesPluss>S.multipleUseVariable?yo(S,t.row,V(r).options):xo(S,t.row,V(r).options):V(r).activateObject(S,t.row))}}else if(void 0!==t.row.buttonId){var x=Gt.get(t.row.buttonId);void 0!==x&&(Vt.has(x.id)?t.row.buttonType&&(x.isTrue=!1,Vt.delete(x.id)):(x.isTrue=!0,Vt.set(x.id,{multiple:0,isVariable:!0})))}}function W(e){navigator.clipboard.writeText(t.row.imageSourceTooltip).then(function(){ni.labelText="Tooltip copied to clipboard.",ni.isOpen=!0}).catch(function(){console.log(t.row.imageSourceTooltip),ni.labelText="Tooltip text logged to developer console.",ni.isOpen=!0})}B(function(){if(t.row.deselectChoices&&!V(f))for(var e=0;e<t.row.objects.length;e++){var i=t.row.objects[e];if(i.isActive)if(i.isSelectableMultiple){if(i.isMultipleUseVariable){var o=i.multipleUseVariable;if(o>0)for(var n=0;n<o;n++)xo(i,t.row,V(r).options);else if(o<0)for(var a=o;a<0;a++)yo(i,t.row,V(r).options)}}else V(r).activateObject(i,t.row)}});var _=dc(),H=E(_),X=function(e){var o=sc(),n=E(o),r=function(e){var o=Ka(),n=E(o),r=function(e){var o=L(),n=U(o),r=function(e){var i=me(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Vt.has(t.row.buttonId)||V(p)});Me(e,{class:"row-button",onclickcapture:D,get disabled(){return V(i)},get style(){return V(M)},variant:"raised",children:function(e,i){De(e,{children:function(e,i){var o=L(),n=U(o);N(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),j(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e){var o=L(),n=U(o),r=function(e){var o=L(),n=U(o),r=function(e){var o=za();o.__contextmenu=W,Y(o,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.row.imageSourceTooltip}),Z(function(){Ke(o,"src",t.row.image),Ye(o,V(k)),Ke(o,"loading",i()?"eager":"lazy")}),j(e,o)},a=function(e){var o=Ga();Z(function(){Ke(o,"src",t.row.image),Ye(o,V(k)),Ke(o,"loading",i()?"eager":"lazy")}),j(e,o)};ve(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),j(e,o)};ve(n,function(e){t.row.image&&e(r)},!0),j(e,o)};ve(n,function(e){t.row.isButtonRow?e(r):e(a,!1)}),j(e,o)};ve(n,function(e){(1===t.row.template||t.windowWidth<=1280)&&e(r)});var a=fe(n,2),c=function(e){var t=L(),i=U(t);F(i,function(){return V(h)},function(e){var t=_a(),i=E(t);N(i,function(){return Xe.sanitize(V(h),Kt)}),Z(function(){return Ye(t,V(O))}),j(e,t)}),j(e,t)};ve(a,function(e){""!==t.row.title&&e(c)});var l=fe(a,2),s=function(e){var o=L(),n=U(o),r=function(e){var i=me(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Vt.has(t.row.buttonId)||V(p)});Me(e,{class:"row-button",onclickcapture:D,get disabled(){return V(i)},get style(){return V(M)},variant:"raised",children:function(e,i){De(e,{children:function(e,i){var o=L(),n=U(o);N(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),j(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e){var o=L(),n=U(o),r=function(e){var o=L(),n=U(o),r=function(e){var o=Ha();o.__contextmenu=W,Y(o,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.row.imageSourceTooltip}),Z(function(){Ke(o,"src",t.row.image),Ye(o,V(k)),Ke(o,"loading",i()?"eager":"lazy")}),j(e,o)},a=function(e){var o=Ya();Z(function(){Ke(o,"src",t.row.image),Ye(o,V(k)),Ke(o,"loading",i()?"eager":"lazy")}),j(e,o)};ve(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),j(e,o)};ve(n,function(e){t.row.image&&e(r)},!0),j(e,o)};ve(n,function(e){t.row.isButtonRow?e(r):e(a,!1)}),j(e,o)};ve(l,function(e){5===t.row.template&&t.windowWidth>1280&&e(s)});var u=fe(l,2),d=function(e){var t=L(),i=U(t);F(i,function(){return V(b)},function(e){var t=Za(),i=E(t);N(i,function(){return Xe.sanitize(V(b),Kt)}),Z(function(){return Ye(t,V(A))}),j(e,t)}),j(e,t)};ve(u,function(e){""!==t.row.titleText&&e(d)});var v=fe(u,2),f=function(e){var o=L(),n=U(o),r=function(e){var i=me(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Vt.has(t.row.buttonId)||V(p)});Me(e,{class:"row-button",onclickcapture:D,get disabled(){return V(i)},get style(){return V(M)},variant:"raised",children:function(e,i){De(e,{children:function(e,i){var o=L(),n=U(o);N(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),j(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e){var o=L(),n=U(o),r=function(e){var o=L(),n=U(o),r=function(e){var o=Ja();o.__contextmenu=W,Y(o,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.row.imageSourceTooltip}),Z(function(){Ke(o,"src",t.row.image),Ye(o,V(k)),Ke(o,"loading",i()?"eager":"lazy")}),j(e,o)},a=function(e){var o=Xa();Z(function(){Ke(o,"src",t.row.image),Ye(o,V(k)),Ke(o,"loading",i()?"eager":"lazy")}),j(e,o)};ve(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),j(e,o)};ve(n,function(e){t.row.image&&e(r)},!0),j(e,o)};ve(n,function(e){t.row.isButtonRow?e(r):e(a,!1)}),j(e,o)};ve(v,function(e){4===t.row.template&&t.windowWidth>1280&&e(f)}),j(e,o)},a=function(e){var o=L(),n=U(o),r=function(e){var o=oc(),n=U(o),r=E(n),a=function(e){var t=L(),i=U(t);F(i,function(){return V(h)},function(e){var t=Qa(),i=E(t);N(i,function(){return Xe.sanitize(V(h),Kt)}),Z(function(){return Ye(t,V(O))}),j(e,t)}),j(e,t)};ve(r,function(e){""!==t.row.title&&e(a)});var c=fe(r,2),l=function(e){var t=L(),i=U(t);F(i,function(){return V(b)},function(e){var t=ec(),i=E(t);N(i,function(){return Xe.sanitize(V(b),Kt)}),Z(function(){return Ye(t,V(A))}),j(e,t)}),j(e,t)};ve(c,function(e){""!==t.row.titleText&&e(l)});var s=fe(n,2),u=E(s),d=function(e){var i=me(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Vt.has(t.row.buttonId)||V(p)});Me(e,{class:"row-button",onclickcapture:D,get disabled(){return V(i)},get style(){return V(M)},variant:"raised",children:function(e,i){De(e,{children:function(e,i){var o=L(),n=U(o);N(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),j(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},f=function(e){var o=L(),n=U(o),r=function(e){var o=L(),n=U(o),r=function(e){var o=tc();o.__contextmenu=W,Y(o,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.row.imageSourceTooltip}),Z(function(){Ke(o,"src",t.row.image),Ye(o,V(k)),Ke(o,"loading",i()?"eager":"lazy")}),j(e,o)},a=function(e){var o=ic();Z(function(){Ke(o,"src",t.row.image),Ye(o,V(k)),Ke(o,"loading",i()?"eager":"lazy")}),j(e,o)};ve(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),j(e,o)};ve(n,function(e){t.row.image&&e(r)},!0),j(e,o)};ve(u,function(e){t.row.isButtonRow?e(d):e(f,!1)}),Z(function(){var e;Ye(n,"max-width: ".concat(100-V(v),"%")),Ye(s,"max-width: ".concat(null!==(e=V(v))&&void 0!==e?e:"","%"))}),j(e,o)},a=function(e){var o=L(),n=U(o),r=function(e){var o=lc(),n=U(o),r=E(n),a=function(e){var i=me(function(){return!t.row.buttonType&&void 0!==t.row.buttonId&&Vt.has(t.row.buttonId)||V(p)});Me(e,{class:"row-button",onclickcapture:D,get disabled(){return V(i)},get style(){return V(M)},variant:"raised",children:function(e,i){De(e,{children:function(e,i){var o=L(),n=U(o);N(n,function(){return void 0!==t.row.buttonText?t.row.buttonText:"Click"}),j(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},c=function(e){var o=L(),n=U(o),r=function(e){var o=L(),n=U(o),r=function(e){var o=nc();o.__contextmenu=W,Y(o,function(e,t){return null==Tn?void 0:Tn(e,t)},function(){return t.row.imageSourceTooltip}),Z(function(){Ke(o,"src",t.row.image),Ye(o,V(k)),Ke(o,"loading",i()?"eager":"lazy")}),j(e,o)},a=function(e){var o=rc();Z(function(){Ke(o,"src",t.row.image),Ye(o,V(k)),Ke(o,"loading",i()?"eager":"lazy")}),j(e,o)};ve(n,function(e){t.row.imageSourceTooltip?e(r):e(a,!1)}),j(e,o)};ve(n,function(e){t.row.image&&e(r)},!0),j(e,o)};ve(r,function(e){t.row.isButtonRow?e(a):e(c,!1)});var l=fe(n,2),s=E(l),u=function(e){var t=L(),i=U(t);F(i,function(){return V(h)},function(e){var t=ac(),i=E(t);N(i,function(){return Xe.sanitize(V(h),Kt)}),Z(function(){return Ye(t,V(O))}),j(e,t)}),j(e,t)};ve(s,function(e){""!==t.row.title&&e(u)});var d=fe(s,2),f=function(e){var t=L(),i=U(t);F(i,function(){return V(b)},function(e){var t=cc(),i=E(t);N(i,function(){return Xe.sanitize(V(b),Kt)}),Z(function(){return Ye(t,V(A))}),j(e,t)}),j(e,t)};ve(d,function(e){""!==t.row.titleText&&e(f)}),Z(function(){var e;Ye(n,"max-width: ".concat(null!==(e=V(v))&&void 0!==e?e:"","%")),Ye(l,"max-width: ".concat(100-V(v),"%"))}),j(e,o)};ve(n,function(e){3===t.row.template&&e(r)},!0),j(e,o)};ve(n,function(e){2===t.row.template?e(r):e(a,!1)}),j(e,o)};ve(n,function(e){t.row.template>=4||1===t.row.template||t.windowWidth<=1280?e(r):e(a,!1)}),Z(function(){var e,i;J(o,1,"row gx-0 row-".concat(null!==(e=t.row.id)&&void 0!==e?e:""," row-").concat(null!==(i=t.row.id)&&void 0!==i?i:"","-header")),Ye(o,""!==t.row.title?V(C):"")}),j(e,o)};ve(H,function(e){V(f)&&e(X)});var K=fe(H,2),Q=function(e){var n=uc(),a=E(n),c=function(e){var o=L(),n=U(o);_e(n,17,function(){return V(T)},Je,function(e,o,n){R(Ea(e,{get row(){return t.row},get choice(){return V(o).choice},index:n,get windowWidth(){return t.windowWidth},get preloadImages(){return i()}}),function(e){return z(r,e,!0)},function(){return V(r)})}),j(e,o)},l=function(e){var n=L(),a=U(n),c=function(e){var n=L(),a=U(n);_e(a,17,function(){return V(I)},Je,function(e,n,a){R(Ea(e,{get row(){return t.row},get choice(){return V(n).choice},index:a,get windowWidth(){return t.windowWidth},get preloadImages(){return i()},get isBackpack(){return o()},get mainDiv(){return t.mainDiv}}),function(e){return z(r,e,!0)},function(){return V(r)})}),j(e,n)},l=function(e){var n=L(),a=U(n);_e(a,17,function(){return t.row.objects},Je,function(e,n,a){R(Ea(e,{get row(){return t.row},get choice(){return V(n)},index:a,get windowWidth(){return t.windowWidth},get preloadImages(){return i()},get isBackpack(){return o()},get mainDiv(){return t.mainDiv}}),function(e){return z(r,e,!0)},function(){return V(r)})}),j(e,n)};ve(a,function(e){t.row.isGroupRow?e(c):e(l,!1)},!0),j(e,n)};ve(a,function(e){t.row.isResultRow?e(c):e(l,!1)}),Z(function(){var e;return J(n,1,"row gx-0 m-0 p-0 ".concat(null!==(e=V(m))&&void 0!==e?e:""))}),j(e,n)};ve(K,function(e){V(f)&&e(Q)}),Z(function(){var e;J(_,1,"row-".concat(null!==(e=t.row.id)&&void 0!==e?e:"","-bg text-center").concat(V(f)?"":" hidden")),Ye(_,V(x))}),it(_,"clientWidth",function(e){return z(u,e)}),j(e,_),P()}Qe(["contextmenu"]);var fc=D("<!> <!>",1),gc=D('<div class="p-0 col-12"><!></div>'),pc=D("<div><!></div>"),mc=D('<div class="container-fluid p-0 h-100"><div class="row gx-0"></div></div>'),hc=D("<!> <!> <!>",1);function bc(e,t){$(t,!0);var i=G(t,"open",7),o=q(0),n=q(void 0),r=q(void 0),a=me(function(){var e=[];return e.push("overflow-wrap: break-word;"),e.push("white-space: normal;"),app.styling.useBackpackDesign?(app.styling.backpackBgImage&&e.push("background-image: url('".concat(app.styling.backpackBgImage,"');")),e.push("background-color: ".concat(hn(app.styling.backpackBgColor),";")),app.styling.isBackpackBgRepeat?e.push("background-repeat: repeat;"):app.styling.isBackpackBgFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")):(app.styling.backgroundImage&&e.push("background-image: url('".concat(app.styling.backgroundImage,"');")),e.push("background-color: ".concat(hn(app.styling.backgroundColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;")),e.join(" ")}),c=me(function(){return"dlgBackpack"!==ii.currentDialog?"close":""}),l=me(function(){return"dlgBackpack"!==ii.currentDialog?"close":""}),s=me(function(){return void 0!==app.styling.backPackWidth?app.styling.backPackWidth:1200});Ce(e,{get escapeKeyAction(){return V(c)},get scrimClickAction(){return V(l)},get surface$style(){var e;return"width: ".concat(null!==(e=V(s))&&void 0!==e?e:"","px; max-width: 100vw;")},get onSMUIDialogClosed(){return t.onclose},get open(){return i()},set open(e){i(e)},children:function(e,t){var i=hc(),c=U(i);Oe(c,{class:"p-0 m-0 row",tabindex:0,autofocus:!0,children:function(e,t){var i=gc(),o=E(i);Me(o,{onclickcapture:function(){return function(e){return dn.apply(this,arguments)}(V(n))},class:"h-100",children:function(e,t){var i=fc(),o=U(i);ot(o,{class:"mdi mdi-file-image"});var n=fe(o,2);De(n,{children:function(e,t){var i=Ie("Download Image");j(e,i)},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}});var l=fe(c,2);Ae(l,{id:"backpackDialog",class:"p-0",children:function(e,t){var i=mc(),c=E(i);_e(c,21,function(){return app.backpack},Je,function(e,t){var i=pc();vc(E(i),{get row(){return V(t)},get windowWidth(){return V(o)},get preloadImages(){return app.preloadImages},isBackpack:!0}),Z(function(){return J(i,1,X(V(t).width?"col-6":"col-12"))}),j(e,i)}),R(c,function(e){return z(r,e)},function(){return V(r)}),R(i,function(e){return z(n,e)},function(){return V(n)}),Z(function(){return Ye(i,V(a))}),it(i,"clientWidth",function(e){return z(o,e)}),j(e,i)},$$slots:{default:!0}});var s=fe(l,2);Fe(s,{class:"p-0",style:"min-height: 36px",children:function(e,t){Me(e,{action:"close",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Close");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}}),P()}var wc=D("<div><!></div>"),Tc=function(e,t){e.preventDefault(),t()},Ic=D('<span class="picture-inner-text"><!></span>'),Sc=D('<span class="picture-inner-text"><!></span>'),yc=D('<div class="picture-inner"><!></div>'),xc=D('<div class="preview-container"><canvas tabindex="0"></canvas> <!></div> <!> <!> <!>',1),Cc=D("<div><!></div> <!> <!>",1),Oc=D("<div><!></div>"),Ac=D('<div id="picture-input" class="picture-input"><!> <input type="file"/></div>');function kc(e,t){$(t,!0);var r,d,f=G(t,"width",19,function(){return Number.MAX_SAFE_INTEGER}),g=G(t,"height",19,function(){return Number.MAX_SAFE_INTEGER}),p=G(t,"margin",3,0),m=G(t,"accept",3,"image/*, image/avif"),b=G(t,"capture",3,null),w=G(t,"size",19,function(){return Number.MAX_SAFE_INTEGER}),T=G(t,"name",3,null),I=G(t,"id",3,null),S=G(t,"buttonClass",3,""),y=G(t,"removeButtonClass",3,""),x=G(t,"aspectButtonClass",3,""),C=G(t,"prefill",11,""),O=G(t,"prefillOptions",19,function(){return{}}),k=G(t,"crop",3,!0),D=G(t,"radius",3,0),F=G(t,"removable",3,!1),W=G(t,"hideChangeButton",3,!1),_=G(t,"autoToggleAspectRatio",3,!1),H=G(t,"toggleAspectRatio",3,!1),Y=G(t,"changeOnClick",3,!0),X=G(t,"plain",3,!1),K=G(t,"zIndex",3,1e4),Q=G(t,"alertOnError",3,!0),ee=G(t,"customStrings",19,function(){return{}}),ie=q(!1),oe=q(0),ne=q(0),re=q(!1),ae=q(0),ce=q(0),le=q(1),se=q(0),ue=q(""),de=q(null),ge=q(null),pe=q(""),he=q(0),be=q(0),we=q(""),Te=q(!1),ye=q(0),xe=q(0),Ce=q(0),Oe=q(null),Ae=q(s([])),ke={upload:"<p>Your device does not support file uploading.</p>",drag:"Drag an image or <br>click here to select a file",tap:"Tap here to select a photo <br>from your gallery",change:"Change Photo",aspect:"Landscape/Portrait",remove:"Remove Photo",select:"Select a Photo",selected:"<p>Photo successfully selected!</p>",fileSize:"The file size exceeds the limit",fileType:"This file type is not supported."},Be=q(void 0),Fe=me(function(){if(navigator.userAgent.match(/(Android (1\.0|1\.1|1\.5|1\.6|2\.0|2\.1))|(Windows Phone (OS 7|8\.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1\.0|2\.0|2\.5|3\.0))/))return!1;var e=document.createElement("input");return e.type="file",!e.disabled}),Re=me(function(){return!(!window.FileReader||!window.CanvasRenderingContext2D)}),je=me(function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&!("ontouchstart"in window||navigator.maxTouchPoints)}),Pe=me(function(){return V(re)?"dragging-over":""}),$e=me(function(){return"".concat(Math.min(.04*V(ne),21),"px")});function Ve(){if(ee())for(var e in ee())e in ke&&"string"==typeof ee()[e]&&(ke[e]=ee()[e])}function qe(){V(ie)&&!Y()||ze(),t.onclick&&t.onclick()}function We(){He()&&V(de)&&Ee(V(de))}function Le(){V(je)&&z(re,!1)}function Ue(e){var i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.target,r="drop"===e.type?null===(i=e.dataTransfer)||void 0===i?void 0:i.files:n.files;if(r&&0!==r.length){if(r[0].size<=0||r[0].size>1024*Number(w())*1024)return t.onerror&&t.onerror({type:"fileSize",fileSize:r[0].size,fileType:r[0].type,fileName:r[0].name,message:"".concat(ke.fileSize," (").concat(w(),"MB)")}),void(Q()&&alert("".concat(ke.fileSize," (").concat(w(),"MB)")));if(r[0].name!==V(pe)||r[0].size!==V(he)||V(be)!==r[0].lastModified){if(z(ge,r[0],!0),z(pe,r[0].name,!0),z(he,r[0].size,!0),z(be,r[0].lastModified,!0),z(we,r[0].type.split(";")[0],!0),"image/*, image/avif"===m()){if(!V(we).startsWith("image/"))return}else if(-1===V(Ae).indexOf(V(we)))return t.onerror&&t.onerror({type:"fileType",fileSize:V(he),fileType:V(we),fileName:V(pe),message:ke.fileType}),void(Q()&&alert(ke.fileType));z(ie,!0),z(ue,""),V(Re)&&V(ge)?Ne(V(ge),o):o?t.onprefill&&t.onprefill():t.onchange&&t.onchange(V(ue))}}}function Ne(e,i){!function(e,t){var i=new FileReader;i.onload=function(e){var i=new DataView(e.target.result);if(65496!==i.getUint16(0,!1))return t(-2);for(var o=i.byteLength,n=2;n<o;){var r=i.getUint16(n,!1);if(n+=2,65505===r){if(1165519206!==i.getUint32(n+=2,!1))return t(-1);var a=18761===i.getUint16(n+=6,!1);n+=i.getUint32(n+4,a);var c=i.getUint16(n,a);n+=2;for(var l=0;l<c;l++)if(274===i.getUint16(n+12*l,a))return t(i.getUint16(n+12*l+8,a))}else{if(65280&~r)break;n+=i.getUint16(n,!1)}}return t(-1)},i.readAsArrayBuffer(e.slice(0,65536))}(e,function(o){!function(e){z(Te,!1),8===e?z(Te,-Math.PI/2):6===e?z(Te,Math.PI/2):3===e&&z(Te,-Math.PI)}(o);var n=new FileReader;n.onload=function(e){z(ue,e.target.result,!0),z(de,new Image,!0),V(de).onload=function(){_()&&(Ze(V(ae),V(ce))!==Ze(V(de).width,V(de).height)&&Je());Ee(V(de))},V(de).src=V(ue),!i&&t.onchange&&t.onchange(V(ue))},n.readAsDataURL(e)})}function Ee(e){z(ye,e.width,!0),z(xe,e.height,!0),z(Ce,e.width/e.height);var t=0,i=0,o=V(ne),n=V(oe),r=V(ne)/V(oe);k()?V(Ce)>=r?(o=n*V(Ce),t=(V(ne)-o)/2):(n=o/V(Ce),i=(V(oe)-n)/2):V(Ce)>=r?(n=o/V(Ce),i=(V(oe)-n)/2):(o=n*V(Ce),t=(V(ne)-o)/2),V(Be)&&(V(Be).style.background="none",V(Be).width=V(ne)*V(le),V(Be).height=V(oe)*V(le),V(Oe)&&(V(Oe).setTransform(1,0,0,1,0,0),V(Oe).clearRect(0,0,V(Be).width,V(Be).height),V(Te)&&void 0===e.style.imageOrientation&&(V(Oe).translate(t*V(le),i*V(le)),V(Oe).translate(o/2*V(le),n/2*V(le)),V(Oe).rotate(V(Te)),t=-o/2,i=-n/2),V(Oe).drawImage(e,t*V(le),i*V(le),o*V(le),n*V(le))))}function ze(){d.click()}function Ge(){d.value="",d.type="",d.type="file",z(pe,""),z(we,""),z(he,0),z(be,0),z(ie,!1),z(ue,""),z(ge,null),z(de,null),V(Be)&&(V(Be).style.backgroundColor="rgba(200,200,200,.25)",V(Be).width=V(ne)*V(le)),t.onremove&&t.onremove()}function _e(){Je(),V(de)&&Ee(V(de));var e=Ze(V(ae),V(ce));t.onaspectratiochange&&t.onaspectratiochange(e)}function He(){var e=V(ae)/V(ce),t=r.clientWidth;return!!t&&(!(!H()&&!_()&&t===V(se))&&(z(se,t,!0),z(ne,Math.min(V(se)-2*Number(p()),V(ae)),!0),z(oe,V(ne)/e),!0))}function Ze(e,t){return e>t?"landscape":e<t?"portrait":"square"}function Je(){var e;e=V(ae),z(ae,V(ce),!0),z(ce,e,!0),He()}function Xe(e,r){var l=window.File;try{new l([],"")}catch(c){l=function(e){function t(e,i){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),h(n=o(this,t,[e,r]),"lastModifiedDate",new Date),h(n,"lastModified",+n.lastModifiedDate),h(n,"name",void 0),n.name=i,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(t,e),function(e,t,o){return t&&i(e.prototype,t),o&&i(e,o),Object.defineProperty(e,"prototype",{writable:!1}),e}(t)}(n(Blob))}if(r=Object.assign({},r),"object"===u(e))return z(ie,!0),z(ue,""),void(V(Re)?Ne(e,!0):t.onprefill&&t.onprefill());-1===e.indexOf("data:")&&(e+=-1!==e.indexOf("?")?"&_="+(new Date).getTime():"?_="+(new Date).getTime());var s=new Headers;s.append("Accept","image/*, image/avif"),fetch(e,{method:"GET",mode:"cors",headers:s}).then(function(e){return e.blob()}).then(function(t){var i={target:{files:[]}},o=r.fileName||e.split("/").slice(-1)[0],n=r.mediaType||t.type||"image/"+(r.fileType||o.split("?")[0].split(".").slice(-1)[0]);"image/svg"===(n=n.replace("jpg","jpeg").replace("image/svg","image/svg+xml"))&&(n="image/svg+xml"),i.target.files[0]=new l([t],o,{type:n}),Ue(i,!0)}).catch(function(e){t.onerror&&t.onerror({type:"failedPrefill",message:"Failed loading prefill image: "+e}),Q()&&alert("Failed loading prefill image: "+e)})}B(function(){C()&&Xe(C(),O())}),te(v(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,A();case 1:Ve(),C()&&Xe(C(),O()),window.addEventListener("resize",We),We(),V(Re)&&V(Be)&&(z(le,Math.round(window.devicePixelRatio||1),!0),V(Be).getContext&&(z(Oe,V(Be).getContext("2d"),!0),V(Oe)&&V(Oe).scale(V(le),V(le)))),"image/*, image/avif"!==m()&&z(Ae,m().split(",").map(function(e){return e.trim()}),!0),z(ae,f()!=Number.MAX_SAFE_INTEGER?Number(f()):r.clientWidth,!0),z(ce,g()!=Number.MAX_SAFE_INTEGER?Number(g()):V(ae),!0),z(ne,V(ae),!0),z(oe,V(ce),!0);case 2:return e.a(2)}},e)}))),M(function(){window.removeEventListener("resize",We)});var Qe=Ac(),tt=E(Qe),it=function(e){var t=wc(),i=E(t);N(i,function(){return ke.upload}),j(e,t)},ot=function(e){var t=L(),i=U(t),o=function(e){var t=xc(),i=U(t),o=E(i);o.__click=[Tc,qe],R(o,function(e){return z(Be,e)},function(){return V(Be)});var n=fe(o,2),r=function(e){var t=yc(),i=E(t),o=function(e){var t=Ic(),i=E(t);N(i,function(){return ke.drag}),j(e,t)},n=function(e){var t=Sc(),i=E(t);N(i,function(){return ke.tap}),j(e,t)};ve(i,function(e){V(je)?e(o):e(n,!1)}),Z(function(e){var i,o,n,r;return Ye(t,"top: -".concat(null!==(i=V(oe))&&void 0!==i?i:"","px; margin-bottom: -").concat(null!==(o=V(oe))&&void 0!==o?o:"","px; font-size: ").concat(null!==(n=V($e))&&void 0!==n?n:"","; border-radius: ").concat(null!==(r=D())&&void 0!==r?r:"","%; z-index: ").concat(null!=e?e:"",";"))},[function(){return parseInt(K()+"")+2}]),j(e,t)};ve(n,function(e){V(ie)||X()||e(r)});var a=fe(i,2),c=function(e){Me(e,{variant:"raised",onclick:ze,get class(){return S()},children:function(e,t){De(e,{children:function(e,t){var i=Ie();Z(function(){return Se(i,ke.change)}),j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(a,function(e){V(ie)&&!W()&&e(c)});var l=fe(a,2),s=function(e){Me(e,{variant:"raised",onclick:Ge,get class(){return y()},children:function(e,t){De(e,{children:function(e,t){var i=Ie();Z(function(){return Se(i,ke.remove)}),j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(l,function(e){V(ie)&&F()&&e(s)});var u=fe(l,2),d=function(e){Me(e,{variant:"raised",onclick:_e,get class(){return x()},children:function(e,t){De(e,{children:function(e,t){var i=Ie();Z(function(){return Se(i,ke.aspect)}),j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(u,function(e){V(ie)&&H()&&f()!==g()&&e(d)}),Z(function(e){var t,n,r,a,c;Ye(i,"max-width: ".concat(null!==(t=V(ne))&&void 0!==t?t:"","px; height: ").concat(null!==(n=V(oe))&&void 0!==n?n:"","px; border-radius: ").concat(null!==(r=D())&&void 0!==r?r:"","%;")),J(o,1,"picture-preview ".concat(null!==(a=V(Pe))&&void 0!==a?a:"")),Ye(o,"height: ".concat(null!==(c=V(oe))&&void 0!==c?c:"","px; z-index: ").concat(null!=e?e:"",";"))},[function(){return parseInt(K()+"")+1}]),et("drag",o,function(e){e.stopPropagation(),e.preventDefault()}),et("dragover",o,function(e){e.stopPropagation(),e.preventDefault()}),et("dragstart",o,function(e){e.stopPropagation(),e.preventDefault()}),et("dragend",o,function(e){e.stopPropagation(),e.preventDefault()}),et("dragenter",o,function(e){e.stopPropagation(),e.preventDefault(),V(je)&&z(re,!0)}),et("dragleave",o,function(e){e.stopPropagation(),e.preventDefault(),Le()}),et("drop",o,function(e){e.stopPropagation(),e.preventDefault(),function(e){Le(),Ue(e)}(e)}),j(e,t)},n=function(e){var t=Oc(),i=E(t),o=function(e){Me(e,{variant:"raised",onclick:ze,get class(){return S()},children:function(e,t){De(e,{children:function(e,t){var i=Ie();Z(function(){return Se(i,ke.select)}),j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},n=function(e){var t=Cc(),i=U(t),o=E(i);N(o,function(){return ke.selected});var n=fe(i,2),r=function(e){Me(e,{variant:"raised",onclick:ze,get class(){return S()},children:function(e,t){De(e,{children:function(e,t){var i=Ie();Z(function(){return Se(i,ke.change)}),j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(n,function(e){W()||e(r)});var a=fe(n,2),c=function(e){Me(e,{variant:"raised",onclick:Ge,get class(){return y()},children:function(e,t){De(e,{children:function(e,t){var i=Ie();Z(function(){return Se(i,ke.remove)}),j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(a,function(e){F()&&e(c)}),j(e,t)};ve(i,function(e){V(ie)?e(n,!1):e(o)}),j(e,t)};ve(i,function(e){V(Re)?e(o):e(n,!1)},!0),j(e,t)};ve(tt,function(e){V(Fe)?e(ot,!1):e(it)});var nt=fe(tt,2);nt.__change=Ue,R(nt,function(e){return d=e},function(){return d}),R(Qe,function(e){return r=e},function(){return r}),Z(function(){Ke(nt,"name",T()),Ke(nt,"id",I()),Ke(nt,"accept",m()),Ke(nt,"capture",b())}),j(e,Qe),P()}Qe(["click","change"]);var Bc=D('<div class="mb-4 text-left"><!></div>'),Mc=D('<img class="d-block w-100" alt="Converted" loading="lazy"/> <!> <!>',1),Dc=D('<div class="col col-lg-4"><!> <!></div> <div class="col col-lg-8"><!></div>',1),Fc=D('<div><img alt="Cropper" loading="lazy" class="cropper-image"/></div>'),Rc=D('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div></div> <div class="mt-2"><!></div> <!>',1),jc=D('<div class="pt-3 col col-12"><img class="d-block w-100" alt="Compress" loading="lazy"/></div>'),Pc=D('<div class="row justify-center"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div> <!></div>'),$c=D('<div class="col col-lg-4"><div><!></div> <div><b>Before:</b> <b>After:</b> </div> <!></div> <div class="col-lg-8"><!> <!> <!></div>',1),Vc=D('<div class="container"><!> <div class="row"><!></div></div>'),qc=D('<div class="col-sm-6 col-12"><!></div> <div class="col-sm-6 col-12"><!></div>',1),Wc=D("<!> <!> <!>",1);function Lc(e,t){$(t,!0);var i,o=G(t,"open",7),n=G(t,"imgObject",7),r=G(t,"canHaveURL",3,!0),a=G(t,"isDeselect",3,!1),c=G(t,"closeHandler",3,function(e){}),l=q("Cropper"),s=q(100),u=q(90),d=q(1),v=q(1),f=q(void 0),g=q(void 0),p=q(void 0),m=q(!1),h=[],b=!1,w=me(function(){if(V(g)){var e=(t=V(g),(i=t.match(/^data:.+;base64,(.+)$/))?i[1]:t).length*(3/4)-2;return Math.round(e/1024)}var t,i;return 0}),T=me(function(){if(V(p)){var e=V(p).split(",")[1].length*(3/4)-2;return Math.round(e/1024)}return 0});function I(){var e=k(n(),t.imgProp);e&&C(e)}function S(){V(p)&&A(n(),t.imgProp,V(p))}function y(){i&&i.setAspectRatio(V(v)/V(d))}function x(){if(i&&V(f)){var e=i.getCroppedCanvas().toDataURL("image/webp");V(f).src=e,A(n(),t.imgProp,e)}}function C(e){h.push(e),b||O()}function O(){var e=h.shift();if(e){b=!0;var t=document.createElement("canvas"),i=t.getContext("2d"),o=new Image;o.crossOrigin="anonymous",o.onload=function(){var e=V(s)/100,n=o.width*e,r=o.height*e;t.setAttribute("width",n.toString()),t.setAttribute("height",r.toString()),null==i||i.drawImage(o,0,0,n,r),z(p,t.toDataURL("image/webp",V(u)/100),!0),O()},o.src=e}else b=!1}function A(e,t,o){e&&(e[t]=o,z(g,o,!0),i&&i.replace(o),C(o))}function k(e,t){return e&&e[t]?e[t]:""}function M(){if(n().parentId){var e=Ut.get(n().parentId);if(void 0!==e)return void(e.row.defaultAspectWidth=V(v))}if(n().id){var t=Lt.get(n().id);if(void 0!==t)return void(t.defaultAspectWidth=V(v));var i=Ut.get(n().id);if(void 0!==i)return void(i.row.defaultAspectWidth=V(v))}}function D(){if(n().parentId){var e=Ut.get(n().parentId);if(void 0!==e)return void(e.row.defaultAspectHeight=V(d))}if(n().id){var t=Lt.get(n().id);if(void 0!==t)return void(t.defaultAspectHeight=V(d));var i=Ut.get(n().id);if(void 0!==i)return void(i.row.defaultAspectHeight=V(d))}}B(function(){return V(f)?i=new nt(V(f),{viewMode:3,dragMode:"move"}):i&&i.destroy(),function(){i&&i.destroy()}}),te(function(){!function(){if(n().parentId){var e=Ut.get(n().parentId);return void(void 0!==e&&(void 0!==e.row.defaultAspectHeight&&z(d,e.row.defaultAspectHeight,!0),void 0!==e.row.defaultAspectWidth&&z(v,e.row.defaultAspectWidth,!0)))}if(n().id){var t=Lt.get(n().id);if(void 0!==t)return void 0!==t.defaultAspectHeight&&z(d,t.defaultAspectHeight,!0),void(void 0!==t.defaultAspectWidth&&z(v,t.defaultAspectWidth,!0));var i=Ut.get(n().id);if(void 0!==i)void 0!==i.row.defaultAspectHeight&&z(d,i.row.defaultAspectHeight,!0),void 0!==i.row.defaultAspectWidth&&z(v,i.row.defaultAspectWidth,!0)}}();var e=k(n(),t.imgProp);if(e){z(g,e,!0);var i=document.createElement("canvas"),o=i.getContext("2d"),r=new Image;r.crossOrigin="anonymous",r.onload=function(){var e=V(s)/100,t=r.width*e,n=r.height*e;i.setAttribute("width",t.toString()),i.setAttribute("height",n.toString()),null==o||o.drawImage(r,0,0,t,n),z(p,i.toDataURL("image/webp",V(u)/100),!0)},r.src=V(g)}}),Ce(e,{surface$style:"width: 1200px; max-width: calc(100vw - 32px);",style:"text-align: center",onSMUIDialogClosed:function(e){c()(e),t.onclose()},get open(){return o()},set open(e){o(e)},children:function(e,i){var c=Wc(),g=U(c);Oe(g,{tabindex:0,autofocus:!0,children:function(e,t){var i=Ie("Image");j(e,i)},$$slots:{default:!0}});var p=fe(g,2);Ae(p,{children:function(e,i){var a=Vc(),c=E(a),g=function(e){var t=Bc(),i=E(t);ke(i,{label:function(e){var t=Ie("Uploaded Image or External URL.");j(e,t)},children:function(e,t){Be(e,{color:"secondary",class:"switch-scale",get checked(){return V(m)},set checked(e){z(m,e,!0)}})},$$slots:{label:!0,default:!0}}),j(e,t)};ve(c,function(e){r()&&e(g)});var p=fe(c,2),h=E(p),b=function(e){var i=Dc(),o=U(i),r=E(o);Pn(r,{get value(){return(null===(e=n())||void 0===e?void 0:e.imageLink)||"";var e},set value(e){!function(e){n().imageLink=e}(e)},label:"External Image URL",variant:"filled"});var a=fe(r,2);Me(a,{onclick:function(){A(n(),t.imgProp,n().imageLink)},variant:"raised",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Convert URL to Image");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var c=fe(o,2),l=E(c),s=function(e){var i=Mc(),o=U(i),r=fe(o,2);Me(r,{onclick:function(){A(n(),t.imgProp,""),delete n().imageLink},variant:"raised",class:"my-3",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Remove Photo");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var a=fe(r,2);Pn(a,{get value(){return(null===(e=n())||void 0===e?void 0:e.imageSourceTooltip)||"";var e},set value(e){!function(e){n().imageSourceTooltip=e}(e)},label:"Tooltip That Shows When Hovering over it",variant:"filled"}),Z(function(e){return Ke(o,"src",e)},[function(){return k(n(),t.imgProp)}]),j(e,i)};ve(l,function(e){void 0!==k(n(),t.imgProp)&&""!==k(n(),t.imgProp)&&e(s)}),j(e,i)},C=function(e){var i=$c(),r=U(i),a=E(r),c=E(a),g=function(e){var i=me(function(){return Do(k(n(),t.imgProp))?k(n(),t.imgProp):""});kc(e,{hideChangeButton:!0,removable:!0,crop:!1,get prefill(){return V(i)},onchange:function(e){A(n(),t.imgProp,e)},onremove:function(){return A(n(),t.imgProp,"")}})};ve(c,function(e){o()&&e(g)});var p,m=fe(a,2),h=fe(E(m)),b=fe(h,2),C=fe(m,2);Pn(C,{get value(){return(null===(e=n())||void 0===e?void 0:e.imageSourceTooltip)||"";var e},set value(e){!function(e){n().imageSourceTooltip=e}(e)},label:"Tooltip That Shows When Hovering over it",variant:"filled"});var O=fe(r,2),B=E(O);Ne(B,{tabs:["Cropper","Compress"],get active(){return V(l)},set active(e){z(l,e,!0)},tab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H;Ee(e,{get tab(){return t()},children:function(e,i){De(e,{children:function(e,i){var o=Ie();Z(function(){return Se(o,t())}),j(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{tab:!0}});var F=fe(B,2),P=me(function(){return"Cropper"!==V(l)?"display: none;":""});ze(F,{role:"tabpanel",variant:"unelevated",get style(){return V(P)},children:function(e,i){Ge(e,{children:function(e,i){var o=Rc(),r=U(o),a=E(r);Pn(E(a),{onchange:M,label:"Width Aspect",type:"number",variant:"filled",get value(){return V(v)},set value(e){z(v,e,!0)}});var c=fe(a,2);Pn(E(c),{onchange:D,label:"Height Aspect",type:"number",variant:"filled",get value(){return V(d)},set value(e){z(d,e,!0)}});var l=fe(c,2),s=E(l);Me(s,{onclick:y,variant:"raised",style:"height: 100%;",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Change Aspect");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var u=fe(r,2),g=E(u);Me(g,{onclick:x,variant:"raised",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Crop Image");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var p=fe(u,2),m=function(e){var i=Fc(),o=E(i);R(o,function(e){return z(f,e)},function(){return V(f)}),Z(function(e){return Ke(o,"src",e)},[function(){return k(n(),t.imgProp)}]),j(e,i)};ve(p,function(e){Do(k(n(),t.imgProp))&&e(m)}),j(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}});var $=fe(F,2),q=me(function(){return"Compress"!==V(l)?"display: none;":""});ze($,{role:"tabpanel",variant:"unelevated",get style(){return V(q)},children:function(e,i){Ge(e,{children:function(e,i){var o=Pc(),r=E(o);Pn(E(r),{onchange:I,label:"Image Scale",type:"number",variant:"filled",get value(){return V(s)},set value(e){z(s,e,!0)}});var a=fe(r,2);Pn(E(a),{onchange:I,label:"Image Quality",type:"number",variant:"filled",get value(){return V(u)},set value(e){z(u,e,!0)}});var c=fe(a,2),l=E(c);Me(l,{onclick:S,variant:"raised",style:"height: 100%;",children:function(e,t){De(e,{children:function(e,t){var i=Ie("Compress Image");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var d=fe(c,2),v=function(e){var i=jc(),o=E(i);Z(function(e){return Ke(o,"src",e)},[function(){return k(n(),t.imgProp)}]),j(e,i)};ve(d,function(e){Do(k(n(),t.imgProp))&&e(v)}),j(e,o)},$$slots:{default:!0}})},$$slots:{default:!0}}),Z(function(e){var t,i;p=J(m,1,"p-2",null,p,e),Se(h,"".concat(null!==(t=V(w))&&void 0!==t?t:""," kB|")),Se(b,"".concat(null!==(i=V(T))&&void 0!==i?i:""," kB"))},[function(){return{hidden:!k(n(),t.imgProp)}}]),j(e,i)};ve(h,function(e){V(m)?e(b):e(C,!1)}),j(e,a)},$$slots:{default:!0}});var h=fe(p,2);Fe(h,{children:function(e,t){var i=L(),o=U(i),n=function(e){var t=qc(),i=U(t),o=E(i);Me(o,{action:"deselect",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Deselect Choice");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var n=fe(i,2),r=E(n);Me(r,{action:"close",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Close");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),j(e,t)},r=function(e){Me(e,{action:"close",children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("Close");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(o,function(e){a()?e(n):e(r,!1)}),j(e,i)},$$slots:{default:!0}}),j(e,c)},$$slots:{default:!0}}),P()}var Uc=D('<div class="row pt-4"><div class="col-12"><!></div></div>'),Nc=D('<div class="container-fluid"><div class="row"><div class="col-6"><!></div> <div class="col-6"><!></div></div></div>'),Ec=D("<!> <!> <!>",1);function zc(e,t){$(t,!0);var i=G(t,"changeNum",7),o=G(t,"minVal",3,0),n=G(t,"maxVal",3,0);Ce(e,{get open(){return t.open},set open(e){!function(e){!e&&t.onclose()}(e)},surface$style:"width: 400px; max-width: calc(100vw - 32px);",children:function(e,r){var a=Ec(),c=U(a);Oe(c,{class:"px-3 pb-0 toolbar toolbar__dialog",children:function(e,t){var i=Ie("Counter");j(e,i)},$$slots:{default:!0}});var l=fe(c,2);Ae(l,{children:function(e,t){var r=Uc(),a=E(r);Pn(E(a),{label:"Number of Count",variant:"filled",type:"number",onchange:function(){i(Math.min(Math.max(i(),o()),n()))},get input$min(){return o()},get input$max(){return n()},get value(){return i()},set value(e){i(e)}}),j(e,r)},$$slots:{default:!0}});var s=fe(l,2);Fe(s,{children:function(e,r){var a=Nc(),c=E(a),l=E(c),s=E(l);Me(s,{children:function(e,t){De(e,{children:function(e,t){var i=Ie("Cancel");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}});var u=fe(l,2),d=E(u);Me(d,{defaultAction:!0,onclickcapture:function(){return t.submit(Math.min(Math.max(i(),o()),n()))},children:function(e,t){De(e,{class:"dialog-actions--btn",children:function(e,t){var i=Ie("OK");j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}}),j(e,a)},$$slots:{default:!0}}),j(e,a)},$$slots:{default:!0}}),P()}var Gc=D("<!> <!>",1),_c=D("<!> <!>",1),Hc=D("<!> <!>",1),Yc=D("<!> <!>",1),Zc=D("<!> <!>",1),Jc=D("<!> <!>",1),Xc=D("<!> <!>",1),Kc=D("<!> <!>",1),Qc=D("<!> <!> <!> <!> <!> <!> <!>",1),el=D("<i></i>"),tl=D('<i class="mdi mdi-stop"></i>'),il=D("<i></i>"),ol=D('<!> <!> <!> <div class="px-1 music-player--volume" style="max-width: 104px; width: 100%"><!></div> <div class="ps-1" style="max-width:150px; overflow: hidden;"><span class="scrolling-text"> </span></div> <div class="px-1 col music-player--progress-bar"><!></div> <div class="text-center" style="width: 180px"> </div>',1),nl=D('<i class="mdi mdi-format-list-checks"></i>'),rl=D('<i class="mdi mdi-format-list-checks"></i>'),al=D('<div class="py-0 justify-center"><!></div>'),cl=D('<i class="mdi mdi-checkbox-marked-circle-outline"></i>'),ll=D("<!> <!> <!>",1),sl=D("<div><!></div>"),ul=D('<div class="ab-0"><div class="fadeOverlay"></div> <!> <!> <div class="s-main"><!> <!> <div class="container-fluid p-0"><div class="row gx-0"></div></div></div></div> <!> <!> <!> <!>',1);function dl(e,t){$(t,!0);var i={action:function(){},title:"Warning",context:""},o=q(!1),n=q(!1),r=q("none"),a=me(function(){return V(n)?app.showMusicPlayer?"top: 32px;":"top: 0;":"bottom: 0;"}),c=me(function(){return"opacity: ".concat(app.fadeTransitionIsOn?1:0,"; transition: opacity ").concat(app.fadeTransitionTime,"s ease-out; background-color: ").concat(hn(app.fadeTransitionColor),"; pointer-events: ").concat(app.fadeTransitionIsOn?"auto":"none","; cursor: ").concat(app.fadeTransitionIsOn?"none":"auto",";")}),l=q(0),s=q(void 0),u=me(function(){return app.pointTypes.length>0||app.backpack.length>0||app.importedChoicesIsOpen}),d=me(function(){return"background-color: ".concat(hn(app.styling.barBackgroundColor),"; margin:").concat(app.styling.barMargin,"px; padding:").concat(app.styling.barPadding,"px; ").concat(V(a))}),v=me(function(){return"color: ".concat(hn(app.styling.barTextColor),"; margin: ").concat(app.styling.barTextMargin,"px; padding: ").concat(app.styling.barTextPadding,"px; font-family: '").concat(app.styling.barTextFont,"'; font-size: ").concat(app.styling.barTextSize,"px;")}),f=me(function(){return"color: ".concat(hn(app.styling.barIconColor),";")}),g=me(function(){var e=[];return app.styling.backgroundImage&&e.push("background-image: url('".concat(app.styling.backgroundImage,"');")),e.push("background-color: ".concat(hn(app.styling.backgroundColor),";")),app.styling.isBackgroundRepeat?e.push("background-repeat: repeat;"):app.styling.isBackgroundFitIn?e.push("background-size: 100% 100%;"):e.push("background-size: cover;"),V(u)&&e.push("padding-bottom: 56px;"),app.useVW&&e.push("font-size: 0.835vw;"),e.join(" ")}),p=me(function(){var e=[];return app.showMusicPlayer&&e.push("padding-top: 32px;"),e.join(" ")}),m=me(function(){return"".concat(I(ti.curBgmTime)," | ").concat(I(ti.curBgmLength))}),h=q(0),b=q(100),w=q(!1);function T(e){var t=e.currentTarget;e.preventDefault(),t.blur(),z(r,"appBuildForm")}function I(e){var t=Math.floor(e/3600),i=Math.floor(e%3600/60),o=Math.floor(e%60),n=String(i).padStart(2,"0"),r=String(o).padStart(2,"0");return t>0?"".concat(t,":").concat(n,":").concat(r):"".concat(n,":").concat(r)}function S(){var e=localStorage.getItem("theme");Xt.value="dark"===e?"light":"dark";var t=document.head.querySelector("#theme-dark"),i=document.head.querySelector("#theme-light");"dark"===Xt.value?(t&&(t.media="screen and (prefers-color-scheme: light)"),i&&(i.media="screen and (prefers-color-scheme: dark)")):(t&&(t.media="screen and (prefers-color-scheme: dark)"),i&&(i.media="screen and (prefers-color-scheme: light)")),localStorage.setItem("theme",Xt.value)}function y(){var e=x(Qt);if(e)if(ti.bgmIsPlaying)e.pause(),ti.bgmIsPlaying=!1,0!==ti.bgmPlayInterval&&(clearInterval(ti.bgmPlayInterval),ti.bgmPlayInterval=0);else{var t=0,i=0;0!==ti.bgmPlayInterval&&(clearInterval(ti.bgmPlayInterval),ti.bgmPlayInterval=0),e.play(),ti.bgmIsPlaying=!0,ti.bgmPlayInterval=window.setInterval(function(){if(!ti.isSeeking&&e.isPlaying()){var o=Math.floor(e.getCurrentTime());o!==ti.curBgmTime?t!==o?ti.curBgmTime=o:(++i>ti.curBgmLength&&(i=1),ti.curBgmTime=i):(t=o,i=o+1,ti.curBgmTime=i)}},1e3)}}function C(){var e=x(Qt);e&&ti.bgmIsPlaying&&(e.stop(),ti.bgmIsPlaying=!1,ti.curBgmTime=0,0!==ti.bgmPlayInterval&&(clearInterval(ti.bgmPlayInterval),ti.bgmPlayInterval=0))}function O(){var e=x(Qt);app.isMute=!app.isMute,e&&(app.isMute?e.mute():e.unMute())}function A(){x(Qt)&&ti.bgmIsPlaying&&(ti.isSeeking=!0)}function k(){var e;if(ti.bgmIsPlaying){var t,i=x(Qt);i&&null!==(t=i.seekTo)&&void 0!==t&&t.call(i,V(h))&&(ti.curBgmTime=V(h)),ti.isSeeking=!1}null===(e=document.activeElement)||void 0===e||e.blur()}function D(){z(w,!0)}function G(){var e,t=x(Qt);app.curVolume=V(b),t&&t.setVolume(V(b)),z(w,!1),null===(e=document.activeElement)||void 0===e||e.blur()}B(function(){ti.isSeeking||z(h,ti.curBgmTime,!0)}),B(function(){V(w)||z(b,app.curVolume,!0)});var _=ul(),H=U(_),Y=E(H),K=fe(Y,2);rt(K,{style:"top: 0;",variant:"modal",get open(){return V(o)},set open(e){z(o,e,!0)},children:function(e,t){ct(e,{class:"navigation-drawer",children:function(e,t){Ve(e,{children:function(e,t){var a=Qc(),c=U(a);Ue(c,{onSMUIAction:function(){return z(o,!1)},class:"my-0",children:function(e,t){var i=Gc(),o=U(i);lt(o,{class:"mdi mdi-chevron-left"});var n=fe(o,2);st(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Close Menu");j(e,i)},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}});var l=fe(c,2);ut(l,{class:"my-3"});var s=fe(l,2);Ue(s,{onSMUIAction:S,class:"my-0",children:function(e,t){var i=_c(),o=U(i);lt(o,{class:"mdi mdi-theme-light-dark"});var n=fe(o,2);st(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Toogle Dark/Light Theme");j(e,i)},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}});var u=fe(s,2);Ue(u,{onSMUIAction:function(){return z(n,!V(n))},class:"my-0",children:function(e,t){var i=Hc(),o=U(i);lt(o,{class:"mdi mdi-swap-vertical"});var n=fe(o,2);st(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Top/Bottom Point Bar");j(e,i)},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}});var d=fe(u,2);Ue(d,{onSMUIAction:function(){i.action=function(){return fo()},i.context="Are you sure you want to clear selected choices?<br>This action cannot be undone.",z(r,"dlgCommon"),z(o,!1)},class:"my-0",children:function(e,t){var i=Yc(),o=U(i);lt(o,{class:"mdi mdi-select-off"});var n=fe(o,2);st(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Clear Selected Choices");j(e,i)},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}});var v=fe(d,2),f=function(e){var t=Xc(),i=U(t);Ue(i,{onSMUIAction:function(){z(r,"appBuildForm"),z(o,!1)},class:"my-0",children:function(e,t){var i=Zc(),o=U(i);lt(o,{class:"mdi mdi-format-list-checks"});var n=fe(o,2);st(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Open Build Form");j(e,i)},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}});var n=fe(i,2);Ue(n,{onSMUIAction:function(){z(r,"appSaveLoad"),z(o,!1)},class:"my-0",children:function(e,t){var i=Jc(),o=U(i);lt(o,{class:"mdi mdi-content-save"});var n=fe(o,2);st(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Save/Load Build");j(e,i)},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}}),j(e,t)};ve(v,function(e){app.importedChoicesIsOpen&&e(f)});var g=fe(v,2);Ue(g,{onSMUIAction:function(){z(r,"appGlobalSettings"),z(o,!1)},class:"my-0",children:function(e,t){var i=Kc(),o=U(i);lt(o,{class:"mdi mdi-cog"});var n=fe(o,2);st(n,{class:"w-100 list-text text-center",children:function(e,t){var i=Ie("Settings");j(e,i)},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}}),j(e,a)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}});var Q=fe(K,2);at(Q,{});var ee=fe(Q,2),te=E(ee),ie=function(e){dt(e,{class:"music-player",variant:"fixed",children:function(e,t){vt(e,{class:"music-player--row",children:function(e,t){ft(e,{class:"px-2 justify-left",children:function(e,t){var i=ol(),o=U(i);Ze(o,{class:"music-player--button",onclickcapture:y,size:"button","aria-label":"Play",children:function(e,t){var i=el();Z(function(){return J(i,1,X(ti.bgmIsPlaying?"mdi mdi-pause":"mdi mdi-play"))}),j(e,i)},$$slots:{default:!0}});var n=fe(o,2);Ze(n,{class:"music-player--button",onclickcapture:C,size:"button","aria-label":"Stop",children:function(e,t){var i=tl();j(e,i)},$$slots:{default:!0}});var r=fe(n,2);Ze(r,{class:"music-player--button",onclickcapture:O,size:"button","aria-label":"Mute",children:function(e,t){var i=il();Z(function(){return J(i,1,X(app.isMute?"mdi mdi-volume-off":"mdi mdi-volume-high"))}),j(e,i)},$$slots:{default:!0}});var a=fe(r,2),c=E(a);tt(c,{min:0,max:100,step:1,class:"mx-2",onpointerdown:D,onpointerup:G,get disabled(){return app.isMute},get value(){return V(b)},set value(e){z(b,e,!0)}});var l=fe(a,2),s=E(l),u=E(s),d=fe(l,2),v=E(d),f=me(function(){return ti.curBgmLength||1});tt(v,{min:0,get max(){return V(f)},step:1,class:"mx-2",onpointerdown:A,onpointerup:k,get value(){return V(h)},set value(e){z(h,e,!0)}});var g=fe(d,2),p=E(g);Z(function(){Se(u,ti.bgmTitle),Se(p,V(m))}),j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(te,function(e){app.showMusicPlayer&&e(ie)});var oe=fe(te,2),ne=function(e){dt(e,{class:"pointBar",get style(){return V(d)},variant:"fixed",color:"secondary",children:function(e,t){vt(e,{class:"justify-space-around",children:function(e,t){var i=ll(),n=U(i);ft(n,{class:"py-0 justify-center",children:function(e,t){var i=L(),n=U(i),r=function(e){yn(e,{text:"L-Click: Open Side Menu<br>R-Click: Open Build Form",children:function(e,t){Ze(e,{class:"pointbar-icons",onclickcapture:function(){return z(o,!0)},oncontextmenu:T,"aria-label":"Open Import Window",get style(){return V(f)},children:function(e,t){var i=nl();j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})},a=function(e){Ze(e,{class:"pointbar-icons",onclickcapture:function(){return z(o,!0)},"aria-label":"Open Import Window",get style(){return V(f)},children:function(e,t){var i=rl();j(e,i)},$$slots:{default:!0}})};ve(n,function(e){app.importedChoicesIsOpen?e(r):e(a,!1)}),j(e,i)},$$slots:{default:!0}});var a=fe(n,2);ft(a,{class:"pointbar-center--viewer",children:function(e,t){var i=L(),o=U(i);_e(o,17,function(){return app.pointTypes},Je,function(e,t){var i=L(),o=U(i),n=function(e){var i=al();!function(e,t){$(t,!0);var i=me(function(){return"color: ".concat(hn(app.styling.barTextColor),"; margin: ").concat(app.styling.barTextMargin,"px; padding: ").concat(app.styling.barTextPadding,"px; font-family: '").concat(app.styling.barTextFont,"'; font-size: ").concat(app.styling.barTextSize,"px;")}),o=me(function(){if(t.point.startingSum>=0){if(void 0!==app.styling.barPointPos)return"color: ".concat(hn(app.styling.barPointPos),";")}else if(void 0!==app.styling.barPointNeg)return"color: ".concat(hn(app.styling.barPointNeg),";");return""});function n(e,t){var i=t?e.negativeImage:e.image,o=t?e.negativeIconWidth:e.iconWidth,n=t?e.negativeIconHeight:e.iconHeight;return i?'<img src="'.concat(i,'" class="mx-1" style="width: ').concat(o,"px; height: ").concat(n,'px;" alt="">'):""}var r=tr(),a=E(r),c=E(a),l=function(e){var i=L(),o=U(i),r=function(e){var i=L(),o=U(i),r=function(e){var i=L(),o=U(i);N(o,function(){return n(t.point,!0)}),j(e,i)};ve(o,function(e){t.point.negativeImageOnSide||t.point.negativeImageSidePlacement||e(r)}),j(e,i)},a=function(e){var i=L(),o=U(i),r=function(e){var i=L(),o=U(i);N(o,function(){return n(t.point,!1)}),j(e,i)};ve(o,function(e){t.point.imageOnSide||t.point.imageSidePlacement||e(r)}),j(e,i)};ve(o,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),j(e,i)};ve(c,function(e){t.point.iconIsOn&&e(l)});var s=fe(c),u=fe(s),d=function(e){var i=L(),o=U(i),r=function(e){var i=L(),o=U(i),r=function(e){var i=L(),o=U(i);N(o,function(){return n(t.point,!0)}),j(e,i)};ve(o,function(e){t.point.negativeImageOnSide&&!t.point.negativeImageSidePlacement&&e(r)}),j(e,i)},a=function(e){var i=L(),o=U(i),r=function(e){var i=L(),o=U(i);N(o,function(){return n(t.point,!1)}),j(e,i)};ve(o,function(e){t.point.imageOnSide&&!t.point.imageSidePlacement&&e(r)}),j(e,i)};ve(o,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),j(e,i)};ve(u,function(e){t.point.iconIsOn&&e(d)});var v=fe(u,2),f=E(v),g=fe(v,2),p=function(e){var i=L(),o=U(i),r=function(e){var i=L(),o=U(i),r=function(e){var i=L(),o=U(i);N(o,function(){return n(t.point,!0)}),j(e,i)};ve(o,function(e){!t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(r)}),j(e,i)},a=function(e){var i=L(),o=U(i),r=function(e){var i=L(),o=U(i);N(o,function(){return n(t.point,!1)}),j(e,i)};ve(o,function(e){!t.point.imageOnSide&&t.point.imageSidePlacement&&e(r)}),j(e,i)};ve(o,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),j(e,i)};ve(g,function(e){t.point.iconIsOn&&e(p)});var m=fe(g),h=fe(m),b=function(e){var i=L(),o=U(i),r=function(e){var i=L(),o=U(i),r=function(e){var i=L(),o=U(i);N(o,function(){return n(t.point,!0)}),j(e,i)};ve(o,function(e){t.point.negativeImageOnSide&&t.point.negativeImageSidePlacement&&e(r)}),j(e,i)},a=function(e){var i=L(),o=U(i),r=function(e){var i=L(),o=U(i);N(o,function(){return n(t.point,!1)}),j(e,i)};ve(o,function(e){t.point.imageOnSide&&t.point.imageSidePlacement&&e(r)}),j(e,i)};ve(o,function(e){t.point.negativeIconIsOn&&t.point.startingSum<0?e(r):e(a,!1)}),j(e,i)};ve(h,function(e){t.point.iconIsOn&&e(b)}),Z(function(e,n){var c,l;Ye(r,V(i)),Ye(a,e),Se(s," ".concat(null!==(c=t.point.beforeText)&&void 0!==c?c:""," ")),Ye(v,V(o)),Se(f,n),Se(m," ".concat(null!==(l=t.point.afterText)&&void 0!==l?l:""," "))},[function(){return t.point.pointPrivateColorIsOn?"color: ".concat(t.point.startingSum>=0?hn(t.point.privateColor):hn(t.point.privateNegativeColor)):""},function(){return t.point.startingSum%1==0?t.point.startingSum:parseFloat(t.point.startingSum.toFixed(void 0!==t.point.decimalPlaces?t.point.decimalPlaces:2))}]),j(e,r),P()}(E(i),{get point(){return V(t)}}),Z(function(){return Ye(i,V(v))}),j(e,i)};ve(o,function(e){(function(e){if(e.isNotShownPointBar){if(void 0!==e.activatedId&&""!==e.activatedId){var t=Et.get(e.activatedId),i=Gt.get(e.activatedId);return void 0!==t?Zi(t.requireds):void 0!==i?i.isTrue:Gi(e.activatedId)}return!1}return!0})(V(t))&&e(n)}),j(e,i)}),j(e,i)},$$slots:{default:!0}});var c=fe(a,2);ft(c,{class:"py-0 justify-center",children:function(e,t){var i=L(),o=U(i),n=function(e){Ze(e,{class:"pointbar-icons",onclickcapture:function(){return z(r,"dlgBackpack")},"aria-label":"Open Backpack Window",get style(){return V(f)},children:function(e,t){var i=cl();j(e,i)},$$slots:{default:!0}})};ve(o,function(e){app.backpack.length>0&&(void 0===app.hideBackpackBtn||0===app.hideBackpackBtn||app.hideBackpackBtn>0&&app.hideBackpackBtn===app.btnBackpackIsOn)&&e(n)}),j(e,i)},$$slots:{default:!0}}),j(e,i)},$$slots:{default:!0}})},$$slots:{default:!0}})};ve(oe,function(e){V(u)&&e(ne)});var re=fe(oe,2),ae=E(re);_e(ae,21,function(){return app.rows},Je,function(e,t){var i=sl();vc(E(i),{get row(){return V(t)},get windowWidth(){return V(l)},get mainDiv(){return V(s)}}),Z(function(){return J(i,1,X(V(t).width?"col-6":"col-12"))}),j(e,i)}),R(ae,function(e){return z(s,e)},function(){return V(s)});var ce=fe(H,2),le=function(e){var t=me(function(){return"appSaveLoad"===V(r)});Cr(e,{get open(){return V(t)},onclose:function(){return z(r,"none")}})},se=function(e){var t=L(),o=U(t),n=function(e){var t=me(function(){return"dlgBackpack"===V(r)});bc(e,{get open(){return V(t)},onclose:function(){return z(r,"none")}})},a=function(e){var t=L(),o=U(t),n=function(e){var t=me(function(){return"appGlobalSettings"===V(r)});er(e,{get open(){return V(t)},onclose:function(){return z(r,"none")}})},a=function(e){var t=L(),o=U(t),n=function(e){var t=me(function(){return"appBuildForm"===V(r)});qn(e,{get open(){return V(t)},onclose:function(){return z(r,"none")}})},a=function(e){var t=L(),o=U(t),n=function(e){var t=me(function(){return"dlgCommon"===V(r)});cr(e,{get open(){return V(t)},onclose:function(){return z(r,"none")},get title(){return i.title},get context(){return i.context},closeHandler:function(e){"accept"===e.detail.action&&i.action()}})};ve(o,function(e){"dlgCommon"===V(r)&&e(n)},!0),j(e,t)};ve(o,function(e){"appBuildForm"===V(r)?e(n):e(a,!1)},!0),j(e,t)};ve(o,function(e){"appGlobalSettings"===V(r)?e(n):e(a,!1)},!0),j(e,t)};ve(o,function(e){"dlgBackpack"===V(r)?e(n):e(a,!1)},!0),j(e,t)};ve(ce,function(e){"appSaveLoad"===V(r)?e(le):e(se,!1)});var ue=fe(ce,2),de=function(e){var t=me(function(){return"appImageUpload"===ii.currentDialog});Lc(e,{get open(){return V(t)},onclose:function(){return ii.currentDialog="none"},get imgObject(){return ii.data},get imgProp(){return ii.imgProp},get isDeselect(){return ii.isDeselect},get closeHandler(){return ii.cFunc}})},ge=function(e){var t=L(),i=U(t),o=function(e){var t=me(function(){return"dlgCommon"===ii.currentDialog});cr(e,{get open(){return V(t)},onclose:function(){return ii.currentDialog="none"},get closeHandler(){return ii.cFunc},get title(){return ii.title},get context(){return ii.context},get isWord(){return ii.isWord}})},n=function(e){var t=L(),i=U(t),o=function(e){var t=me(function(){return"selectDialog"===ii.currentDialog});zc(e,{get open(){return V(t)},onclose:function(){return ii.currentDialog="none"},get submit(){return ii.func},get changeNum(){return ii.choice.multipleUseVariable},get minVal(){return ii.choice.numMultipleTimesMinus},get maxVal(){return ii.choice.numMultipleTimesPluss}})};ve(i,function(e){"selectDialog"===ii.currentDialog&&void 0!==ii.choice&&void 0!==ii.func&&e(o)},!0),j(e,t)};ve(i,function(e){"dlgCommon"===ii.currentDialog&&void 0!==ii.cFunc&&void 0!==ii.context?e(o):e(n,!1)},!0),j(e,t)};ve(ue,function(e){"appImageUpload"===ii.currentDialog&&void 0!==ii.data&&void 0!==ii.imgProp?e(de):e(ge,!1)});var pe=fe(ue,2),he=function(e){var t=me(function(){return"dlgCommon"===oi.currentDialog});cr(e,{get open(){return V(t)},onclose:function(){return oi.currentDialog="none"},get closeHandler(){return oi.cFunc},get title(){return oi.title},get context(){return oi.context},get isWord(){return oi.isWord},get prevText(){return oi.prevText},get isDeselect(){return oi.isDeselect}})};ve(pe,function(e){"dlgCommon"===oi.currentDialog&&void 0!==oi.cFunc&&void 0!==oi.context&&e(he)}),function(e,t){$(t,!0);var i=q(void 0),o=null;B(function(){var e;V(i)&&""!==bn.text&&(bn.isVisible&&bn.anchor&&bn.anchor.isConnected?(null===(e=o)||void 0===e||e.destroy(),o=W(bn.anchor,V(i),{placement:"top",modifiers:[{name:"offset",options:{offset:[0,6]}},{name:"preventOverflow",options:{boundary:"viewport"}},{name:"flip",options:{fallbackPlacements:["top","bottom"]}}]}),V(i).classList.add("mdc-tooltip--shown")):o&&(o.destroy(),o=null,V(i).classList.remove("mdc-tooltip--shown")))}),M(function(){var e;null===(e=o)||void 0===e||e.destroy()});var n=In(),r=E(n),a=E(r);F(a,function(){return bn.text},function(e){var t=L(),i=U(t);N(i,function(){return bn.text}),j(e,t)}),R(n,function(e){return z(i,e)},function(){return V(i)}),j(e,n),P()}(fe(pe,2),{}),Z(function(){Ye(H,V(g)),Ye(Y,V(c)),Ye(ee,V(p))}),it(H,"clientWidth",function(e){return z(l,e)}),j(e,_),P()}var vl=D('<div id="bgm-player" style="display:none"></div> <!> <!>',1);void 0===window.ResizeObserver&&(window.ResizeObserver=pt);var fl=function(e){e.preventDefault(),e.returnValue=""};window.addEventListener?window.addEventListener("beforeunload",fl):window.onbeforeunload=fl,mt(function(e,i){var o,n,r;$(i,!0);var a,s="<div>Loading</div>";function u(){var e=localStorage.getItem("theme"),t=document.head.querySelector("#theme-dark"),i=document.head.querySelector("#theme-light"),o=function(){if(!window.matchMedia)return!1;try{return"not all"!==window.matchMedia("(prefers-color-scheme: dark)").media}catch(c){return!1}}();"dark"===e?o?(t&&(t.media="screen and (prefers-color-scheme: light)"),i&&(i.media="screen and (prefers-color-scheme: dark)"),Xt.value="dark"):(t&&(t.media="all"),i&&(i.media="not all")):o||(i&&(i.media="all"),t&&(t.media="not all"))}function d(e){return f.apply(this,arguments)}function f(){return(f=v(l().m(function e(i){var o,r,a;return l().w(function(e){for(;;)switch(e.n){case 0:o=Array.from(i),r=l().m(function e(){var t,i;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=o[a],e.p=1,e.n=2,new Promise(function(e,i){var o=new Image;o.onload=e,o.onerror=i,o.src=t});case 2:e.n=4;break;case 3:e.p=3,i=e.v,console.error(i);case 4:return e.p=4,n&&(n.innerHTML="<div>Images</div><div>".concat(a," / ").concat(o.length,"</div>")),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}),a=0;case 1:if(!(a<o.length)){e.n=3;break}return e.d(t(r()),2);case 2:a++,e.n=1;break;case 3:return e.a(2)}},e)}))).apply(this,arguments)}function g(){return p.apply(this,arguments)}function p(){return(p=v(l().m(function e(){var t,i;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!ui.value){e.n=4;break}return t="Your browser does not support the .avif format.\n Avif images may not be displayed.",e.p=1,e.n=2,new Promise(function(e,t){var i=new Image;i.onload=e,i.onerror=t,i.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="});case 2:e.n=4;break;case 3:e.p=3,i=e.v,console.error(i),ni.labelText=t,ni.isOpen=!0;case 4:return e.a(2)}},e,null,[[1,3]])}))).apply(this,arguments)}function m(){return m=v(l().m(function e(){var t,i,a,c,u,f,p,m,h,b,w,T,I,S,y;return l().w(function(e){for(;;)switch(e.p=e.n){case 0:if(o=document.getElementById("lm"),r=document.getElementById("projectSize"),n=document.getElementById("indicator"),t=r?parseInt(r.innerHTML):0,i=n?n.className:"",n&&(s=n.innerHTML),o&&(o.style.pointerEvents="none",o.style.overflow="hidden"),"function"!=typeof window.fetch){e.n=14;break}return e.p=1,e.n=2,fetch("project.json");case 2:if(!(a=e.v)||!a.body){e.n=10;break}c=a.body.getReader(),u=new TextDecoder,f=0,p="";case 3:return e.n=4,c.read();case 4:if(m=e.v,h=m.done,b=m.value,!h){e.n=5;break}return e.a(3,6);case 5:f+=b.length,p+=u.decode(b,{stream:!0}),n&&(n.innerHTML="ind2"===i&&t>0?"".concat(s,"<div>").concat((f/t*100).toFixed(1)," %</div>"):"ind3"===i&&t>0?"".concat(s,"<div>").concat((f/1e6).toFixed(1),"/").concat((t/1e6).toFixed(1)," MB</div>"):"".concat(s,"<div>").concat((f/1e6).toFixed(1)," MB</div>")),e.n=3;break;case 6:if(o&&(o.style.height="0"),w=JSON.parse(p),T=en(w),!(I=Ko.safeParse(T)).success){e.n=9;break}if(nn(I.data),!(app.preloadExternalImages&&si.size>0)){e.n=7;break}return e.n=7,d(si);case 7:return setTimeout(function(){var e=document.createElement("style");document.head.appendChild(e),setTimeout(function(){o&&(o.style.height="",o.style.opacity="1",o.style.overflow="",o.style.pointerEvents=""),n&&n.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),e.n=8,g();case 8:e.n=10;break;case 9:ni.labelText="Failed to load data.",ni.isOpen=!0,console.error(I.error);case 10:e.n=13;break;case 11:if(e.p=11,y=e.v,console.error(y),o&&(o.style.height="0"),nn(JSON.parse(JSON.stringify(app))),!(app.preloadExternalImages&&si.size>0)){e.n=12;break}return e.n=12,d(si);case 12:return setTimeout(function(){var e=document.createElement("style");document.head.appendChild(e),setTimeout(function(){o&&(o.style.height="",o.style.opacity="1",o.style.overflow="",o.style.pointerEvents=""),n&&n.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),e.n=13,g();case 13:e.n=15;break;case 14:(S=new XMLHttpRequest).open("GET","project.json",!0),S.onprogress=function(e){n&&(n.innerHTML="ind2"===i&&t>0?"".concat(s,"<div>").concat((e.loaded/t*100).toFixed(1)," %</div>"):"ind3"===i&&t>0?"".concat(s,"<div>").concat((e.loaded/1e6).toFixed(1),"/").concat((t/1e6).toFixed(1)," MB</div>"):"".concat(s,"<div>").concat((e.loaded/1e6).toFixed(1)," MB</div>"))},S.onload=v(l().m(function e(){return l().w(function(e){for(;;)switch(e.n){case 0:if(o&&(o.style.height="0"),200!==S.status){e.n=2;break}if(nn(JSON.parse(S.responseText)),!(app.preloadExternalImages&&app.externalImages.size>0)){e.n=1;break}return e.n=1,d(app.externalImages);case 1:e.n=3;break;case 2:nn(JSON.parse(JSON.stringify(app)));case 3:return setTimeout(function(){var e=document.createElement("style");document.head.appendChild(e),setTimeout(function(){o&&(o.style.height="",o.style.opacity="1",o.style.overflow="",o.style.pointerEvents=""),n&&n.remove(),r&&r.remove(),e.sheet&&e.sheet.insertRule("body::before{opacity:0;transition:opacity 2s}",0)},1e3)},1e3),e.n=4,g();case 4:return e.a(2)}},e)})),S.send();case 15:return e.a(2)}},e,null,[[1,11]])})),m.apply(this,arguments)}B(function(){ni.isOpen&&(a.close(),a.open(),ni.isOpen=!1)}),te(function(){window.debugApp=app,u(),function(){Ci.apply(this,arguments)}(),function(){m.apply(this,arguments)}(),M(function(){ei.update(function(e){return null==e||e.destroy(),null})})});var h=vl(),b=fe(U(h),2);dl(b,{});var w=fe(b,2);R(gt(w,{get labelText(){return ni.labelText},get timeoutMs(){return ni.timeoutMs},children:function(e,t){De(e,{class:"text-center"})},$$slots:{default:!0}}),function(e){return a=e},function(){return a}),j(e,h),P()},{target:document.getElementById("app")})}}})}();
